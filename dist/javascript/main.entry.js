(function(fa){typeof define=="function"&&define.amd?define(fa):fa()})((function(){"use strict";/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ct={},ga=[],qn=()=>{},ku=()=>!1,Gl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Sr=e=>e.startsWith("onUpdate:"),jt=Object.assign,xr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},E1=Object.prototype.hasOwnProperty,vt=(e,t)=>E1.call(e,t),Ue=Array.isArray,ma=e=>Ga(e)==="[object Map]",va=e=>Ga(e)==="[object Set]",Cu=e=>Ga(e)==="[object Date]",qe=e=>typeof e=="function",Rt=e=>typeof e=="string",Bn=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",Eu=e=>(Et(e)||qe(e))&&qe(e.then)&&qe(e.catch),$u=Object.prototype.toString,Ga=e=>$u.call(e),$1=e=>Ga(e).slice(8,-1),Lu=e=>Ga(e)==="[object Object]",Tr=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qa=fa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ql=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},L1=/-\w/g,In=ql(e=>e.replace(L1,t=>t.slice(1).toUpperCase())),A1=/\B([A-Z])/g,$o=ql(e=>e.replace(A1,"-$1").toLowerCase()),Kl=ql(e=>e.charAt(0).toUpperCase()+e.slice(1)),kr=ql(e=>e?`on${Kl(e)}`:""),Lo=(e,t)=>!Object.is(e,t),Yl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Au=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Jl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},M1=e=>{const t=Rt(e)?Number(e):NaN;return isNaN(t)?e:t};let Mu;const Xl=()=>Mu||(Mu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gt(e){if(Ue(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=Rt(o)?R1(o):gt(o);if(a)for(const l in a)t[l]=a[l]}return t}else if(Rt(e)||Et(e))return e}const I1=/;(?![^(]*\))/g,D1=/:([^]+)/,O1=/\/\*[^]*?\*\//g;function R1(e){const t={};return e.replace(O1,"").split(I1).forEach(n=>{if(n){const o=n.split(D1);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function $e(e){let t="";if(Rt(e))t=e;else if(Ue(e))for(let n=0;n<e.length;n++){const o=$e(e[n]);o&&(t+=o+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const N1=fa("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Iu(e){return!!e||e===""}function P1(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Jo(e[o],t[o]);return n}function Jo(e,t){if(e===t)return!0;let n=Cu(e),o=Cu(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Bn(e),o=Bn(t),n||o)return e===t;if(n=Ue(e),o=Ue(t),n||o)return n&&o?P1(e,t):!1;if(n=Et(e),o=Et(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,l=Object.keys(t).length;if(a!==l)return!1;for(const r in e){const i=e.hasOwnProperty(r),u=t.hasOwnProperty(r);if(i&&!u||!i&&u||!Jo(e[r],t[r]))return!1}}return String(e)===String(t)}function Cr(e,t){return e.findIndex(n=>Jo(n,t))}const Du=e=>!!(e&&e.__v_isRef===!0),g=e=>Rt(e)?e:e==null?"":Ue(e)||Et(e)&&(e.toString===$u||!qe(e.toString))?Du(e)?g(e.value):JSON.stringify(e,Ou,2):String(e),Ou=(e,t)=>Du(t)?Ou(e,t.value):ma(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],l)=>(n[Er(o,l)+" =>"]=a,n),{})}:va(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Er(n))}:Bn(t)?Er(t):Et(t)&&!Ue(t)&&!Lu(t)?String(t):t,Er=(e,t="")=>{var n;return Bn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nn;class Ru{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nn,!t&&nn&&(this.index=(nn.scopes||(nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=nn;try{return nn=this,t()}finally{nn=n}}}on(){++this._on===1&&(this.prevScope=nn,nn=this)}off(){this._on>0&&--this._on===0&&(nn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function $r(e){return new Ru(e)}function Nu(){return nn}function F1(e,t=!1){nn&&nn.cleanups.push(e)}let At;const Lr=new WeakSet;class Pu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nn&&nn.active&&nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Lr.has(this)&&(Lr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hu(this),Uu(this);const t=At,n=Un;At=this,Un=!0;try{return this.fn()}finally{Vu(this),At=t,Un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Dr(t);this.deps=this.depsTail=void 0,Hu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Lr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ir(this)&&this.run()}get dirty(){return Ir(this)}}let Fu=0,Ka,Ya;function Bu(e,t=!1){if(e.flags|=8,t){e.next=Ya,Ya=e;return}e.next=Ka,Ka=e}function Ar(){Fu++}function Mr(){if(--Fu>0)return;if(Ya){let t=Ya;for(Ya=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ka;){let t=Ka;for(Ka=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Uu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Vu(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),Dr(o),B1(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Ir(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ja)||(e.globalVersion=Ja,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ir(e))))return;e.flags|=2;const t=e.dep,n=At,o=Un;At=e,Un=!0;try{Uu(e);const a=e.fn(e._value);(t.version===0||Lo(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{At=n,Un=o,Vu(e),e.flags&=-3}}function Dr(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)Dr(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function B1(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Un=!0;const zu=[];function Kn(){zu.push(Un),Un=!1}function Yn(){const e=zu.pop();Un=e===void 0?!0:e}function Hu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=At;At=void 0;try{t()}finally{At=n}}}let Ja=0;class U1{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Or{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!Un||At===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==At)n=this.activeLink=new U1(At,this),At.deps?(n.prevDep=At.depsTail,At.depsTail.nextDep=n,At.depsTail=n):At.deps=At.depsTail=n,ju(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=At.depsTail,n.nextDep=void 0,At.depsTail.nextDep=n,At.depsTail=n,At.deps===n&&(At.deps=o)}return n}trigger(t){this.version++,Ja++,this.notify(t)}notify(t){Ar();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Mr()}}}function ju(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)ju(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ql=new WeakMap,Xo=Symbol(""),Rr=Symbol(""),Xa=Symbol("");function on(e,t,n){if(Un&&At){let o=Ql.get(e);o||Ql.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Or),a.map=o,a.key=n),a.track()}}function lo(e,t,n,o,a,l){const r=Ql.get(e);if(!r){Ja++;return}const i=u=>{u&&u.trigger()};if(Ar(),t==="clear")r.forEach(i);else{const u=Ue(e),p=u&&Tr(n);if(u&&n==="length"){const c=Number(o);r.forEach((d,h)=>{(h==="length"||h===Xa||!Bn(h)&&h>=c)&&i(d)})}else switch((n!==void 0||r.has(void 0))&&i(r.get(n)),p&&i(r.get(Xa)),t){case"add":u?p&&i(r.get("length")):(i(r.get(Xo)),ma(e)&&i(r.get(Rr)));break;case"delete":u||(i(r.get(Xo)),ma(e)&&i(r.get(Rr)));break;case"set":ma(e)&&i(r.get(Xo));break}}Mr()}function V1(e,t){const n=Ql.get(e);return n&&n.get(t)}function ha(e){const t=st(e);return t===e?t:(on(t,"iterate",Xa),Dn(e)?t:t.map(Zt))}function Zl(e){return on(e=st(e),"iterate",Xa),e}const W1={__proto__:null,[Symbol.iterator](){return Nr(this,Symbol.iterator,Zt)},concat(...e){return ha(this).concat(...e.map(t=>Ue(t)?ha(t):t))},entries(){return Nr(this,"entries",e=>(e[1]=Zt(e[1]),e))},every(e,t){return so(this,"every",e,t,void 0,arguments)},filter(e,t){return so(this,"filter",e,t,n=>n.map(Zt),arguments)},find(e,t){return so(this,"find",e,t,Zt,arguments)},findIndex(e,t){return so(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return so(this,"findLast",e,t,Zt,arguments)},findLastIndex(e,t){return so(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return so(this,"forEach",e,t,void 0,arguments)},includes(...e){return Pr(this,"includes",e)},indexOf(...e){return Pr(this,"indexOf",e)},join(e){return ha(this).join(e)},lastIndexOf(...e){return Pr(this,"lastIndexOf",e)},map(e,t){return so(this,"map",e,t,void 0,arguments)},pop(){return Qa(this,"pop")},push(...e){return Qa(this,"push",e)},reduce(e,...t){return Gu(this,"reduce",e,t)},reduceRight(e,...t){return Gu(this,"reduceRight",e,t)},shift(){return Qa(this,"shift")},some(e,t){return so(this,"some",e,t,void 0,arguments)},splice(...e){return Qa(this,"splice",e)},toReversed(){return ha(this).toReversed()},toSorted(e){return ha(this).toSorted(e)},toSpliced(...e){return ha(this).toSpliced(...e)},unshift(...e){return Qa(this,"unshift",e)},values(){return Nr(this,"values",Zt)}};function Nr(e,t,n){const o=Zl(e),a=o[t]();return o!==e&&!Dn(e)&&(a._next=a.next,a.next=()=>{const l=a._next();return l.value&&(l.value=n(l.value)),l}),a}const z1=Array.prototype;function so(e,t,n,o,a,l){const r=Zl(e),i=r!==e&&!Dn(e),u=r[t];if(u!==z1[t]){const d=u.apply(e,l);return i?Zt(d):d}let p=n;r!==e&&(i?p=function(d,h){return n.call(this,Zt(d),h,e)}:n.length>2&&(p=function(d,h){return n.call(this,d,h,e)}));const c=u.call(r,p,o);return i&&a?a(c):c}function Gu(e,t,n,o){const a=Zl(e);let l=n;return a!==e&&(Dn(e)?n.length>3&&(l=function(r,i,u){return n.call(this,r,i,u,e)}):l=function(r,i,u){return n.call(this,r,Zt(i),u,e)}),a[t](l,...o)}function Pr(e,t,n){const o=st(e);on(o,"iterate",Xa);const a=o[t](...n);return(a===-1||a===!1)&&Br(n[0])?(n[0]=st(n[0]),o[t](...n)):a}function Qa(e,t,n=[]){Kn(),Ar();const o=st(e)[t].apply(e,n);return Mr(),Yn(),o}const H1=fa("__proto__,__v_isRef,__isVue"),qu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Bn));function j1(e){Bn(e)||(e=String(e));const t=st(this);return on(t,"has",e),t.hasOwnProperty(e)}class Ku{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return l;if(n==="__v_raw")return o===(a?l?ec:Zu:l?Qu:Xu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=Ue(t);if(!a){let u;if(r&&(u=W1[n]))return u;if(n==="hasOwnProperty")return j1}const i=Reflect.get(t,n,Nt(t)?t:o);return(Bn(n)?qu.has(n):H1(n))||(a||on(t,"get",n),l)?i:Nt(i)?r&&Tr(n)?i:i.value:Et(i)?a?tc(i):os(i):i}}class Yu extends Ku{constructor(t=!1){super(!1,t)}set(t,n,o,a){let l=t[n];if(!this._isShallow){const u=Mo(l);if(!Dn(o)&&!Mo(o)&&(l=st(l),o=st(o)),!Ue(t)&&Nt(l)&&!Nt(o))return u||(l.value=o),!0}const r=Ue(t)&&Tr(n)?Number(n)<t.length:vt(t,n),i=Reflect.set(t,n,o,Nt(t)?t:a);return t===st(a)&&(r?Lo(o,l)&&lo(t,"set",n,o):lo(t,"add",n,o)),i}deleteProperty(t,n){const o=vt(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&lo(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Bn(n)||!qu.has(n))&&on(t,"has",n),o}ownKeys(t){return on(t,"iterate",Ue(t)?"length":Xo),Reflect.ownKeys(t)}}class Ju extends Ku{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const G1=new Yu,q1=new Ju,K1=new Yu(!0),Y1=new Ju(!0),Fr=e=>e,es=e=>Reflect.getPrototypeOf(e);function J1(e,t,n){return function(...o){const a=this.__v_raw,l=st(a),r=ma(l),i=e==="entries"||e===Symbol.iterator&&r,u=e==="keys"&&r,p=a[e](...o),c=n?Fr:t?ls:Zt;return!t&&on(l,"iterate",u?Rr:Xo),{next(){const{value:d,done:h}=p.next();return h?{value:d,done:h}:{value:i?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function ts(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function X1(e,t){const n={get(a){const l=this.__v_raw,r=st(l),i=st(a);e||(Lo(a,i)&&on(r,"get",a),on(r,"get",i));const{has:u}=es(r),p=t?Fr:e?ls:Zt;if(u.call(r,a))return p(l.get(a));if(u.call(r,i))return p(l.get(i));l!==r&&l.get(a)},get size(){const a=this.__v_raw;return!e&&on(st(a),"iterate",Xo),a.size},has(a){const l=this.__v_raw,r=st(l),i=st(a);return e||(Lo(a,i)&&on(r,"has",a),on(r,"has",i)),a===i?l.has(a):l.has(a)||l.has(i)},forEach(a,l){const r=this,i=r.__v_raw,u=st(i),p=t?Fr:e?ls:Zt;return!e&&on(u,"iterate",Xo),i.forEach((c,d)=>a.call(l,p(c),p(d),r))}};return jt(n,e?{add:ts("add"),set:ts("set"),delete:ts("delete"),clear:ts("clear")}:{add(a){!t&&!Dn(a)&&!Mo(a)&&(a=st(a));const l=st(this);return es(l).has.call(l,a)||(l.add(a),lo(l,"add",a,a)),this},set(a,l){!t&&!Dn(l)&&!Mo(l)&&(l=st(l));const r=st(this),{has:i,get:u}=es(r);let p=i.call(r,a);p||(a=st(a),p=i.call(r,a));const c=u.call(r,a);return r.set(a,l),p?Lo(l,c)&&lo(r,"set",a,l):lo(r,"add",a,l),this},delete(a){const l=st(this),{has:r,get:i}=es(l);let u=r.call(l,a);u||(a=st(a),u=r.call(l,a)),i&&i.call(l,a);const p=l.delete(a);return u&&lo(l,"delete",a,void 0),p},clear(){const a=st(this),l=a.size!==0,r=a.clear();return l&&lo(a,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=J1(a,e,t)}),n}function ns(e,t){const n=X1(e,t);return(o,a,l)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(vt(n,a)&&a in o?n:o,a,l)}const Q1={get:ns(!1,!1)},Z1={get:ns(!1,!0)},em={get:ns(!0,!1)},tm={get:ns(!0,!0)},Xu=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,ec=new WeakMap;function nm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function om(e){return e.__v_skip||!Object.isExtensible(e)?0:nm($1(e))}function os(e){return Mo(e)?e:as(e,!1,G1,Q1,Xu)}function am(e){return as(e,!1,K1,Z1,Qu)}function tc(e){return as(e,!0,q1,em,Zu)}function vI(e){return as(e,!0,Y1,tm,ec)}function as(e,t,n,o,a){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=om(e);if(l===0)return e;const r=a.get(e);if(r)return r;const i=new Proxy(e,l===2?o:n);return a.set(e,i),i}function Ao(e){return Mo(e)?Ao(e.__v_raw):!!(e&&e.__v_isReactive)}function Mo(e){return!!(e&&e.__v_isReadonly)}function Dn(e){return!!(e&&e.__v_isShallow)}function Br(e){return e?!!e.__v_raw:!1}function st(e){const t=e&&e.__v_raw;return t?st(t):e}function Ur(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&Au(e,"__v_skip",!0),e}const Zt=e=>Et(e)?os(e):e,ls=e=>Et(e)?tc(e):e;function Nt(e){return e?e.__v_isRef===!0:!1}function v(e){return nc(e,!1)}function lm(e){return nc(e,!0)}function nc(e,t){return Nt(e)?e:new sm(e,t)}class sm{constructor(t,n){this.dep=new Or,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:st(t),this._value=n?t:Zt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Dn(t)||Mo(t);t=o?t:st(t),Lo(t,n)&&(this._rawValue=t,this._value=o?t:Zt(t),this.dep.trigger())}}function f(e){return Nt(e)?e.value:e}const rm={get:(e,t,n)=>t==="__v_raw"?e:f(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return Nt(a)&&!Nt(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function oc(e){return Ao(e)?e:new Proxy(e,rm)}function im(e){const t=Ue(e)?new Array(e.length):{};for(const n in e)t[n]=cm(e,n);return t}class um{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return V1(st(this._object),this._key)}}function cm(e,t,n){const o=e[t];return Nt(o)?o:new um(e,t,n)}class dm{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Or(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ja-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return Bu(this,!0),!0}get value(){const t=this.dep.track();return Wu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pm(e,t,n=!1){let o,a;return qe(e)?o=e:(o=e.get,a=e.set),new dm(o,a,n)}const ss={},rs=new WeakMap;let Qo;function fm(e,t=!1,n=Qo){if(n){let o=rs.get(n);o||rs.set(n,o=[]),o.push(e)}}function gm(e,t,n=Ct){const{immediate:o,deep:a,once:l,scheduler:r,augmentJob:i,call:u}=n,p=S=>a?S:Dn(S)||a===!1||a===0?ro(S,1):ro(S);let c,d,h,m,_=!1,x=!1;if(Nt(e)?(d=()=>e.value,_=Dn(e)):Ao(e)?(d=()=>p(e),_=!0):Ue(e)?(x=!0,_=e.some(S=>Ao(S)||Dn(S)),d=()=>e.map(S=>{if(Nt(S))return S.value;if(Ao(S))return p(S);if(qe(S))return u?u(S,2):S()})):qe(e)?t?d=u?()=>u(e,2):e:d=()=>{if(h){Kn();try{h()}finally{Yn()}}const S=Qo;Qo=c;try{return u?u(e,3,[m]):e(m)}finally{Qo=S}}:d=qn,t&&a){const S=d,P=a===!0?1/0:a;d=()=>ro(S(),P)}const k=Nu(),T=()=>{c.stop(),k&&k.active&&xr(k.effects,c)};if(l&&t){const S=t;t=(...P)=>{S(...P),T()}}let D=x?new Array(e.length).fill(ss):ss;const K=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(t){const P=c.run();if(a||_||(x?P.some((j,G)=>Lo(j,D[G])):Lo(P,D))){h&&h();const j=Qo;Qo=c;try{const G=[P,D===ss?void 0:x&&D[0]===ss?[]:D,m];D=P,u?u(t,3,G):t(...G)}finally{Qo=j}}}else c.run()};return i&&i(K),c=new Pu(d),c.scheduler=r?()=>r(K,!1):K,m=S=>fm(S,!1,c),h=c.onStop=()=>{const S=rs.get(c);if(S){if(u)u(S,4);else for(const P of S)P();rs.delete(c)}},t?o?K(!0):D=c.run():r?r(K.bind(null,!0),!0):c.run(),T.pause=c.pause.bind(c),T.resume=c.resume.bind(c),T.stop=T,T}function ro(e,t=1/0,n){if(t<=0||!Et(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Nt(e))ro(e.value,t,n);else if(Ue(e))for(let o=0;o<e.length;o++)ro(e[o],t,n);else if(va(e)||ma(e))e.forEach(o=>{ro(o,t,n)});else if(Lu(e)){for(const o in e)ro(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&ro(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Za=[];let Vr=!1;function hI(e,...t){if(Vr)return;Vr=!0,Kn();const n=Za.length?Za[Za.length-1].component:null,o=n&&n.appContext.config.warnHandler,a=mm();if(o)_a(o,n,11,[e+t.map(l=>{var r,i;return(i=(r=l.toString)==null?void 0:r.call(l))!=null?i:JSON.stringify(l)}).join(""),n&&n.proxy,a.map(({vnode:l})=>`at <${ud(n,l.type)}>`).join(`
`),a]);else{const l=[`[Vue warn]: ${e}`,...t];a.length&&l.push(`
`,...vm(a)),console.warn(...l)}Yn(),Vr=!1}function mm(){let e=Za[Za.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function vm(e){const t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...hm(n))}),t}function hm({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,a=` at <${ud(e.component,e.type,o)}`,l=">"+n;return e.props?[a,..._m(e.props),l]:[a+l]}function _m(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...ac(o,e[o]))}),n.length>3&&t.push(" ..."),t}function ac(e,t,n){return Rt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:Nt(t)?(t=ac(e,st(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):qe(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=st(t),n?t:[`${e}=`,t])}function _a(e,t,n,o){try{return o?e(...o):e()}catch(a){is(a,t,n)}}function Vn(e,t,n,o){if(qe(e)){const a=_a(e,t,n,o);return a&&Eu(a)&&a.catch(l=>{is(l,t,n)}),a}if(Ue(e)){const a=[];for(let l=0;l<e.length;l++)a.push(Vn(e[l],t,n,o));return a}}function is(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ct;if(t){let i=t.parent;const u=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,u,p)===!1)return}i=i.parent}if(l){Kn(),_a(l,null,10,[e,u,p]),Yn();return}}ym(e,n,a,o,r)}function ym(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const fn=[];let Jn=-1;const ya=[];let Io=null,ba=0;const lc=Promise.resolve();let us=null;function Ke(e){const t=us||lc;return e?t.then(this?e.bind(this):e):t}function bm(e){let t=Jn+1,n=fn.length;for(;t<n;){const o=t+n>>>1,a=fn[o],l=el(a);l<e||l===e&&a.flags&2?t=o+1:n=o}return t}function Wr(e){if(!(e.flags&1)){const t=el(e),n=fn[fn.length-1];!n||!(e.flags&2)&&t>=el(n)?fn.push(e):fn.splice(bm(t),0,e),e.flags|=1,sc()}}function sc(){us||(us=lc.then(uc))}function wm(e){Ue(e)?ya.push(...e):Io&&e.id===-1?Io.splice(ba+1,0,e):e.flags&1||(ya.push(e),e.flags|=1),sc()}function rc(e,t,n=Jn+1){for(;n<fn.length;n++){const o=fn[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;fn.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function ic(e){if(ya.length){const t=[...new Set(ya)].sort((n,o)=>el(n)-el(o));if(ya.length=0,Io){Io.push(...t);return}for(Io=t,ba=0;ba<Io.length;ba++){const n=Io[ba];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Io=null,ba=0}}const el=e=>e.id==null?e.flags&2?-1:1/0:e.id;function uc(e){try{for(Jn=0;Jn<fn.length;Jn++){const t=fn[Jn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),_a(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Jn<fn.length;Jn++){const t=fn[Jn];t&&(t.flags&=-2)}Jn=-1,fn.length=0,ic(),us=null,(fn.length||ya.length)&&uc()}}let en=null,cc=null;function cs(e){const t=en;return en=e,cc=e&&e.type.__scopeId||null,t}function dt(e,t=en,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&bs(-1);const l=cs(t);let r;try{r=e(...a)}finally{cs(l),o._d&&bs(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function me(e,t){if(en===null)return e;const n=xs(en),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[l,r,i,u=Ct]=t[a];l&&(qe(l)&&(l={mounted:l,updated:l}),l.deep&&ro(r),o.push({dir:l,instance:n,value:r,oldValue:void 0,arg:i,modifiers:u}))}return e}function Zo(e,t,n,o){const a=e.dirs,l=t&&t.dirs;for(let r=0;r<a.length;r++){const i=a[r];l&&(i.oldValue=l[r].value);let u=i.dir[o];u&&(Kn(),Vn(u,n,8,[e.el,i,e,t]),Yn())}}const dc=Symbol("_vte"),pc=e=>e.__isTeleport,tl=e=>e&&(e.disabled||e.disabled===""),fc=e=>e&&(e.defer||e.defer===""),gc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,mc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,zr=(e,t)=>{const n=e&&e.to;return Rt(n)?t?t(n):null:n},vc={name:"Teleport",__isTeleport:!0,process(e,t,n,o,a,l,r,i,u,p){const{mc:c,pc:d,pbc:h,o:{insert:m,querySelector:_,createText:x,createComment:k}}=p,T=tl(t.props);let{shapeFlag:D,children:K,dynamicChildren:S}=t;if(e==null){const P=t.el=x(""),j=t.anchor=x("");m(P,n,o),m(j,n,o);const G=(Y,_e)=>{D&16&&(a&&a.isCE&&(a.ce._teleportTarget=Y),c(K,Y,_e,a,l,r,i,u))},q=()=>{const Y=t.target=zr(t.props,_),_e=_c(Y,t,x,m);Y&&(r!=="svg"&&gc(Y)?r="svg":r!=="mathml"&&mc(Y)&&(r="mathml"),T||(G(Y,_e),ps(t,!1)))};T&&(G(n,j),ps(t,!0)),fc(t.props)?(t.el.__isMounted=!1,mn(()=>{q(),delete t.el.__isMounted},l)):q()}else{if(fc(t.props)&&e.el.__isMounted===!1){mn(()=>{vc.process(e,t,n,o,a,l,r,i,u,p)},l);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,j=t.target=e.target,G=t.targetAnchor=e.targetAnchor,q=tl(e.props),Y=q?n:j,_e=q?P:G;if(r==="svg"||gc(j)?r="svg":(r==="mathml"||mc(j))&&(r="mathml"),S?(h(e.dynamicChildren,S,Y,a,l,r,i),ei(e,t,!0)):u||d(e,t,Y,_e,a,l,r,i,!1),T)q?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ds(t,n,P,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const se=t.target=zr(t.props,_);se&&ds(t,se,null,p,0)}else q&&ds(t,j,G,p,1);ps(t,T)}},remove(e,t,n,{um:o,o:{remove:a}},l){const{shapeFlag:r,children:i,anchor:u,targetStart:p,targetAnchor:c,target:d,props:h}=e;if(d&&(a(p),a(c)),l&&a(u),r&16){const m=l||!tl(h);for(let _=0;_<i.length;_++){const x=i[_];o(x,t,n,m,!!x.dynamicChildren)}}},move:ds,hydrate:Sm};function ds(e,t,n,{o:{insert:o},m:a},l=2){l===0&&o(e.targetAnchor,t,n);const{el:r,anchor:i,shapeFlag:u,children:p,props:c}=e,d=l===2;if(d&&o(r,t,n),(!d||tl(c))&&u&16)for(let h=0;h<p.length;h++)a(p[h],t,n,2);d&&o(i,t,n)}function Sm(e,t,n,o,a,l,{o:{nextSibling:r,parentNode:i,querySelector:u,insert:p,createText:c}},d){function h(x,k,T,D){k.anchor=d(r(x),k,i(x),n,o,a,l),k.targetStart=T,k.targetAnchor=D}const m=t.target=zr(t.props,u),_=tl(t.props);if(m){const x=m._lpa||m.firstChild;if(t.shapeFlag&16)if(_)h(e,t,x,x&&r(x));else{t.anchor=r(e);let k=x;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,m._lpa=t.targetAnchor&&r(t.targetAnchor);break}}k=r(k)}t.targetAnchor||_c(m,t,c,p),d(x&&r(x),t,m,n,o,a,l)}ps(t,_)}else _&&t.shapeFlag&16&&h(e,t,e,r(e));return t.anchor&&r(t.anchor)}const hc=vc;function ps(e,t){const n=e.ctx;if(n&&n.ut){let o,a;for(t?(o=e.el,a=e.anchor):(o=e.targetStart,a=e.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function _c(e,t,n,o){const a=t.targetStart=n(""),l=t.targetAnchor=n("");return a[dc]=l,e&&(o(a,e),o(l,e)),l}const io=Symbol("_leaveCb"),fs=Symbol("_enterCb");function yc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ct(()=>{e.isMounted=!0}),Do(()=>{e.isUnmounting=!0}),e}const On=[Function,Array],bc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},wc=e=>{const t=e.subTree;return t.component?wc(t.component):t},xm={name:"BaseTransition",props:bc,setup(e,{slots:t}){const n=po(),o=yc();return()=>{const a=t.default&&jr(t.default(),!0);if(!a||!a.length)return;const l=Sc(a),r=st(e),{mode:i}=r;if(o.isLeaving)return Hr(l);const u=Tc(l);if(!u)return Hr(l);let p=nl(u,r,o,n,d=>p=d);u.type!==an&&ea(u,p);let c=n.subTree&&Tc(n.subTree);if(c&&c.type!==an&&!oa(c,u)&&wc(n).type!==an){let d=nl(c,r,o,n);if(ea(c,d),i==="out-in"&&u.type!==an)return o.isLeaving=!0,d.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},Hr(l);i==="in-out"&&u.type!==an?d.delayLeave=(h,m,_)=>{const x=xc(o,c);x[String(c.key)]=c,h[io]=()=>{m(),h[io]=void 0,delete p.delayedLeave,c=void 0},p.delayedLeave=()=>{_(),delete p.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return l}}};function Sc(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==an){t=n;break}}return t}const Tm=xm;function xc(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function nl(e,t,n,o,a){const{appear:l,mode:r,persisted:i=!1,onBeforeEnter:u,onEnter:p,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:h,onLeave:m,onAfterLeave:_,onLeaveCancelled:x,onBeforeAppear:k,onAppear:T,onAfterAppear:D,onAppearCancelled:K}=t,S=String(e.key),P=xc(n,e),j=(Y,_e)=>{Y&&Vn(Y,o,9,_e)},G=(Y,_e)=>{const se=_e[1];j(Y,_e),Ue(Y)?Y.every(R=>R.length<=1)&&se():Y.length<=1&&se()},q={mode:r,persisted:i,beforeEnter(Y){let _e=u;if(!n.isMounted)if(l)_e=k||u;else return;Y[io]&&Y[io](!0);const se=P[S];se&&oa(e,se)&&se.el[io]&&se.el[io](),j(_e,[Y])},enter(Y){let _e=p,se=c,R=d;if(!n.isMounted)if(l)_e=T||p,se=D||c,R=K||d;else return;let Z=!1;const te=Y[fs]=z=>{Z||(Z=!0,z?j(R,[Y]):j(se,[Y]),q.delayedLeave&&q.delayedLeave(),Y[fs]=void 0)};_e?G(_e,[Y,te]):te()},leave(Y,_e){const se=String(e.key);if(Y[fs]&&Y[fs](!0),n.isUnmounting)return _e();j(h,[Y]);let R=!1;const Z=Y[io]=te=>{R||(R=!0,_e(),te?j(x,[Y]):j(_,[Y]),Y[io]=void 0,P[se]===e&&delete P[se])};P[se]=e,m?G(m,[Y,Z]):Z()},clone(Y){const _e=nl(Y,t,n,o,a);return a&&a(_e),_e}};return q}function Hr(e){if(ms(e))return e=Oo(e),e.children=null,e}function Tc(e){if(!ms(e))return pc(e.type)&&e.children?Sc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&qe(n.default))return n.default()}}function ea(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ea(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function jr(e,t=!1,n){let o=[],a=0;for(let l=0;l<e.length;l++){let r=e[l];const i=n==null?r.key:String(n)+String(r.key!=null?r.key:l);r.type===De?(r.patchFlag&128&&a++,o=o.concat(jr(r.children,t,i))):(t||r.type!==an)&&o.push(i!=null?Oo(r,{key:i}):r)}if(a>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}function yn(e,t){return qe(e)?jt({name:e.name},t,{setup:e}):e}function kc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const gs=new WeakMap;function ol(e,t,n,o,a=!1){if(Ue(e)){e.forEach((_,x)=>ol(_,t&&(Ue(t)?t[x]:t),n,o,a));return}if(wa(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ol(e,t,n,o.component.subTree);return}const l=o.shapeFlag&4?xs(o.component):o.el,r=a?null:l,{i,r:u}=e,p=t&&t.r,c=i.refs===Ct?i.refs={}:i.refs,d=i.setupState,h=st(d),m=d===Ct?ku:_=>vt(h,_);if(p!=null&&p!==u){if(Cc(t),Rt(p))c[p]=null,m(p)&&(d[p]=null);else if(Nt(p)){p.value=null;const _=t;_.k&&(c[_.k]=null)}}if(qe(u))_a(u,i,12,[r,c]);else{const _=Rt(u),x=Nt(u);if(_||x){const k=()=>{if(e.f){const T=_?m(u)?d[u]:c[u]:u.value;if(a)Ue(T)&&xr(T,l);else if(Ue(T))T.includes(l)||T.push(l);else if(_)c[u]=[l],m(u)&&(d[u]=c[u]);else{const D=[l];u.value=D,e.k&&(c[e.k]=D)}}else _?(c[u]=r,m(u)&&(d[u]=r)):x&&(u.value=r,e.k&&(c[e.k]=r))};if(r){const T=()=>{k(),gs.delete(e)};T.id=-1,gs.set(e,T),mn(T,n)}else Cc(e),k()}}}function Cc(e){const t=gs.get(e);t&&(t.flags|=8,gs.delete(e))}Xl().requestIdleCallback,Xl().cancelIdleCallback;const wa=e=>!!e.type.__asyncLoader,ms=e=>e.type.__isKeepAlive;function km(e,t){Ec(e,"a",t)}function Cm(e,t){Ec(e,"da",t)}function Ec(e,t,n=ln){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(vs(t,o,n),n){let a=n.parent;for(;a&&a.parent;)ms(a.parent.vnode)&&Em(o,t,n,a),a=a.parent}}function Em(e,t,n,o){const a=vs(t,e,o,!0);Rn(()=>{xr(o[t],a)},n)}function vs(e,t,n=ln,o=!1){if(n){const a=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...r)=>{Kn();const i=dl(n),u=Vn(t,n,e,r);return i(),Yn(),u});return o?a.unshift(l):a.push(l),l}}const uo=e=>(t,n=ln)=>{(!pl||e==="sp")&&vs(e,(...o)=>t(...o),n)},$m=uo("bm"),ct=uo("m"),$c=uo("bu"),Lc=uo("u"),Do=uo("bum"),Rn=uo("um"),Lm=uo("sp"),Am=uo("rtg"),Mm=uo("rtc");function Im(e,t=ln){vs("ec",e,t)}const Dm="components";function Om(e,t){return Nm(Dm,e,!0,t)||e}const Rm=Symbol.for("v-ndc");function Nm(e,t,n=!0,o=!1){const a=en||ln;if(a){const l=a.type;{const i=id(l,!1);if(i&&(i===t||i===In(t)||i===Kl(In(t))))return l}const r=Ac(a[e]||l[e],t)||Ac(a.appContext[e],t);return!r&&o?l:r}}function Ac(e,t){return e&&(e[t]||e[In(t)]||e[Kl(In(t))])}function Ve(e,t,n,o){let a;const l=n,r=Ue(e);if(r||Rt(e)){const i=r&&Ao(e);let u=!1,p=!1;i&&(u=!Dn(e),p=Mo(e),e=Zl(e)),a=new Array(e.length);for(let c=0,d=e.length;c<d;c++)a[c]=t(u?p?ls(Zt(e[c])):Zt(e[c]):e[c],c,void 0,l)}else if(typeof e=="number"){a=new Array(e);for(let i=0;i<e;i++)a[i]=t(i+1,i,void 0,l)}else if(Et(e))if(e[Symbol.iterator])a=Array.from(e,(i,u)=>t(i,u,void 0,l));else{const i=Object.keys(e);a=new Array(i.length);for(let u=0,p=i.length;u<p;u++){const c=i[u];a[u]=t(e[c],c,u,l)}}else a=[];return a}function al(e,t,n={},o,a){if(en.ce||en.parent&&wa(en.parent)&&en.parent.ce)return t!=="default"&&(n.name=t),b(),xt(De,null,[He("slot",n,o&&o())],64);let l=e[t];l&&l._c&&(l._d=!1),b();const r=l&&Mc(l(n)),i=n.key||r&&r.key,u=xt(De,{key:(i&&!Bn(i)?i:`_${t}`)+(!r&&o?"_fb":"")},r||(o?o():[]),r&&e._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function Mc(e){return e.some(t=>cl(t)?!(t.type===an||t.type===De&&!Mc(t.children)):!0)?e:null}const Gr=e=>e?ld(e)?xs(e):Gr(e.parent):null,ll=jt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Gr(e.parent),$root:e=>Gr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Rc(e),$forceUpdate:e=>e.f||(e.f=()=>{Wr(e.update)}),$nextTick:e=>e.n||(e.n=Ke.bind(e.proxy)),$watch:e=>av.bind(e)}),qr=(e,t)=>e!==Ct&&!e.__isScriptSetup&&vt(e,t),Pm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:l,accessCache:r,type:i,appContext:u}=e;let p;if(t[0]!=="$"){const m=r[t];if(m!==void 0)switch(m){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return l[t]}else{if(qr(o,t))return r[t]=1,o[t];if(a!==Ct&&vt(a,t))return r[t]=2,a[t];if((p=e.propsOptions[0])&&vt(p,t))return r[t]=3,l[t];if(n!==Ct&&vt(n,t))return r[t]=4,n[t];Kr&&(r[t]=0)}}const c=ll[t];let d,h;if(c)return t==="$attrs"&&on(e.attrs,"get",""),c(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(n!==Ct&&vt(n,t))return r[t]=4,n[t];if(h=u.config.globalProperties,vt(h,t))return h[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:l}=e;return qr(a,t)?(a[t]=n,!0):o!==Ct&&vt(o,t)?(o[t]=n,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:l,type:r}},i){let u,p;return!!(n[i]||e!==Ct&&i[0]!=="$"&&vt(e,i)||qr(t,i)||(u=l[0])&&vt(u,i)||vt(o,i)||vt(ll,i)||vt(a.config.globalProperties,i)||(p=r.__cssModules)&&p[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ic(e){return Ue(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Kr=!0;function Fm(e){const t=Rc(e),n=e.proxy,o=e.ctx;Kr=!1,t.beforeCreate&&Dc(t.beforeCreate,e,"bc");const{data:a,computed:l,methods:r,watch:i,provide:u,inject:p,created:c,beforeMount:d,mounted:h,beforeUpdate:m,updated:_,activated:x,deactivated:k,beforeDestroy:T,beforeUnmount:D,destroyed:K,unmounted:S,render:P,renderTracked:j,renderTriggered:G,errorCaptured:q,serverPrefetch:Y,expose:_e,inheritAttrs:se,components:R,directives:Z,filters:te}=t;if(p&&Bm(p,o,null),r)for(const ae in r){const F=r[ae];qe(F)&&(o[ae]=F.bind(n))}if(a){const ae=a.call(n,n);Et(ae)&&(e.data=os(ae))}if(Kr=!0,l)for(const ae in l){const F=l[ae],B=qe(F)?F.bind(n,n):qe(F.get)?F.get.bind(n,n):qn,ie=!qe(F)&&qe(F.set)?F.set.bind(n):qn,Ce=nt({get:B,set:ie});Object.defineProperty(o,ae,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:le=>Ce.value=le})}if(i)for(const ae in i)Oc(i[ae],o,n,ae);if(u){const ae=qe(u)?u.call(n):u;Reflect.ownKeys(ae).forEach(F=>{_s(F,ae[F])})}c&&Dc(c,e,"c");function ne(ae,F){Ue(F)?F.forEach(B=>ae(B.bind(n))):F&&ae(F.bind(n))}if(ne($m,d),ne(ct,h),ne($c,m),ne(Lc,_),ne(km,x),ne(Cm,k),ne(Im,q),ne(Mm,j),ne(Am,G),ne(Do,D),ne(Rn,S),ne(Lm,Y),Ue(_e))if(_e.length){const ae=e.exposed||(e.exposed={});_e.forEach(F=>{Object.defineProperty(ae,F,{get:()=>n[F],set:B=>n[F]=B,enumerable:!0})})}else e.exposed||(e.exposed={});P&&e.render===qn&&(e.render=P),se!=null&&(e.inheritAttrs=se),R&&(e.components=R),Z&&(e.directives=Z),Y&&kc(e)}function Bm(e,t,n=qn){Ue(e)&&(e=Yr(e));for(const o in e){const a=e[o];let l;Et(a)?"default"in a?l=co(a.from||o,a.default,!0):l=co(a.from||o):l=co(a),Nt(l)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:r=>l.value=r}):t[o]=l}}function Dc(e,t,n){Vn(Ue(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Oc(e,t,n,o){let a=o.includes(".")?Xc(n,o):()=>n[o];if(Rt(e)){const l=t[e];qe(l)&&et(a,l)}else if(qe(e))et(a,e.bind(n));else if(Et(e))if(Ue(e))e.forEach(l=>Oc(l,t,n,o));else{const l=qe(e.handler)?e.handler.bind(n):t[e.handler];qe(l)&&et(a,l,e)}}function Rc(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:l,config:{optionMergeStrategies:r}}=e.appContext,i=l.get(t);let u;return i?u=i:!a.length&&!n&&!o?u=t:(u={},a.length&&a.forEach(p=>hs(u,p,r,!0)),hs(u,t,r)),Et(t)&&l.set(t,u),u}function hs(e,t,n,o=!1){const{mixins:a,extends:l}=t;l&&hs(e,l,n,!0),a&&a.forEach(r=>hs(e,r,n,!0));for(const r in t)if(!(o&&r==="expose")){const i=Um[r]||n&&n[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Um={data:Nc,props:Pc,emits:Pc,methods:sl,computed:sl,beforeCreate:gn,created:gn,beforeMount:gn,mounted:gn,beforeUpdate:gn,updated:gn,beforeDestroy:gn,beforeUnmount:gn,destroyed:gn,unmounted:gn,activated:gn,deactivated:gn,errorCaptured:gn,serverPrefetch:gn,components:sl,directives:sl,watch:Wm,provide:Nc,inject:Vm};function Nc(e,t){return t?e?function(){return jt(qe(e)?e.call(this,this):e,qe(t)?t.call(this,this):t)}:t:e}function Vm(e,t){return sl(Yr(e),Yr(t))}function Yr(e){if(Ue(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function gn(e,t){return e?[...new Set([].concat(e,t))]:t}function sl(e,t){return e?jt(Object.create(null),e,t):t}function Pc(e,t){return e?Ue(e)&&Ue(t)?[...new Set([...e,...t])]:jt(Object.create(null),Ic(e),Ic(t??{})):t}function Wm(e,t){if(!e)return t;if(!t)return e;const n=jt(Object.create(null),e);for(const o in t)n[o]=gn(e[o],t[o]);return n}function Fc(){return{app:null,config:{isNativeTag:ku,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zm=0;function Hm(e,t){return function(o,a=null){qe(o)||(o=jt({},o)),a!=null&&!Et(a)&&(a=null);const l=Fc(),r=new WeakSet,i=[];let u=!1;const p=l.app={_uid:zm++,_component:o,_props:a,_container:null,_context:l,_instance:null,version:Ev,get config(){return l.config},set config(c){},use(c,...d){return r.has(c)||(c&&qe(c.install)?(r.add(c),c.install(p,...d)):qe(c)&&(r.add(c),c(p,...d))),p},mixin(c){return l.mixins.includes(c)||l.mixins.push(c),p},component(c,d){return d?(l.components[c]=d,p):l.components[c]},directive(c,d){return d?(l.directives[c]=d,p):l.directives[c]},mount(c,d,h){if(!u){const m=p._ceVNode||He(o,a);return m.appContext=l,h===!0?h="svg":h===!1&&(h=void 0),e(m,c,h),u=!0,p._container=c,c.__vue_app__=p,xs(m.component)}},onUnmount(c){i.push(c)},unmount(){u&&(Vn(i,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(c,d){return l.provides[c]=d,p},runWithContext(c){const d=ta;ta=p;try{return c()}finally{ta=d}}};return p}}let ta=null;function _s(e,t){if(ln){let n=ln.provides;const o=ln.parent&&ln.parent.provides;o===n&&(n=ln.provides=Object.create(o)),n[e]=t}}function co(e,t,n=!1){const o=po();if(o||ta){let a=ta?ta._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&qe(t)?t.call(o&&o.proxy):t}}function jm(){return!!(po()||ta)}const Bc={},Uc=()=>Object.create(Bc),Vc=e=>Object.getPrototypeOf(e)===Bc;function Gm(e,t,n,o=!1){const a={},l=Uc();e.propsDefaults=Object.create(null),Wc(e,t,a,l);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=o?a:am(a):e.type.props?e.props=a:e.props=l,e.attrs=l}function qm(e,t,n,o){const{props:a,attrs:l,vnode:{patchFlag:r}}=e,i=st(a),[u]=e.propsOptions;let p=!1;if((o||r>0)&&!(r&16)){if(r&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(ys(e.emitsOptions,h))continue;const m=t[h];if(u)if(vt(l,h))m!==l[h]&&(l[h]=m,p=!0);else{const _=In(h);a[_]=Jr(u,i,_,m,e,!1)}else m!==l[h]&&(l[h]=m,p=!0)}}}else{Wc(e,t,a,l)&&(p=!0);let c;for(const d in i)(!t||!vt(t,d)&&((c=$o(d))===d||!vt(t,c)))&&(u?n&&(n[d]!==void 0||n[c]!==void 0)&&(a[d]=Jr(u,i,d,void 0,e,!0)):delete a[d]);if(l!==i)for(const d in l)(!t||!vt(t,d))&&(delete l[d],p=!0)}p&&lo(e.attrs,"set","")}function Wc(e,t,n,o){const[a,l]=e.propsOptions;let r=!1,i;if(t)for(let u in t){if(qa(u))continue;const p=t[u];let c;a&&vt(a,c=In(u))?!l||!l.includes(c)?n[c]=p:(i||(i={}))[c]=p:ys(e.emitsOptions,u)||(!(u in o)||p!==o[u])&&(o[u]=p,r=!0)}if(l){const u=st(n),p=i||Ct;for(let c=0;c<l.length;c++){const d=l[c];n[d]=Jr(a,u,d,p[d],e,!vt(p,d))}}return r}function Jr(e,t,n,o,a,l){const r=e[n];if(r!=null){const i=vt(r,"default");if(i&&o===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&qe(u)){const{propsDefaults:p}=a;if(n in p)o=p[n];else{const c=dl(a);o=p[n]=u.call(null,t),c()}}else o=u;a.ce&&a.ce._setProp(n,o)}r[0]&&(l&&!i?o=!1:r[1]&&(o===""||o===$o(n))&&(o=!0))}return o}const Km=new WeakMap;function zc(e,t,n=!1){const o=n?Km:t.propsCache,a=o.get(e);if(a)return a;const l=e.props,r={},i=[];let u=!1;if(!qe(e)){const c=d=>{u=!0;const[h,m]=zc(d,t,!0);jt(r,h),m&&i.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!l&&!u)return Et(e)&&o.set(e,ga),ga;if(Ue(l))for(let c=0;c<l.length;c++){const d=In(l[c]);Hc(d)&&(r[d]=Ct)}else if(l)for(const c in l){const d=In(c);if(Hc(d)){const h=l[c],m=r[d]=Ue(h)||qe(h)?{type:h}:jt({},h),_=m.type;let x=!1,k=!0;if(Ue(_))for(let T=0;T<_.length;++T){const D=_[T],K=qe(D)&&D.name;if(K==="Boolean"){x=!0;break}else K==="String"&&(k=!1)}else x=qe(_)&&_.name==="Boolean";m[0]=x,m[1]=k,(x||vt(m,"default"))&&i.push(d)}}const p=[r,i];return Et(e)&&o.set(e,p),p}function Hc(e){return e[0]!=="$"&&!qa(e)}const Xr=e=>e==="_"||e==="_ctx"||e==="$stable",Qr=e=>Ue(e)?e.map(Xn):[Xn(e)],Ym=(e,t,n)=>{if(t._n)return t;const o=dt((...a)=>Qr(t(...a)),n);return o._c=!1,o},jc=(e,t,n)=>{const o=e._ctx;for(const a in e){if(Xr(a))continue;const l=e[a];if(qe(l))t[a]=Ym(a,l,o);else if(l!=null){const r=Qr(l);t[a]=()=>r}}},Gc=(e,t)=>{const n=Qr(t);e.slots.default=()=>n},qc=(e,t,n)=>{for(const o in t)(n||!Xr(o))&&(e[o]=t[o])},Jm=(e,t,n)=>{const o=e.slots=Uc();if(e.vnode.shapeFlag&32){const a=t._;a?(qc(o,t,n),n&&Au(o,"_",a,!0)):jc(t,o)}else t&&Gc(e,t)},Xm=(e,t,n)=>{const{vnode:o,slots:a}=e;let l=!0,r=Ct;if(o.shapeFlag&32){const i=t._;i?n&&i===1?l=!1:qc(a,t,n):(l=!t.$stable,jc(t,a)),r=t}else t&&(Gc(e,t),r={default:1});if(l)for(const i in a)!Xr(i)&&r[i]==null&&delete a[i]},mn=pv;function Qm(e){return Zm(e)}function Zm(e,t){const n=Xl();n.__VUE__=!0;const{insert:o,remove:a,patchProp:l,createElement:r,createText:i,createComment:u,setText:p,setElementText:c,parentNode:d,nextSibling:h,setScopeId:m=qn,insertStaticContent:_}=e,x=(C,w,N,Q=null,fe=null,he=null,L=void 0,y=null,O=!!w.dynamicChildren)=>{if(C===w)return;C&&!oa(C,w)&&(Q=M(C),le(C,fe,he,!0),C=null),w.patchFlag===-2&&(O=!1,w.dynamicChildren=null);const{type:W,ref:we,shapeFlag:be}=w;switch(W){case rl:k(C,w,N,Q);break;case an:T(C,w,N,Q);break;case ti:C==null&&D(w,N,Q,L);break;case De:R(C,w,N,Q,fe,he,L,y,O);break;default:be&1?P(C,w,N,Q,fe,he,L,y,O):be&6?Z(C,w,N,Q,fe,he,L,y,O):(be&64||be&128)&&W.process(C,w,N,Q,fe,he,L,y,O,I)}we!=null&&fe?ol(we,C&&C.ref,he,w||C,!w):we==null&&C&&C.ref!=null&&ol(C.ref,null,he,C,!0)},k=(C,w,N,Q)=>{if(C==null)o(w.el=i(w.children),N,Q);else{const fe=w.el=C.el;w.children!==C.children&&p(fe,w.children)}},T=(C,w,N,Q)=>{C==null?o(w.el=u(w.children||""),N,Q):w.el=C.el},D=(C,w,N,Q)=>{[C.el,C.anchor]=_(C.children,w,N,Q,C.el,C.anchor)},K=({el:C,anchor:w},N,Q)=>{let fe;for(;C&&C!==w;)fe=h(C),o(C,N,Q),C=fe;o(w,N,Q)},S=({el:C,anchor:w})=>{let N;for(;C&&C!==w;)N=h(C),a(C),C=N;a(w)},P=(C,w,N,Q,fe,he,L,y,O)=>{w.type==="svg"?L="svg":w.type==="math"&&(L="mathml"),C==null?j(w,N,Q,fe,he,L,y,O):Y(C,w,fe,he,L,y,O)},j=(C,w,N,Q,fe,he,L,y)=>{let O,W;const{props:we,shapeFlag:be,transition:ee,dirs:pe}=C;if(O=C.el=r(C.type,he,we&&we.is,we),be&8?c(O,C.children):be&16&&q(C.children,O,null,Q,fe,Zr(C,he),L,y),pe&&Zo(C,null,Q,"created"),G(O,C,C.scopeId,L,Q),we){for(const Ne in we)Ne!=="value"&&!qa(Ne)&&l(O,Ne,null,we[Ne],he,Q);"value"in we&&l(O,"value",null,we.value,he),(W=we.onVnodeBeforeMount)&&Qn(W,Q,C)}pe&&Zo(C,null,Q,"beforeMount");const Oe=ev(fe,ee);Oe&&ee.beforeEnter(O),o(O,w,N),((W=we&&we.onVnodeMounted)||Oe||pe)&&mn(()=>{W&&Qn(W,Q,C),Oe&&ee.enter(O),pe&&Zo(C,null,Q,"mounted")},fe)},G=(C,w,N,Q,fe)=>{if(N&&m(C,N),Q)for(let he=0;he<Q.length;he++)m(C,Q[he]);if(fe){let he=fe.subTree;if(w===he||td(he.type)&&(he.ssContent===w||he.ssFallback===w)){const L=fe.vnode;G(C,L,L.scopeId,L.slotScopeIds,fe.parent)}}},q=(C,w,N,Q,fe,he,L,y,O=0)=>{for(let W=O;W<C.length;W++){const we=C[W]=y?Ro(C[W]):Xn(C[W]);x(null,we,w,N,Q,fe,he,L,y)}},Y=(C,w,N,Q,fe,he,L)=>{const y=w.el=C.el;let{patchFlag:O,dynamicChildren:W,dirs:we}=w;O|=C.patchFlag&16;const be=C.props||Ct,ee=w.props||Ct;let pe;if(N&&na(N,!1),(pe=ee.onVnodeBeforeUpdate)&&Qn(pe,N,w,C),we&&Zo(w,C,N,"beforeUpdate"),N&&na(N,!0),(be.innerHTML&&ee.innerHTML==null||be.textContent&&ee.textContent==null)&&c(y,""),W?_e(C.dynamicChildren,W,y,N,Q,Zr(w,fe),he):L||F(C,w,y,null,N,Q,Zr(w,fe),he,!1),O>0){if(O&16)se(y,be,ee,N,fe);else if(O&2&&be.class!==ee.class&&l(y,"class",null,ee.class,fe),O&4&&l(y,"style",be.style,ee.style,fe),O&8){const Oe=w.dynamicProps;for(let Ne=0;Ne<Oe.length;Ne++){const ze=Oe[Ne],Xe=be[ze],it=ee[ze];(it!==Xe||ze==="value")&&l(y,ze,Xe,it,fe,N)}}O&1&&C.children!==w.children&&c(y,w.children)}else!L&&W==null&&se(y,be,ee,N,fe);((pe=ee.onVnodeUpdated)||we)&&mn(()=>{pe&&Qn(pe,N,w,C),we&&Zo(w,C,N,"updated")},Q)},_e=(C,w,N,Q,fe,he,L)=>{for(let y=0;y<w.length;y++){const O=C[y],W=w[y],we=O.el&&(O.type===De||!oa(O,W)||O.shapeFlag&198)?d(O.el):N;x(O,W,we,null,Q,fe,he,L,!0)}},se=(C,w,N,Q,fe)=>{if(w!==N){if(w!==Ct)for(const he in w)!qa(he)&&!(he in N)&&l(C,he,w[he],null,fe,Q);for(const he in N){if(qa(he))continue;const L=N[he],y=w[he];L!==y&&he!=="value"&&l(C,he,y,L,fe,Q)}"value"in N&&l(C,"value",w.value,N.value,fe)}},R=(C,w,N,Q,fe,he,L,y,O)=>{const W=w.el=C?C.el:i(""),we=w.anchor=C?C.anchor:i("");let{patchFlag:be,dynamicChildren:ee,slotScopeIds:pe}=w;pe&&(y=y?y.concat(pe):pe),C==null?(o(W,N,Q),o(we,N,Q),q(w.children||[],N,we,fe,he,L,y,O)):be>0&&be&64&&ee&&C.dynamicChildren?(_e(C.dynamicChildren,ee,N,fe,he,L,y),(w.key!=null||fe&&w===fe.subTree)&&ei(C,w,!0)):F(C,w,N,we,fe,he,L,y,O)},Z=(C,w,N,Q,fe,he,L,y,O)=>{w.slotScopeIds=y,C==null?w.shapeFlag&512?fe.ctx.activate(w,N,Q,L,O):te(w,N,Q,fe,he,L,O):z(C,w,O)},te=(C,w,N,Q,fe,he,L)=>{const y=C.component=yv(C,Q,fe);if(ms(C)&&(y.ctx.renderer=I),bv(y,!1,L),y.asyncDep){if(fe&&fe.registerDep(y,ne,L),!C.el){const O=y.subTree=He(an);T(null,O,w,N),C.placeholder=O.el}}else ne(y,C,w,N,fe,he,L)},z=(C,w,N)=>{const Q=w.component=C.component;if(cv(C,w,N))if(Q.asyncDep&&!Q.asyncResolved){ae(Q,w,N);return}else Q.next=w,Q.update();else w.el=C.el,Q.vnode=w},ne=(C,w,N,Q,fe,he,L)=>{const y=()=>{if(C.isMounted){let{next:be,bu:ee,u:pe,parent:Oe,vnode:Ne}=C;{const Ot=Kc(C);if(Ot){be&&(be.el=Ne.el,ae(C,be,L)),Ot.asyncDep.then(()=>{C.isUnmounted||y()});return}}let ze=be,Xe;na(C,!1),be?(be.el=Ne.el,ae(C,be,L)):be=Ne,ee&&Yl(ee),(Xe=be.props&&be.props.onVnodeBeforeUpdate)&&Qn(Xe,Oe,be,Ne),na(C,!0);const it=Zc(C),wt=C.subTree;C.subTree=it,x(wt,it,d(wt.el),M(wt),C,fe,he),be.el=it.el,ze===null&&dv(C,it.el),pe&&mn(pe,fe),(Xe=be.props&&be.props.onVnodeUpdated)&&mn(()=>Qn(Xe,Oe,be,Ne),fe)}else{let be;const{el:ee,props:pe}=w,{bm:Oe,m:Ne,parent:ze,root:Xe,type:it}=C,wt=wa(w);na(C,!1),Oe&&Yl(Oe),!wt&&(be=pe&&pe.onVnodeBeforeMount)&&Qn(be,ze,w),na(C,!0);{Xe.ce&&Xe.ce._def.shadowRoot!==!1&&Xe.ce._injectChildStyle(it);const Ot=C.subTree=Zc(C);x(null,Ot,N,Q,C,fe,he),w.el=Ot.el}if(Ne&&mn(Ne,fe),!wt&&(be=pe&&pe.onVnodeMounted)){const Ot=w;mn(()=>Qn(be,ze,Ot),fe)}(w.shapeFlag&256||ze&&wa(ze.vnode)&&ze.vnode.shapeFlag&256)&&C.a&&mn(C.a,fe),C.isMounted=!0,w=N=Q=null}};C.scope.on();const O=C.effect=new Pu(y);C.scope.off();const W=C.update=O.run.bind(O),we=C.job=O.runIfDirty.bind(O);we.i=C,we.id=C.uid,O.scheduler=()=>Wr(we),na(C,!0),W()},ae=(C,w,N)=>{w.component=C;const Q=C.vnode.props;C.vnode=w,C.next=null,qm(C,w.props,Q,N),Xm(C,w.children,N),Kn(),rc(C),Yn()},F=(C,w,N,Q,fe,he,L,y,O=!1)=>{const W=C&&C.children,we=C?C.shapeFlag:0,be=w.children,{patchFlag:ee,shapeFlag:pe}=w;if(ee>0){if(ee&128){ie(W,be,N,Q,fe,he,L,y,O);return}else if(ee&256){B(W,be,N,Q,fe,he,L,y,O);return}}pe&8?(we&16&&X(W,fe,he),be!==W&&c(N,be)):we&16?pe&16?ie(W,be,N,Q,fe,he,L,y,O):X(W,fe,he,!0):(we&8&&c(N,""),pe&16&&q(be,N,Q,fe,he,L,y,O))},B=(C,w,N,Q,fe,he,L,y,O)=>{C=C||ga,w=w||ga;const W=C.length,we=w.length,be=Math.min(W,we);let ee;for(ee=0;ee<be;ee++){const pe=w[ee]=O?Ro(w[ee]):Xn(w[ee]);x(C[ee],pe,N,null,fe,he,L,y,O)}W>we?X(C,fe,he,!0,!1,be):q(w,N,Q,fe,he,L,y,O,be)},ie=(C,w,N,Q,fe,he,L,y,O)=>{let W=0;const we=w.length;let be=C.length-1,ee=we-1;for(;W<=be&&W<=ee;){const pe=C[W],Oe=w[W]=O?Ro(w[W]):Xn(w[W]);if(oa(pe,Oe))x(pe,Oe,N,null,fe,he,L,y,O);else break;W++}for(;W<=be&&W<=ee;){const pe=C[be],Oe=w[ee]=O?Ro(w[ee]):Xn(w[ee]);if(oa(pe,Oe))x(pe,Oe,N,null,fe,he,L,y,O);else break;be--,ee--}if(W>be){if(W<=ee){const pe=ee+1,Oe=pe<we?w[pe].el:Q;for(;W<=ee;)x(null,w[W]=O?Ro(w[W]):Xn(w[W]),N,Oe,fe,he,L,y,O),W++}}else if(W>ee)for(;W<=be;)le(C[W],fe,he,!0),W++;else{const pe=W,Oe=W,Ne=new Map;for(W=Oe;W<=ee;W++){const Ht=w[W]=O?Ro(w[W]):Xn(w[W]);Ht.key!=null&&Ne.set(Ht.key,W)}let ze,Xe=0;const it=ee-Oe+1;let wt=!1,Ot=0;const jn=new Array(it);for(W=0;W<it;W++)jn[W]=0;for(W=pe;W<=be;W++){const Ht=C[W];if(Xe>=it){le(Ht,fe,he,!0);continue}let Xt;if(Ht.key!=null)Xt=Ne.get(Ht.key);else for(ze=Oe;ze<=ee;ze++)if(jn[ze-Oe]===0&&oa(Ht,w[ze])){Xt=ze;break}Xt===void 0?le(Ht,fe,he,!0):(jn[Xt-Oe]=W+1,Xt>=Ot?Ot=Xt:wt=!0,x(Ht,w[Xt],N,null,fe,he,L,y,O),Xe++)}const qo=wt?tv(jn):ga;for(ze=qo.length-1,W=it-1;W>=0;W--){const Ht=Oe+W,Xt=w[Ht],Fn=w[Ht+1],xo=Ht+1<we?Fn.el||Fn.placeholder:Q;jn[W]===0?x(null,Xt,N,xo,fe,he,L,y,O):wt&&(ze<0||W!==qo[ze]?Ce(Xt,N,xo,2):ze--)}}},Ce=(C,w,N,Q,fe=null)=>{const{el:he,type:L,transition:y,children:O,shapeFlag:W}=C;if(W&6){Ce(C.component.subTree,w,N,Q);return}if(W&128){C.suspense.move(w,N,Q);return}if(W&64){L.move(C,w,N,I);return}if(L===De){o(he,w,N);for(let be=0;be<O.length;be++)Ce(O[be],w,N,Q);o(C.anchor,w,N);return}if(L===ti){K(C,w,N);return}if(Q!==2&&W&1&&y)if(Q===0)y.beforeEnter(he),o(he,w,N),mn(()=>y.enter(he),fe);else{const{leave:be,delayLeave:ee,afterLeave:pe}=y,Oe=()=>{C.ctx.isUnmounted?a(he):o(he,w,N)},Ne=()=>{he._isLeaving&&he[io](!0),be(he,()=>{Oe(),pe&&pe()})};ee?ee(he,Oe,Ne):Ne()}else o(he,w,N)},le=(C,w,N,Q=!1,fe=!1)=>{const{type:he,props:L,ref:y,children:O,dynamicChildren:W,shapeFlag:we,patchFlag:be,dirs:ee,cacheIndex:pe}=C;if(be===-2&&(fe=!1),y!=null&&(Kn(),ol(y,null,N,C,!0),Yn()),pe!=null&&(w.renderCache[pe]=void 0),we&256){w.ctx.deactivate(C);return}const Oe=we&1&&ee,Ne=!wa(C);let ze;if(Ne&&(ze=L&&L.onVnodeBeforeUnmount)&&Qn(ze,w,C),we&6)oe(C.component,N,Q);else{if(we&128){C.suspense.unmount(N,Q);return}Oe&&Zo(C,null,w,"beforeUnmount"),we&64?C.type.remove(C,w,N,I,Q):W&&!W.hasOnce&&(he!==De||be>0&&be&64)?X(W,w,N,!1,!0):(he===De&&be&384||!fe&&we&16)&&X(O,w,N),Q&&de(C)}(Ne&&(ze=L&&L.onVnodeUnmounted)||Oe)&&mn(()=>{ze&&Qn(ze,w,C),Oe&&Zo(C,null,w,"unmounted")},N)},de=C=>{const{type:w,el:N,anchor:Q,transition:fe}=C;if(w===De){ve(N,Q);return}if(w===ti){S(C);return}const he=()=>{a(N),fe&&!fe.persisted&&fe.afterLeave&&fe.afterLeave()};if(C.shapeFlag&1&&fe&&!fe.persisted){const{leave:L,delayLeave:y}=fe,O=()=>L(N,he);y?y(C.el,he,O):O()}else he()},ve=(C,w)=>{let N;for(;C!==w;)N=h(C),a(C),C=N;a(w)},oe=(C,w,N)=>{const{bum:Q,scope:fe,job:he,subTree:L,um:y,m:O,a:W}=C;Yc(O),Yc(W),Q&&Yl(Q),fe.stop(),he&&(he.flags|=8,le(L,C,w,N)),y&&mn(y,w),mn(()=>{C.isUnmounted=!0},w)},X=(C,w,N,Q=!1,fe=!1,he=0)=>{for(let L=he;L<C.length;L++)le(C[L],w,N,Q,fe)},M=C=>{if(C.shapeFlag&6)return M(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const w=h(C.anchor||C.el),N=w&&w[dc];return N?h(N):w};let U=!1;const H=(C,w,N)=>{C==null?w._vnode&&le(w._vnode,null,null,!0):x(w._vnode||null,C,w,null,null,null,N),w._vnode=C,U||(U=!0,rc(),ic(),U=!1)},I={p:x,um:le,m:Ce,r:de,mt:te,mc:q,pc:F,pbc:_e,n:M,o:e};return{render:H,hydrate:void 0,createApp:Hm(H)}}function Zr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function na({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ev(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ei(e,t,n=!1){const o=e.children,a=t.children;if(Ue(o)&&Ue(a))for(let l=0;l<o.length;l++){const r=o[l];let i=a[l];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=a[l]=Ro(a[l]),i.el=r.el),!n&&i.patchFlag!==-2&&ei(r,i)),i.type===rl&&i.patchFlag!==-1&&(i.el=r.el),i.type===an&&!i.el&&(i.el=r.el)}}function tv(e){const t=e.slice(),n=[0];let o,a,l,r,i;const u=e.length;for(o=0;o<u;o++){const p=e[o];if(p!==0){if(a=n[n.length-1],e[a]<p){t[o]=a,n.push(o);continue}for(l=0,r=n.length-1;l<r;)i=l+r>>1,e[n[i]]<p?l=i+1:r=i;p<e[n[l]]&&(l>0&&(t[o]=n[l-1]),n[l]=o)}}for(l=n.length,r=n[l-1];l-- >0;)n[l]=r,r=t[r];return n}function Kc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Kc(t)}function Yc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const nv=Symbol.for("v-scx"),ov=()=>co(nv);function et(e,t,n){return Jc(e,t,n)}function Jc(e,t,n=Ct){const{immediate:o,deep:a,flush:l,once:r}=n,i=jt({},n),u=t&&o||!t&&l!=="post";let p;if(pl){if(l==="sync"){const m=ov();p=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=qn,m.resume=qn,m.pause=qn,m}}const c=ln;i.call=(m,_,x)=>Vn(m,c,_,x);let d=!1;l==="post"?i.scheduler=m=>{mn(m,c&&c.suspense)}:l!=="sync"&&(d=!0,i.scheduler=(m,_)=>{_?m():Wr(m)}),i.augmentJob=m=>{t&&(m.flags|=4),d&&(m.flags|=2,c&&(m.id=c.uid,m.i=c))};const h=gm(e,t,i);return pl&&(p?p.push(h):u&&h()),h}function av(e,t,n){const o=this.proxy,a=Rt(e)?e.includes(".")?Xc(o,e):()=>o[e]:e.bind(o,o);let l;qe(t)?l=t:(l=t.handler,n=t);const r=dl(this),i=Jc(a,l.bind(o),n);return r(),i}function Xc(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const lv=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${In(t)}Modifiers`]||e[`${$o(t)}Modifiers`];function sv(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Ct;let a=n;const l=t.startsWith("update:"),r=l&&lv(o,t.slice(7));r&&(r.trim&&(a=n.map(c=>Rt(c)?c.trim():c)),r.number&&(a=n.map(Jl)));let i,u=o[i=kr(t)]||o[i=kr(In(t))];!u&&l&&(u=o[i=kr($o(t))]),u&&Vn(u,e,6,a);const p=o[i+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Vn(p,e,6,a)}}const rv=new WeakMap;function Qc(e,t,n=!1){const o=n?rv:t.emitsCache,a=o.get(e);if(a!==void 0)return a;const l=e.emits;let r={},i=!1;if(!qe(e)){const u=p=>{const c=Qc(p,t,!0);c&&(i=!0,jt(r,c))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!l&&!i?(Et(e)&&o.set(e,null),null):(Ue(l)?l.forEach(u=>r[u]=null):jt(r,l),Et(e)&&o.set(e,r),r)}function ys(e,t){return!e||!Gl(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,$o(t))||vt(e,t))}function _I(){}function Zc(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[l],slots:r,attrs:i,emit:u,render:p,renderCache:c,props:d,data:h,setupState:m,ctx:_,inheritAttrs:x}=e,k=cs(e);let T,D;try{if(n.shapeFlag&4){const S=a||o,P=S;T=Xn(p.call(P,S,c,d,m,h,_)),D=i}else{const S=t;T=Xn(S.length>1?S(d,{attrs:i,slots:r,emit:u}):S(d,null)),D=t.props?i:iv(i)}}catch(S){il.length=0,is(S,e,1),T=He(an)}let K=T;if(D&&x!==!1){const S=Object.keys(D),{shapeFlag:P}=K;S.length&&P&7&&(l&&S.some(Sr)&&(D=uv(D,l)),K=Oo(K,D,!1,!0))}return n.dirs&&(K=Oo(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(n.dirs):n.dirs),n.transition&&ea(K,n.transition),T=K,cs(k),T}const iv=e=>{let t;for(const n in e)(n==="class"||n==="style"||Gl(n))&&((t||(t={}))[n]=e[n]);return t},uv=(e,t)=>{const n={};for(const o in e)(!Sr(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function cv(e,t,n){const{props:o,children:a,component:l}=e,{props:r,children:i,patchFlag:u}=t,p=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return o?ed(o,r,p):!!r;if(u&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(r[h]!==o[h]&&!ys(p,h))return!0}}}else return(a||i)&&(!i||!i.$stable)?!0:o===r?!1:o?r?ed(o,r,p):!0:!!r;return!1}function ed(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const l=o[a];if(t[l]!==e[l]&&!ys(n,l))return!0}return!1}function dv({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const td=e=>e.__isSuspense;function pv(e,t){t&&t.pendingBranch?Ue(e)?t.effects.push(...e):t.effects.push(e):wm(e)}const De=Symbol.for("v-fgt"),rl=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),ti=Symbol.for("v-stc"),il=[];let Cn=null;function b(e=!1){il.push(Cn=e?null:[])}function fv(){il.pop(),Cn=il[il.length-1]||null}let ul=1;function bs(e,t=!1){ul+=e,e<0&&Cn&&t&&(Cn.hasOnce=!0)}function nd(e){return e.dynamicChildren=ul>0?Cn||ga:null,fv(),ul>0&&Cn&&Cn.push(e),e}function E(e,t,n,o,a,l){return nd(s(e,t,n,o,a,l,!0))}function xt(e,t,n,o,a){return nd(He(e,t,n,o,a,!0))}function cl(e){return e?e.__v_isVNode===!0:!1}function oa(e,t){return e.type===t.type&&e.key===t.key}const od=({key:e})=>e??null,ws=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Nt(e)||qe(e)?{i:en,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,a=null,l=e===De?0:1,r=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&od(t),ref:t&&ws(t),scopeId:cc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:en};return i?(ni(u,n),l&128&&e.normalize(u)):n&&(u.shapeFlag|=Rt(n)?8:16),ul>0&&!r&&Cn&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&Cn.push(u),u}const He=gv;function gv(e,t=null,n=null,o=0,a=null,l=!1){if((!e||e===Rm)&&(e=an),cl(e)){const i=Oo(e,t,!0);return n&&ni(i,n),ul>0&&!l&&Cn&&(i.shapeFlag&6?Cn[Cn.indexOf(e)]=i:Cn.push(i)),i.patchFlag=-2,i}if(Cv(e)&&(e=e.__vccOpts),t){t=mv(t);let{class:i,style:u}=t;i&&!Rt(i)&&(t.class=$e(i)),Et(u)&&(Br(u)&&!Ue(u)&&(u=jt({},u)),t.style=gt(u))}const r=Rt(e)?1:td(e)?128:pc(e)?64:Et(e)?4:qe(e)?2:0;return s(e,t,n,o,a,r,l,!0)}function mv(e){return e?Br(e)||Vc(e)?jt({},e):e:null}function Oo(e,t,n=!1,o=!1){const{props:a,ref:l,patchFlag:r,children:i,transition:u}=e,p=t?vv(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&od(p),ref:t&&t.ref?n&&l?Ue(l)?l.concat(ws(t)):[l,ws(t)]:ws(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==De?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Oo(e.ssContent),ssFallback:e.ssFallback&&Oo(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&o&&ea(c,u.clone(c)),c}function je(e=" ",t=0){return He(rl,null,e,t)}function ce(e="",t=!1){return t?(b(),xt(an,null,e)):He(an,null,e)}function Xn(e){return e==null||typeof e=="boolean"?He(an):Ue(e)?He(De,null,e.slice()):cl(e)?Ro(e):He(rl,null,String(e))}function Ro(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Oo(e)}function ni(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(Ue(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),ni(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!Vc(t)?t._ctx=en:a===3&&en&&(en.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else qe(t)?(t={default:t,_ctx:en},n=32):(t=String(t),o&64?(n=16,t=[je(t)]):n=8);e.children=t,e.shapeFlag|=n}function vv(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=$e([t.class,o.class]));else if(a==="style")t.style=gt([t.style,o.style]);else if(Gl(a)){const l=t[a],r=o[a];r&&l!==r&&!(Ue(l)&&l.includes(r))&&(t[a]=l?[].concat(l,r):r)}else a!==""&&(t[a]=o[a])}return t}function Qn(e,t,n,o=null){Vn(e,t,7,[n,o])}const hv=Fc();let _v=0;function yv(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||hv,l={uid:_v++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ru(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zc(o,a),emitsOptions:Qc(o,a),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:o.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=sv.bind(null,l),e.ce&&e.ce(l),l}let ln=null;const po=()=>ln||en;let Ss,oi;{const e=Xl(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),l=>{a.length>1?a.forEach(r=>r(l)):a[0](l)}};Ss=t("__VUE_INSTANCE_SETTERS__",n=>ln=n),oi=t("__VUE_SSR_SETTERS__",n=>pl=n)}const dl=e=>{const t=ln;return Ss(e),e.scope.on(),()=>{e.scope.off(),Ss(t)}},ad=()=>{ln&&ln.scope.off(),Ss(null)};function ld(e){return e.vnode.shapeFlag&4}let pl=!1;function bv(e,t=!1,n=!1){t&&oi(t);const{props:o,children:a}=e.vnode,l=ld(e);Gm(e,o,l,t),Jm(e,a,n||t);const r=l?wv(e,t):void 0;return t&&oi(!1),r}function wv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Pm);const{setup:o}=n;if(o){Kn();const a=e.setupContext=o.length>1?xv(e):null,l=dl(e),r=_a(o,e,0,[e.props,a]),i=Eu(r);if(Yn(),l(),(i||e.sp)&&!wa(e)&&kc(e),i){if(r.then(ad,ad),t)return r.then(u=>{sd(e,u)}).catch(u=>{is(u,e,0)});e.asyncDep=r}else sd(e,r)}else rd(e)}function sd(e,t,n){qe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=oc(t)),rd(e)}function rd(e,t,n){const o=e.type;e.render||(e.render=o.render||qn);{const a=dl(e);Kn();try{Fm(e)}finally{Yn(),a()}}}const Sv={get(e,t){return on(e,"get",""),e[t]}};function xv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Sv),slots:e.slots,emit:e.emit,expose:t}}function xs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(oc(Ur(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ll)return ll[n](e)},has(t,n){return n in t||n in ll}})):e.proxy}const Tv=/(?:^|[-_])\w/g,kv=e=>e.replace(Tv,t=>t.toUpperCase()).replace(/[-_]/g,"");function id(e,t=!0){return qe(e)?e.displayName||e.name:e.name||t&&e.__name}function ud(e,t,n=!1){let o=id(t);if(!o&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(o=a[1])}if(!o&&e&&e.parent){const a=l=>{for(const r in l)if(l[r]===t)return r};o=a(e.components||e.parent.type.components)||a(e.appContext.components)}return o?kv(o):n?"App":"Anonymous"}function Cv(e){return qe(e)&&"__vccOpts"in e}const nt=(e,t)=>pm(e,t,pl);function $t(e,t,n){const o=(l,r,i)=>{bs(-1);try{return He(l,r,i)}finally{bs(1)}},a=arguments.length;return a===2?Et(t)&&!Ue(t)?cl(t)?o(e,null,[t]):o(e,t):o(e,null,t):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&cl(n)&&(n=[n]),o(e,t,n))}const Ev="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ai;const cd=typeof window<"u"&&window.trustedTypes;if(cd)try{ai=cd.createPolicy("vue",{createHTML:e=>e})}catch{}const dd=ai?e=>ai.createHTML(e):e=>e,$v="http://www.w3.org/2000/svg",Lv="http://www.w3.org/1998/Math/MathML",fo=typeof document<"u"?document:null,pd=fo&&fo.createElement("template"),Av={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?fo.createElementNS($v,e):t==="mathml"?fo.createElementNS(Lv,e):n?fo.createElement(e,{is:n}):fo.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>fo.createTextNode(e),createComment:e=>fo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>fo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,l){const r=n?n.previousSibling:t.lastChild;if(a&&(a===l||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===l||!(a=a.nextSibling)););else{pd.innerHTML=dd(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=pd.content;if(o==="svg"||o==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},No="transition",fl="animation",Sa=Symbol("_vtc"),fd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gd=jt({},bc,fd),Ts=(e=>(e.displayName="Transition",e.props=gd,e))((e,{slots:t})=>$t(Tm,vd(e),t)),aa=(e,t=[])=>{Ue(e)?e.forEach(n=>n(...t)):e&&e(...t)},md=e=>e?Ue(e)?e.some(t=>t.length>1):e.length>1:!1;function vd(e){const t={};for(const R in e)R in fd||(t[R]=e[R]);if(e.css===!1)return t;const{name:n="v",type:o,duration:a,enterFromClass:l=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:u=l,appearActiveClass:p=r,appearToClass:c=i,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,_=Mv(a),x=_&&_[0],k=_&&_[1],{onBeforeEnter:T,onEnter:D,onEnterCancelled:K,onLeave:S,onLeaveCancelled:P,onBeforeAppear:j=T,onAppear:G=D,onAppearCancelled:q=K}=t,Y=(R,Z,te,z)=>{R._enterCancelled=z,Po(R,Z?c:i),Po(R,Z?p:r),te&&te()},_e=(R,Z)=>{R._isLeaving=!1,Po(R,d),Po(R,m),Po(R,h),Z&&Z()},se=R=>(Z,te)=>{const z=R?G:D,ne=()=>Y(Z,R,te);aa(z,[Z,ne]),hd(()=>{Po(Z,R?u:l),Zn(Z,R?c:i),md(z)||_d(Z,o,x,ne)})};return jt(t,{onBeforeEnter(R){aa(T,[R]),Zn(R,l),Zn(R,r)},onBeforeAppear(R){aa(j,[R]),Zn(R,u),Zn(R,p)},onEnter:se(!1),onAppear:se(!0),onLeave(R,Z){R._isLeaving=!0;const te=()=>_e(R,Z);Zn(R,d),R._enterCancelled?(Zn(R,h),si()):(si(),Zn(R,h)),hd(()=>{R._isLeaving&&(Po(R,d),Zn(R,m),md(S)||_d(R,o,k,te))}),aa(S,[R,te])},onEnterCancelled(R){Y(R,!1,void 0,!0),aa(K,[R])},onAppearCancelled(R){Y(R,!0,void 0,!0),aa(q,[R])},onLeaveCancelled(R){_e(R),aa(P,[R])}})}function Mv(e){if(e==null)return null;if(Et(e))return[li(e.enter),li(e.leave)];{const t=li(e);return[t,t]}}function li(e){return M1(e)}function Zn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Sa]||(e[Sa]=new Set)).add(t)}function Po(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[Sa];n&&(n.delete(t),n.size||(e[Sa]=void 0))}function hd(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Iv=0;function _d(e,t,n,o){const a=e._endId=++Iv,l=()=>{a===e._endId&&o()};if(n!=null)return setTimeout(l,n);const{type:r,timeout:i,propCount:u}=yd(e,t);if(!r)return o();const p=r+"end";let c=0;const d=()=>{e.removeEventListener(p,h),l()},h=m=>{m.target===e&&++c>=u&&d()};setTimeout(()=>{c<u&&d()},i+1),e.addEventListener(p,h)}function yd(e,t){const n=window.getComputedStyle(e),o=_=>(n[_]||"").split(", "),a=o(`${No}Delay`),l=o(`${No}Duration`),r=bd(a,l),i=o(`${fl}Delay`),u=o(`${fl}Duration`),p=bd(i,u);let c=null,d=0,h=0;t===No?r>0&&(c=No,d=r,h=l.length):t===fl?p>0&&(c=fl,d=p,h=u.length):(d=Math.max(r,p),c=d>0?r>p?No:fl:null,h=c?c===No?l.length:u.length:0);const m=c===No&&/\b(?:transform|all)(?:,|$)/.test(o(`${No}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:m}}function bd(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>wd(n)+wd(e[o])))}function wd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function si(){return document.body.offsetHeight}function Dv(e,t,n){const o=e[Sa];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ks=Symbol("_vod"),Sd=Symbol("_vsh"),gl={name:"show",beforeMount(e,{value:t},{transition:n}){e[ks]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ml(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),ml(e,!0),o.enter(e)):o.leave(e,()=>{ml(e,!1)}):ml(e,t))},beforeUnmount(e,{value:t}){ml(e,t)}};function ml(e,t){e.style.display=t?e[ks]:"none",e[Sd]=!t}const Ov=Symbol(""),Rv=/(?:^|;)\s*display\s*:/;function Nv(e,t,n){const o=e.style,a=Rt(n);let l=!1;if(n&&!a){if(t)if(Rt(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();n[i]==null&&Cs(o,i,"")}else for(const r in t)n[r]==null&&Cs(o,r,"");for(const r in n)r==="display"&&(l=!0),Cs(o,r,n[r])}else if(a){if(t!==n){const r=o[Ov];r&&(n+=";"+r),o.cssText=n,l=Rv.test(n)}}else t&&e.removeAttribute("style");ks in e&&(e[ks]=l?o.display:"",e[Sd]&&(o.display="none"))}const xd=/\s*!important$/;function Cs(e,t,n){if(Ue(n))n.forEach(o=>Cs(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Pv(e,t);xd.test(n)?e.setProperty($o(o),n.replace(xd,""),"important"):e[o]=n}}const Td=["Webkit","Moz","ms"],ri={};function Pv(e,t){const n=ri[t];if(n)return n;let o=In(t);if(o!=="filter"&&o in e)return ri[t]=o;o=Kl(o);for(let a=0;a<Td.length;a++){const l=Td[a]+o;if(l in e)return ri[t]=l}return t}const kd="http://www.w3.org/1999/xlink";function Cd(e,t,n,o,a,l=N1(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(kd,t.slice(6,t.length)):e.setAttributeNS(kd,t,n):n==null||l&&!Iu(n)?e.removeAttribute(t):e.setAttribute(t,l?"":Bn(n)?String(n):n)}function Ed(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dd(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const i=l==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(i!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=Iu(n):n==null&&i==="string"?(n="",r=!0):i==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(a||t)}function go(e,t,n,o){e.addEventListener(t,n,o)}function Fv(e,t,n,o){e.removeEventListener(t,n,o)}const $d=Symbol("_vei");function Bv(e,t,n,o,a=null){const l=e[$d]||(e[$d]={}),r=l[t];if(o&&r)r.value=o;else{const[i,u]=Uv(t);if(o){const p=l[t]=zv(o,a);go(e,i,p,u)}else r&&(Fv(e,i,r,u),l[t]=void 0)}}const Ld=/(?:Once|Passive|Capture)$/;function Uv(e){let t;if(Ld.test(e)){t={};let o;for(;o=e.match(Ld);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$o(e.slice(2)),t]}let ii=0;const Vv=Promise.resolve(),Wv=()=>ii||(Vv.then(()=>ii=0),ii=Date.now());function zv(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Vn(Hv(o,n.value),t,5,[o])};return n.value=e,n.attached=Wv(),n}function Hv(e,t){if(Ue(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const Ad=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,jv=(e,t,n,o,a,l)=>{const r=a==="svg";t==="class"?Dv(e,o,r):t==="style"?Nv(e,n,o):Gl(t)?Sr(t)||Bv(e,t,n,o,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Gv(e,t,o,r))?(Ed(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Cd(e,t,o,r,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Rt(o))?Ed(e,In(t),o,l,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Cd(e,t,o,r))};function Gv(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ad(t)&&qe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Ad(t)&&Rt(n)?!1:t in e}const Md=new WeakMap,Id=new WeakMap,Es=Symbol("_moveCb"),Dd=Symbol("_enterCb"),qv=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:jt({},gd,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=po(),o=yc();let a,l;return Lc(()=>{if(!a.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!Xv(a[0].el,n.vnode.el,r)){a=[];return}a.forEach(Kv),a.forEach(Yv);const i=a.filter(Jv);si(),i.forEach(u=>{const p=u.el,c=p.style;Zn(p,r),c.transform=c.webkitTransform=c.transitionDuration="";const d=p[Es]=h=>{h&&h.target!==p||(!h||h.propertyName.endsWith("transform"))&&(p.removeEventListener("transitionend",d),p[Es]=null,Po(p,r))};p.addEventListener("transitionend",d)}),a=[]}),()=>{const r=st(e),i=vd(r);let u=r.tag||De;if(a=[],l)for(let p=0;p<l.length;p++){const c=l[p];c.el&&c.el instanceof Element&&(a.push(c),ea(c,nl(c,i,o,n)),Md.set(c,c.el.getBoundingClientRect()))}l=t.default?jr(t.default()):[];for(let p=0;p<l.length;p++){const c=l[p];c.key!=null&&ea(c,nl(c,i,o,n))}return He(u,null,l)}}});function Kv(e){const t=e.el;t[Es]&&t[Es](),t[Dd]&&t[Dd]()}function Yv(e){Id.set(e,e.el.getBoundingClientRect())}function Jv(e){const t=Md.get(e),n=Id.get(e),o=t.left-n.left,a=t.top-n.top;if(o||a){const l=e.el.style;return l.transform=l.webkitTransform=`translate(${o}px,${a}px)`,l.transitionDuration="0s",e}}function Xv(e,t,n){const o=e.cloneNode(),a=e[Sa];a&&a.forEach(i=>{i.split(/\s+/).forEach(u=>u&&o.classList.remove(u))}),n.split(/\s+/).forEach(i=>i&&o.classList.add(i)),o.style.display="none";const l=t.nodeType===1?t:t.parentNode;l.appendChild(o);const{hasTransform:r}=yd(o);return l.removeChild(o),r}const Fo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ue(t)?n=>Yl(t,n):t};function Qv(e){e.target.composing=!0}function Od(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Nn=Symbol("_assign"),Le={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[Nn]=Fo(a);const l=o||a.props&&a.props.type==="number";go(e,t?"change":"input",r=>{if(r.target.composing)return;let i=e.value;n&&(i=i.trim()),l&&(i=Jl(i)),e[Nn](i)}),n&&go(e,"change",()=>{e.value=e.value.trim()}),t||(go(e,"compositionstart",Qv),go(e,"compositionend",Od),go(e,"change",Od))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:l}},r){if(e[Nn]=Fo(r),e.composing)return;const i=(l||e.type==="number")&&!/^0\d/.test(e.value)?Jl(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===u)||(e.value=u))}},Mt={deep:!0,created(e,t,n){e[Nn]=Fo(n),go(e,"change",()=>{const o=e._modelValue,a=xa(e),l=e.checked,r=e[Nn];if(Ue(o)){const i=Cr(o,a),u=i!==-1;if(l&&!u)r(o.concat(a));else if(!l&&u){const p=[...o];p.splice(i,1),r(p)}}else if(va(o)){const i=new Set(o);l?i.add(a):i.delete(a),r(i)}else r(Pd(e,l))})},mounted:Rd,beforeUpdate(e,t,n){e[Nn]=Fo(n),Rd(e,t,n)}};function Rd(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(Ue(t))a=Cr(t,o.props.value)>-1;else if(va(t))a=t.has(o.props.value);else{if(t===n)return;a=Jo(t,Pd(e,!0))}e.checked!==a&&(e.checked=a)}const mo={created(e,{value:t},n){e.checked=Jo(t,n.props.value),e[Nn]=Fo(n),go(e,"change",()=>{e[Nn](xa(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[Nn]=Fo(o),t!==n&&(e.checked=Jo(t,o.props.value))}},Gt={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=va(t);go(e,"change",()=>{const l=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?Jl(xa(r)):xa(r));e[Nn](e.multiple?a?new Set(l):l:l[0]),e._assigning=!0,Ke(()=>{e._assigning=!1})}),e[Nn]=Fo(o)},mounted(e,{value:t}){Nd(e,t)},beforeUpdate(e,t,n){e[Nn]=Fo(n)},updated(e,{value:t}){e._assigning||Nd(e,t)}};function Nd(e,t){const n=e.multiple,o=Ue(t);if(!(n&&!o&&!va(t))){for(let a=0,l=e.options.length;a<l;a++){const r=e.options[a],i=xa(r);if(n)if(o){const u=typeof i;u==="string"||u==="number"?r.selected=t.some(p=>String(p)===String(i)):r.selected=Cr(t,i)>-1}else r.selected=t.has(i);else if(Jo(xa(r),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function xa(e){return"_value"in e?e._value:e.value}function Pd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Fd={created(e,t,n){$s(e,t,n,null,"created")},mounted(e,t,n){$s(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){$s(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){$s(e,t,n,o,"updated")}};function Zv(e,t){switch(e){case"SELECT":return Gt;case"TEXTAREA":return Le;default:switch(t){case"checkbox":return Mt;case"radio":return mo;default:return Le}}}function $s(e,t,n,o,a){const r=Zv(e.tagName,n.props&&n.props.type)[a];r&&r(e,t,n,o)}const eh=["ctrl","shift","alt","meta"],th={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>eh.some(n=>e[`${n}Key`]&&!t.includes(n))},Ze=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((a,...l)=>{for(let r=0;r<t.length;r++){const i=th[t[r]];if(i&&i(a,t))return}return e(a,...l)}))},nh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},sn=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(a=>{if(!("key"in a))return;const l=$o(a.key);if(t.some(r=>r===l||nh[r]===l))return e(a)}))},oh=jt({patchProp:jv},Av);let Bd;function Ud(){return Bd||(Bd=Qm(oh))}const Vd=((...e)=>{Ud().render(...e)}),ah=((...e)=>{const t=Ud().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=sh(o);if(!a)return;const l=t._component;!qe(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const r=n(a,!1,lh(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),r},t});function lh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function sh(e){return Rt(e)?document.querySelector(e):e}/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function rh(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Ls=typeof window<"u",Bo=(e,t=!1)=>t?Symbol.for(e):Symbol(e),ih=(e,t,n)=>uh({l:e,k:t,s:n}),uh=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Vt=e=>typeof e=="number"&&isFinite(e),ch=e=>ui(e)==="[object Date]",Ta=e=>ui(e)==="[object RegExp]",As=e=>ot(e)&&Object.keys(e).length===0,qt=Object.assign,dh=Object.create,Tt=(e=null)=>dh(e);let Wd;const la=()=>Wd||(Wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Tt());function zd(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Hd(e){return e.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ph(e){return e=e.replace(/(\w+)\s*=\s*"([^"]*)"/g,(o,a,l)=>`${a}="${Hd(l)}"`),e=e.replace(/(\w+)\s*=\s*'([^']*)'/g,(o,a,l)=>`${a}='${Hd(l)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(e)&&(e=e.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(o=>{e=e.replace(o,"$1javascript&#58;")}),e}const fh=Object.prototype.hasOwnProperty;function Wn(e,t){return fh.call(e,t)}const Ft=Array.isArray,It=e=>typeof e=="function",Re=e=>typeof e=="string",pt=e=>typeof e=="boolean",mt=e=>e!==null&&typeof e=="object",gh=e=>mt(e)&&It(e.then)&&It(e.catch),jd=Object.prototype.toString,ui=e=>jd.call(e),ot=e=>ui(e)==="[object Object]",mh=e=>e==null?"":Ft(e)||ot(e)&&e.toString===jd?JSON.stringify(e,null,2):String(e);function ci(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}const Ms=e=>!mt(e)||Ft(e);function Is(e,t){if(Ms(e)||Ms(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:o,des:a}=n.pop();Object.keys(o).forEach(l=>{l!=="__proto__"&&(mt(o[l])&&!mt(a[l])&&(a[l]=Array.isArray(o[l])?[]:Tt()),Ms(a[l])||Ms(o[l])?a[l]=o[l]:n.push({src:o[l],des:a[l]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function vh(e,t,n){return{line:e,column:t,offset:n}}function di(e,t,n){return{start:e,end:t}}const ht={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},hh=17;function Ds(e,t,n={}){const{domain:o,messages:a,args:l}=n,r=e,i=new SyntaxError(String(r));return i.code=e,t&&(i.location=t),i.domain=o,i}function _h(e){throw e}const eo=" ",yh="\r",rn=`
`,bh="\u2028",wh="\u2029";function Sh(e){const t=e;let n=0,o=1,a=1,l=0;const r=G=>t[G]===yh&&t[G+1]===rn,i=G=>t[G]===rn,u=G=>t[G]===wh,p=G=>t[G]===bh,c=G=>r(G)||i(G)||u(G)||p(G),d=()=>n,h=()=>o,m=()=>a,_=()=>l,x=G=>r(G)||u(G)||p(G)?rn:t[G],k=()=>x(n),T=()=>x(n+l);function D(){return l=0,c(n)&&(o++,a=0),r(n)&&n++,n++,a++,t[n]}function K(){return r(n+l)&&l++,l++,t[n+l]}function S(){n=0,o=1,a=1,l=0}function P(G=0){l=G}function j(){const G=n+l;for(;G!==n;)D();l=0}return{index:d,line:h,column:m,peekOffset:_,charAt:x,currentChar:k,currentPeek:T,next:D,peek:K,reset:S,resetPeek:P,skipToPeek:j}}const vo=void 0,xh=".",Gd="'",Th="tokenizer";function kh(e,t={}){const n=t.location!==!1,o=Sh(e),a=()=>o.index(),l=()=>vh(o.line(),o.column(),o.index()),r=l(),i=a(),u={currentType:13,offset:i,startLoc:r,endLoc:r,lastType:13,lastOffset:i,lastStartLoc:r,lastEndLoc:r,braceNest:0,inLinked:!1,text:""},p=()=>u,{onError:c}=t;function d(L,y,O,...W){const we=p();if(y.column+=O,y.offset+=O,c){const be=n?di(we.startLoc,y):null,ee=Ds(L,be,{domain:Th,args:W});c(ee)}}function h(L,y,O){L.endLoc=l(),L.currentType=y;const W={type:y};return n&&(W.loc=di(L.startLoc,L.endLoc)),O!=null&&(W.value=O),W}const m=L=>h(L,13);function _(L,y){return L.currentChar()===y?(L.next(),y):(d(ht.EXPECTED_TOKEN,l(),0,y),"")}function x(L){let y="";for(;L.currentPeek()===eo||L.currentPeek()===rn;)y+=L.currentPeek(),L.peek();return y}function k(L){const y=x(L);return L.skipToPeek(),y}function T(L){if(L===vo)return!1;const y=L.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y===95}function D(L){if(L===vo)return!1;const y=L.charCodeAt(0);return y>=48&&y<=57}function K(L,y){const{currentType:O}=y;if(O!==2)return!1;x(L);const W=T(L.currentPeek());return L.resetPeek(),W}function S(L,y){const{currentType:O}=y;if(O!==2)return!1;x(L);const W=L.currentPeek()==="-"?L.peek():L.currentPeek(),we=D(W);return L.resetPeek(),we}function P(L,y){const{currentType:O}=y;if(O!==2)return!1;x(L);const W=L.currentPeek()===Gd;return L.resetPeek(),W}function j(L,y){const{currentType:O}=y;if(O!==7)return!1;x(L);const W=L.currentPeek()===".";return L.resetPeek(),W}function G(L,y){const{currentType:O}=y;if(O!==8)return!1;x(L);const W=T(L.currentPeek());return L.resetPeek(),W}function q(L,y){const{currentType:O}=y;if(!(O===7||O===11))return!1;x(L);const W=L.currentPeek()===":";return L.resetPeek(),W}function Y(L,y){const{currentType:O}=y;if(O!==9)return!1;const W=()=>{const be=L.currentPeek();return be==="{"?T(L.peek()):be==="@"||be==="|"||be===":"||be==="."||be===eo||!be?!1:be===rn?(L.peek(),W()):se(L,!1)},we=W();return L.resetPeek(),we}function _e(L){x(L);const y=L.currentPeek()==="|";return L.resetPeek(),y}function se(L,y=!0){const O=(we=!1,be="")=>{const ee=L.currentPeek();return ee==="{"||ee==="@"||!ee?we:ee==="|"?!(be===eo||be===rn):ee===eo?(L.peek(),O(!0,eo)):ee===rn?(L.peek(),O(!0,rn)):!0},W=O();return y&&L.resetPeek(),W}function R(L,y){const O=L.currentChar();return O===vo?vo:y(O)?(L.next(),O):null}function Z(L){const y=L.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36}function te(L){return R(L,Z)}function z(L){const y=L.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36||y===45}function ne(L){return R(L,z)}function ae(L){const y=L.charCodeAt(0);return y>=48&&y<=57}function F(L){return R(L,ae)}function B(L){const y=L.charCodeAt(0);return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function ie(L){return R(L,B)}function Ce(L){let y="",O="";for(;y=F(L);)O+=y;return O}function le(L){let y="";for(;;){const O=L.currentChar();if(O==="{"||O==="}"||O==="@"||O==="|"||!O)break;if(O===eo||O===rn)if(se(L))y+=O,L.next();else{if(_e(L))break;y+=O,L.next()}else y+=O,L.next()}return y}function de(L){k(L);let y="",O="";for(;y=ne(L);)O+=y;const W=L.currentChar();if(W&&W!=="}"&&W!==vo&&W!==eo&&W!==rn&&W!==""){const we=I(L);return d(ht.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,O+we),O+we}return L.currentChar()===vo&&d(ht.UNTERMINATED_CLOSING_BRACE,l(),0),O}function ve(L){k(L);let y="";return L.currentChar()==="-"?(L.next(),y+=`-${Ce(L)}`):y+=Ce(L),L.currentChar()===vo&&d(ht.UNTERMINATED_CLOSING_BRACE,l(),0),y}function oe(L){return L!==Gd&&L!==rn}function X(L){k(L),_(L,"'");let y="",O="";for(;y=R(L,oe);)y==="\\"?O+=M(L):O+=y;const W=L.currentChar();return W===rn||W===vo?(d(ht.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),W===rn&&(L.next(),_(L,"'")),O):(_(L,"'"),O)}function M(L){const y=L.currentChar();switch(y){case"\\":case"'":return L.next(),`\\${y}`;case"u":return U(L,y,4);case"U":return U(L,y,6);default:return d(ht.UNKNOWN_ESCAPE_SEQUENCE,l(),0,y),""}}function U(L,y,O){_(L,y);let W="";for(let we=0;we<O;we++){const be=ie(L);if(!be){d(ht.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${y}${W}${L.currentChar()}`);break}W+=be}return`\\${y}${W}`}function H(L){return L!=="{"&&L!=="}"&&L!==eo&&L!==rn}function I(L){k(L);let y="",O="";for(;y=R(L,H);)O+=y;return O}function V(L){let y="",O="";for(;y=te(L);)O+=y;return O}function C(L){const y=O=>{const W=L.currentChar();return W==="{"||W==="@"||W==="|"||W==="("||W===")"||!W||W===eo?O:(O+=W,L.next(),y(O))};return y("")}function w(L){k(L);const y=_(L,"|");return k(L),y}function N(L,y){let O=null;switch(L.currentChar()){case"{":return y.braceNest>=1&&d(ht.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),L.next(),O=h(y,2,"{"),k(L),y.braceNest++,O;case"}":return y.braceNest>0&&y.currentType===2&&d(ht.EMPTY_PLACEHOLDER,l(),0),L.next(),O=h(y,3,"}"),y.braceNest--,y.braceNest>0&&k(L),y.inLinked&&y.braceNest===0&&(y.inLinked=!1),O;case"@":return y.braceNest>0&&d(ht.UNTERMINATED_CLOSING_BRACE,l(),0),O=Q(L,y)||m(y),y.braceNest=0,O;default:{let we=!0,be=!0,ee=!0;if(_e(L))return y.braceNest>0&&d(ht.UNTERMINATED_CLOSING_BRACE,l(),0),O=h(y,1,w(L)),y.braceNest=0,y.inLinked=!1,O;if(y.braceNest>0&&(y.currentType===4||y.currentType===5||y.currentType===6))return d(ht.UNTERMINATED_CLOSING_BRACE,l(),0),y.braceNest=0,fe(L,y);if(we=K(L,y))return O=h(y,4,de(L)),k(L),O;if(be=S(L,y))return O=h(y,5,ve(L)),k(L),O;if(ee=P(L,y))return O=h(y,6,X(L)),k(L),O;if(!we&&!be&&!ee)return O=h(y,12,I(L)),d(ht.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,O.value),k(L),O;break}}return O}function Q(L,y){const{currentType:O}=y;let W=null;const we=L.currentChar();switch((O===7||O===8||O===11||O===9)&&(we===rn||we===eo)&&d(ht.INVALID_LINKED_FORMAT,l(),0),we){case"@":return L.next(),W=h(y,7,"@"),y.inLinked=!0,W;case".":return k(L),L.next(),h(y,8,".");case":":return k(L),L.next(),h(y,9,":");default:return _e(L)?(W=h(y,1,w(L)),y.braceNest=0,y.inLinked=!1,W):j(L,y)||q(L,y)?(k(L),Q(L,y)):G(L,y)?(k(L),h(y,11,V(L))):Y(L,y)?(k(L),we==="{"?N(L,y)||W:h(y,10,C(L))):(O===7&&d(ht.INVALID_LINKED_FORMAT,l(),0),y.braceNest=0,y.inLinked=!1,fe(L,y))}}function fe(L,y){let O={type:13};if(y.braceNest>0)return N(L,y)||m(y);if(y.inLinked)return Q(L,y)||m(y);switch(L.currentChar()){case"{":return N(L,y)||m(y);case"}":return d(ht.UNBALANCED_CLOSING_BRACE,l(),0),L.next(),h(y,3,"}");case"@":return Q(L,y)||m(y);default:{if(_e(L))return O=h(y,1,w(L)),y.braceNest=0,y.inLinked=!1,O;if(se(L))return h(y,0,le(L));break}}return O}function he(){const{currentType:L,offset:y,startLoc:O,endLoc:W}=u;return u.lastType=L,u.lastOffset=y,u.lastStartLoc=O,u.lastEndLoc=W,u.offset=a(),u.startLoc=l(),o.currentChar()===vo?h(u,13):fe(o,u)}return{nextToken:he,currentOffset:a,currentPosition:l,context:p}}const Ch="parser",Eh=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function $h(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(t||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):""}}}function Lh(e={}){const t=e.location!==!1,{onError:n}=e;function o(T,D,K,S,...P){const j=T.currentPosition();if(j.offset+=S,j.column+=S,n){const G=t?di(K,j):null,q=Ds(D,G,{domain:Ch,args:P});n(q)}}function a(T,D,K){const S={type:T};return t&&(S.start=D,S.end=D,S.loc={start:K,end:K}),S}function l(T,D,K,S){t&&(T.end=D,T.loc&&(T.loc.end=K))}function r(T,D){const K=T.context(),S=a(3,K.offset,K.startLoc);return S.value=D,l(S,T.currentOffset(),T.currentPosition()),S}function i(T,D){const K=T.context(),{lastOffset:S,lastStartLoc:P}=K,j=a(5,S,P);return j.index=parseInt(D,10),T.nextToken(),l(j,T.currentOffset(),T.currentPosition()),j}function u(T,D){const K=T.context(),{lastOffset:S,lastStartLoc:P}=K,j=a(4,S,P);return j.key=D,T.nextToken(),l(j,T.currentOffset(),T.currentPosition()),j}function p(T,D){const K=T.context(),{lastOffset:S,lastStartLoc:P}=K,j=a(9,S,P);return j.value=D.replace(Eh,$h),T.nextToken(),l(j,T.currentOffset(),T.currentPosition()),j}function c(T){const D=T.nextToken(),K=T.context(),{lastOffset:S,lastStartLoc:P}=K,j=a(8,S,P);return D.type!==11?(o(T,ht.UNEXPECTED_EMPTY_LINKED_MODIFIER,K.lastStartLoc,0),j.value="",l(j,S,P),{nextConsumeToken:D,node:j}):(D.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,K.lastStartLoc,0,to(D)),j.value=D.value||"",l(j,T.currentOffset(),T.currentPosition()),{node:j})}function d(T,D){const K=T.context(),S=a(7,K.offset,K.startLoc);return S.value=D,l(S,T.currentOffset(),T.currentPosition()),S}function h(T){const D=T.context(),K=a(6,D.offset,D.startLoc);let S=T.nextToken();if(S.type===8){const P=c(T);K.modifier=P.node,S=P.nextConsumeToken||T.nextToken()}switch(S.type!==9&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(S)),S=T.nextToken(),S.type===2&&(S=T.nextToken()),S.type){case 10:S.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(S)),K.key=d(T,S.value||"");break;case 4:S.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(S)),K.key=u(T,S.value||"");break;case 5:S.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(S)),K.key=i(T,S.value||"");break;case 6:S.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(S)),K.key=p(T,S.value||"");break;default:{o(T,ht.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const P=T.context(),j=a(7,P.offset,P.startLoc);return j.value="",l(j,P.offset,P.startLoc),K.key=j,l(K,P.offset,P.startLoc),{nextConsumeToken:S,node:K}}}return l(K,T.currentOffset(),T.currentPosition()),{node:K}}function m(T){const D=T.context(),K=D.currentType===1?T.currentOffset():D.offset,S=D.currentType===1?D.endLoc:D.startLoc,P=a(2,K,S);P.items=[];let j=null;do{const Y=j||T.nextToken();switch(j=null,Y.type){case 0:Y.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(Y)),P.items.push(r(T,Y.value||""));break;case 5:Y.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(Y)),P.items.push(i(T,Y.value||""));break;case 4:Y.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(Y)),P.items.push(u(T,Y.value||""));break;case 6:Y.value==null&&o(T,ht.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,to(Y)),P.items.push(p(T,Y.value||""));break;case 7:{const _e=h(T);P.items.push(_e.node),j=_e.nextConsumeToken||null;break}}}while(D.currentType!==13&&D.currentType!==1);const G=D.currentType===1?D.lastOffset:T.currentOffset(),q=D.currentType===1?D.lastEndLoc:T.currentPosition();return l(P,G,q),P}function _(T,D,K,S){const P=T.context();let j=S.items.length===0;const G=a(1,D,K);G.cases=[],G.cases.push(S);do{const q=m(T);j||(j=q.items.length===0),G.cases.push(q)}while(P.currentType!==13);return j&&o(T,ht.MUST_HAVE_MESSAGES_IN_PLURAL,K,0),l(G,T.currentOffset(),T.currentPosition()),G}function x(T){const D=T.context(),{offset:K,startLoc:S}=D,P=m(T);return D.currentType===13?P:_(T,K,S,P)}function k(T){const D=kh(T,qt({},e)),K=D.context(),S=a(0,K.offset,K.startLoc);return t&&S.loc&&(S.loc.source=T),S.body=x(D),e.onCacheKey&&(S.cacheKey=e.onCacheKey(T)),K.currentType!==13&&o(D,ht.UNEXPECTED_LEXICAL_ANALYSIS,K.lastStartLoc,0,T[K.offset]||""),l(S,D.currentOffset(),D.currentPosition()),S}return{parse:k}}function to(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function Ah(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:l=>(n.helpers.add(l),l)}}function qd(e,t){for(let n=0;n<e.length;n++)pi(e[n],t)}function pi(e,t){switch(e.type){case 1:qd(e.cases,t),t.helper("plural");break;case 2:qd(e.items,t);break;case 6:{pi(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function Mh(e,t={}){const n=Ah(e);n.helper("normalize"),e.body&&pi(e.body,n);const o=n.context();e.helpers=Array.from(o.helpers)}function Ih(e){const t=e.body;return t.type===2?Kd(t):t.cases.forEach(n=>Kd(n)),e}function Kd(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const o=e.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;t.push(o.value)}if(t.length===e.items.length){e.static=ci(t);for(let n=0;n<e.items.length;n++){const o=e.items[n];(o.type===3||o.type===9)&&delete o.value}}}}function ka(e){switch(e.t=e.type,e.type){case 0:{const t=e;ka(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let o=0;o<n.length;o++)ka(n[o]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let o=0;o<n.length;o++)ka(n[o]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;ka(t.key),t.k=t.key,delete t.key,t.modifier&&(ka(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function Dh(e,t){const{filename:n,breakLineCode:o,needIndent:a}=t,l=t.location!==!1,r={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:a,indentLevel:0};l&&e.loc&&(r.source=e.loc.source);const i=()=>r;function u(x,k){r.code+=x}function p(x,k=!0){const T=k?o:"";u(a?T+"  ".repeat(x):T)}function c(x=!0){const k=++r.indentLevel;x&&p(k)}function d(x=!0){const k=--r.indentLevel;x&&p(k)}function h(){p(r.indentLevel)}return{context:i,push:u,indent:c,deindent:d,newline:h,helper:x=>`_${x}`,needIndent:()=>r.needIndent}}function Oh(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Ca(e,t.key),t.modifier?(e.push(", "),Ca(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function Rh(e,t){const{helper:n,needIndent:o}=e;e.push(`${n("normalize")}([`),e.indent(o());const a=t.items.length;for(let l=0;l<a&&(Ca(e,t.items[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}function Nh(e,t){const{helper:n,needIndent:o}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(o());const a=t.cases.length;for(let l=0;l<a&&(Ca(e,t.cases[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}}function Ph(e,t){t.body?Ca(e,t.body):e.push("null")}function Ca(e,t){const{helper:n}=e;switch(t.type){case 0:Ph(e,t);break;case 1:Nh(e,t);break;case 2:Rh(e,t);break;case 6:Oh(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const Fh=(e,t={})=>{const n=Re(t.mode)?t.mode:"normal",o=Re(t.filename)?t.filename:"message.intl";t.sourceMap;const a=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,l=t.needIndent?t.needIndent:n!=="arrow",r=e.helpers||[],i=Dh(e,{filename:o,breakLineCode:a,needIndent:l});i.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),i.indent(l),r.length>0&&(i.push(`const { ${ci(r.map(c=>`${c}: _${c}`),", ")} } = ctx`),i.newline()),i.push("return "),Ca(i,e),i.deindent(l),i.push("}"),delete e.helpers;const{code:u,map:p}=i.context();return{ast:e,code:u,map:p?p.toJSON():void 0}};function Bh(e,t={}){const n=qt({},t),o=!!n.jit,a=!!n.minify,l=n.optimize==null?!0:n.optimize,i=Lh(n).parse(e);return o?(l&&Ih(i),a&&ka(i),{ast:i,code:""}):(Mh(i,n),Fh(i,n))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Uh(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(la().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(la().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function no(e){return mt(e)&&fi(e)===0&&(Wn(e,"b")||Wn(e,"body"))}const Yd=["b","body"];function Vh(e){return Uo(e,Yd)}const Jd=["c","cases"];function Wh(e){return Uo(e,Jd,[])}const Xd=["s","static"];function zh(e){return Uo(e,Xd)}const Qd=["i","items"];function Hh(e){return Uo(e,Qd,[])}const Zd=["t","type"];function fi(e){return Uo(e,Zd)}const ep=["v","value"];function Os(e,t){const n=Uo(e,ep);if(n!=null)return n;throw vl(t)}const tp=["m","modifier"];function jh(e){return Uo(e,tp)}const np=["k","key"];function Gh(e){const t=Uo(e,np);if(t)return t;throw vl(6)}function Uo(e,t,n){for(let o=0;o<t.length;o++){const a=t[o];if(Wn(e,a)&&e[a]!=null)return e[a]}return n}const op=[...Yd,...Jd,...Xd,...Qd,...np,...tp,...ep,...Zd];function vl(e){return new Error(`unhandled node type: ${e}`)}function gi(e){return n=>qh(n,e)}function qh(e,t){const n=Vh(t);if(n==null)throw vl(0);if(fi(n)===1){const l=Wh(n);return e.plural(l.reduce((r,i)=>[...r,ap(e,i)],[]))}else return ap(e,n)}function ap(e,t){const n=zh(t);if(n!=null)return e.type==="text"?n:e.normalize([n]);{const o=Hh(t).reduce((a,l)=>[...a,mi(e,l)],[]);return e.normalize(o)}}function mi(e,t){const n=fi(t);switch(n){case 3:return Os(t,n);case 9:return Os(t,n);case 4:{const o=t;if(Wn(o,"k")&&o.k)return e.interpolate(e.named(o.k));if(Wn(o,"key")&&o.key)return e.interpolate(e.named(o.key));throw vl(n)}case 5:{const o=t;if(Wn(o,"i")&&Vt(o.i))return e.interpolate(e.list(o.i));if(Wn(o,"index")&&Vt(o.index))return e.interpolate(e.list(o.index));throw vl(n)}case 6:{const o=t,a=jh(o),l=Gh(o);return e.linked(mi(e,l),a?mi(e,a):void 0,e.type)}case 7:return Os(t,n);case 8:return Os(t,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Kh=e=>e;let Rs=Tt();function Yh(e,t={}){let n=!1;const o=t.onError||_h;return t.onError=a=>{n=!0,o(a)},{...Bh(e,t),detectError:n}}function Jh(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Re(e)){pt(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||Kh)(e),a=Rs[o];if(a)return a;const{ast:l,detectError:r}=Yh(e,{...t,location:!1,jit:!0}),i=gi(l);return r?i:Rs[o]=i}else{const n=e.cacheKey;if(n){const o=Rs[n];return o||(Rs[n]=gi(e))}else return gi(e)}}let hl=null;function Xh(e){hl=e}function Qh(e,t,n){hl&&hl.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const Zh=e2("function:translate");function e2(e){return t=>hl&&hl.emit(e,t)}const ho={INVALID_ARGUMENT:hh,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},t2=24;function _o(e){return Ds(e,null,void 0)}function vi(e,t){return t.locale!=null?lp(t.locale):lp(e.locale)}let hi;function lp(e){if(Re(e))return e;if(It(e)){if(e.resolvedOnce&&hi!=null)return hi;if(e.constructor.name==="Function"){const t=e();if(gh(t))throw _o(ho.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return hi=t}else throw _o(ho.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw _o(ho.NOT_SUPPORT_LOCALE_TYPE)}function n2(e,t,n){return[...new Set([n,...Ft(t)?t:mt(t)?Object.keys(t):Re(t)?[t]:[n]])]}function sp(e,t,n){const o=Re(n)?n:_l,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let l=a.__localeChainCache.get(o);if(!l){l=[];let r=[n];for(;Ft(r);)r=rp(l,r,t);const i=Ft(t)||!ot(t)?t:t.default?t.default:null;r=Re(i)?[i]:i,Ft(r)&&rp(l,r,!1),a.__localeChainCache.set(o,l)}return l}function rp(e,t,n){let o=!0;for(let a=0;a<t.length&&pt(o);a++){const l=t[a];Re(l)&&(o=o2(e,t[a],n))}return o}function o2(e,t,n){let o;const a=t.split("-");do{const l=a.join("-");o=a2(e,l,n),a.splice(-1,1)}while(a.length&&o===!0);return o}function a2(e,t,n){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(Ft(n)||ot(n))&&n[a]&&(o=n[a])}return o}const Vo=[];Vo[0]={w:[0],i:[3,0],"[":[4],o:[7]},Vo[1]={w:[1],".":[2],"[":[4],o:[7]},Vo[2]={w:[2],i:[3,0],0:[3,0]},Vo[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Vo[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Vo[5]={"'":[4,0],o:8,l:[5,0]},Vo[6]={'"':[4,0],o:8,l:[6,0]};const l2=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function s2(e){return l2.test(e)}function r2(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function i2(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function u2(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:s2(t)?r2(t):"*"+t}function c2(e){const t=[];let n=-1,o=0,a=0,l,r,i,u,p,c,d;const h=[];h[0]=()=>{r===void 0?r=i:r+=i},h[1]=()=>{r!==void 0&&(t.push(r),r=void 0)},h[2]=()=>{h[0](),a++},h[3]=()=>{if(a>0)a--,o=4,h[0]();else{if(a=0,r===void 0||(r=u2(r),r===!1))return!1;h[1]()}};function m(){const _=e[n+1];if(o===5&&_==="'"||o===6&&_==='"')return n++,i="\\"+_,h[0](),!0}for(;o!==null;)if(n++,l=e[n],!(l==="\\"&&m())){if(u=i2(l),d=Vo[o],p=d[u]||d.l||8,p===8||(o=p[0],p[1]!==void 0&&(c=h[p[1]],c&&(i=l,c()===!1))))return;if(o===7)return t}}const ip=new Map;function d2(e,t){return mt(e)?e[t]:null}function p2(e,t){if(!mt(e))return null;let n=ip.get(t);if(n||(n=c2(t),n&&ip.set(t,n)),!n)return null;const o=n.length;let a=e,l=0;for(;l<o;){const r=n[l];if(op.includes(r)&&no(a))return null;const i=a[r];if(i===void 0||It(a))return null;a=i,l++}return a}const f2="11.1.12",Ns=-1,_l="en-US",up="",cp=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function g2(){return{upper:(e,t)=>t==="text"&&Re(e)?e.toUpperCase():t==="vnode"&&mt(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Re(e)?e.toLowerCase():t==="vnode"&&mt(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Re(e)?cp(e):t==="vnode"&&mt(e)&&"__v_isVNode"in e?cp(e.children):e}}let dp;function m2(e){dp=e}let pp;function v2(e){pp=e}let fp;function h2(e){fp=e}let gp=null;const _2=e=>{gp=e},y2=()=>gp;let mp=null;const vp=e=>{mp=e},b2=()=>mp;let hp=0;function w2(e={}){const t=It(e.onWarn)?e.onWarn:rh,n=Re(e.version)?e.version:f2,o=Re(e.locale)||It(e.locale)?e.locale:_l,a=It(o)?_l:o,l=Ft(e.fallbackLocale)||ot(e.fallbackLocale)||Re(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,r=ot(e.messages)?e.messages:_i(a),i=ot(e.datetimeFormats)?e.datetimeFormats:_i(a),u=ot(e.numberFormats)?e.numberFormats:_i(a),p=qt(Tt(),e.modifiers,g2()),c=e.pluralRules||Tt(),d=It(e.missing)?e.missing:null,h=pt(e.missingWarn)||Ta(e.missingWarn)?e.missingWarn:!0,m=pt(e.fallbackWarn)||Ta(e.fallbackWarn)?e.fallbackWarn:!0,_=!!e.fallbackFormat,x=!!e.unresolving,k=It(e.postTranslation)?e.postTranslation:null,T=ot(e.processor)?e.processor:null,D=pt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,K=!!e.escapeParameter,S=It(e.messageCompiler)?e.messageCompiler:dp,P=It(e.messageResolver)?e.messageResolver:pp||d2,j=It(e.localeFallbacker)?e.localeFallbacker:fp||n2,G=mt(e.fallbackContext)?e.fallbackContext:void 0,q=e,Y=mt(q.__datetimeFormatters)?q.__datetimeFormatters:new Map,_e=mt(q.__numberFormatters)?q.__numberFormatters:new Map,se=mt(q.__meta)?q.__meta:{};hp++;const R={version:n,cid:hp,locale:o,fallbackLocale:l,messages:r,modifiers:p,pluralRules:c,missing:d,missingWarn:h,fallbackWarn:m,fallbackFormat:_,unresolving:x,postTranslation:k,processor:T,warnHtmlMessage:D,escapeParameter:K,messageCompiler:S,messageResolver:P,localeFallbacker:j,fallbackContext:G,onWarn:t,__meta:se};return R.datetimeFormats=i,R.numberFormats=u,R.__datetimeFormatters=Y,R.__numberFormatters=_e,__INTLIFY_PROD_DEVTOOLS__&&Qh(R,n,se),R}const _i=e=>({[e]:Tt()});function yi(e,t,n,o,a){const{missing:l,onWarn:r}=e;if(l!==null){const i=l(e,n,t,a);return Re(i)?i:t}else return t}function yl(e,t,n){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function S2(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function x2(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let o=n+1;o<t.length;o++)if(S2(e,t[o]))return!0;return!1}function _p(e,...t){const{datetimeFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:r}=e,{__datetimeFormatters:i}=e,[u,p,c,d]=bi(...t),h=pt(c.missingWarn)?c.missingWarn:e.missingWarn;pt(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,_=vi(e,c),x=r(e,a,_);if(!Re(u)||u==="")return new Intl.DateTimeFormat(_,d).format(p);let k={},T,D=null;const K="datetime format";for(let j=0;j<x.length&&(T=x[j],k=n[T]||{},D=k[u],!ot(D));j++)yi(e,u,T,h,K);if(!ot(D)||!Re(T))return o?Ns:u;let S=`${T}__${u}`;As(d)||(S=`${S}__${JSON.stringify(d)}`);let P=i.get(S);return P||(P=new Intl.DateTimeFormat(T,qt({},D,d)),i.set(S,P)),m?P.formatToParts(p):P.format(p)}const yp=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function bi(...e){const[t,n,o,a]=e,l=Tt();let r=Tt(),i;if(Re(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw _o(ho.INVALID_ISO_DATE_ARGUMENT);const p=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();i=new Date(p);try{i.toISOString()}catch{throw _o(ho.INVALID_ISO_DATE_ARGUMENT)}}else if(ch(t)){if(isNaN(t.getTime()))throw _o(ho.INVALID_DATE_ARGUMENT);i=t}else if(Vt(t))i=t;else throw _o(ho.INVALID_ARGUMENT);return Re(n)?l.key=n:ot(n)&&Object.keys(n).forEach(u=>{yp.includes(u)?r[u]=n[u]:l[u]=n[u]}),Re(o)?l.locale=o:ot(o)&&(r=o),ot(a)&&(r=a),[l.key||"",i,l,r]}function bp(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__datetimeFormatters.has(l)&&o.__datetimeFormatters.delete(l)}}function wp(e,...t){const{numberFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:r}=e,{__numberFormatters:i}=e,[u,p,c,d]=wi(...t),h=pt(c.missingWarn)?c.missingWarn:e.missingWarn;pt(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,_=vi(e,c),x=r(e,a,_);if(!Re(u)||u==="")return new Intl.NumberFormat(_,d).format(p);let k={},T,D=null;const K="number format";for(let j=0;j<x.length&&(T=x[j],k=n[T]||{},D=k[u],!ot(D));j++)yi(e,u,T,h,K);if(!ot(D)||!Re(T))return o?Ns:u;let S=`${T}__${u}`;As(d)||(S=`${S}__${JSON.stringify(d)}`);let P=i.get(S);return P||(P=new Intl.NumberFormat(T,qt({},D,d)),i.set(S,P)),m?P.formatToParts(p):P.format(p)}const Sp=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function wi(...e){const[t,n,o,a]=e,l=Tt();let r=Tt();if(!Vt(t))throw _o(ho.INVALID_ARGUMENT);const i=t;return Re(n)?l.key=n:ot(n)&&Object.keys(n).forEach(u=>{Sp.includes(u)?r[u]=n[u]:l[u]=n[u]}),Re(o)?l.locale=o:ot(o)&&(r=o),ot(a)&&(r=a),[l.key||"",i,l,r]}function xp(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__numberFormatters.has(l)&&o.__numberFormatters.delete(l)}}const T2=e=>e,k2=e=>"",C2="text",E2=e=>e.length===0?"":ci(e),$2=mh;function Tp(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function L2(e){const t=Vt(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Vt(e.named.count)||Vt(e.named.n))?Vt(e.named.count)?e.named.count:Vt(e.named.n)?e.named.n:t:t}function A2(e,t){t.count||(t.count=e),t.n||(t.n=e)}function M2(e={}){const t=e.locale,n=L2(e),o=mt(e.pluralRules)&&Re(t)&&It(e.pluralRules[t])?e.pluralRules[t]:Tp,a=mt(e.pluralRules)&&Re(t)&&It(e.pluralRules[t])?Tp:void 0,l=T=>T[o(n,T.length,a)],r=e.list||[],i=T=>r[T],u=e.named||Tt();Vt(e.pluralIndex)&&A2(n,u);const p=T=>u[T];function c(T,D){const K=It(e.messages)?e.messages(T,!!D):mt(e.messages)?e.messages[T]:!1;return K||(e.parent?e.parent.message(T):k2)}const d=T=>e.modifiers?e.modifiers[T]:T2,h=ot(e.processor)&&It(e.processor.normalize)?e.processor.normalize:E2,m=ot(e.processor)&&It(e.processor.interpolate)?e.processor.interpolate:$2,_=ot(e.processor)&&Re(e.processor.type)?e.processor.type:C2,k={list:i,named:p,plural:l,linked:(T,...D)=>{const[K,S]=D;let P="text",j="";D.length===1?mt(K)?(j=K.modifier||j,P=K.type||P):Re(K)&&(j=K||j):D.length===2&&(Re(K)&&(j=K||j),Re(S)&&(P=S||P));const G=c(T,!0)(k),q=P==="vnode"&&Ft(G)&&j?G[0]:G;return j?d(j)(q,P):q},message:c,type:_,interpolate:m,normalize:h,values:qt(Tt(),r,u)};return k}const kp=()=>"",Pn=e=>It(e);function Cp(e,...t){const{fallbackFormat:n,postTranslation:o,unresolving:a,messageCompiler:l,fallbackLocale:r,messages:i}=e,[u,p]=Si(...t),c=pt(p.missingWarn)?p.missingWarn:e.missingWarn,d=pt(p.fallbackWarn)?p.fallbackWarn:e.fallbackWarn,h=pt(p.escapeParameter)?p.escapeParameter:e.escapeParameter,m=!!p.resolvedMessage,_=Re(p.default)||pt(p.default)?pt(p.default)?l?u:()=>u:p.default:n?l?u:()=>u:null,x=n||_!=null&&(Re(_)||It(_)),k=vi(e,p);h&&I2(p);let[T,D,K]=m?[u,k,i[k]||Tt()]:Ep(e,u,k,r,d,c),S=T,P=u;if(!m&&!(Re(S)||no(S)||Pn(S))&&x&&(S=_,P=S),!m&&(!(Re(S)||no(S)||Pn(S))||!Re(D)))return a?Ns:u;let j=!1;const G=()=>{j=!0},q=Pn(S)?S:$p(e,u,D,S,P,G);if(j)return S;const Y=R2(e,D,K,p),_e=M2(Y),se=D2(e,q,_e);let R=o?o(se,u):se;if(h&&Re(R)&&(R=ph(R)),__INTLIFY_PROD_DEVTOOLS__){const Z={timestamp:Date.now(),key:Re(u)?u:Pn(S)?S.key:"",locale:D||(Pn(S)?S.locale:""),format:Re(S)?S:Pn(S)?S.source:"",message:R};Z.meta=qt({},e.__meta,y2()||{}),Zh(Z)}return R}function I2(e){Ft(e.list)?e.list=e.list.map(t=>Re(t)?zd(t):t):mt(e.named)&&Object.keys(e.named).forEach(t=>{Re(e.named[t])&&(e.named[t]=zd(e.named[t]))})}function Ep(e,t,n,o,a,l){const{messages:r,onWarn:i,messageResolver:u,localeFallbacker:p}=e,c=p(e,o,n);let d=Tt(),h,m=null;const _="translate";for(let x=0;x<c.length&&(h=c[x],d=r[h]||Tt(),(m=u(d,t))===null&&(m=d[t]),!(Re(m)||no(m)||Pn(m)));x++)if(!x2(h,c)){const k=yi(e,t,h,l,_);k!==t&&(m=k)}return[m,h,d]}function $p(e,t,n,o,a,l){const{messageCompiler:r,warnHtmlMessage:i}=e;if(Pn(o)){const p=o;return p.locale=p.locale||n,p.key=p.key||t,p}if(r==null){const p=(()=>o);return p.locale=n,p.key=t,p}const u=r(o,O2(e,n,a,o,i,l));return u.locale=n,u.key=t,u.source=o,u}function D2(e,t,n){return t(n)}function Si(...e){const[t,n,o]=e,a=Tt();if(!Re(t)&&!Vt(t)&&!Pn(t)&&!no(t))throw _o(ho.INVALID_ARGUMENT);const l=Vt(t)?String(t):(Pn(t),t);return Vt(n)?a.plural=n:Re(n)?a.default=n:ot(n)&&!As(n)?a.named=n:Ft(n)&&(a.list=n),Vt(o)?a.plural=o:Re(o)?a.default=o:ot(o)&&qt(a,o),[l,a]}function O2(e,t,n,o,a,l){return{locale:t,key:n,warnHtmlMessage:a,onError:r=>{throw l&&l(r),r},onCacheKey:r=>ih(t,n,r)}}function R2(e,t,n,o){const{modifiers:a,pluralRules:l,messageResolver:r,fallbackLocale:i,fallbackWarn:u,missingWarn:p,fallbackContext:c}=e,h={locale:t,modifiers:a,pluralRules:l,messages:(m,_)=>{let x=r(n,m);if(x==null&&(c||_)){const[,,k]=Ep(c||e,m,t,i,u,p);x=r(k,m)}if(Re(x)||no(x)){let k=!1;const D=$p(e,m,t,x,m,()=>{k=!0});return k?kp:D}else return Pn(x)?x:kp}};return e.processor&&(h.processor=e.processor),o.list&&(h.list=o.list),o.named&&(h.named=o.named),Vt(o.plural)&&(h.pluralIndex=o.plural),h}Uh();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const N2="11.1.12";function P2(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(la().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(la().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(la().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(la().__INTLIFY_PROD_DEVTOOLS__=!1)}const bn={UNEXPECTED_RETURN_TYPE:t2,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function En(e,...t){return Ds(e,null,void 0)}const xi=Bo("__translateVNode"),Ti=Bo("__datetimeParts"),ki=Bo("__numberParts"),Lp=Bo("__setPluralRules"),Ap=Bo("__injectWithOption"),Ci=Bo("__dispose");function bl(e){if(!mt(e)||no(e))return e;for(const t in e)if(Wn(e,t))if(!t.includes("."))mt(e[t])&&bl(e[t]);else{const n=t.split("."),o=n.length-1;let a=e,l=!1;for(let r=0;r<o;r++){if(n[r]==="__proto__")throw new Error(`unsafe key: ${n[r]}`);if(n[r]in a||(a[n[r]]=Tt()),!mt(a[n[r]])){l=!0;break}a=a[n[r]]}if(l||(no(a)?op.includes(n[o])||delete e[t]:(a[n[o]]=e[t],delete e[t])),!no(a)){const r=a[n[o]];mt(r)&&bl(r)}}return e}function Ei(e,t){const{messages:n,__i18n:o,messageResolver:a,flatJson:l}=t,r=ot(n)?n:Ft(o)?Tt():{[e]:Tt()};if(Ft(o)&&o.forEach(i=>{if("locale"in i&&"resource"in i){const{locale:u,resource:p}=i;u?(r[u]=r[u]||Tt(),Is(p,r[u])):Is(p,r)}else Re(i)&&Is(JSON.parse(i),r)}),a==null&&l)for(const i in r)Wn(r,i)&&bl(r[i]);return r}function Mp(e){return e.type}function Ip(e,t,n){let o=mt(t.messages)?t.messages:Tt();"__i18nGlobal"in n&&(o=Ei(e.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const a=Object.keys(o);a.length&&a.forEach(l=>{e.mergeLocaleMessage(l,o[l])});{if(mt(t.datetimeFormats)){const l=Object.keys(t.datetimeFormats);l.length&&l.forEach(r=>{e.mergeDateTimeFormat(r,t.datetimeFormats[r])})}if(mt(t.numberFormats)){const l=Object.keys(t.numberFormats);l.length&&l.forEach(r=>{e.mergeNumberFormat(r,t.numberFormats[r])})}}}function Dp(e){return He(rl,null,e,0)}const Op="__INTLIFY_META__",Rp=()=>[],F2=()=>!1;let Np=0;function Pp(e){return((t,n,o,a)=>e(n,o,po()||void 0,a))}const B2=()=>{const e=po();let t=null;return e&&(t=Mp(e)[Op])?{[Op]:t}:null};function $i(e={}){const{__root:t,__injectWithOption:n}=e,o=t===void 0,a=e.flatJson,l=Ls?v:lm;let r=pt(e.inheritLocale)?e.inheritLocale:!0;const i=l(t&&r?t.locale.value:Re(e.locale)?e.locale:_l),u=l(t&&r?t.fallbackLocale.value:Re(e.fallbackLocale)||Ft(e.fallbackLocale)||ot(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i.value),p=l(Ei(i.value,e)),c=l(ot(e.datetimeFormats)?e.datetimeFormats:{[i.value]:{}}),d=l(ot(e.numberFormats)?e.numberFormats:{[i.value]:{}});let h=t?t.missingWarn:pt(e.missingWarn)||Ta(e.missingWarn)?e.missingWarn:!0,m=t?t.fallbackWarn:pt(e.fallbackWarn)||Ta(e.fallbackWarn)?e.fallbackWarn:!0,_=t?t.fallbackRoot:pt(e.fallbackRoot)?e.fallbackRoot:!0,x=!!e.fallbackFormat,k=It(e.missing)?e.missing:null,T=It(e.missing)?Pp(e.missing):null,D=It(e.postTranslation)?e.postTranslation:null,K=t?t.warnHtmlMessage:pt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,S=!!e.escapeParameter;const P=t?t.modifiers:ot(e.modifiers)?e.modifiers:{};let j=e.pluralRules||t&&t.pluralRules,G;G=(()=>{o&&vp(null);const ee={version:N2,locale:i.value,fallbackLocale:u.value,messages:p.value,modifiers:P,pluralRules:j,missing:T===null?void 0:T,missingWarn:h,fallbackWarn:m,fallbackFormat:x,unresolving:!0,postTranslation:D===null?void 0:D,warnHtmlMessage:K,escapeParameter:S,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ee.datetimeFormats=c.value,ee.numberFormats=d.value,ee.__datetimeFormatters=ot(G)?G.__datetimeFormatters:void 0,ee.__numberFormatters=ot(G)?G.__numberFormatters:void 0;const pe=w2(ee);return o&&vp(pe),pe})(),yl(G,i.value,u.value);function Y(){return[i.value,u.value,p.value,c.value,d.value]}const _e=nt({get:()=>i.value,set:ee=>{G.locale=ee,i.value=ee}}),se=nt({get:()=>u.value,set:ee=>{G.fallbackLocale=ee,u.value=ee,yl(G,i.value,ee)}}),R=nt(()=>p.value),Z=nt(()=>c.value),te=nt(()=>d.value);function z(){return It(D)?D:null}function ne(ee){D=ee,G.postTranslation=ee}function ae(){return k}function F(ee){ee!==null&&(T=Pp(ee)),k=ee,G.missing=T}const B=(ee,pe,Oe,Ne,ze,Xe)=>{Y();let it;try{__INTLIFY_PROD_DEVTOOLS__,o||(G.fallbackContext=t?b2():void 0),it=ee(G)}finally{__INTLIFY_PROD_DEVTOOLS__,o||(G.fallbackContext=void 0)}if(Oe!=="translate exists"&&Vt(it)&&it===Ns||Oe==="translate exists"&&!it){const[wt,Ot]=pe();return t&&_?Ne(t):ze(wt)}else{if(Xe(it))return it;throw En(bn.UNEXPECTED_RETURN_TYPE)}};function ie(...ee){return B(pe=>Reflect.apply(Cp,null,[pe,...ee]),()=>Si(...ee),"translate",pe=>Reflect.apply(pe.t,pe,[...ee]),pe=>pe,pe=>Re(pe))}function Ce(...ee){const[pe,Oe,Ne]=ee;if(Ne&&!mt(Ne))throw En(bn.INVALID_ARGUMENT);return ie(pe,Oe,qt({resolvedMessage:!0},Ne||{}))}function le(...ee){return B(pe=>Reflect.apply(_p,null,[pe,...ee]),()=>bi(...ee),"datetime format",pe=>Reflect.apply(pe.d,pe,[...ee]),()=>up,pe=>Re(pe)||Ft(pe))}function de(...ee){return B(pe=>Reflect.apply(wp,null,[pe,...ee]),()=>wi(...ee),"number format",pe=>Reflect.apply(pe.n,pe,[...ee]),()=>up,pe=>Re(pe)||Ft(pe))}function ve(ee){return ee.map(pe=>Re(pe)||Vt(pe)||pt(pe)?Dp(String(pe)):pe)}const X={normalize:ve,interpolate:ee=>ee,type:"vnode"};function M(...ee){return B(pe=>{let Oe;const Ne=pe;try{Ne.processor=X,Oe=Reflect.apply(Cp,null,[Ne,...ee])}finally{Ne.processor=null}return Oe},()=>Si(...ee),"translate",pe=>pe[xi](...ee),pe=>[Dp(pe)],pe=>Ft(pe))}function U(...ee){return B(pe=>Reflect.apply(wp,null,[pe,...ee]),()=>wi(...ee),"number format",pe=>pe[ki](...ee),Rp,pe=>Re(pe)||Ft(pe))}function H(...ee){return B(pe=>Reflect.apply(_p,null,[pe,...ee]),()=>bi(...ee),"datetime format",pe=>pe[Ti](...ee),Rp,pe=>Re(pe)||Ft(pe))}function I(ee){j=ee,G.pluralRules=j}function V(ee,pe){return B(()=>{if(!ee)return!1;const Oe=Re(pe)?pe:i.value,Ne=N(Oe),ze=G.messageResolver(Ne,ee);return no(ze)||Pn(ze)||Re(ze)},()=>[ee],"translate exists",Oe=>Reflect.apply(Oe.te,Oe,[ee,pe]),F2,Oe=>pt(Oe))}function C(ee){let pe=null;const Oe=sp(G,u.value,i.value);for(let Ne=0;Ne<Oe.length;Ne++){const ze=p.value[Oe[Ne]]||{},Xe=G.messageResolver(ze,ee);if(Xe!=null){pe=Xe;break}}return pe}function w(ee){const pe=C(ee);return pe??(t?t.tm(ee)||{}:{})}function N(ee){return p.value[ee]||{}}function Q(ee,pe){if(a){const Oe={[ee]:pe};for(const Ne in Oe)Wn(Oe,Ne)&&bl(Oe[Ne]);pe=Oe[ee]}p.value[ee]=pe,G.messages=p.value}function fe(ee,pe){p.value[ee]=p.value[ee]||{};const Oe={[ee]:pe};if(a)for(const Ne in Oe)Wn(Oe,Ne)&&bl(Oe[Ne]);pe=Oe[ee],Is(pe,p.value[ee]),G.messages=p.value}function he(ee){return c.value[ee]||{}}function L(ee,pe){c.value[ee]=pe,G.datetimeFormats=c.value,bp(G,ee,pe)}function y(ee,pe){c.value[ee]=qt(c.value[ee]||{},pe),G.datetimeFormats=c.value,bp(G,ee,pe)}function O(ee){return d.value[ee]||{}}function W(ee,pe){d.value[ee]=pe,G.numberFormats=d.value,xp(G,ee,pe)}function we(ee,pe){d.value[ee]=qt(d.value[ee]||{},pe),G.numberFormats=d.value,xp(G,ee,pe)}Np++,t&&Ls&&(et(t.locale,ee=>{r&&(i.value=ee,G.locale=ee,yl(G,i.value,u.value))}),et(t.fallbackLocale,ee=>{r&&(u.value=ee,G.fallbackLocale=ee,yl(G,i.value,u.value))}));const be={id:Np,locale:_e,fallbackLocale:se,get inheritLocale(){return r},set inheritLocale(ee){r=ee,ee&&t&&(i.value=t.locale.value,u.value=t.fallbackLocale.value,yl(G,i.value,u.value))},get availableLocales(){return Object.keys(p.value).sort()},messages:R,get modifiers(){return P},get pluralRules(){return j||{}},get isGlobal(){return o},get missingWarn(){return h},set missingWarn(ee){h=ee,G.missingWarn=h},get fallbackWarn(){return m},set fallbackWarn(ee){m=ee,G.fallbackWarn=m},get fallbackRoot(){return _},set fallbackRoot(ee){_=ee},get fallbackFormat(){return x},set fallbackFormat(ee){x=ee,G.fallbackFormat=x},get warnHtmlMessage(){return K},set warnHtmlMessage(ee){K=ee,G.warnHtmlMessage=ee},get escapeParameter(){return S},set escapeParameter(ee){S=ee,G.escapeParameter=ee},t:ie,getLocaleMessage:N,setLocaleMessage:Q,mergeLocaleMessage:fe,getPostTranslationHandler:z,setPostTranslationHandler:ne,getMissingHandler:ae,setMissingHandler:F,[Lp]:I};return be.datetimeFormats=Z,be.numberFormats=te,be.rt=Ce,be.te=V,be.tm=w,be.d=le,be.n=de,be.getDateTimeFormat=he,be.setDateTimeFormat=L,be.mergeDateTimeFormat=y,be.getNumberFormat=O,be.setNumberFormat=W,be.mergeNumberFormat=we,be[Ap]=n,be[xi]=M,be[Ti]=H,be[ki]=U,be}function U2(e){const t=Re(e.locale)?e.locale:_l,n=Re(e.fallbackLocale)||Ft(e.fallbackLocale)||ot(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,o=It(e.missing)?e.missing:void 0,a=pt(e.silentTranslationWarn)||Ta(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,l=pt(e.silentFallbackWarn)||Ta(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,r=pt(e.fallbackRoot)?e.fallbackRoot:!0,i=!!e.formatFallbackMessages,u=ot(e.modifiers)?e.modifiers:{},p=e.pluralizationRules,c=It(e.postTranslation)?e.postTranslation:void 0,d=Re(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,h=!!e.escapeParameterHtml,m=pt(e.sync)?e.sync:!0;let _=e.messages;if(ot(e.sharedMessages)){const P=e.sharedMessages;_=Object.keys(P).reduce((G,q)=>{const Y=G[q]||(G[q]={});return qt(Y,P[q]),G},_||{})}const{__i18n:x,__root:k,__injectWithOption:T}=e,D=e.datetimeFormats,K=e.numberFormats,S=e.flatJson;return{locale:t,fallbackLocale:n,messages:_,flatJson:S,datetimeFormats:D,numberFormats:K,missing:o,missingWarn:a,fallbackWarn:l,fallbackRoot:r,fallbackFormat:i,modifiers:u,pluralRules:p,postTranslation:c,warnHtmlMessage:d,escapeParameter:h,messageResolver:e.messageResolver,inheritLocale:m,__i18n:x,__root:k,__injectWithOption:T}}function Li(e={}){const t=$i(U2(e)),{__extender:n}=e,o={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return pt(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=pt(a)?!a:a},get silentFallbackWarn(){return pt(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=pt(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){return Reflect.apply(t.t,t,[...a])},rt(...a){return Reflect.apply(t.rt,t,[...a])},te(a,l){return t.te(a,l)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,l){t.setLocaleMessage(a,l)},mergeLocaleMessage(a,l){t.mergeLocaleMessage(a,l)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,l){t.setDateTimeFormat(a,l)},mergeDateTimeFormat(a,l){t.mergeDateTimeFormat(a,l)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,l){t.setNumberFormat(a,l)},mergeNumberFormat(a,l){t.mergeNumberFormat(a,l)}};return o.__extender=n,o}function V2(e,t,n){return{beforeCreate(){const o=po();if(!o)throw En(bn.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const l=a.i18n;if(a.__i18n&&(l.__i18n=a.__i18n),l.__root=t,this===this.$root)this.$i18n=Fp(e,l);else{l.__injectWithOption=!0,l.__extender=n.__vueI18nExtend,this.$i18n=Li(l);const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=Fp(e,a);else{this.$i18n=Li({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&Ip(t,a,a),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$te=(l,r)=>this.$i18n.te(l,r),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=po();if(!o)throw En(bn.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),n.__deleteInstance(o),delete this.$i18n}}}function Fp(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Lp](t.pluralizationRules||e.pluralizationRules);const n=Ei(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(o=>e.mergeLocaleMessage(o,n[o])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o])),t.numberFormats&&Object.keys(t.numberFormats).forEach(o=>e.mergeNumberFormat(o,t.numberFormats[o])),e}const Ai={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function W2({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((o,a)=>[...o,...a.type===De?a.children:[a]],[]):t.reduce((n,o)=>{const a=e[o];return a&&(n[o]=a()),n},Tt())}function Bp(){return De}const Up=yn({name:"i18n-t",props:qt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Vt(e)||!isNaN(e)}},Ai),setup(e,t){const{slots:n,attrs:o}=t,a=e.i18n||_t({useScope:e.scope,__useComponent:!0});return()=>{const l=Object.keys(n).filter(d=>d[0]!=="_"),r=Tt();e.locale&&(r.locale=e.locale),e.plural!==void 0&&(r.plural=Re(e.plural)?+e.plural:e.plural);const i=W2(t,l),u=a[xi](e.keypath,i,r),p=qt(Tt(),o),c=Re(e.tag)||mt(e.tag)?e.tag:Bp();return $t(c,p,u)}}});function z2(e){return Ft(e)&&!Re(e[0])}function Vp(e,t,n,o){const{slots:a,attrs:l}=t;return()=>{const r={part:!0};let i=Tt();e.locale&&(r.locale=e.locale),Re(e.format)?r.key=e.format:mt(e.format)&&(Re(e.format.key)&&(r.key=e.format.key),i=Object.keys(e.format).reduce((h,m)=>n.includes(m)?qt(Tt(),h,{[m]:e.format[m]}):h,Tt()));const u=o(e.value,r,i);let p=[r.key];Ft(u)?p=u.map((h,m)=>{const _=a[h.type],x=_?_({[h.type]:h.value,index:m,parts:u}):[h.value];return z2(x)&&(x[0].key=`${h.type}-${m}`),x}):Re(u)&&(p=[u]);const c=qt(Tt(),l),d=Re(e.tag)||mt(e.tag)?e.tag:Bp();return $t(d,c,p)}}const Wp=yn({name:"i18n-n",props:qt({value:{type:Number,required:!0},format:{type:[String,Object]}},Ai),setup(e,t){const n=e.i18n||_t({useScope:e.scope,__useComponent:!0});return Vp(e,t,Sp,(...o)=>n[ki](...o))}});function H2(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const o=n.__getInstance(t);return o!=null?o.__composer:e.global.__composer}}function j2(e){const t=r=>{const{instance:i,value:u}=r;if(!i||!i.$)throw En(bn.UNEXPECTED_ERROR);const p=H2(e,i.$),c=zp(u);return[Reflect.apply(p.t,p,[...Hp(c)]),p]};return{created:(r,i)=>{const[u,p]=t(i);Ls&&e.global===p&&(r.__i18nWatcher=et(p.locale,()=>{i.instance&&i.instance.$forceUpdate()})),r.__composer=p,r.textContent=u},unmounted:r=>{Ls&&r.__i18nWatcher&&(r.__i18nWatcher(),r.__i18nWatcher=void 0,delete r.__i18nWatcher),r.__composer&&(r.__composer=void 0,delete r.__composer)},beforeUpdate:(r,{value:i})=>{if(r.__composer){const u=r.__composer,p=zp(i);r.textContent=Reflect.apply(u.t,u,[...Hp(p)])}},getSSRProps:r=>{const[i]=t(r);return{textContent:i}}}}function zp(e){if(Re(e))return{path:e};if(ot(e)){if(!("path"in e))throw En(bn.REQUIRED_VALUE,"path");return e}else throw En(bn.INVALID_VALUE)}function Hp(e){const{path:t,locale:n,args:o,choice:a,plural:l}=e,r={},i=o||{};return Re(n)&&(r.locale=n),Vt(a)&&(r.plural=a),Vt(l)&&(r.plural=l),[t,i,r]}function G2(e,t,...n){const o=ot(n[0])?n[0]:{};(pt(o.globalInstall)?o.globalInstall:!0)&&([Up.name,"I18nT"].forEach(l=>e.component(l,Up)),[Wp.name,"I18nN"].forEach(l=>e.component(l,Wp)),[Gp.name,"I18nD"].forEach(l=>e.component(l,Gp))),e.directive("t",j2(t))}const q2=Bo("global-vue-i18n");function K2(e={}){const t=__VUE_I18N_LEGACY_API__&&pt(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=pt(e.globalInjection)?e.globalInjection:!0,o=new Map,[a,l]=Y2(e,t),r=Bo("");function i(d){return o.get(d)||null}function u(d,h){o.set(d,h)}function p(d){o.delete(d)}const c={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(d,...h){if(d.__VUE_I18N_SYMBOL__=r,d.provide(d.__VUE_I18N_SYMBOL__,c),ot(h[0])){const x=h[0];c.__composerExtend=x.__composerExtend,c.__vueI18nExtend=x.__vueI18nExtend}let m=null;!t&&n&&(m=o_(d,c.global)),__VUE_I18N_FULL_INSTALL__&&G2(d,c,...h),__VUE_I18N_LEGACY_API__&&t&&d.mixin(V2(l,l.__composer,c));const _=d.unmount;d.unmount=()=>{m&&m(),c.dispose(),_()}},get global(){return l},dispose(){a.stop()},__instances:o,__getInstance:i,__setInstance:u,__deleteInstance:p};return c}function _t(e={}){const t=po();if(t==null)throw En(bn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw En(bn.NOT_INSTALLED);const n=J2(t),o=Q2(n),a=Mp(t),l=X2(e,a);if(l==="global")return Ip(o,e,a),o;if(l==="parent"){let u=Z2(n,t,e.__useComponent);return u==null&&(u=o),u}const r=n;let i=r.__getInstance(t);if(i==null){const u=qt({},e);"__i18n"in a&&(u.__i18n=a.__i18n),o&&(u.__root=o),i=$i(u),r.__composerExtend&&(i[Ci]=r.__composerExtend(i)),t_(r,t,i),r.__setInstance(t,i)}return i}function Y2(e,t){const n=$r(),o=__VUE_I18N_LEGACY_API__&&t?n.run(()=>Li(e)):n.run(()=>$i(e));if(o==null)throw En(bn.UNEXPECTED_ERROR);return[n,o]}function J2(e){const t=co(e.isCE?q2:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw En(e.isCE?bn.NOT_INSTALLED_WITH_PROVIDE:bn.UNEXPECTED_ERROR);return t}function X2(e,t){return As(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function Q2(e){return e.mode==="composition"?e.global:e.global.__composer}function Z2(e,t,n=!1){let o=null;const a=t.root;let l=e_(t,n);for(;l!=null;){const r=e;if(e.mode==="composition")o=r.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const i=r.__getInstance(l);i!=null&&(o=i.__composer,n&&o&&!o[Ap]&&(o=null))}if(o!=null||a===l)break;l=l.parent}return o}function e_(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function t_(e,t,n){ct(()=>{},t),Rn(()=>{const o=n;e.__deleteInstance(t);const a=o[Ci];a&&(a(),delete o[Ci])},t)}const n_=["locale","fallbackLocale","availableLocales"],jp=["t","rt","d","n","tm","te"];function o_(e,t){const n=Object.create(null);return n_.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l)throw En(bn.UNEXPECTED_ERROR);const r=Nt(l.value)?{get(){return l.value.value},set(i){l.value.value=i}}:{get(){return l.get&&l.get()}};Object.defineProperty(n,a,r)}),e.config.globalProperties.$i18n=n,jp.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l||!l.value)throw En(bn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,l)}),()=>{delete e.config.globalProperties.$i18n,jp.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}const Gp=yn({name:"i18n-d",props:qt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Ai),setup(e,t){const n=e.i18n||_t({useScope:e.scope,__useComponent:!0});return Vp(e,t,yp,(...o)=>n[Ti](...o))}});if(P2(),m2(Jh),v2(p2),h2(sp),__INTLIFY_PROD_DEVTOOLS__){const e=la();e.__INTLIFY__=!0,Xh(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const yt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},a_={class:"weilin_prompt_ui_window-title"},l_=["title"],$n=yt({__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const n=e,{t:o}=_t(),a=t,l=v({x:0,y:0}),r=v({width:600,height:400});et(()=>n.position,j=>{j&&(l.value={...j},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_position`},"*"))},{immediate:!0,deep:!0}),et(()=>n.size,j=>{j&&(r.value={...j},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_size`},"*"))},{immediate:!0,deep:!0});const i=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_scroll`},"*")};ct(()=>{var j;if(n.position){const G=window.innerWidth,q=window.innerHeight,Y=100;let _e=n.position.x,se=n.position.y;_e=Math.max(Y-(((j=n.size)==null?void 0:j.width)||r.value.width),_e),_e=Math.min(_e,G-100),se=Math.max(100,se),se=Math.min(se,q-100),l.value={x:_e,y:se}}n.size&&(r.value={...n.size})});const u=v(!1),p=v({x:0,y:0}),c=j=>{u.value=!0,p.value={x:j.clientX-l.value.x,y:j.clientY-l.value.y},document.addEventListener("mousemove",d),document.addEventListener("mouseup",h)},d=j=>{if(u.value){const G=window.innerWidth,q=window.innerHeight,Y=100;let _e=j.clientX-p.value.x,se=j.clientY-p.value.y;_e=Math.max(Y-r.value.width,_e),_e=Math.min(_e,G-100),se=Math.max(100,se),se=Math.min(se,q-100);const R={x:_e,y:se};l.value=R,a("update:position",R)}},h=()=>{u.value=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)},m=v(!1),_=v({x:0,y:0}),x=v({width:0,height:0}),k=j=>{m.value=!0,_.value={x:j.clientX,y:j.clientY},x.value={...r.value},document.addEventListener("mousemove",T),document.addEventListener("mouseup",D)},T=j=>{if(m.value){const G=j.clientX-_.value.x,q=j.clientY-_.value.y,Y={width:Math.max(200,x.value.width+G),height:Math.max(200,x.value.height+q)};r.value=Y,a("update:size",Y)}},D=()=>{m.value=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",D)},K=()=>{a("active")},S=()=>{a("close")},P=j=>{K(),c(j)};return(j,G)=>(b(),xt(hc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[s("div",{class:"weilin_prompt_ui_draggable-window",style:gt({left:`${l.value.x}px`,top:`${l.value.y}px`,width:`${r.value.width}px`,height:`${r.value.height}px`,zIndex:e.zIndex}),onMousedown:K},[s("div",{class:"weilin_prompt_ui_window-header",onMousedown:Ze(P,["stop"])},[s("div",a_,g(e.title),1),s("button",{class:"weilin_prompt_ui_close-btn",onClick:S},"")],32),s("div",{class:"weilin_prompt_ui_window-content",onScroll:i},[al(j.$slots,"default",{},void 0,!0)],32),s("div",{class:"weilin_prompt_ui_resize-handle",title:f(o)("common.windowSize"),onMousedown:Ze(k,["stop"])},null,40,l_)],36)]))}},[["__scopeId","data-v-cbc46280"]]),yo="v0.0.71",s_={promptBox:{placeholder:"...",delete:"",newline:"",tab:"",windowTitle:"WeiLinUI "+yo,windowTitleGlobal:"WeiLinUI "+yo,translate:"",translatePlaceholder:",",weight:"",weightPlaceholder:"",addBracket:"",removeLayer:"",hiddenHint:"",tagTips:"Tag<br>Tag<br>Tag",oneClickRandomTag:"Tag",oneClickCleanAll:"",oneClickClearDisabled:"",clearDisabledSuccess:"",randomTagSettings:"Tag",oneClickTranslate:"Tag",showDeleteButton:"",hideDeleteButton:"",modelWeight:"",textWeight:"",favour:"",lineToken:"",addLineToken:"",settings:{title:"",cancel:"",save:"",translator:"",sourceLanguage:"",targetLanguage:"",chinese_simplified:"",english:"",close:"",auto_detect:"",setting_function_toggles:"",setting_function_toggles_full:"",enableClearAll:"",enableDeleteButton:"",enableRandomTag:"",enableRandomTagSettings:"",enableTranslateTag:"",enableClearDisabled:"",setting_floating_ball:"",setting_prompt_box:"",enablePromptCommaShow:"",floatingBallCount:"",floatingBallCountPlaceholder:"",floatingBallSize:"",floatingBallSizePlaceholder:"",floatingBallHeight:"",floatingBallHeightPlaceholder:"",enableFloatingBall:"",enableCommaConversion:"",enablePeriodConversion:"",enableBracketConversion:"",enableAngleBracketConversion:"",enableUnderscoreToBracket:"",enableBracketEscape:"\\",enableCommaCloseAutocomplete:"",setting_openai_box:"OpenAI",openai_api_key:"API Key",openai_api_key_placeholder:"API Key",openai_api_key_save:"",openaiSettings:"OpenAI",openai_base_url:"Base URL",openai_base_url_placeholder:"Base URL",openai_model:"",openai_model_placeholder:"",not_set:"",edit:"",delete:"",selectedOpenaiConfig:"OpenAI",addNewConfig:"OpenAI",setting_sponsor_me:"",sponsorMe:"",sponsorMeTip:"",sponsorMeLink:" https://afdian.com/a/weilin9999",setting_start_panel:"",startPanel:"",startPanelTip:"",selectTranslater:"",selectOptionNetworkTranslater:"",selectOptionPythonTranslater:"",apply:"",selectOptionNetworkTranslaterTitle:"",selectOptionPythonTranslaterTitle:"",selectOptionNetworkTranslaterInfo:"",selectOptionPythonTranslaterInfo:"translators",install:"",nowTranlaterPackageState:"",tranlaterPackageStateTrue:"",tranlaterPackageStateFlase:"",installed:"...",installTranslaterPackageInfo:"",translaterSetting:"",chooseTranslaterSetting:"",translaterLangSourceSetting:"",translaterLangTargeSetting:"",saveTranslaterSetting:"",testTranslaterTitle:"",inputTestTranslater:"",outPutTestTranslater:"",testingTranslater:"",inputTestTranslaterPlaceholder:"",outPutTestTranslaterPlaceholder:"",errorPrompt:"",setting_auto_complete_limit:"",show_auto_limit:"",showAutoLimitPlaceholder:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:"",skinSetting:"",defaultSkin:"",customSkin:"",uploadSkin:"",bgSetting:"",gradientBg:"",transparentBg:"",gradientColor:"",borderRadius:"",resetToDefault:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:""}},controls:{language:"",settings:"",switchTheme:"",darkMode:"",lightMode:"",tagManager:"",loraStack:"Lora",loraManager:"Lora",history:"",addLora:"Lora",removeLora:"Lora",lookOnLora:"Lora",aiChat:"AI",github:"Github",shareCloudData:"",tutorialVideo:"",sponsor:"",danbooruManager:"Danbooru"},theme:{toggle:""},common:{confirmDelete:"",delete:"",cancel:"",confirm:"",edit:"",save:"",refresh:"",copy:"",copySuccess:"",copyFailed:"",windowSize:"",showMore:"",showLess:""},cloudWindow:{windowTitle:"",back:"",currentPath:"",tagDatabase:"Tag ",danbooruDatabase:"Danbooru ",open:"",installed:"",install:"",installing:"..."},nodeListWindow:{windowTitle:"",openPromptUI:""},lora:{title:"Lora ",rawTitle:"LoraRaw",file:"",hash:"Hash",civitai:"Civitai",viewOnCivitai:" Civitai ",fetchFromCivitai:" Civitai ",modelNotFound:"",modelNotFoundTip:" Civitai ",name:"",nameTip:"",type:"",baseModel:"",trainedWords:"",trainedWordsTip:"",selectedWords:" {count} ",strengthMin:"",strengthMinTip:"",strengthMax:"",strengthMaxTip:"",promptWords:"",promptWordsTip:"",loraWorks:"Lora",strWeight:"",hideLora:"Lora",showLora:"Lora",baseModel:"",skipClip:"",seeLoraRaw:"LoraRaw",addDiyFiled:"",getCivitData:"Civitai",copy:""},tagManager:{deletePrimaryCategoryConfirm:" {name} ",deleteGroupConfirm:" {name} ",deleteTagConfirm:" {name} ",windowTitle:"",categories:"",groups:"",selectCategory:"",selectGroup:"",addPrimaryCategory:"",addGroup:"",editPrimaryCategory:"",editGroup:"",editTag:"",categoryName:"",categoryNamePlaceholder:"",categoryNameRequired:"",groupName:"",groupNamePlaceholder:"",groupNameRequired:"",addTag:"Tag",text:"Tag",textPlaceholder:"Tag",description:"Tag",descriptionPlaceholder:"Tag",textRequired:"TagTag",favourRequired:"TagTag",backgroundColor:"",colorPickerTitle:"",opacity:"",searchPlaceholder:"Tag...",noResults:"",searchInCategory:"",searchInTag:"Tag",save:"",cancel:"",confirm:"",delete:"",addSubCategory:"",editSubCategory:"",subCategoryName:"",subCategoryNamePlaceholder:"",subCategoryNameRequired:"",deleteConfirmTitle:"",deleteConfirmMessage:"{type}",deleteSuccess:"",deleteFailed:"",saveSuccess:"",saveFailed:"",colorPickerAlpha:"",colorPickerHex:"",colorPreview:"",dragToSort:"",searchTags:"",noTagsFound:"",noGroupsFound:"",noCategoriesFound:"",refresh:"",refreshing:"...",refreshSuccess:"",refreshFailed:"",search:"",searching:"...",searchResult:"",searchInPath:": {path}",category:"",group:"",tag:"",resultType:{category:"",group:"",tag:""},hasDeleteAction:"",deleteSelected:"",confirmDeleteSelected:"",cancelDelete:"",moveTag:"",targetTag:"",movePosition:"",moveBefore:"",moveAfter:"",editTag:"",deleteTag:"",editGroupMode:"",exitEditMode:"",autoAddSearchTag:"Tag",importTags:"Tag",share:"",delete:"",edit:"",outputSuccess:"",noTagsSelected:"Tag",shareSelected:"Tag",batchShare:"Tag",cancelShare:"",moveGroup:"",targetGroup:"",moveGroupBefore:"",moveGroupAfter:"",importDanbooru:"",modifyTabSize:"",tabSizeConfig:"",primaryTabConfig:"",groupTabConfig:"",tabWidth:"",tabHeight:"",fontSize:"",fitContent:"",customWidth:"",resetDefault:"",tabSizeConfigSaved:"",tabSizeConfigSaveFailed:""},loraManager:{windowTitle:"Lora",modelWeight:"",textEncoderWeight:"",all:"",root:"",refresh:"",cacheAll:"Lora",searchPlaceholder:"Lora...",prevPage:"",nextPage:"",noResults:"",loadingMore:"...",noMoreData:""},message:{copySuccess:"",copyFailed:"",saveSuccess:"",saveFailed:"",deleteSuccess:"",deleteFailed:"",operationSuccess:"",operationFailed:"",networkError:"",unknownError:"",refreshSuccess:"",refreshFailed:"",loadingData:"...",dataLoaded:"",editSuccess:"",editFailed:"",addSuccess:"",addFailed:"",addFavoriteSuccess:"",addFavoriteIsExist:"",error:"",editNameExist:"",moveSuccess:"",moveFailed:"",setLanguageSuccess:"",setLanguageFailed:"",startPanelSuccess:"",startPanelFailed:"",isLoading:"",loaddingPrc:" {name}%",loaddingSuccess:"",noFinishKuo:"",getTranslaterFail:"",applyTranslaterFail:"",applyToTranslaterFail:"",applyTranslaterSuccess:"",tranlaterPackageInstallFail:"",tranlaterPackageInstallSuccess:"",translaterTestFail:"",installPackageSuccess:"",installPackageFail:"",loadFailed:"",jsonErrorMesg:"JSON",pleaseAddSub:"",pleaseAddMainCeb:"",pleaseSelectGroup:"",isLoadingPleaseWait:"",shareGroupError:"",shareTagError:"Tag"},history:{title:"",search_placeholder:"...",search:"",windowTitle:"",favorites:"",history:"",refresh:"",refresh_history:"",refresh_favorites:"",add_to_favorites:"",delete_history:"",use_item:"",add_new:"",bulk_delete:"",deleteHistoryConfirm:" {name} ",deleteFavoriteConfirm:" {name} ",confirmDeleteSelected:"",cancel_delete:"",sure_delete:"",deleteSelected:"",dialog:{add_tag:"",edit_tag:"",name:"",name_placeholder:"",tag:"",tag_placeholder:"",background_color:"",background_color_placeholder:"",edit_favorite:"",delete_favorite:""},edit_favorite:"",delete_favorite:"",use_favorite:""},floatingBall:{promptBox:"",tagManager:"",loraManager:"Lora",aiWindow:"AI",restoreWindow:"",openNodeListWindow:"",tranToWeb:"",openSetting:""},aiWindow:{windowTitle:"AI",newChat:"",chatName:"",thinking:"...",send:"",inputMessage:"..."},translaterService:{niutrans:"",mymemory:"MyMemory",alibaba:"",baidu:"",modernmt:"ModernMT",volcengine:"",iciba:"",iflytek:"",google:"",bing:"",lingvanex:"Lingvanex",yandex:"Yandex",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos",apertium:"Apertium",reverso:"Reverso",deepl:"DeepL",cloudtranslation:"",qqtransmart:"",translatecom:"Translate.com",sogou:"",tilde:"Tilde",caiyun:"",qqfanyi:"",translateme:"TranslateMe",papago:"Papago",mirai:"",youdao:"",iflyrec:"",hujiang:"",yeekit:"",languagewire:"LanguageWire",elia:"Elia",judic:"Judic",mglip:"",utibet:""},translaterLanguage:{english:"",chinese:"",arabic:"",russian:"",french:"",german:"",spanish:"",portuguese:"",italian:"",japanese:"",korean:"",greek:"",dutch:"",hindi:"",turkish:"",malay:"",thai:"",vietnamese:"",indonesian:"",hebrew:"",polish:"",mongolian:"",czech:"",hungarian:"",estonian:"",bulgarian:"",danish:"",finnish:"",romanian:"",swedish:"",slovenian:"","persian/farsi":"/",bosnian:"",serbian:"",fijian:"",filipino:"",haitiancreole:"",catalan:"",croatian:"",latvian:"",lithuanian:"",urdu:"",ukrainian:"",welsh:"",tahiti:"",tongan:"",swahili:"",samoan:"",slovak:"",afrikaans:"",norwegian:"",bengali:"",malagasy:"",maltese:"","queretaro otomi":"","klingon/tlhingan hol":"",gujarati:"",tamil:"",telugu:"",punjabi:"",amharic:"",azerbaijani:"",bashkir:"",belarusian:"",cebuano:"",chuvash:"",esperanto:"",basque:"",irish:""},utils:{tranToWeb:"HTML",dropOrPasteImage:"",downloadHtml:"HTML",copyHtml:"HTML",copySuccess:"HTML",copyFailed:"HTML",clear:""},importDialog:{title:"Tag",sure:"",cleanAll:"",dumpSQL:"SQL",uploadSQL:"SQL",setMainCeb:"",setSubCeb:"",addTag:"Tag",fromJSONImput:"JSONTag",fromTxtInput:"TXTTag",fromYmalInput:"YAMLTag",selectMainCeb:"",selectSubCeb:"",selectGroup:"",sureSelect:"",pleaseAddGroupName:"",pleaseAddSubGroupName:"",pleaseFullRequest:"",successImport:"",importFail:"",dumpOnlySQL:"TagSQL",settingOutputName:"",sureYes:"",cancel:"",edit:"",delete:"",add:"Tag",pleaseMainCebUuid:"UUID",pleaseSubGroupUuid:"UUID",pleaseSubGroup:"",pleaseMainCeb:"",translater:"",tips1:"",tips1text:"B",tips2:"Tag",tips2text:"GitHub",tips3:"",tips3text:"",selectTitle:"",selectedCategories:"",clearAll:"",primaryCategories:"",subCategories:"",noSelectedCategories:"",selectCategory:"",selectSubcategory:"",sureSelect:""},randomUtils:{title:"Tag",generalSettings:"",totalTags:"Tag",rules:"",addRule:"",rule:"",range:"",tagType:"",category:"Tag",specificTags:"",selectCategory:"",addTagPlaceholder:"",addTag:"",testRandom:"",generatedTags:"",selectTagGroup:"Tag",ruleTemplates:"",saveAsTemplate:"",selectTemplate:"",applyTemplate:"",templateNamePlaceholder:"",templateNameRequired:"",templateSaved:"",templateApplied:"",errorSavingTemplates:"",save:"",cancel:"",editTemplate:"",deleteTemplate:"",confirmDeleteTemplate:"",templateDeleted:"",templateUpdated:"",errorUpdatingTemplate:"",errorLoadingTemplate:"",errorDeletingTemplate:"",errorApplyingTemplate:"",pleaseChooseTemplate:"",errorSavingTemplate:"",newTemplate:"",rulesReminder:"1"},danbooruManager:{title:"Danbooru",controle:"",translatePlaceholder:"",searchPlaceholder:"Danbooru...",pageShow:":",pageLimit:"",hot:"",aliases:"",sureBatchDelete:"",sureBatchDeleteTips1:"",sureBatchDeleteTips2:"",sureDelete:"",import:"Danbooru",importBatchTitle:"Danbooru",importTitle:"Danbooru ",add:"Danbooru",edit:"Danbooru"}},r_={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+yo,windowTitleGlobal:"WeiLin Global Prompt UI Window "+yo,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",oneClickCleanAll:"one Click Clean All",oneClickClearDisabled:"Clear All Disabled",clearDisabledSuccess:"All disabled tags cleared",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",showDeleteButton:"Show Delete Button",hideDeleteButton:"Hide Delete Button",modelWeight:"Model Weight",textWeight:"Text Weight",favour:"Favour",lineToken:"Line Break",addLineToken:"Add Line Break Token",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",setting_function_toggles:"Function Toggle Settings",setting_function_toggles_full:"Function Toggle Settings (Reopen window to take effect)",enableClearDisabled:"Enable Clear Disabled",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",favourRequired:"Tag and Tag description cannot be empty, and a group must be selected",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qp;const Ps=e=>qp=e,Kp=Symbol();function Mi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wl||(wl={}));function i_(){const e=$r(!0),t=e.run(()=>v({}));let n=[],o=[];const a=Ur({install(l){Ps(a),a._a=l,l.provide(Kp,a),l.config.globalProperties.$pinia=a,o.forEach(r=>n.push(r)),o=[]},use(l){return this._a?n.push(l):o.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return a}const Yp=()=>{};function Jp(e,t,n,o=Yp){e.push(t);const a=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),o())};return!n&&Nu()&&F1(a),a}function Ea(e,...t){e.slice().forEach(n=>{n(...t)})}const u_=e=>e(),Xp=Symbol(),Ii=Symbol();function Di(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],a=e[n];Mi(a)&&Mi(o)&&e.hasOwnProperty(n)&&!Nt(o)&&!Ao(o)?e[n]=Di(a,o):e[n]=o}return e}const c_=Symbol();function d_(e){return!Mi(e)||!Object.prototype.hasOwnProperty.call(e,c_)}const{assign:Wo}=Object;function p_(e){return!!(Nt(e)&&e.effect)}function f_(e,t,n,o){const{state:a,actions:l,getters:r}=t,i=n.state.value[e];let u;function p(){i||(n.state.value[e]=a?a():{});const c=im(n.state.value[e]);return Wo(c,l,Object.keys(r||{}).reduce((d,h)=>(d[h]=Ur(nt(()=>{Ps(n);const m=n._s.get(e);return r[h].call(m,m)})),d),{}))}return u=Qp(e,p,t,n,o,!0),u}function Qp(e,t,n={},o,a,l){let r;const i=Wo({actions:{}},n),u={deep:!0};let p,c,d=[],h=[],m;const _=o.state.value[e];!l&&!_&&(o.state.value[e]={}),v({});let x;function k(q){let Y;p=c=!1,typeof q=="function"?(q(o.state.value[e]),Y={type:wl.patchFunction,storeId:e,events:m}):(Di(o.state.value[e],q),Y={type:wl.patchObject,payload:q,storeId:e,events:m});const _e=x=Symbol();Ke().then(()=>{x===_e&&(p=!0)}),c=!0,Ea(d,Y,o.state.value[e])}const T=l?function(){const{state:Y}=n,_e=Y?Y():{};this.$patch(se=>{Wo(se,_e)})}:Yp;function D(){r.stop(),d=[],h=[],o._s.delete(e)}const K=(q,Y="")=>{if(Xp in q)return q[Ii]=Y,q;const _e=function(){Ps(o);const se=Array.from(arguments),R=[],Z=[];function te(ae){R.push(ae)}function z(ae){Z.push(ae)}Ea(h,{args:se,name:_e[Ii],store:P,after:te,onError:z});let ne;try{ne=q.apply(this&&this.$id===e?this:P,se)}catch(ae){throw Ea(Z,ae),ae}return ne instanceof Promise?ne.then(ae=>(Ea(R,ae),ae)).catch(ae=>(Ea(Z,ae),Promise.reject(ae))):(Ea(R,ne),ne)};return _e[Xp]=!0,_e[Ii]=Y,_e},S={_p:o,$id:e,$onAction:Jp.bind(null,h),$patch:k,$reset:T,$subscribe(q,Y={}){const _e=Jp(d,q,Y.detached,()=>se()),se=r.run(()=>et(()=>o.state.value[e],R=>{(Y.flush==="sync"?c:p)&&q({storeId:e,type:wl.direct,events:m},R)},Wo({},u,Y)));return _e},$dispose:D},P=os(S);o._s.set(e,P);const G=(o._a&&o._a.runWithContext||u_)(()=>o._e.run(()=>(r=$r()).run(()=>t({action:K}))));for(const q in G){const Y=G[q];if(Nt(Y)&&!p_(Y)||Ao(Y))l||(_&&d_(Y)&&(Nt(Y)?Y.value=_[q]:Di(Y,_[q])),o.state.value[e][q]=Y);else if(typeof Y=="function"){const _e=K(Y,q);G[q]=_e,i.actions[q]=Y}}return Wo(P,G),Wo(st(P),G),Object.defineProperty(P,"$state",{get:()=>o.state.value[e],set:q=>{k(Y=>{Wo(Y,q)})}}),o._p.forEach(q=>{Wo(P,r.run(()=>q({store:P,app:o._a,pinia:o,options:i})))}),_&&l&&n.hydrate&&n.hydrate(P.$state,_),p=!0,c=!0,P}/*! #__NO_SIDE_EFFECTS__ */function g_(e,t,n){let o;const a=typeof t=="function";o=a?n:t;function l(r,i){const u=jm();return r=r||(u?co(Kp,null):null),r&&Ps(r),r=qp,r._s.has(e)||(a?Qp(e,t,o,r):f_(e,o,r)),r._s.get(e)}return l.$id=e,l}const Fs=g_("tag",()=>{const e=v([]),t=v({user_lang:"zh_CN"}),n=v(0);return{categories:e,setCategories:r=>{e.value=r},userSetting:t,setUserSetting:r=>{t.value=r},isFirstLoading:n,setisFirstLoading:r=>{n.value=r}}});function Zp(e,t){return function(){return e.apply(t,arguments)}}const{toString:m_}=Object.prototype,{getPrototypeOf:Oi}=Object,{iterator:Bs,toStringTag:ef}=Symbol,Us=(e=>t=>{const n=m_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zn=e=>(e=e.toLowerCase(),t=>Us(t)===e),Vs=e=>t=>typeof t===e,{isArray:$a}=Array,Sl=Vs("undefined");function xl(e){return e!==null&&!Sl(e)&&e.constructor!==null&&!Sl(e.constructor)&&wn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tf=zn("ArrayBuffer");function v_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tf(e.buffer),t}const h_=Vs("string"),wn=Vs("function"),nf=Vs("number"),Tl=e=>e!==null&&typeof e=="object",__=e=>e===!0||e===!1,Ws=e=>{if(Us(e)!=="object")return!1;const t=Oi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ef in e)&&!(Bs in e)},y_=e=>{if(!Tl(e)||xl(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},b_=zn("Date"),w_=zn("File"),S_=zn("Blob"),x_=zn("FileList"),T_=e=>Tl(e)&&wn(e.pipe),k_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wn(e.append)&&((t=Us(e))==="formdata"||t==="object"&&wn(e.toString)&&e.toString()==="[object FormData]"))},C_=zn("URLSearchParams"),[E_,$_,L_,A_]=["ReadableStream","Request","Response","Headers"].map(zn),M_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,a;if(typeof e!="object"&&(e=[e]),$a(e))for(o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else{if(xl(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),r=l.length;let i;for(o=0;o<r;o++)i=l[o],t.call(null,e[i],i,e)}}function of(e,t){if(xl(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const sa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,af=e=>!Sl(e)&&e!==sa;function Ri(){const{caseless:e}=af(this)&&this||{},t={},n=(o,a)=>{const l=e&&of(t,a)||a;Ws(t[l])&&Ws(o)?t[l]=Ri(t[l],o):Ws(o)?t[l]=Ri({},o):$a(o)?t[l]=o.slice():t[l]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&kl(arguments[o],n);return t}const I_=(e,t,n,{allOwnKeys:o}={})=>(kl(t,(a,l)=>{n&&wn(a)?e[l]=Zp(a,n):e[l]=a},{allOwnKeys:o}),e),D_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),O_=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},R_=(e,t,n,o)=>{let a,l,r;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)r=a[l],(!o||o(r,e,t))&&!i[r]&&(t[r]=e[r],i[r]=!0);e=n!==!1&&Oi(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},N_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},P_=e=>{if(!e)return null;if($a(e))return e;let t=e.length;if(!nf(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},F_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Oi(Uint8Array)),B_=(e,t)=>{const o=(e&&e[Bs]).call(e);let a;for(;(a=o.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},U_=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},V_=zn("HTMLFormElement"),W_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),lf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),z_=zn("RegExp"),sf=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};kl(n,(a,l)=>{let r;(r=t(a,l,e))!==!1&&(o[l]=r||a)}),Object.defineProperties(e,o)},H_=e=>{sf(e,(t,n)=>{if(wn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(wn(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},j_=(e,t)=>{const n={},o=a=>{a.forEach(l=>{n[l]=!0})};return $a(e)?o(e):o(String(e).split(t)),n},G_=()=>{},q_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function K_(e){return!!(e&&wn(e.append)&&e[ef]==="FormData"&&e[Bs])}const Y_=e=>{const t=new Array(10),n=(o,a)=>{if(Tl(o)){if(t.indexOf(o)>=0)return;if(xl(o))return o;if(!("toJSON"in o)){t[a]=o;const l=$a(o)?[]:{};return kl(o,(r,i)=>{const u=n(r,a+1);!Sl(u)&&(l[i]=u)}),t[a]=void 0,l}}return o};return n(e,0)},J_=zn("AsyncFunction"),X_=e=>e&&(Tl(e)||wn(e))&&wn(e.then)&&wn(e.catch),rf=((e,t)=>e?setImmediate:t?((n,o)=>(sa.addEventListener("message",({source:a,data:l})=>{a===sa&&l===n&&o.length&&o.shift()()},!1),a=>{o.push(a),sa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wn(sa.postMessage)),Q_=typeof queueMicrotask<"u"?queueMicrotask.bind(sa):typeof process<"u"&&process.nextTick||rf,xe={isArray:$a,isArrayBuffer:tf,isBuffer:xl,isFormData:k_,isArrayBufferView:v_,isString:h_,isNumber:nf,isBoolean:__,isObject:Tl,isPlainObject:Ws,isEmptyObject:y_,isReadableStream:E_,isRequest:$_,isResponse:L_,isHeaders:A_,isUndefined:Sl,isDate:b_,isFile:w_,isBlob:S_,isRegExp:z_,isFunction:wn,isStream:T_,isURLSearchParams:C_,isTypedArray:F_,isFileList:x_,forEach:kl,merge:Ri,extend:I_,trim:M_,stripBOM:D_,inherits:O_,toFlatObject:R_,kindOf:Us,kindOfTest:zn,endsWith:N_,toArray:P_,forEachEntry:B_,matchAll:U_,isHTMLForm:V_,hasOwnProperty:lf,hasOwnProp:lf,reduceDescriptors:sf,freezeMethods:H_,toObjectSet:j_,toCamelCase:W_,noop:G_,toFiniteNumber:q_,findKey:of,global:sa,isContextDefined:af,isSpecCompliantForm:K_,toJSONObject:Y_,isAsyncFn:J_,isThenable:X_,setImmediate:rf,asap:Q_,isIterable:e=>e!=null&&wn(e[Bs])};function Je(e,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}xe.inherits(Je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});const uf=Je.prototype,cf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cf[e]={value:e}}),Object.defineProperties(Je,cf),Object.defineProperty(uf,"isAxiosError",{value:!0}),Je.from=(e,t,n,o,a,l)=>{const r=Object.create(uf);return xe.toFlatObject(e,r,function(u){return u!==Error.prototype},i=>i!=="isAxiosError"),Je.call(r,e.message,t,n,o,a),r.cause=e,r.name=e.name,l&&Object.assign(r,l),r};const Z_=null;function Ni(e){return xe.isPlainObject(e)||xe.isArray(e)}function df(e){return xe.endsWith(e,"[]")?e.slice(0,-2):e}function pf(e,t,n){return e?e.concat(t).map(function(a,l){return a=df(a),!n&&l?"["+a+"]":a}).join(n?".":""):t}function e0(e){return xe.isArray(e)&&!e.some(Ni)}const t0=xe.toFlatObject(xe,{},null,function(t){return/^is[A-Z]/.test(t)});function zs(e,t,n){if(!xe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,k){return!xe.isUndefined(k[x])});const o=n.metaTokens,a=n.visitor||c,l=n.dots,r=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(t);if(!xe.isFunction(a))throw new TypeError("visitor must be a function");function p(_){if(_===null)return"";if(xe.isDate(_))return _.toISOString();if(xe.isBoolean(_))return _.toString();if(!u&&xe.isBlob(_))throw new Je("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(_)||xe.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function c(_,x,k){let T=_;if(_&&!k&&typeof _=="object"){if(xe.endsWith(x,"{}"))x=o?x:x.slice(0,-2),_=JSON.stringify(_);else if(xe.isArray(_)&&e0(_)||(xe.isFileList(_)||xe.endsWith(x,"[]"))&&(T=xe.toArray(_)))return x=df(x),T.forEach(function(K,S){!(xe.isUndefined(K)||K===null)&&t.append(r===!0?pf([x],S,l):r===null?x:x+"[]",p(K))}),!1}return Ni(_)?!0:(t.append(pf(k,x,l),p(_)),!1)}const d=[],h=Object.assign(t0,{defaultVisitor:c,convertValue:p,isVisitable:Ni});function m(_,x){if(!xe.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(_),xe.forEach(_,function(T,D){(!(xe.isUndefined(T)||T===null)&&a.call(t,T,xe.isString(D)?D.trim():D,x,h))===!0&&m(T,x?x.concat(D):[D])}),d.pop()}}if(!xe.isObject(e))throw new TypeError("data must be an object");return m(e),t}function ff(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Pi(e,t){this._pairs=[],e&&zs(e,this,t)}const gf=Pi.prototype;gf.append=function(t,n){this._pairs.push([t,n])},gf.toString=function(t){const n=t?function(o){return t.call(this,o,ff)}:ff;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function n0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mf(e,t,n){if(!t)return e;const o=n&&n.encode||n0;xe.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(t,n):l=xe.isURLSearchParams(t)?t.toString():new Pi(t,n).toString(o),l){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class vf{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xe.forEach(this.handlers,function(o){o!==null&&t(o)})}}const hf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o0={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Pi,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Fi=typeof window<"u"&&typeof document<"u",Bi=typeof navigator=="object"&&navigator||void 0,a0=Fi&&(!Bi||["ReactNative","NativeScript","NS"].indexOf(Bi.product)<0),l0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s0=Fi&&window.location.href||"http://localhost",un={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fi,hasStandardBrowserEnv:a0,hasStandardBrowserWebWorkerEnv:l0,navigator:Bi,origin:s0},Symbol.toStringTag,{value:"Module"})),...o0};function r0(e,t){return zs(e,new un.classes.URLSearchParams,{visitor:function(n,o,a,l){return un.isNode&&xe.isBuffer(n)?(this.append(o,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function i0(e){return xe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u0(e){const t={},n=Object.keys(e);let o;const a=n.length;let l;for(o=0;o<a;o++)l=n[o],t[l]=e[l];return t}function _f(e){function t(n,o,a,l){let r=n[l++];if(r==="__proto__")return!0;const i=Number.isFinite(+r),u=l>=n.length;return r=!r&&xe.isArray(a)?a.length:r,u?(xe.hasOwnProp(a,r)?a[r]=[a[r],o]:a[r]=o,!i):((!a[r]||!xe.isObject(a[r]))&&(a[r]=[]),t(n,o,a[r],l)&&xe.isArray(a[r])&&(a[r]=u0(a[r])),!i)}if(xe.isFormData(e)&&xe.isFunction(e.entries)){const n={};return xe.forEachEntry(e,(o,a)=>{t(i0(o),a,n,0)}),n}return null}function c0(e,t,n){if(xe.isString(e))try{return(t||JSON.parse)(e),xe.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Cl={transitional:hf,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,l=xe.isObject(t);if(l&&xe.isHTMLForm(t)&&(t=new FormData(t)),xe.isFormData(t))return a?JSON.stringify(_f(t)):t;if(xe.isArrayBuffer(t)||xe.isBuffer(t)||xe.isStream(t)||xe.isFile(t)||xe.isBlob(t)||xe.isReadableStream(t))return t;if(xe.isArrayBufferView(t))return t.buffer;if(xe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return r0(t,this.formSerializer).toString();if((i=xe.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return zs(i?{"files[]":t}:t,u&&new u,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),c0(t)):t}],transformResponse:[function(t){const n=this.transitional||Cl.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(xe.isResponse(t)||xe.isReadableStream(t))return t;if(t&&xe.isString(t)&&(o&&!this.responseType||a)){const r=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(r)throw i.name==="SyntaxError"?Je.from(i,Je.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:un.classes.FormData,Blob:un.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],e=>{Cl.headers[e]={}});const d0=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p0=e=>{const t={};let n,o,a;return e&&e.split(`
`).forEach(function(r){a=r.indexOf(":"),n=r.substring(0,a).trim().toLowerCase(),o=r.substring(a+1).trim(),!(!n||t[n]&&d0[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},yf=Symbol("internals");function El(e){return e&&String(e).trim().toLowerCase()}function Hs(e){return e===!1||e==null?e:xe.isArray(e)?e.map(Hs):String(e)}function f0(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const g0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ui(e,t,n,o,a){if(xe.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!xe.isString(t)){if(xe.isString(o))return t.indexOf(o)!==-1;if(xe.isRegExp(o))return o.test(t)}}function m0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function v0(e,t){const n=xe.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(a,l,r){return this[o].call(this,t,a,l,r)},configurable:!0})})}let Sn=class{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function l(i,u,p){const c=El(u);if(!c)throw new Error("header name must be a non-empty string");const d=xe.findKey(a,c);(!d||a[d]===void 0||p===!0||p===void 0&&a[d]!==!1)&&(a[d||u]=Hs(i))}const r=(i,u)=>xe.forEach(i,(p,c)=>l(p,c,u));if(xe.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(xe.isString(t)&&(t=t.trim())&&!g0(t))r(p0(t),n);else if(xe.isObject(t)&&xe.isIterable(t)){let i={},u,p;for(const c of t){if(!xe.isArray(c))throw TypeError("Object iterator must return a key-value pair");i[p=c[0]]=(u=i[p])?xe.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}r(i,n)}else t!=null&&l(n,t,o);return this}get(t,n){if(t=El(t),t){const o=xe.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return f0(a);if(xe.isFunction(n))return n.call(this,a,o);if(xe.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=El(t),t){const o=xe.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Ui(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function l(r){if(r=El(r),r){const i=xe.findKey(o,r);i&&(!n||Ui(o,o[i],i,n))&&(delete o[i],a=!0)}}return xe.isArray(t)?t.forEach(l):l(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const l=n[o];(!t||Ui(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const n=this,o={};return xe.forEach(this,(a,l)=>{const r=xe.findKey(o,l);if(r){n[r]=Hs(a),delete n[l];return}const i=t?m0(l):String(l).trim();i!==l&&delete n[l],n[i]=Hs(a),o[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xe.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&xe.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[yf]=this[yf]={accessors:{}}).accessors,a=this.prototype;function l(r){const i=El(r);o[i]||(v0(a,r),o[i]=!0)}return xe.isArray(t)?t.forEach(l):l(t),this}};Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xe.reduceDescriptors(Sn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}}),xe.freezeMethods(Sn);function Vi(e,t){const n=this||Cl,o=t||n,a=Sn.from(o.headers);let l=o.data;return xe.forEach(e,function(i){l=i.call(n,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function bf(e){return!!(e&&e.__CANCEL__)}function La(e,t,n){Je.call(this,e??"canceled",Je.ERR_CANCELED,t,n),this.name="CanceledError"}xe.inherits(La,Je,{__CANCEL__:!0});function wf(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Je("Request failed with status code "+n.status,[Je.ERR_BAD_REQUEST,Je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _0(e,t){e=e||10;const n=new Array(e),o=new Array(e);let a=0,l=0,r;return t=t!==void 0?t:1e3,function(u){const p=Date.now(),c=o[l];r||(r=p),n[a]=u,o[a]=p;let d=l,h=0;for(;d!==a;)h+=n[d++],d=d%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),p-r<t)return;const m=c&&p-c;return m?Math.round(h*1e3/m):void 0}}function y0(e,t){let n=0,o=1e3/t,a,l;const r=(p,c=Date.now())=>{n=c,a=null,l&&(clearTimeout(l),l=null),e(...p)};return[(...p)=>{const c=Date.now(),d=c-n;d>=o?r(p,c):(a=p,l||(l=setTimeout(()=>{l=null,r(a)},o-d)))},()=>a&&r(a)]}const js=(e,t,n=3)=>{let o=0;const a=_0(50,250);return y0(l=>{const r=l.loaded,i=l.lengthComputable?l.total:void 0,u=r-o,p=a(u),c=r<=i;o=r;const d={loaded:r,total:i,progress:i?r/i:void 0,bytes:u,rate:p||void 0,estimated:p&&i&&c?(i-r)/p:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(d)},n)},Sf=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},xf=e=>(...t)=>xe.asap(()=>e(...t)),b0=un.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,un.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(un.origin),un.navigator&&/(msie|trident)/i.test(un.navigator.userAgent)):()=>!0,w0=un.hasStandardBrowserEnv?{write(e,t,n,o,a,l){const r=[e+"="+encodeURIComponent(t)];xe.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),xe.isString(o)&&r.push("path="+o),xe.isString(a)&&r.push("domain="+a),l===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function S0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function x0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Tf(e,t,n){let o=!S0(t);return e&&(o||n==!1)?x0(e,t):t}const kf=e=>e instanceof Sn?{...e}:e;function ra(e,t){t=t||{};const n={};function o(p,c,d,h){return xe.isPlainObject(p)&&xe.isPlainObject(c)?xe.merge.call({caseless:h},p,c):xe.isPlainObject(c)?xe.merge({},c):xe.isArray(c)?c.slice():c}function a(p,c,d,h){if(xe.isUndefined(c)){if(!xe.isUndefined(p))return o(void 0,p,d,h)}else return o(p,c,d,h)}function l(p,c){if(!xe.isUndefined(c))return o(void 0,c)}function r(p,c){if(xe.isUndefined(c)){if(!xe.isUndefined(p))return o(void 0,p)}else return o(void 0,c)}function i(p,c,d){if(d in t)return o(p,c);if(d in e)return o(void 0,p)}const u={url:l,method:l,data:l,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:i,headers:(p,c,d)=>a(kf(p),kf(c),d,!0)};return xe.forEach(Object.keys({...e,...t}),function(c){const d=u[c]||a,h=d(e[c],t[c],c);xe.isUndefined(h)&&d!==i||(n[c]=h)}),n}const Cf=e=>{const t=ra({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:l,headers:r,auth:i}=t;t.headers=r=Sn.from(r),t.url=mf(Tf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&r.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let u;if(xe.isFormData(n)){if(un.hasStandardBrowserEnv||un.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((u=r.getContentType())!==!1){const[p,...c]=u?u.split(";").map(d=>d.trim()).filter(Boolean):[];r.setContentType([p||"multipart/form-data",...c].join("; "))}}if(un.hasStandardBrowserEnv&&(o&&xe.isFunction(o)&&(o=o(t)),o||o!==!1&&b0(t.url))){const p=a&&l&&w0.read(l);p&&r.set(a,p)}return t},T0=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,o){const a=Cf(e);let l=a.data;const r=Sn.from(a.headers).normalize();let{responseType:i,onUploadProgress:u,onDownloadProgress:p}=a,c,d,h,m,_;function x(){m&&m(),_&&_(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let k=new XMLHttpRequest;k.open(a.method.toUpperCase(),a.url,!0),k.timeout=a.timeout;function T(){if(!k)return;const K=Sn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),P={data:!i||i==="text"||i==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:K,config:e,request:k};wf(function(G){n(G),x()},function(G){o(G),x()},P),k=null}"onloadend"in k?k.onloadend=T:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(T)},k.onabort=function(){k&&(o(new Je("Request aborted",Je.ECONNABORTED,e,k)),k=null)},k.onerror=function(){o(new Je("Network Error",Je.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let S=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||hf;a.timeoutErrorMessage&&(S=a.timeoutErrorMessage),o(new Je(S,P.clarifyTimeoutError?Je.ETIMEDOUT:Je.ECONNABORTED,e,k)),k=null},l===void 0&&r.setContentType(null),"setRequestHeader"in k&&xe.forEach(r.toJSON(),function(S,P){k.setRequestHeader(P,S)}),xe.isUndefined(a.withCredentials)||(k.withCredentials=!!a.withCredentials),i&&i!=="json"&&(k.responseType=a.responseType),p&&([h,_]=js(p,!0),k.addEventListener("progress",h)),u&&k.upload&&([d,m]=js(u),k.upload.addEventListener("progress",d),k.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(c=K=>{k&&(o(!K||K.type?new La(null,e,k):K),k.abort(),k=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const D=h0(a.url);if(D&&un.protocols.indexOf(D)===-1){o(new Je("Unsupported protocol "+D+":",Je.ERR_BAD_REQUEST,e));return}k.send(l||null)})},k0=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,a;const l=function(p){if(!a){a=!0,i();const c=p instanceof Error?p:this.reason;o.abort(c instanceof Je?c:new La(c instanceof Error?c.message:c))}};let r=t&&setTimeout(()=>{r=null,l(new Je(`timeout ${t} of ms exceeded`,Je.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),e=null)};e.forEach(p=>p.addEventListener("abort",l));const{signal:u}=o;return u.unsubscribe=()=>xe.asap(i),u}},C0=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,a;for(;o<n;)a=o+t,yield e.slice(o,a),o=a},E0=async function*(e,t){for await(const n of $0(e))yield*C0(n,t)},$0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},Ef=(e,t,n,o)=>{const a=E0(e,t);let l=0,r,i=u=>{r||(r=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:p,value:c}=await a.next();if(p){i(),u.close();return}let d=c.byteLength;if(n){let h=l+=d;n(h)}u.enqueue(new Uint8Array(c))}catch(p){throw i(p),p}},cancel(u){return i(u),a.return()}},{highWaterMark:2})},Gs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$f=Gs&&typeof ReadableStream=="function",L0=Gs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Lf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},A0=$f&&Lf(()=>{let e=!1;const t=new Request(un.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Af=64*1024,Wi=$f&&Lf(()=>xe.isReadableStream(new Response("").body)),qs={stream:Wi&&(e=>e.body)};Gs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qs[t]&&(qs[t]=xe.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Je(`Response type '${t}' is not supported`,Je.ERR_NOT_SUPPORT,o)})})})(new Response);const M0=async e=>{if(e==null)return 0;if(xe.isBlob(e))return e.size;if(xe.isSpecCompliantForm(e))return(await new Request(un.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(e)||xe.isArrayBuffer(e))return e.byteLength;if(xe.isURLSearchParams(e)&&(e=e+""),xe.isString(e))return(await L0(e)).byteLength},I0=async(e,t)=>{const n=xe.toFiniteNumber(e.getContentLength());return n??M0(t)},zi={http:Z_,xhr:T0,fetch:Gs&&(async e=>{let{url:t,method:n,data:o,signal:a,cancelToken:l,timeout:r,onDownloadProgress:i,onUploadProgress:u,responseType:p,headers:c,withCredentials:d="same-origin",fetchOptions:h}=Cf(e);p=p?(p+"").toLowerCase():"text";let m=k0([a,l&&l.toAbortSignal()],r),_;const x=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let k;try{if(u&&A0&&n!=="get"&&n!=="head"&&(k=await I0(c,o))!==0){let P=new Request(t,{method:"POST",body:o,duplex:"half"}),j;if(xe.isFormData(o)&&(j=P.headers.get("content-type"))&&c.setContentType(j),P.body){const[G,q]=Sf(k,js(xf(u)));o=Ef(P.body,Af,G,q)}}xe.isString(d)||(d=d?"include":"omit");const T="credentials"in Request.prototype;_=new Request(t,{...h,signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:o,duplex:"half",credentials:T?d:void 0});let D=await fetch(_,h);const K=Wi&&(p==="stream"||p==="response");if(Wi&&(i||K&&x)){const P={};["status","statusText","headers"].forEach(Y=>{P[Y]=D[Y]});const j=xe.toFiniteNumber(D.headers.get("content-length")),[G,q]=i&&Sf(j,js(xf(i),!0))||[];D=new Response(Ef(D.body,Af,G,()=>{q&&q(),x&&x()}),P)}p=p||"text";let S=await qs[xe.findKey(qs,p)||"text"](D,e);return!K&&x&&x(),await new Promise((P,j)=>{wf(P,j,{data:S,headers:Sn.from(D.headers),status:D.status,statusText:D.statusText,config:e,request:_})})}catch(T){throw x&&x(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Je("Network Error",Je.ERR_NETWORK,e,_),{cause:T.cause||T}):Je.from(T,T&&T.code,e,_)}})};xe.forEach(zi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Mf=e=>`- ${e}`,D0=e=>xe.isFunction(e)||e===null||e===!1,If={getAdapter:e=>{e=xe.isArray(e)?e:[e];const{length:t}=e;let n,o;const a={};for(let l=0;l<t;l++){n=e[l];let r;if(o=n,!D0(n)&&(o=zi[(r=String(n)).toLowerCase()],o===void 0))throw new Je(`Unknown adapter '${r}'`);if(o)break;a[r||"#"+l]=o}if(!o){const l=Object.entries(a).map(([i,u])=>`adapter ${i} `+(u===!1?"is not supported by the environment":"is not available in the build"));let r=t?l.length>1?`since :
`+l.map(Mf).join(`
`):" "+Mf(l[0]):"as no adapter specified";throw new Je("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return o},adapters:zi};function Hi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new La(null,e)}function Df(e){return Hi(e),e.headers=Sn.from(e.headers),e.data=Vi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),If.getAdapter(e.adapter||Cl.adapter)(e).then(function(o){return Hi(e),o.data=Vi.call(e,e.transformResponse,o),o.headers=Sn.from(o.headers),o},function(o){return bf(o)||(Hi(e),o&&o.response&&(o.response.data=Vi.call(e,e.transformResponse,o.response),o.response.headers=Sn.from(o.response.headers))),Promise.reject(o)})}const Of="1.11.0",Ks={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ks[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const Rf={};Ks.transitional=function(t,n,o){function a(l,r){return"[Axios v"+Of+"] Transitional option '"+l+"'"+r+(o?". "+o:"")}return(l,r,i)=>{if(t===!1)throw new Je(a(r," has been removed"+(n?" in "+n:"")),Je.ERR_DEPRECATED);return n&&!Rf[r]&&(Rf[r]=!0,console.warn(a(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,r,i):!0}},Ks.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function O0(e,t,n){if(typeof e!="object")throw new Je("options must be an object",Je.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let a=o.length;for(;a-- >0;){const l=o[a],r=t[l];if(r){const i=e[l],u=i===void 0||r(i,l,e);if(u!==!0)throw new Je("option "+l+" must be "+u,Je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Je("Unknown option "+l,Je.ERR_BAD_OPTION)}}const Ys={assertOptions:O0,validators:Ks},oo=Ys.validators;let ia=class{constructor(t){this.defaults=t||{},this.interceptors={request:new vf,response:new vf}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?l&&!String(o.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+l):o.stack=l}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ra(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:l}=n;o!==void 0&&Ys.assertOptions(o,{silentJSONParsing:oo.transitional(oo.boolean),forcedJSONParsing:oo.transitional(oo.boolean),clarifyTimeoutError:oo.transitional(oo.boolean)},!1),a!=null&&(xe.isFunction(a)?n.paramsSerializer={serialize:a}:Ys.assertOptions(a,{encode:oo.function,serialize:oo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ys.assertOptions(n,{baseUrl:oo.spelling("baseURL"),withXsrfToken:oo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=l&&xe.merge(l.common,l[n.method]);l&&xe.forEach(["delete","get","head","post","put","patch","common"],_=>{delete l[_]}),n.headers=Sn.concat(r,l);const i=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});const p=[];this.interceptors.response.forEach(function(x){p.push(x.fulfilled,x.rejected)});let c,d=0,h;if(!u){const _=[Df.bind(this),void 0];for(_.unshift(...i),_.push(...p),h=_.length,c=Promise.resolve(n);d<h;)c=c.then(_[d++],_[d++]);return c}h=i.length;let m=n;for(d=0;d<h;){const _=i[d++],x=i[d++];try{m=_(m)}catch(k){x.call(this,k);break}}try{c=Df.call(this,m)}catch(_){return Promise.reject(_)}for(d=0,h=p.length;d<h;)c=c.then(p[d++],p[d++]);return c}getUri(t){t=ra(this.defaults,t);const n=Tf(t.baseURL,t.url,t.allowAbsoluteUrls);return mf(n,t.params,t.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(t){ia.prototype[t]=function(n,o){return this.request(ra(o||{},{method:t,url:n,data:(o||{}).data}))}}),xe.forEach(["post","put","patch"],function(t){function n(o){return function(l,r,i){return this.request(ra(i||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:r}))}}ia.prototype[t]=n(),ia.prototype[t+"Form"]=n(!0)});let R0=class C1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const o=this;this.promise.then(a=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](a);o._listeners=null}),this.promise.then=a=>{let l;const r=new Promise(i=>{o.subscribe(i),l=i}).then(a);return r.cancel=function(){o.unsubscribe(l)},r},t(function(l,r,i){o.reason||(o.reason=new La(l,r,i),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new C1(function(a){t=a}),cancel:t}}};function N0(e){return function(n){return e.apply(null,n)}}function P0(e){return xe.isObject(e)&&e.isAxiosError===!0}const ji={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ji).forEach(([e,t])=>{ji[t]=e});function Nf(e){const t=new ia(e),n=Zp(ia.prototype.request,t);return xe.extend(n,ia.prototype,t,{allOwnKeys:!0}),xe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return Nf(ra(e,a))},n}const Pt=Nf(Cl);Pt.Axios=ia,Pt.CanceledError=La,Pt.CancelToken=R0,Pt.isCancel=bf,Pt.VERSION=Of,Pt.toFormData=zs,Pt.AxiosError=Je,Pt.Cancel=Pt.CanceledError,Pt.all=function(t){return Promise.all(t)},Pt.spread=N0,Pt.isAxiosError=P0,Pt.mergeConfig=ra,Pt.AxiosHeaders=Sn,Pt.formToJSON=e=>_f(xe.isHTMLForm(e)?new FormData(e):e),Pt.getAdapter=If.getAdapter,Pt.HttpStatusCode=ji,Pt.default=Pt;const{Axios:DI,AxiosError:OI,CanceledError:RI,isCancel:NI,CancelToken:PI,VERSION:FI,all:BI,Cancel:UI,isAxiosError:VI,spread:WI,toFormData:zI,AxiosHeaders:HI,HttpStatusCode:jI,formToJSON:GI,getAdapter:qI,mergeConfig:KI}=Pt,Ie=Pt.create({baseURL:"/weilin/prompt_ui/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>e,e=>Promise.reject(e)),Ie.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const Js={getUserSetting:async()=>await Ie({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await Ie({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await Ie({url:"/panel/start",method:"post"})},Pf=()=>Fs(),$l=K2({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN:s_,en_US:r_}}),F0=()=>{const e=Pf();Js.getUserSetting().then(t=>{var o;e.setUserSetting(t.data);const n=((o=e.userSetting)==null?void 0:o.user_lang)||"zh_CN";$l.global.locale.value=n})},B0=e=>{$l.global.locale.value=e,Pf().setUserSetting({user_lang:e})},U0=()=>{F0()},V0={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:""}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=v(!1);return ct(()=>{t.value=!0}),{style:e,visible:t}}},W0={class:"text"};function z0(e,t,n,o,a,l){return me((b(),E("div",{class:"pop-message",style:gt(o.style[n.type])},[s("i",{class:$e(["icon",[o.style[n.type].icon]])},null,2),s("span",W0,g(n.str),1)],4)),[[gl,o.visible]])}const H0=yt(V0,[["render",z0],["__scopeId","data-v-7ee59bf2"]]),Gi=document.createElement("div");document.body.appendChild(Gi);let qi=null;const J=({str:e,type:t,name:n=""})=>{let o=$l.global.t(e);n.length>0&&(o=$l.global.t(e,{name:n}));const a=He(H0,{str:o,type:t});Vd(a,Gi),qi&&clearTimeout(qi),qi=setTimeout(()=>{Vd(null,Gi)},2e3)},j0={class:"language-selector-content"},G0=["onClick"],q0={class:"lang-name"},K0=yt({__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(null),l=Fs(),r=nt(()=>l.userSetting.user_lang),i=[{code:"zh_CN",name:""},{code:"en_US",name:"English"}],u=n,p=h=>{c(h),u("close",{})},c=h=>{Js.setUserLanguage(h).then(m=>{B0(h),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.setLanguageSuccess"})}).catch(m=>{J({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:h=>{if(!a.value)return;const m=a.value;m.style.position="fixed",m.style.top=`${h.bottom}px`}}),(h,m)=>(b(),E("div",{class:"language-selector",ref_key:"selectorRef",ref:a},[s("div",j0,[(b(),E(De,null,Ve(i,(_,x)=>s("div",{style:gt({"margin-top":x===0?"0":"2px"}),key:_.code,class:$e(["language-option",{active:r.value===_.code}]),onClick:k=>p(_.code)},[s("span",q0,g(_.name),1)],14,G0)),64))])],512))}},[["__scopeId","data-v-b77d604b"]]),bo="weilin_prompt_ui_",Aa=yt({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=()=>{o("update:modelValue",!1)},l=()=>{n.closeOnClickOverlay&&a()};return(r,i)=>(b(),xt(hc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[He(Ts,{name:`${bo}dialog-fade`},{default:dt(()=>[e.modelValue?(b(),E("div",{key:0,class:$e(`${bo}dialog-overlay`),onClick:l},[He(Ts,{name:`${bo}dialog-slide`},{default:dt(()=>[s("div",{style:gt({width:e.width}),class:$e(`${bo}dialog`),onClick:i[0]||(i[0]=Ze(()=>{},["stop"]))},[s("div",{class:$e(`${bo}dialog-header`)},[s("h3",{class:$e(`${bo}dialog-title`)},g(e.title),3),s("button",{class:$e(`${bo}dialog-close`),onClick:a},[...i[1]||(i[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)],2),s("div",{class:$e(`${bo}dialog-content`)},[al(r.$slots,"default")],2),r.$slots.footer?(b(),E("div",{key:0,class:$e(`${bo}dialog-footer`)},[al(r.$slots,"footer")],2)):ce("",!0)],6)]),_:3},8,["name"])],2)):ce("",!0)]),_:3},8,["name"])]))}},[["__scopeId","data-v-d2e9c495"]]),vn={getTranslateLocal:async e=>await Ie({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslateSetting:async()=>await Ie({url:"/translate/get/setting",method:"post",data:{}}),applyTranslateSetting:async e=>await Ie({url:"/translate/apply_setting",method:"post",data:{setting:e}}),getTranslateBuktSetting:async()=>await Ie({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,n)=>await Ie({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:n}}),translaterText:async(e,t)=>await Ie({url:"/translate/tran/text",method:"post",timeout:0,data:{str_object:e,text:t}}),translaterInputText:async(e,t)=>await Ie({url:"/translate/tran/input",method:"post",timeout:0,data:{str_object:e,text:t}})},Ki={getAutocomplete:async e=>await Ie({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await Ie({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await Ie({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},Ll={updateOpenAiSetting:async e=>await Ie({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await Ie({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await Ie({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await Ie({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await Ie({url:"/prompt/openai/get_settings",method:"get"})},Y0=["alibaba","bing","youdao"],Al=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],Yi={getAiServerSetting:async e=>await Ie({url:"/ai_server/get_settings",method:"post",data:{}}),updateAiServerSetting:async e=>await Ie({url:"/ai_server/update_settings",method:"post",data:e}),getAiModels:async()=>await Ie({url:"/ai_server/get_ai_models",method:"post",data:{}})},J0={class:"ai-server-setting-panel"},X0={class:"weilin-comfyui-translater-setting-box"},Q0={class:"weilin-comfyui-setting-item"},Z0={class:"weilin-comfyui-setting-item"},ey={class:"weilin-comfyui-setting-item"},ty={style:{display:"flex",gap:"10px"}},ny=["value"],oy={class:"weilin-comfyui-translater-setting-box"},ay={class:"weilin-comfyui-setting-small-titile"},ly={class:"weilin-comfyui-language-selectors"},sy={class:"weilin-comfyui-setting-item"},ry=["index","value"],iy={class:"weilin-comfyui-setting-item"},uy=["index","value"],cy={class:"weilin-comfyui-translater-setting-box"},dy={class:"weilin-comfyui-setting-small-titile"},py={class:"weilin-comfyui-setting-item"},fy=["placeholder"],gy={class:"weilin-comfyui-setting-item"},my=["placeholder"],vy=yt({__name:"ai_server_setting",setup(e){const{t}=_t(),n=v(""),o=v(""),a=v(""),l=v(""),r=v(""),i=v({api_key:"",base_url:"https://api.siliconflow.cn/v1",model:"",temperature:0,top_p:.7,max_tokens:4096}),u=v({object:"list",data:[]}),p=()=>{Yi.updateAiServerSetting(i.value).then(x=>{x.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(x=>{J({type:"warn",str:"message.saveFailed"})})},c=()=>{Yi.getAiServerSetting().then(x=>{i.value=x.data}).catch(x=>{J({type:"warn",str:"message.getTranslaterFail"})})},d=()=>{Yi.getAiModels().then(x=>{u.value=x.data}).catch(x=>{J({type:"warn",str:"message.getTranslaterFail"})})},h=()=>{vn.getTranslateBuktSetting().then(x=>{n.value=x.data.translate_service,o.value=x.data.translate_source_lang,a.value=x.data.translate_target_lang}).catch(x=>{J({type:"warn",str:"message.getTranslaterFail"})})},m=()=>{vn.saveTranslateSetting(n.value,o.value,a.value).then(x=>{x.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(x=>{J({type:"warn",str:"message.saveFailed"})})},_=()=>{vn.translaterInputText("",r.value).then(x=>{x&&x.data&&(l.value=x.data)}).catch(x=>{J({type:"warn",str:"message.translaterTestFail"})})};return ct(()=>{c(),d(),h()}),(x,k)=>(b(),E("div",J0,[s("div",X0,[s("div",Q0,[k[7]||(k[7]=s("label",null,"API Key",-1)),me(s("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=T=>i.value.api_key=T),placeholder:"API Key",class:"weilin-comfyui-common-select"},null,512),[[Le,i.value.api_key]])]),s("div",Z0,[k[9]||(k[9]=s("label",null,"AI",-1)),me(s("select",{"onUpdate:modelValue":k[1]||(k[1]=T=>i.value.base_url=T),disabled:"",class:"weilin-comfyui-common-select"},[...k[8]||(k[8]=[s("option",{value:"https://api.siliconflow.cn/v1"},"AI",-1)])],512),[[Gt,i.value.base_url]])]),s("div",ey,[k[10]||(k[10]=s("label",null,"ModelAPI Key",-1)),s("div",ty,[me(s("select",{"onUpdate:modelValue":k[2]||(k[2]=T=>i.value.model=T),class:"weilin-comfyui-common-select",style:{flex:"1"}},[(b(!0),E(De,null,Ve(u.value.data,T=>(b(),E("option",{key:T.id,value:T.id},g(T.id),9,ny))),128))],512),[[Gt,i.value.model]]),s("button",{type:"button",class:"weilin-comfyui-install-button",style:{width:"auto","min-width":"120px"},onClick:d},"  ")])]),s("button",{class:"weilin-comfyui-save-button",onClick:p},"AI")]),s("div",oy,[s("div",ay,g(f(t)("promptBox.settings.translaterSetting")),1),s("div",ly,[s("div",sy,[s("label",null,g(f(t)("promptBox.settings.translaterLangSourceSetting")),1),me(s("select",{"onUpdate:modelValue":k[3]||(k[3]=T=>o.value=T)},[(b(!0),E(De,null,Ve(f(Al),(T,D)=>(b(),E("option",{index:D,key:"lan-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,ry))),128))],512),[[Gt,o.value]])]),s("div",iy,[s("label",null,g(f(t)("promptBox.settings.translaterLangTargeSetting")),1),me(s("select",{"onUpdate:modelValue":k[4]||(k[4]=T=>a.value=T)},[(b(!0),E(De,null,Ve(f(Al),(T,D)=>(b(),E("option",{index:D,key:"lan-mu-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,uy))),128))],512),[[Gt,a.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:m},g(f(t)("promptBox.settings.saveTranslaterSetting")),1)]),s("div",cy,[s("div",dy,g(f(t)("promptBox.settings.testTranslaterTitle")),1),s("div",py,[s("label",null,g(f(t)("promptBox.settings.inputTestTranslater")),1),me(s("input",{type:"text","onUpdate:modelValue":k[5]||(k[5]=T=>r.value=T),placeholder:f(t)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,fy),[[Le,r.value]])]),s("div",gy,[s("label",null,g(f(t)("promptBox.settings.outPutTestTranslater")),1),me(s("input",{type:"text","onUpdate:modelValue":k[6]||(k[6]=T=>l.value=T),readonly:"",placeholder:f(t)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,my),[[Le,l.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:_},g(f(t)("promptBox.settings.testingTranslater")),1)])]))}},[["__scopeId","data-v-eb35aff5"]]),hy={class:"weilin-comfyui-settings-content"},_y={class:"weilin-comfyui-settings-sidebar"},yy={class:"weilin-comfyui-settings-main"},by={key:0},wy={class:"weilin-comfyui-setting-select"},Sy={value:"translater"},xy={class:"weilin-comfyui-translator-settings"},Ty={key:0,class:"weilin-comfyui-group-box"},ky={key:1,class:"weilin-comfyui-group-box"},Cy={class:"weilin-comfyui-group-title"},Ey={class:"weilin-comfyui-note-top"},$y={class:"weilin-comfyui-setting-item"},Ly={value:"auto"},Ay={value:"chinese_simplified"},My={value:"english"},Iy={class:"weilin-comfyui-setting-item"},Dy={value:"chinese_simplified"},Oy={value:"english"},Ry={key:2,class:"weilin-comfyui-group-box"},Ny={class:"weilin-comfyui-group-title"},Py={class:"weilin-comfyui-translater-setting-box"},Fy={class:"weilin-comfyui-setting-small-titile"},By={class:"weilin-comfyui-setting-item"},Uy=["index","value"],Vy={class:"weilin-comfyui-language-selectors"},Wy={class:"weilin-comfyui-setting-item"},zy=["index","value"],Hy={class:"weilin-comfyui-setting-item"},jy=["index","value"],Gy={class:"weilin-comfyui-tranlater-text-box"},qy={class:"weilin-comfyui-setting-small-titile"},Ky={class:"weilin-comfyui-setting-item"},Yy=["placeholder"],Jy={class:"weilin-comfyui-setting-item"},Xy=["placeholder"],Qy={key:1},Zy={class:"weilin-comfyui-floating-ball-settings"},e4={class:"weilin-comfyui-setting-item"},t4=["placeholder"],n4={class:"weilin-comfyui-setting-item"},o4=["placeholder"],a4={class:"weilin-comfyui-setting-item"},l4=["placeholder"],s4={key:2},r4={class:"weilin-comfyui-floating-ball-settings"},i4={class:"weilin-comfyui-setting-item"},u4={class:"weilin-comfyui-setting-item"},c4={class:"weilin-comfyui-setting-item"},d4={class:"weilin-comfyui-setting-item"},p4={class:"weilin-comfyui-setting-item"},f4={class:"weilin-comfyui-setting-item"},g4={key:3},m4={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},v4={class:"weilin-comfyui-settings-column"},h4={class:"weilin-comfyui-setting-item"},_4={class:"weilin-comfyui-setting-item"},y4=["placeholder"],b4={class:"weilin-comfyui-setting-item"},w4=["placeholder"],S4={class:"weilin-comfyui-setting-item"},x4=["placeholder"],T4={class:"weilin-comfyui-settings-column"},k4={class:"weilin-comfyui-setting-item"},C4={value:"default"},E4={value:"custom"},$4={key:0,class:"weilin-comfyui-setting-item"},L4={key:0,class:"weilin-comfyui-skin-preview"},A4=["src"],M4={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},I4={value:"gradient"},D4={value:"transparent"},O4={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},R4={style:{display:"flex",gap:"10px","align-items":"center"}},N4={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},P4={key:4},F4={class:"weilin-comfyui-floating-ball-settings"},B4={class:"weilin-comfyui-setting-item"},U4={class:"weilin-comfyui-setting-item"},V4={class:"weilin-comfyui-setting-item"},W4={class:"weilin-comfyui-setting-item"},z4={class:"weilin-comfyui-setting-item"},H4={class:"weilin-comfyui-setting-item"},j4={class:"weilin-comfyui-setting-item"},G4={key:5},q4={class:"weilin-comfyui-openai-settings"},K4={class:"weilin-comfyui-setting-item"},Y4=["value"],J4={class:"weilin-comfyui-config-list"},X4={class:"weilin-comfyui-config-header"},Q4={class:"weilin-comfyui-config-actions"},Z4=["onClick"],eb=["onClick"],tb={key:0,class:"weilin-comfyui-config-form"},nb={class:"weilin-comfyui-form-group"},ob=["placeholder"],ab={class:"weilin-comfyui-form-group"},lb=["placeholder"],sb={class:"weilin-comfyui-form-group"},rb=["placeholder"],ib={class:"weilin-comfyui-form-actions"},ub=["onClick"],cb={key:1,class:"weilin-comfyui-config-details"},db={key:0,class:"weilin-comfyui-config-form"},pb={class:"weilin-comfyui-form-group"},fb=["placeholder"],gb={class:"weilin-comfyui-form-group"},mb=["placeholder"],vb={class:"weilin-comfyui-form-group"},hb=["placeholder"],_b={class:"weilin-comfyui-form-actions"},yb={key:6},bb={class:"weilin-comfyui-sponsor-me-settings"},wb={key:7},Sb={class:"weilin-comfyui-start-panel-settings"},Ff=yt({__name:"setting_dialog",emits:["functionTogglesUpdated"],setup(e,{expose:t,emit:n}){const o=n,{t:a}=_t(),l=v(!1),r=v("translator"),i=v("baidu"),u=v(""),p=v(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),c=v(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),d=v(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),h=v(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),m=v(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||h.value),_=v(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),x=v(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),k=v(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),T=v(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),D=v(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),K=v(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),S=v(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),P=v(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),j=v(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),G=v(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),q=v(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),Y=v(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),_e=v(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),se=v(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),R=v(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),Z=v(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),te=v(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),z=v(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),ne=v(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),ae=v(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false"),F=v(""),B=v(""),ie=v(""),Ce=v(0),le=v([]),de=v(!1),ve=v({api_key:"",base_url:"https://api.openai.com/v1",model:""}),oe=v(!1),X=v(-1),M=v("");v(!1),v(!1);const U=v(""),H=v(""),I=v(25),V=v(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),C=v(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),w=We=>{r.value=We,We=="setting_auto_complete_limit"&&Xt()},N=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",p.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",c.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),J({type:"success",str:"message.saveSuccess"})},Q=()=>{localStorage.setItem("weilin_function_toggles_clearAll",R.value),localStorage.setItem("weilin_function_toggles_deleteButton",Z.value),localStorage.setItem("weilin_function_toggles_randomTag",te.value),localStorage.setItem("weilin_function_toggles_randomTagSettings",z.value),localStorage.setItem("weilin_function_toggles_translateTag",ne.value),localStorage.setItem("weilin_function_toggles_clearDisabled",ae.value),o("functionTogglesUpdated",{clearAll:R.value,deleteButton:Z.value,randomTag:te.value,randomTagSettings:z.value,translateTag:ne.value,clearDisabled:ae.value}),J({type:"success",str:"message.saveSuccess"})},fe=We=>{const ke=We.target.files[0];if(ke){const Ee=new FileReader;Ee.onload=St=>{k.value=St.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",St.target.result)},Ee.readAsDataURL(ke)}},he=()=>{D.value="#6a11cb",K.value="#2575fc"},L=()=>{if(d.value<1||h.value<5||m.value<5){J({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",_.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",d.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",h.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",x.value),localStorage.setItem("weilin_prompt_ui_bgType",T.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",D.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",K.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",S.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),J({type:"success",str:"message.saveSuccess"})},y=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",P.value),localStorage.setItem("weilin_prompt_ui_period_conversion",j.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",G.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",q.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",Y.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",_e.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",se.value),J({type:"success",str:"message.saveSuccess"})},O=()=>{Js.getUserSetting().then(We=>{le.value=We.data.openai_settings,Ce.value=We.data.select_openai})},W=()=>{ve.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},oe.value=!1,de.value=!0},we=We=>{Ll.deleteOpenAiSetting({index:We}).then(ke=>{O(),J({type:"success",str:"message.deleteSuccess"})}).catch(ke=>{J({type:"warn",str:"message.networkError"})})},be=We=>{X.value===We?X.value=-1:(ve.value={...le.value[We]},X.value=We)},ee=We=>{Ll.updateOpenAiSetting({index:We,...ve.value}).then(ke=>{O(),X.value=-1,J({type:"success",str:"message.saveSuccess"})}).catch(ke=>{J({type:"warn",str:"message.networkError"})})},pe=()=>{Ll.addOpenAiSetting({...ve.value}).then(We=>{O(),de.value=!1,X.value=-1,J({type:"success",str:"message.saveSuccess"})}).catch(We=>{J({type:"warn",str:"message.networkError"})})},Oe=()=>{de.value=!1,X.value=-1},Ne=()=>{Ll.setOpenAiSelect({index:Ce.value}).then(We=>{J({type:"success",str:"message.saveSuccess"})}).catch(We=>{J({type:"warn",str:"message.networkError"})})},ze=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},Xe=()=>{Js.startPanel().then(We=>{J({type:"success",str:"message.startPanelSuccess"})}).catch(We=>{J({type:"warn",str:"message.startPanelFailed"})})},it=()=>{vn.getTranslateSetting().then(We=>{localStorage.setItem("weilin_prompt_ui_translater_setting",We.data),M.value=We.data}).catch(We=>{J({type:"warn",str:"message.getTranslaterFail"})})},wt=()=>{vn.applyTranslateSetting(M.value).then(We=>{We.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",M.value),J({type:"success",str:"message.applyTranslaterSuccess"})):J({type:"warn",str:"message.applyToTranslaterFail"})}).catch(We=>{J({type:"warn",str:"message.applyTranslaterFail"})})},Ot=()=>{vn.getTranslateBuktSetting().then(We=>{F.value=We.data.translate_service,B.value=We.data.translate_source_lang,ie.value=We.data.translate_target_lang}).catch(We=>{J({type:"warn",str:"message.getTranslaterFail"})})},jn=()=>{vn.saveTranslateSetting(F.value,B.value,ie.value).then(We=>{We.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(We=>{J({type:"warn",str:"message.saveFailed"})})},qo=()=>{vn.translaterInputText("",U.value).then(We=>{H.value=We.data}).catch(We=>{J({type:"warn",str:"message.translaterTestFail"})})},Ht=v(null),Xt=async()=>{await Ki.getAutocompleteLimit().then(We=>{I.value=We.data}).catch(We=>{console.error(We),J({type:"warn",str:"message.networkError"})})},Fn=async()=>{await Ki.updateAutocompleteLimit(I.value).then(We=>{J({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",V.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",C.value)}).catch(We=>{console.error(We),J({type:"warn",str:"message.networkError"})})},xo=We=>{const ke=Al.find(Ee=>Ee.translator===We);return ke?ke.language:We};return ct(()=>{Ot(),it(),O()}),Rn(()=>{Ht.value&&clearInterval(Ht.value)}),t({open:()=>{r.value="translator",i.value="baidu",u.value="",p.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",c.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",d.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,h.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,_.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",P.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",j.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",G.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",q.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",Y.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",_e.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",l.value=!0}}),(We,ke)=>(b(),xt(Aa,{modelValue:l.value,"onUpdate:modelValue":ke[48]||(ke[48]=Ee=>l.value=Ee),title:f(a)("promptBox.settings.title")},{footer:dt(()=>[s("button",{onClick:ke[47]||(ke[47]=Ee=>l.value=!1)},g(f(a)("promptBox.settings.close")),1)]),default:dt(()=>[s("div",hy,[s("div",_y,[s("ul",null,[s("li",{class:$e({"weilin-comfyui-active":r.value==="translator"}),onClick:ke[0]||(ke[0]=Ee=>w("translator"))},g(f(a)("promptBox.settings.translator")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_function_toggles"}),onClick:ke[1]||(ke[1]=Ee=>w("setting_function_toggles"))},g(f(a)("promptBox.settings.setting_function_toggles")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_auto_complete_limit"}),onClick:ke[2]||(ke[2]=Ee=>w("setting_auto_complete_limit"))},g(f(a)("promptBox.settings.setting_auto_complete_limit")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_floating_ball"}),onClick:ke[3]||(ke[3]=Ee=>w("setting_floating_ball"))},g(f(a)("promptBox.settings.setting_floating_ball")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_prompt_box"}),onClick:ke[4]||(ke[4]=Ee=>w("setting_prompt_box"))},g(f(a)("promptBox.settings.setting_prompt_box")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_openai_box"}),onClick:ke[5]||(ke[5]=Ee=>w("setting_openai_box"))},g(f(a)("promptBox.settings.setting_openai_box")),3),s("li",{class:$e({"weilin-comfyui-active":r.value==="setting_sponsor_me"}),onClick:ke[6]||(ke[6]=Ee=>w("setting_sponsor_me"))},g(f(a)("promptBox.settings.setting_sponsor_me")),3)])]),s("div",yy,[r.value==="translator"?(b(),E("div",by,[s("h3",null,g(f(a)("promptBox.settings.translator")),1),s("div",wy,[s("label",null,g(f(a)("promptBox.settings.selectTranslater")),1),me(s("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":ke[7]||(ke[7]=Ee=>M.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Sy,g(f(a)("promptBox.settings.selectOptionPythonTranslater")),1),ke[49]||(ke[49]=s("option",{value:"other_ai_plate"},"AI",-1)),ke[50]||(ke[50]=s("option",{value:"openai"},"OpenAI API ",-1))],512),[[Gt,M.value]]),s("button",{class:"weilin-comfyui-install-button",onClick:wt},g(f(a)("promptBox.settings.apply")),1)]),s("div",xy,[M.value=="other_ai_plate"?(b(),E("div",Ty,[He(vy)])):ce("",!0),M.value=="network"?(b(),E("div",ky,[s("div",Cy,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),s("div",Ey,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"https://github.com/xnx3/translate",1),s("div",$y,[s("label",null,g(f(a)("promptBox.settings.sourceLanguage")),1),me(s("select",{"onUpdate:modelValue":ke[8]||(ke[8]=Ee=>p.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Ly,g(f(a)("promptBox.settings.auto_detect")),1),s("option",Ay,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",My,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,p.value]])]),s("div",Iy,[s("label",null,g(f(a)("promptBox.settings.targetLanguage")),1),me(s("select",{"onUpdate:modelValue":ke[9]||(ke[9]=Ee=>c.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Dy,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",Oy,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,c.value]])]),s("button",{class:"weilin-comfyui-save-button",onClick:N},g(f(a)("promptBox.settings.save")),1)])):ce("",!0),M.value=="translater"?(b(),E("div",Ry,[s("div",Ny,g(f(a)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),s("div",Py,[s("div",Fy,g(f(a)("promptBox.settings.translaterSetting")),1),s("div",By,[s("label",null,g(f(a)("promptBox.settings.chooseTranslaterSetting")),1),me(s("select",{"onUpdate:modelValue":ke[10]||(ke[10]=Ee=>F.value=Ee)},[(b(!0),E(De,null,Ve(f(Y0),(Ee,St)=>(b(),E("option",{index:St,key:"tran-item_"+St,value:Ee},g(f(a)("translaterService."+Ee)),9,Uy))),128))],512),[[Gt,F.value]])]),s("div",Vy,[s("div",Wy,[s("label",null,g(f(a)("promptBox.settings.translaterLangSourceSetting")),1),me(s("select",{"onUpdate:modelValue":ke[11]||(ke[11]=Ee=>B.value=Ee)},[(b(!0),E(De,null,Ve(f(Al),(Ee,St)=>(b(),E("option",{index:St,key:"lan-item_"+St,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,zy))),128))],512),[[Gt,B.value]])]),s("div",Hy,[s("label",null,g(f(a)("promptBox.settings.translaterLangTargeSetting")),1),me(s("select",{"onUpdate:modelValue":ke[12]||(ke[12]=Ee=>ie.value=Ee)},[(b(!0),E(De,null,Ve(f(Al),(Ee,St)=>(b(),E("option",{index:St,key:"lan-mu-item_"+St,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,jy))),128))],512),[[Gt,ie.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:jn},g(f(a)("promptBox.settings.saveTranslaterSetting")),1)]),s("div",Gy,[s("div",qy,g(f(a)("promptBox.settings.testTranslaterTitle")),1),s("div",Ky,[s("label",null,g(f(a)("promptBox.settings.inputTestTranslater"))+" - "+g(f(a)("translaterLanguage."+xo(ie.value))),1),me(s("input",{type:"text","onUpdate:modelValue":ke[13]||(ke[13]=Ee=>U.value=Ee),placeholder:f(a)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,Yy),[[Le,U.value]])]),s("div",Jy,[s("label",null,g(f(a)("promptBox.settings.outPutTestTranslater"))+" - "+g(f(a)("translaterLanguage."+xo(B.value))),1),me(s("input",{type:"text","onUpdate:modelValue":ke[14]||(ke[14]=Ee=>H.value=Ee),readonly:"",placeholder:f(a)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,Xy),[[Le,H.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:qo},g(f(a)("promptBox.settings.testingTranslater")),1)])])):ce("",!0)])])):ce("",!0),r.value==="setting_auto_complete_limit"?(b(),E("div",Qy,[s("h3",null,g(f(a)("promptBox.settings.setting_auto_complete_limit")),1),s("div",Zy,[s("div",e4,[s("label",null,g(f(a)("promptBox.settings.show_auto_limit")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[15]||(ke[15]=Ee=>I.value=Ee),min:"1",max:"99999999",style:{width:"100px"},placeholder:f(a)("promptBox.settings.showAutoLimitPlaceholder")},null,8,t4),[[Le,I.value,void 0,{number:!0}]])]),s("div",n4,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteWidth")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[16]||(ke[16]=Ee=>V.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,o4),[[Le,V.value,void 0,{number:!0}]])]),s("div",a4,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteHeight")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[17]||(ke[17]=Ee=>C.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,l4),[[Le,C.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",onClick:Fn},g(f(a)("promptBox.settings.save")),1)])])):ce("",!0),r.value==="setting_function_toggles"?(b(),E("div",s4,[s("h3",null,g(f(a)("promptBox.settings.setting_function_toggles_full")),1),s("div",r4,[s("div",i4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[18]||(ke[18]=Ee=>R.value=Ee)},null,512),[[Mt,R.value]]),je(" "+g(f(a)("promptBox.settings.enableClearAll")),1)])]),s("div",u4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[19]||(ke[19]=Ee=>Z.value=Ee)},null,512),[[Mt,Z.value]]),je(" "+g(f(a)("promptBox.settings.enableDeleteButton")),1)])]),s("div",c4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[20]||(ke[20]=Ee=>te.value=Ee)},null,512),[[Mt,te.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTag")),1)])]),s("div",d4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[21]||(ke[21]=Ee=>z.value=Ee)},null,512),[[Mt,z.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTagSettings")),1)])]),s("div",p4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[22]||(ke[22]=Ee=>ne.value=Ee)},null,512),[[Mt,ne.value]]),je(" "+g(f(a)("promptBox.settings.enableTranslateTag")),1)])]),s("div",f4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[23]||(ke[23]=Ee=>ae.value=Ee)},null,512),[[Mt,ae.value]]),je(" "+g(f(a)("promptBox.settings.enableClearDisabled")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:Q},g(f(a)("promptBox.settings.save")),1)])])):ce("",!0),r.value==="setting_floating_ball"?(b(),E("div",g4,[s("h3",null,g(f(a)("promptBox.settings.setting_floating_ball")),1),s("div",m4,[s("div",v4,[s("div",h4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[24]||(ke[24]=Ee=>_.value=Ee)},null,512),[[Mt,_.value]]),je(" "+g(f(a)("promptBox.settings.enableFloatingBall")),1)])]),s("div",_4,[s("label",null,g(f(a)("promptBox.settings.floatingBallCount")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[25]||(ke[25]=Ee=>d.value=Ee),min:"1",max:"100",placeholder:f(a)("promptBox.settings.floatingBallCountPlaceholder")},null,8,y4),[[Le,d.value,void 0,{number:!0}]])]),s("div",b4,[s("label",null,g(f(a)("promptBox.settings.floatingBallSize")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[26]||(ke[26]=Ee=>h.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallSizePlaceholder")},null,8,w4),[[Le,h.value,void 0,{number:!0}]])]),s("div",S4,[s("label",null,g(f(a)("promptBox.settings.floatingBallHeight")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[27]||(ke[27]=Ee=>m.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,x4),[[Le,m.value,void 0,{number:!0}]])])]),s("div",T4,[s("div",k4,[s("label",null,g(f(a)("promptBox.settings.skinSetting")),1),me(s("select",{"onUpdate:modelValue":ke[28]||(ke[28]=Ee=>x.value=Ee)},[s("option",C4,g(f(a)("promptBox.settings.defaultSkin")),1),s("option",E4,g(f(a)("promptBox.settings.customSkin")),1)],512),[[Gt,x.value]])]),x.value==="custom"?(b(),E("div",$4,[s("label",null,g(f(a)("promptBox.settings.uploadSkin")),1),s("input",{type:"file",accept:"image/*",onChange:fe,ref:"skinUploader"},null,544),k.value?(b(),E("div",L4,[s("img",{src:k.value,alt:"Custom Skin Preview"},null,8,A4)])):ce("",!0)])):ce("",!0)]),s("div",M4,[s("label",null,g(f(a)("promptBox.settings.bgSetting")),1),me(s("select",{"onUpdate:modelValue":ke[29]||(ke[29]=Ee=>T.value=Ee)},[s("option",I4,g(f(a)("promptBox.settings.gradientBg")),1),s("option",D4,g(f(a)("promptBox.settings.transparentBg")),1)],512),[[Gt,T.value]])]),T.value==="gradient"?(b(),E("div",O4,[s("label",null,g(f(a)("promptBox.settings.gradientColor")),1),s("div",R4,[me(s("input",{type:"color","onUpdate:modelValue":ke[30]||(ke[30]=Ee=>D.value=Ee)},null,512),[[Le,D.value]]),me(s("input",{type:"color","onUpdate:modelValue":ke[31]||(ke[31]=Ee=>K.value=Ee)},null,512),[[Le,K.value]]),s("button",{onClick:he,style:{"margin-left":"10px",width:"200px"}},g(f(a)("promptBox.settings.resetToDefault")),1)])])):ce("",!0),s("div",N4,[s("label",null,g(f(a)("promptBox.settings.borderRadius")),1),me(s("input",{type:"number","onUpdate:modelValue":ke[32]||(ke[32]=Ee=>S.value=Ee),min:"0",max:"50"},null,512),[[Le,S.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:L},g(f(a)("promptBox.settings.save")),1)])])):ce("",!0),r.value==="setting_prompt_box"?(b(),E("div",P4,[s("h3",null,g(f(a)("promptBox.settings.setting_prompt_box")),1),s("div",F4,[s("div",B4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[33]||(ke[33]=Ee=>P.value=Ee)},null,512),[[Mt,P.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaConversion")),1)])]),s("div",U4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[34]||(ke[34]=Ee=>j.value=Ee)},null,512),[[Mt,j.value]]),je(" "+g(f(a)("promptBox.settings.enablePeriodConversion")),1)])]),s("div",V4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[35]||(ke[35]=Ee=>G.value=Ee)},null,512),[[Mt,G.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketConversion")),1)])]),s("div",W4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[36]||(ke[36]=Ee=>q.value=Ee)},null,512),[[Mt,q.value]]),je(" "+g(f(a)("promptBox.settings.enableAngleBracketConversion")),1)])]),s("div",z4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[37]||(ke[37]=Ee=>Y.value=Ee)},null,512),[[Mt,Y.value]]),je(" "+g(f(a)("promptBox.settings.enableUnderscoreToBracket")),1)])]),s("div",H4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[38]||(ke[38]=Ee=>_e.value=Ee)},null,512),[[Mt,_e.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),s("div",j4,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ke[39]||(ke[39]=Ee=>se.value=Ee)},null,512),[[Mt,se.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketEscape")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:y},g(f(a)("promptBox.settings.save")),1)])])):ce("",!0),r.value==="setting_openai_box"?(b(),E("div",G4,[s("h3",null,g(f(a)("promptBox.settings.openaiSettings")),1),s("div",q4,[s("div",K4,[s("label",null,g(f(a)("promptBox.settings.selectedOpenaiConfig")),1),me(s("select",{"onUpdate:modelValue":ke[40]||(ke[40]=Ee=>Ce.value=Ee),onChange:Ne},[(b(!0),E(De,null,Ve(le.value,(Ee,St)=>(b(),E("option",{key:St,value:St},g(Ee.model)+" ("+g(Ee.base_url)+") ",9,Y4))),128))],544),[[Gt,Ce.value]])]),s("div",J4,[(b(!0),E(De,null,Ve(le.value,(Ee,St)=>(b(),E("div",{key:St,class:"weilin-comfyui-config-item"},[s("div",X4,[s("span",null,g(Ee.model),1),s("div",Q4,[s("button",{onClick:dn=>be(St)},g(X.value===St?f(a)("promptBox.settings.cancel"):f(a)("promptBox.settings.edit")),9,Z4),s("button",{onClick:dn=>we(St)},g(f(a)("promptBox.settings.delete")),9,eb)])]),X.value===St?(b(),E("div",tb,[s("div",nb,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[41]||(ke[41]=dn=>ve.value.api_key=dn),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,ob),[[Le,ve.value.api_key]])]),s("div",ab,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[42]||(ke[42]=dn=>ve.value.base_url=dn),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,lb),[[Le,ve.value.base_url]])]),s("div",sb,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[43]||(ke[43]=dn=>ve.value.model=dn),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,rb),[[Le,ve.value.model]])]),s("div",ib,[s("button",{onClick:dn=>ee(St)},g(f(a)("promptBox.settings.save")),9,ub)])])):(b(),E("div",cb,[s("div",null,g(f(a)("promptBox.settings.openai_api_key"))+": "+g(Ee.api_key?"******":f(a)("promptBox.settings.not_set")),1),s("div",null,g(f(a)("promptBox.settings.openai_base_url"))+": "+g(Ee.base_url),1)]))]))),128))]),de.value?(b(),E("div",db,[s("div",pb,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[44]||(ke[44]=Ee=>ve.value.api_key=Ee),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,fb),[[Le,ve.value.api_key]])]),s("div",gb,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[45]||(ke[45]=Ee=>ve.value.base_url=Ee),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,mb),[[Le,ve.value.base_url]])]),s("div",vb,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),me(s("input",{type:"text","onUpdate:modelValue":ke[46]||(ke[46]=Ee=>ve.value.model=Ee),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,hb),[[Le,ve.value.model]])]),s("div",_b,[s("button",{onClick:Oe},g(f(a)("promptBox.settings.cancel")),1),s("button",{onClick:pe},g(f(a)("promptBox.settings.save")),1)])])):ce("",!0),de.value?ce("",!0):(b(),E("button",{key:1,class:"weilin-comfyui-add-button",onClick:W},g(f(a)("promptBox.settings.addNewConfig")),1))])])):ce("",!0),r.value==="setting_sponsor_me"?(b(),E("div",yb,[s("h3",null,g(f(a)("promptBox.settings.setting_sponsor_me")),1),s("div",bb,[s("h1",null,g(f(a)("promptBox.settings.sponsorMeTip")),1),s("h2",null,g(f(a)("promptBox.settings.sponsorMeLink")),1),s("button",{class:"weilin-comfyui-sponsor-me-button",onClick:ze},g(f(a)("promptBox.settings.sponsorMe")),1)])])):ce("",!0),r.value==="setting_start_panel"?(b(),E("div",wb,[s("h3",null,g(f(a)("promptBox.settings.setting_start_panel")),1),s("div",Sb,[s("h4",null,g(f(a)("promptBox.settings.startPanelTip")),1),s("button",{class:"weilin-comfyui-start-panel-button",onClick:Xe},g(f(a)("promptBox.settings.startPanel")),1)])])):ce("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-4005aed7"]]),xb=["title"],Tb={class:"switch-icon"},kb={key:0,class:"moon",viewBox:"0 0 24 24"},Cb={key:1,class:"sun",viewBox:"0 0 24 24"},Eb="weilin_tools_",$b=yt({__name:"ThemeSwitch",setup(e){const{t}=_t(),n=`${Eb}theme`,o=v(localStorage.getItem(n)==="dark"),a=()=>{o.value=!o.value;const l=document.getElementById("weilin_comfyui_tools_prompt_ui_div");l&&l.setAttribute("data-theme",o.value?"dark":"light"),localStorage.setItem(n,o.value?"dark":"light")};return(l,r)=>(b(),E("button",{class:"theme-switch",onClick:a,title:f(t)("theme.toggle")},[s("div",Tb,[o.value?(b(),E("svg",kb,[...r[0]||(r[0]=[s("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(b(),E("svg",Cb,[...r[1]||(r[1]=[s("circle",{cx:"12",cy:"12",r:"5"},null,-1),s("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])]))]),al(l.$slots,"default",{isDark:o.value},void 0,!0)],8,xb))}},[["__scopeId","data-v-e8b2125f"]]),xn="weilin_tools_",Dt={getTagsList:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await Ie({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await Ie({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${xn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await Ie({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await Ie({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await Ie({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await Ie({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const Xs="0123456789abcdef";class ua{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new ua(t)}static fromFieldsV7(t,n,o,a){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(o)||!Number.isInteger(a)||t<0||n<0||o<0||a<0||t>0xffffffffffff||n>4095||o>1073741823||a>4294967295)throw new RangeError("invalid field value");const l=new Uint8Array(16);return l[0]=t/2**40,l[1]=t/2**32,l[2]=t/2**24,l[3]=t/2**16,l[4]=t/2**8,l[5]=t,l[6]=112|n>>>8,l[7]=n,l[8]=128|o>>>24,l[9]=o>>>16,l[10]=o>>>8,l[11]=o,l[12]=a>>>24,l[13]=a>>>16,l[14]=a>>>8,l[15]=a,new ua(l)}static parse(t){var n,o,a,l;let r;switch(t.length){case 32:r=(n=/^[0-9a-f]{32}$/i.exec(t))===null||n===void 0?void 0:n[0];break;case 36:r=(o=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||o===void 0?void 0:o.slice(1,6).join("");break;case 38:r=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:r=(l=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||l===void 0?void 0:l.slice(1,6).join("");break}if(r){const i=new Uint8Array(16);for(let u=0;u<16;u+=4){const p=parseInt(r.substring(2*u,2*u+8),16);i[u+0]=p>>>24,i[u+1]=p>>>16,i[u+2]=p>>>8,i[u+3]=p}return new ua(i)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let n=0;n<this.bytes.length;n++)t+=Xs.charAt(this.bytes[n]>>>4),t+=Xs.charAt(this.bytes[n]&15),(n===3||n===5||n===7||n===9)&&(t+="-");return t}toHex(){let t="";for(let n=0;n<this.bytes.length;n++)t+=Xs.charAt(this.bytes[n]>>>4),t+=Xs.charAt(this.bytes[n]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(n=>n===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(n=>n===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new ua(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let n=0;n<16;n++){const o=this.bytes[n]-t.bytes[n];if(o!==0)return Math.sign(o)}return 0}}class Lb{constructor(t){this.timestamp=0,this.counter=0,this.random=t??Ab()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,n){let o=this.generateOrAbortCore(t,n);return o===void 0&&(this.timestamp=0,o=this.generateOrAbortCore(t,n)),o}generateOrAbortCore(t,n){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(n<0||n>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+n>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return ua.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,ua.ofInner(t)}}const Ab=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new Mb;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class Mb{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Bf;const zo=()=>Ib().toString(),Ib=()=>(Bf||(Bf=new Lb)).generate(),Db={class:"tag-manager"},Ob={class:"category-tabs"},Rb={class:"tabs-wrapper primary-tabs"},Nb={class:"tabs-scroll"},Pb=["onClick"],Fb={class:"tab-text"},Bb={key:0,class:"tabs-wrapper group-tabs"},Ub={class:"tabs-scroll"},Vb=["onClick"],Wb={class:"tab-text"},Uf=yt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=n,l=v([]),r=v(null),i=v(null),u=v([]),p=v(!1),c=v(!1),d=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},h=async()=>{try{const D=await Dt.getTagsGroupList();if(l.value=D.info,i.value){const K=l.value.flatMap(S=>S.groups).find(S=>S.p_uuid===i.value.p_uuid);K?i.value=K:i.value=null}if(r.value){const K=l.value.find(S=>S.p_uuid===r.value.p_uuid);K?r.value=K:r.value=null}}catch(D){console.error(":",D)}},m=D=>{if(!D||D==="transparent")return"var(--primary-text)";let K,S,P,j=1;if(D.startsWith("rgba")){const q=D.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);q&&([,K,S,P,j]=q.map(Number))}else if(D.startsWith("rgb")){const q=D.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);q&&([,K,S,P]=q.map(Number))}return j<.5?"var(--primary-text)":(K*299+S*587+P*114)/1e3>128?"#000000":"#ffffff"};ct(()=>{window.addEventListener("message",k)}),Do(()=>{window.removeEventListener("message",k)});const _=D=>{r.value=D,i.value=null,p.value=!1,u.value=[]},x=D=>{i.value=D,p.value=!1,u.value=[]},k=D=>{D.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&h()},T=()=>{if(i.value==null||r.value==null){J({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{group:r.value,sub:i.value}),c.value=!1};return t({open:()=>{d(),c.value=!0}}),(D,K)=>(b(),xt(Aa,{modelValue:c.value,"onUpdate:modelValue":K[1]||(K[1]=S=>c.value=S),title:f(o)("importDialog.selectTitle")},{footer:dt(()=>[s("button",{onClick:K[0]||(K[0]=S=>c.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:T},g(f(o)("importDialog.sureSelect")),1)]),default:dt(()=>[s("div",Db,[s("div",Ob,[s("div",Rb,[s("div",Nb,[(b(!0),E(De,null,Ve(l.value,(S,P)=>{var j,G,q;return b(),E("div",{key:"Tabss-"+P,class:$e(["tab-item",{active:((j=r.value)==null?void 0:j.name)===S.name}]),style:gt({backgroundColor:((G=r.value)==null?void 0:G.name)===S.name?"var(--primary-color)":S.color,color:((q=r.value)==null?void 0:q.name)===S.name?"#ffffff":m(S.color)}),onClick:Y=>_(S)},[s("span",Fb,g(S.name),1)],14,Pb)}),128))])]),r.value?(b(),E("div",Bb,[s("div",Ub,[(b(!0),E(De,null,Ve(r.value.groups,(S,P)=>{var j,G,q;return b(),E("div",{key:"TabsSw-"+P,class:$e(["tab-item",{active:((j=i.value)==null?void 0:j.name)===S.name}]),style:gt({backgroundColor:((G=i.value)==null?void 0:G.name)===S.name?"var(--primary-color)":S.color,color:((q=i.value)==null?void 0:q.name)===S.name?"#ffffff":m(S.color)}),onClick:Y=>x(S)},[s("span",Wb,g(S.name),1)],14,Vb)}),128))])])):ce("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-6031c9d4"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Vf(e){return typeof e>"u"||e===null}function zb(e){return typeof e=="object"&&e!==null}function Hb(e){return Array.isArray(e)?e:Vf(e)?[]:[e]}function jb(e,t){var n,o,a,l;if(t)for(l=Object.keys(t),n=0,o=l.length;n<o;n+=1)a=l[n],e[a]=t[a];return e}function Gb(e,t){var n="",o;for(o=0;o<t;o+=1)n+=e;return n}function qb(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Kb=Vf,Yb=zb,Jb=Hb,Xb=Gb,Qb=qb,Zb=jb,Kt={isNothing:Kb,isObject:Yb,toArray:Jb,repeat:Xb,isNegativeZero:Qb,extend:Zb};function Wf(e,t){var n="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),o+" "+n):o}function Ml(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Wf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ml.prototype=Object.create(Error.prototype),Ml.prototype.constructor=Ml,Ml.prototype.toString=function(t){return this.name+": "+Wf(this,t)};var hn=Ml;function Ji(e,t,n,o,a){var l="",r="",i=Math.floor(a/2)-1;return o-t>i&&(l=" ... ",t=o-i+l.length),n-o>i&&(r=" ...",n=o+i-r.length),{str:l+e.slice(t,n).replace(/\t/g,"")+r,pos:o-t+l.length}}function Xi(e,t){return Kt.repeat(" ",t-e.length)+e}function e3(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,o=[0],a=[],l,r=-1;l=n.exec(e.buffer);)a.push(l.index),o.push(l.index+l[0].length),e.position<=l.index&&r<0&&(r=o.length-2);r<0&&(r=o.length-1);var i="",u,p,c=Math.min(e.line+t.linesAfter,a.length).toString().length,d=t.maxLength-(t.indent+c+3);for(u=1;u<=t.linesBefore&&!(r-u<0);u++)p=Ji(e.buffer,o[r-u],a[r-u],e.position-(o[r]-o[r-u]),d),i=Kt.repeat(" ",t.indent)+Xi((e.line-u+1).toString(),c)+" | "+p.str+`
`+i;for(p=Ji(e.buffer,o[r],a[r],e.position,d),i+=Kt.repeat(" ",t.indent)+Xi((e.line+1).toString(),c)+" | "+p.str+`
`,i+=Kt.repeat("-",t.indent+c+3+p.pos)+`^
`,u=1;u<=t.linesAfter&&!(r+u>=a.length);u++)p=Ji(e.buffer,o[r+u],a[r+u],e.position-(o[r]-o[r+u]),d),i+=Kt.repeat(" ",t.indent)+Xi((e.line+u+1).toString(),c)+" | "+p.str+`
`;return i.replace(/\n$/,"")}var t3=e3,n3=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],o3=["scalar","sequence","mapping"];function a3(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(o){t[String(o)]=n})}),t}function l3(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(n3.indexOf(n)===-1)throw new hn('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=a3(t.styleAliases||null),o3.indexOf(this.kind)===-1)throw new hn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var tn=l3;function zf(e,t){var n=[];return e[t].forEach(function(o){var a=n.length;n.forEach(function(l,r){l.tag===o.tag&&l.kind===o.kind&&l.multi===o.multi&&(a=r)}),n[a]=o}),n}function s3(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function o(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(o);return e}function Qi(e){return this.extend(e)}Qi.prototype.extend=function(t){var n=[],o=[];if(t instanceof tn)o.push(t);else if(Array.isArray(t))o=o.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(o=o.concat(t.explicit));else throw new hn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof tn))throw new hn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new hn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new hn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(l){if(!(l instanceof tn))throw new hn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Qi.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(o),a.compiledImplicit=zf(a,"implicit"),a.compiledExplicit=zf(a,"explicit"),a.compiledTypeMap=s3(a.compiledImplicit,a.compiledExplicit),a};var Hf=Qi,jf=new tn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Gf=new tn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),qf=new tn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Kf=new Hf({explicit:[jf,Gf,qf]});function r3(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function i3(){return null}function u3(e){return e===null}var Yf=new tn("tag:yaml.org,2002:null",{kind:"scalar",resolve:r3,construct:i3,predicate:u3,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function c3(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function d3(e){return e==="true"||e==="True"||e==="TRUE"}function p3(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Jf=new tn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c3,construct:d3,predicate:p3,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function f3(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function g3(e){return 48<=e&&e<=55}function m3(e){return 48<=e&&e<=57}function v3(e){if(e===null)return!1;var t=e.length,n=0,o=!1,a;if(!t)return!1;if(a=e[n],(a==="-"||a==="+")&&(a=e[++n]),a==="0"){if(n+1===t)return!0;if(a=e[++n],a==="b"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;o=!0}return o&&a!=="_"}if(a==="x"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!f3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}if(a==="o"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!g3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}}if(a==="_")return!1;for(;n<t;n++)if(a=e[n],a!=="_"){if(!m3(e.charCodeAt(n)))return!1;o=!0}return!(!o||a==="_")}function h3(e){var t=e,n=1,o;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),o=t[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),t=t.slice(1),o=t[0]),t==="0")return 0;if(o==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function _3(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Kt.isNegativeZero(e)}var Xf=new tn("tag:yaml.org,2002:int",{kind:"scalar",resolve:v3,construct:h3,predicate:_3,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),y3=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function b3(e){return!(e===null||!y3.test(e)||e[e.length-1]==="_")}function w3(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var S3=/^[-+]?[0-9]+e/;function x3(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kt.isNegativeZero(e))return"-0.0";return n=e.toString(10),S3.test(n)?n.replace("e",".e"):n}function T3(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kt.isNegativeZero(e))}var Qf=new tn("tag:yaml.org,2002:float",{kind:"scalar",resolve:b3,construct:w3,predicate:T3,represent:x3,defaultStyle:"lowercase"}),Zf=Kf.extend({implicit:[Yf,Jf,Xf,Qf]}),eg=Zf,tg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ng=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function k3(e){return e===null?!1:tg.exec(e)!==null||ng.exec(e)!==null}function C3(e){var t,n,o,a,l,r,i,u=0,p=null,c,d,h;if(t=tg.exec(e),t===null&&(t=ng.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],o=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,o,a));if(l=+t[4],r=+t[5],i=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(c=+t[10],d=+(t[11]||0),p=(c*60+d)*6e4,t[9]==="-"&&(p=-p)),h=new Date(Date.UTC(n,o,a,l,r,i,u)),p&&h.setTime(h.getTime()-p),h}function E3(e){return e.toISOString()}var og=new tn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:k3,construct:C3,instanceOf:Date,represent:E3});function $3(e){return e==="<<"||e===null}var ag=new tn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$3}),Zi=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function L3(e){if(e===null)return!1;var t,n,o=0,a=e.length,l=Zi;for(n=0;n<a;n++)if(t=l.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;o+=6}return o%8===0}function A3(e){var t,n,o=e.replace(/[\r\n=]/g,""),a=o.length,l=Zi,r=0,i=[];for(t=0;t<a;t++)t%4===0&&t&&(i.push(r>>16&255),i.push(r>>8&255),i.push(r&255)),r=r<<6|l.indexOf(o.charAt(t));return n=a%4*6,n===0?(i.push(r>>16&255),i.push(r>>8&255),i.push(r&255)):n===18?(i.push(r>>10&255),i.push(r>>2&255)):n===12&&i.push(r>>4&255),new Uint8Array(i)}function M3(e){var t="",n=0,o,a,l=e.length,r=Zi;for(o=0;o<l;o++)o%3===0&&o&&(t+=r[n>>18&63],t+=r[n>>12&63],t+=r[n>>6&63],t+=r[n&63]),n=(n<<8)+e[o];return a=l%3,a===0?(t+=r[n>>18&63],t+=r[n>>12&63],t+=r[n>>6&63],t+=r[n&63]):a===2?(t+=r[n>>10&63],t+=r[n>>4&63],t+=r[n<<2&63],t+=r[64]):a===1&&(t+=r[n>>2&63],t+=r[n<<4&63],t+=r[64],t+=r[64]),t}function I3(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var lg=new tn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:L3,construct:A3,predicate:I3,represent:M3}),D3=Object.prototype.hasOwnProperty,O3=Object.prototype.toString;function R3(e){if(e===null)return!0;var t=[],n,o,a,l,r,i=e;for(n=0,o=i.length;n<o;n+=1){if(a=i[n],r=!1,O3.call(a)!=="[object Object]")return!1;for(l in a)if(D3.call(a,l))if(!r)r=!0;else return!1;if(!r)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function N3(e){return e!==null?e:[]}var sg=new tn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:R3,construct:N3}),P3=Object.prototype.toString;function F3(e){if(e===null)return!0;var t,n,o,a,l,r=e;for(l=new Array(r.length),t=0,n=r.length;t<n;t+=1){if(o=r[t],P3.call(o)!=="[object Object]"||(a=Object.keys(o),a.length!==1))return!1;l[t]=[a[0],o[a[0]]]}return!0}function B3(e){if(e===null)return[];var t,n,o,a,l,r=e;for(l=new Array(r.length),t=0,n=r.length;t<n;t+=1)o=r[t],a=Object.keys(o),l[t]=[a[0],o[a[0]]];return l}var rg=new tn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:F3,construct:B3}),U3=Object.prototype.hasOwnProperty;function V3(e){if(e===null)return!0;var t,n=e;for(t in n)if(U3.call(n,t)&&n[t]!==null)return!1;return!0}function W3(e){return e!==null?e:{}}var ig=new tn("tag:yaml.org,2002:set",{kind:"mapping",resolve:V3,construct:W3}),eu=eg.extend({implicit:[og,ag],explicit:[lg,sg,rg,ig]}),Ho=Object.prototype.hasOwnProperty,Qs=1,ug=2,cg=3,Zs=4,tu=1,z3=2,dg=3,H3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,j3=/[\x85\u2028\u2029]/,G3=/[,\[\]\{\}]/,pg=/^(?:!|!!|![a-z\-]+!)$/i,fg=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function gg(e){return Object.prototype.toString.call(e)}function ao(e){return e===10||e===13}function ca(e){return e===9||e===32}function Tn(e){return e===9||e===32||e===10||e===13}function Ma(e){return e===44||e===91||e===93||e===123||e===125}function q3(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function K3(e){return e===120?2:e===117?4:e===85?8:0}function Y3(e){return 48<=e&&e<=57?e-48:-1}function mg(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function J3(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var vg=new Array(256),hg=new Array(256),Ia=0;Ia<256;Ia++)vg[Ia]=mg(Ia)?1:0,hg[Ia]=mg(Ia);function X3(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||eu,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _g(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=t3(n),new hn(t,n)}function Fe(e,t){throw _g(e,t)}function er(e,t){e.onWarning&&e.onWarning.call(null,_g(e,t))}var yg={YAML:function(t,n,o){var a,l,r;t.version!==null&&Fe(t,"duplication of %YAML directive"),o.length!==1&&Fe(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(o[0]),a===null&&Fe(t,"ill-formed argument of the YAML directive"),l=parseInt(a[1],10),r=parseInt(a[2],10),l!==1&&Fe(t,"unacceptable YAML version of the document"),t.version=o[0],t.checkLineBreaks=r<2,r!==1&&r!==2&&er(t,"unsupported YAML version of the document")},TAG:function(t,n,o){var a,l;o.length!==2&&Fe(t,"TAG directive accepts exactly two arguments"),a=o[0],l=o[1],pg.test(a)||Fe(t,"ill-formed tag handle (first argument) of the TAG directive"),Ho.call(t.tagMap,a)&&Fe(t,'there is a previously declared suffix for "'+a+'" tag handle'),fg.test(l)||Fe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{Fe(t,"tag prefix is malformed: "+l)}t.tagMap[a]=l}};function jo(e,t,n,o){var a,l,r,i;if(t<n){if(i=e.input.slice(t,n),o)for(a=0,l=i.length;a<l;a+=1)r=i.charCodeAt(a),r===9||32<=r&&r<=1114111||Fe(e,"expected valid JSON character");else H3.test(i)&&Fe(e,"the stream contains non-printable characters");e.result+=i}}function bg(e,t,n,o){var a,l,r,i;for(Kt.isObject(n)||Fe(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n),r=0,i=a.length;r<i;r+=1)l=a[r],Ho.call(t,l)||(t[l]=n[l],o[l]=!0)}function Da(e,t,n,o,a,l,r,i,u){var p,c;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),p=0,c=a.length;p<c;p+=1)Array.isArray(a[p])&&Fe(e,"nested arrays are not supported inside keys"),typeof a=="object"&&gg(a[p])==="[object Object]"&&(a[p]="[object Object]");if(typeof a=="object"&&gg(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(p=0,c=l.length;p<c;p+=1)bg(e,t,l[p],n);else bg(e,t,l,n);else!e.json&&!Ho.call(n,a)&&Ho.call(t,a)&&(e.line=r||e.line,e.lineStart=i||e.lineStart,e.position=u||e.position,Fe(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:l}):t[a]=l,delete n[a];return t}function nu(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Fe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Wt(e,t,n){for(var o=0,a=e.input.charCodeAt(e.position);a!==0;){for(;ca(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(ao(a))for(nu(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return n!==-1&&o!==0&&e.lineIndent<n&&er(e,"deficient indentation"),o}function tr(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Tn(n)))}function ou(e,t){t===1?e.result+=" ":t>1&&(e.result+=Kt.repeat(`
`,t-1))}function Q3(e,t,n){var o,a,l,r,i,u,p,c,d=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),Tn(m)||Ma(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(a=e.input.charCodeAt(e.position+1),Tn(a)||n&&Ma(a)))return!1;for(e.kind="scalar",e.result="",l=r=e.position,i=!1;m!==0;){if(m===58){if(a=e.input.charCodeAt(e.position+1),Tn(a)||n&&Ma(a))break}else if(m===35){if(o=e.input.charCodeAt(e.position-1),Tn(o))break}else{if(e.position===e.lineStart&&tr(e)||n&&Ma(m))break;if(ao(m))if(u=e.line,p=e.lineStart,c=e.lineIndent,Wt(e,!1,-1),e.lineIndent>=t){i=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=r,e.line=u,e.lineStart=p,e.lineIndent=c;break}}i&&(jo(e,l,r,!1),ou(e,e.line-u),l=r=e.position,i=!1),ca(m)||(r=e.position+1),m=e.input.charCodeAt(++e.position)}return jo(e,l,r,!1),e.result?!0:(e.kind=d,e.result=h,!1)}function Z3(e,t){var n,o,a;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,o=a=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(jo(e,o,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)o=e.position,e.position++,a=e.position;else return!0;else ao(n)?(jo(e,o,a,!0),ou(e,Wt(e,!1,t)),o=a=e.position):e.position===e.lineStart&&tr(e)?Fe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Fe(e,"unexpected end of the stream within a single quoted scalar")}function ew(e,t){var n,o,a,l,r,i;if(i=e.input.charCodeAt(e.position),i!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(i=e.input.charCodeAt(e.position))!==0;){if(i===34)return jo(e,n,e.position,!0),e.position++,!0;if(i===92){if(jo(e,n,e.position,!0),i=e.input.charCodeAt(++e.position),ao(i))Wt(e,!1,t);else if(i<256&&vg[i])e.result+=hg[i],e.position++;else if((r=K3(i))>0){for(a=r,l=0;a>0;a--)i=e.input.charCodeAt(++e.position),(r=q3(i))>=0?l=(l<<4)+r:Fe(e,"expected hexadecimal character");e.result+=J3(l),e.position++}else Fe(e,"unknown escape sequence");n=o=e.position}else ao(i)?(jo(e,n,o,!0),ou(e,Wt(e,!1,t)),n=o=e.position):e.position===e.lineStart&&tr(e)?Fe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}Fe(e,"unexpected end of the stream within a double quoted scalar")}function tw(e,t){var n=!0,o,a,l,r=e.tag,i,u=e.anchor,p,c,d,h,m,_=Object.create(null),x,k,T,D;if(D=e.input.charCodeAt(e.position),D===91)c=93,m=!1,i=[];else if(D===123)c=125,m=!0,i={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),D=e.input.charCodeAt(++e.position);D!==0;){if(Wt(e,!0,t),D=e.input.charCodeAt(e.position),D===c)return e.position++,e.tag=r,e.anchor=u,e.kind=m?"mapping":"sequence",e.result=i,!0;n?D===44&&Fe(e,"expected the node content, but found ','"):Fe(e,"missed comma between flow collection entries"),k=x=T=null,d=h=!1,D===63&&(p=e.input.charCodeAt(e.position+1),Tn(p)&&(d=h=!0,e.position++,Wt(e,!0,t))),o=e.line,a=e.lineStart,l=e.position,Oa(e,t,Qs,!1,!0),k=e.tag,x=e.result,Wt(e,!0,t),D=e.input.charCodeAt(e.position),(h||e.line===o)&&D===58&&(d=!0,D=e.input.charCodeAt(++e.position),Wt(e,!0,t),Oa(e,t,Qs,!1,!0),T=e.result),m?Da(e,i,_,k,x,T,o,a,l):d?i.push(Da(e,null,_,k,x,T,o,a,l)):i.push(x),Wt(e,!0,t),D=e.input.charCodeAt(e.position),D===44?(n=!0,D=e.input.charCodeAt(++e.position)):n=!1}Fe(e,"unexpected end of the stream within a flow collection")}function nw(e,t){var n,o,a=tu,l=!1,r=!1,i=t,u=0,p=!1,c,d;if(d=e.input.charCodeAt(e.position),d===124)o=!1;else if(d===62)o=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)tu===a?a=d===43?dg:z3:Fe(e,"repeat of a chomping mode identifier");else if((c=Y3(d))>=0)c===0?Fe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):r?Fe(e,"repeat of an indentation width identifier"):(i=t+c-1,r=!0);else break;if(ca(d)){do d=e.input.charCodeAt(++e.position);while(ca(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!ao(d)&&d!==0)}for(;d!==0;){for(nu(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!r||e.lineIndent<i)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!r&&e.lineIndent>i&&(i=e.lineIndent),ao(d)){u++;continue}if(e.lineIndent<i){a===dg?e.result+=Kt.repeat(`
`,l?1+u:u):a===tu&&l&&(e.result+=`
`);break}for(o?ca(d)?(p=!0,e.result+=Kt.repeat(`
`,l?1+u:u)):p?(p=!1,e.result+=Kt.repeat(`
`,u+1)):u===0?l&&(e.result+=" "):e.result+=Kt.repeat(`
`,u):e.result+=Kt.repeat(`
`,l?1+u:u),l=!0,r=!0,u=0,n=e.position;!ao(d)&&d!==0;)d=e.input.charCodeAt(++e.position);jo(e,n,e.position,!1)}return!0}function wg(e,t){var n,o=e.tag,a=e.anchor,l=[],r,i=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),!(u!==45||(r=e.input.charCodeAt(e.position+1),!Tn(r))));){if(i=!0,e.position++,Wt(e,!0,-1)&&e.lineIndent<=t){l.push(null),u=e.input.charCodeAt(e.position);continue}if(n=e.line,Oa(e,t,cg,!1,!0),l.push(e.result),Wt(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&u!==0)Fe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return i?(e.tag=o,e.anchor=a,e.kind="sequence",e.result=l,!0):!1}function ow(e,t,n){var o,a,l,r,i,u,p=e.tag,c=e.anchor,d={},h=Object.create(null),m=null,_=null,x=null,k=!1,T=!1,D;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),D=e.input.charCodeAt(e.position);D!==0;){if(!k&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),l=e.line,(D===63||D===58)&&Tn(o))D===63?(k&&(Da(e,d,h,m,_,null,r,i,u),m=_=x=null),T=!0,k=!0,a=!0):k?(k=!1,a=!0):Fe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,D=o;else{if(r=e.line,i=e.lineStart,u=e.position,!Oa(e,n,ug,!1,!0))break;if(e.line===l){for(D=e.input.charCodeAt(e.position);ca(D);)D=e.input.charCodeAt(++e.position);if(D===58)D=e.input.charCodeAt(++e.position),Tn(D)||Fe(e,"a whitespace character is expected after the key-value separator within a block mapping"),k&&(Da(e,d,h,m,_,null,r,i,u),m=_=x=null),T=!0,k=!1,a=!1,m=e.tag,_=e.result;else if(T)Fe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=c,!0}else if(T)Fe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=c,!0}if((e.line===l||e.lineIndent>t)&&(k&&(r=e.line,i=e.lineStart,u=e.position),Oa(e,t,Zs,!0,a)&&(k?_=e.result:x=e.result),k||(Da(e,d,h,m,_,x,r,i,u),m=_=x=null),Wt(e,!0,-1),D=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&D!==0)Fe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return k&&Da(e,d,h,m,_,null,r,i,u),T&&(e.tag=p,e.anchor=c,e.kind="mapping",e.result=d),T}function aw(e){var t,n=!1,o=!1,a,l,r;if(r=e.input.charCodeAt(e.position),r!==33)return!1;if(e.tag!==null&&Fe(e,"duplication of a tag property"),r=e.input.charCodeAt(++e.position),r===60?(n=!0,r=e.input.charCodeAt(++e.position)):r===33?(o=!0,a="!!",r=e.input.charCodeAt(++e.position)):a="!",t=e.position,n){do r=e.input.charCodeAt(++e.position);while(r!==0&&r!==62);e.position<e.length?(l=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):Fe(e,"unexpected end of the stream within a verbatim tag")}else{for(;r!==0&&!Tn(r);)r===33&&(o?Fe(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),pg.test(a)||Fe(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),G3.test(l)&&Fe(e,"tag suffix cannot contain flow indicator characters")}l&&!fg.test(l)&&Fe(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{Fe(e,"tag name is malformed: "+l)}return n?e.tag=l:Ho.call(e.tagMap,a)?e.tag=e.tagMap[a]+l:a==="!"?e.tag="!"+l:a==="!!"?e.tag="tag:yaml.org,2002:"+l:Fe(e,'undeclared tag handle "'+a+'"'),!0}function lw(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Fe(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Tn(n)&&!Ma(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function sw(e){var t,n,o;if(o=e.input.charCodeAt(e.position),o!==42)return!1;for(o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!Tn(o)&&!Ma(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ho.call(e.anchorMap,n)||Fe(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Wt(e,!0,-1),!0}function Oa(e,t,n,o,a){var l,r,i,u=1,p=!1,c=!1,d,h,m,_,x,k;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=r=i=Zs===n||cg===n,o&&Wt(e,!0,-1)&&(p=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;aw(e)||lw(e);)Wt(e,!0,-1)?(p=!0,i=l,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):i=!1;if(i&&(i=p||a),(u===1||Zs===n)&&(Qs===n||ug===n?x=t:x=t+1,k=e.position-e.lineStart,u===1?i&&(wg(e,k)||ow(e,k,x))||tw(e,x)?c=!0:(r&&nw(e,x)||Z3(e,x)||ew(e,x)?c=!0:sw(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&Fe(e,"alias node should not have any properties")):Q3(e,x,Qs===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(c=i&&wg(e,k))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Fe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,h=e.implicitTypes.length;d<h;d+=1)if(_=e.implicitTypes[d],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ho.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,m=e.typeMap.multi[e.kind||"fallback"],d=0,h=m.length;d<h;d+=1)if(e.tag.slice(0,m[d].tag.length)===m[d].tag){_=m[d];break}_||Fe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&Fe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Fe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function rw(e){var t=e.position,n,o,a,l=!1,r;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(r=e.input.charCodeAt(e.position))!==0&&(Wt(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||r!==37));){for(l=!0,r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!Tn(r);)r=e.input.charCodeAt(++e.position);for(o=e.input.slice(n,e.position),a=[],o.length<1&&Fe(e,"directive name must not be less than one character in length");r!==0;){for(;ca(r);)r=e.input.charCodeAt(++e.position);if(r===35){do r=e.input.charCodeAt(++e.position);while(r!==0&&!ao(r));break}if(ao(r))break;for(n=e.position;r!==0&&!Tn(r);)r=e.input.charCodeAt(++e.position);a.push(e.input.slice(n,e.position))}r!==0&&nu(e),Ho.call(yg,o)?yg[o](e,o,a):er(e,'unknown document directive "'+o+'"')}if(Wt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Wt(e,!0,-1)):l&&Fe(e,"directives end mark is expected"),Oa(e,e.lineIndent-1,Zs,!1,!0),Wt(e,!0,-1),e.checkLineBreaks&&j3.test(e.input.slice(t,e.position))&&er(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&tr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Wt(e,!0,-1));return}if(e.position<e.length-1)Fe(e,"end of the stream or a document separator is expected");else return}function Sg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new X3(e,t),o=e.indexOf("\0");for(o!==-1&&(n.position=o,Fe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)rw(n);return n.documents}function iw(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var o=Sg(e,n);if(typeof t!="function")return o;for(var a=0,l=o.length;a<l;a+=1)t(o[a])}function uw(e,t){var n=Sg(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new hn("expected a single document in the stream, but found more")}}var cw=iw,dw=uw,xg={loadAll:cw,load:dw},Tg=Object.prototype.toString,kg=Object.prototype.hasOwnProperty,au=65279,pw=9,Il=10,fw=13,gw=32,mw=33,vw=34,lu=35,hw=37,_w=38,yw=39,bw=42,Cg=44,ww=45,nr=58,Sw=61,xw=62,Tw=63,kw=64,Eg=91,$g=93,Cw=96,Lg=123,Ew=124,Ag=125,cn={};cn[0]="\\0",cn[7]="\\a",cn[8]="\\b",cn[9]="\\t",cn[10]="\\n",cn[11]="\\v",cn[12]="\\f",cn[13]="\\r",cn[27]="\\e",cn[34]='\\"',cn[92]="\\\\",cn[133]="\\N",cn[160]="\\_",cn[8232]="\\L",cn[8233]="\\P";var $w=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Lw=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Aw(e,t){var n,o,a,l,r,i,u;if(t===null)return{};for(n={},o=Object.keys(t),a=0,l=o.length;a<l;a+=1)r=o[a],i=String(t[r]),r.slice(0,2)==="!!"&&(r="tag:yaml.org,2002:"+r.slice(2)),u=e.compiledTypeMap.fallback[r],u&&kg.call(u.styleAliases,i)&&(i=u.styleAliases[i]),n[r]=i;return n}function Mw(e){var t,n,o;if(t=e.toString(16).toUpperCase(),e<=255)n="x",o=2;else if(e<=65535)n="u",o=4;else if(e<=4294967295)n="U",o=8;else throw new hn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Kt.repeat("0",o-t.length)+t}var Iw=1,Dl=2;function Dw(e){this.schema=e.schema||eu,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Kt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Aw(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Dl:Iw,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Mg(e,t){for(var n=Kt.repeat(" ",t),o=0,a=-1,l="",r,i=e.length;o<i;)a=e.indexOf(`
`,o),a===-1?(r=e.slice(o),o=i):(r=e.slice(o,a+1),o=a+1),r.length&&r!==`
`&&(l+=n),l+=r;return l}function su(e,t){return`
`+Kt.repeat(" ",e.indent*t)}function Ow(e,t){var n,o,a;for(n=0,o=e.implicitTypes.length;n<o;n+=1)if(a=e.implicitTypes[n],a.resolve(t))return!0;return!1}function or(e){return e===gw||e===pw}function Ol(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==au||65536<=e&&e<=1114111}function Ig(e){return Ol(e)&&e!==au&&e!==fw&&e!==Il}function Dg(e,t,n){var o=Ig(e),a=o&&!or(e);return(n?o:o&&e!==Cg&&e!==Eg&&e!==$g&&e!==Lg&&e!==Ag)&&e!==lu&&!(t===nr&&!a)||Ig(t)&&!or(t)&&e===lu||t===nr&&a}function Rw(e){return Ol(e)&&e!==au&&!or(e)&&e!==ww&&e!==Tw&&e!==nr&&e!==Cg&&e!==Eg&&e!==$g&&e!==Lg&&e!==Ag&&e!==lu&&e!==_w&&e!==bw&&e!==mw&&e!==Ew&&e!==Sw&&e!==xw&&e!==yw&&e!==vw&&e!==hw&&e!==kw&&e!==Cw}function Nw(e){return!or(e)&&e!==nr}function Rl(e,t){var n=e.charCodeAt(t),o;return n>=55296&&n<=56319&&t+1<e.length&&(o=e.charCodeAt(t+1),o>=56320&&o<=57343)?(n-55296)*1024+o-56320+65536:n}function Og(e){var t=/^\n* /;return t.test(e)}var Rg=1,ru=2,Ng=3,Pg=4,Ra=5;function Pw(e,t,n,o,a,l,r,i){var u,p=0,c=null,d=!1,h=!1,m=o!==-1,_=-1,x=Rw(Rl(e,0))&&Nw(Rl(e,e.length-1));if(t||r)for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Rl(e,u),!Ol(p))return Ra;x=x&&Dg(p,c,i),c=p}else{for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Rl(e,u),p===Il)d=!0,m&&(h=h||u-_-1>o&&e[_+1]!==" ",_=u);else if(!Ol(p))return Ra;x=x&&Dg(p,c,i),c=p}h=h||m&&u-_-1>o&&e[_+1]!==" "}return!d&&!h?x&&!r&&!a(e)?Rg:l===Dl?Ra:ru:n>9&&Og(e)?Ra:r?l===Dl?Ra:ru:h?Pg:Ng}function Fw(e,t,n,o,a){e.dump=(function(){if(t.length===0)return e.quotingType===Dl?'""':"''";if(!e.noCompatMode&&($w.indexOf(t)!==-1||Lw.test(t)))return e.quotingType===Dl?'"'+t+'"':"'"+t+"'";var l=e.indent*Math.max(1,n),r=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),i=o||e.flowLevel>-1&&n>=e.flowLevel;function u(p){return Ow(e,p)}switch(Pw(t,i,e.indent,r,u,e.quotingType,e.forceQuotes&&!o,a)){case Rg:return t;case ru:return"'"+t.replace(/'/g,"''")+"'";case Ng:return"|"+Fg(t,e.indent)+Bg(Mg(t,l));case Pg:return">"+Fg(t,e.indent)+Bg(Mg(Bw(t,r),l));case Ra:return'"'+Uw(t)+'"';default:throw new hn("impossible error: invalid scalar style")}})()}function Fg(e,t){var n=Og(e)?String(t):"",o=e[e.length-1]===`
`,a=o&&(e[e.length-2]===`
`||e===`
`),l=a?"+":o?"":"-";return n+l+`
`}function Bg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Bw(e,t){for(var n=/(\n+)([^\n]*)/g,o=(function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,n.lastIndex=p,Ug(e.slice(0,p),t)})(),a=e[0]===`
`||e[0]===" ",l,r;r=n.exec(e);){var i=r[1],u=r[2];l=u[0]===" ",o+=i+(!a&&!l&&u!==""?`
`:"")+Ug(u,t),a=l}return o}function Ug(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,o,a=0,l,r=0,i=0,u="";o=n.exec(e);)i=o.index,i-a>t&&(l=r>a?r:i,u+=`
`+e.slice(a,l),a=l+1),r=i;return u+=`
`,e.length-a>t&&r>a?u+=e.slice(a,r)+`
`+e.slice(r+1):u+=e.slice(a),u.slice(1)}function Uw(e){for(var t="",n=0,o,a=0;a<e.length;n>=65536?a+=2:a++)n=Rl(e,a),o=cn[n],!o&&Ol(n)?(t+=e[a],n>=65536&&(t+=e[a+1])):t+=o||Mw(n);return t}function Vw(e,t,n){var o="",a=e.tag,l,r,i;for(l=0,r=n.length;l<r;l+=1)i=n[l],e.replacer&&(i=e.replacer.call(n,String(l),i)),(wo(e,t,i,!1,!1)||typeof i>"u"&&wo(e,t,null,!1,!1))&&(o!==""&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function Vg(e,t,n,o){var a="",l=e.tag,r,i,u;for(r=0,i=n.length;r<i;r+=1)u=n[r],e.replacer&&(u=e.replacer.call(n,String(r),u)),(wo(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&wo(e,t+1,null,!0,!0,!1,!0))&&((!o||a!=="")&&(a+=su(e,t)),e.dump&&Il===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function Ww(e,t,n){var o="",a=e.tag,l=Object.keys(n),r,i,u,p,c;for(r=0,i=l.length;r<i;r+=1)c="",o!==""&&(c+=", "),e.condenseFlow&&(c+='"'),u=l[r],p=n[u],e.replacer&&(p=e.replacer.call(n,u,p)),wo(e,t,u,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),wo(e,t,p,!1,!1)&&(c+=e.dump,o+=c));e.tag=a,e.dump="{"+o+"}"}function zw(e,t,n,o){var a="",l=e.tag,r=Object.keys(n),i,u,p,c,d,h;if(e.sortKeys===!0)r.sort();else if(typeof e.sortKeys=="function")r.sort(e.sortKeys);else if(e.sortKeys)throw new hn("sortKeys must be a boolean or a function");for(i=0,u=r.length;i<u;i+=1)h="",(!o||a!=="")&&(h+=su(e,t)),p=r[i],c=n[p],e.replacer&&(c=e.replacer.call(n,p,c)),wo(e,t+1,p,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Il===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,d&&(h+=su(e,t)),wo(e,t+1,c,!0,d)&&(e.dump&&Il===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,a+=h));e.tag=l,e.dump=a||"{}"}function Wg(e,t,n){var o,a,l,r,i,u;for(a=n?e.explicitTypes:e.implicitTypes,l=0,r=a.length;l<r;l+=1)if(i=a[l],(i.instanceOf||i.predicate)&&(!i.instanceOf||typeof t=="object"&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(n?i.multi&&i.representName?e.tag=i.representName(t):e.tag=i.tag:e.tag="?",i.represent){if(u=e.styleMap[i.tag]||i.defaultStyle,Tg.call(i.represent)==="[object Function]")o=i.represent(t,u);else if(kg.call(i.represent,u))o=i.represent[u](t,u);else throw new hn("!<"+i.tag+'> tag resolver accepts not "'+u+'" style');e.dump=o}return!0}return!1}function wo(e,t,n,o,a,l,r){e.tag=null,e.dump=n,Wg(e,n,!1)||Wg(e,n,!0);var i=Tg.call(e.dump),u=o,p;o&&(o=e.flowLevel<0||e.flowLevel>t);var c=i==="[object Object]"||i==="[object Array]",d,h;if(c&&(d=e.duplicates.indexOf(n),h=d!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(a=!1),h&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(c&&h&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),i==="[object Object]")o&&Object.keys(e.dump).length!==0?(zw(e,t,e.dump,a),h&&(e.dump="&ref_"+d+e.dump)):(Ww(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(i==="[object Array]")o&&e.dump.length!==0?(e.noArrayIndent&&!r&&t>0?Vg(e,t-1,e.dump,a):Vg(e,t,e.dump,a),h&&(e.dump="&ref_"+d+e.dump)):(Vw(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(i==="[object String]")e.tag!=="?"&&Fw(e,e.dump,t,l,u);else{if(i==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new hn("unacceptable kind of an object to dump "+i)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function Hw(e,t){var n=[],o=[],a,l;for(iu(e,n,o),a=0,l=o.length;a<l;a+=1)t.duplicates.push(n[o[a]]);t.usedDuplicates=new Array(l)}function iu(e,t,n){var o,a,l;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)n.indexOf(a)===-1&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,l=e.length;a<l;a+=1)iu(e[a],t,n);else for(o=Object.keys(e),a=0,l=o.length;a<l;a+=1)iu(e[o[a]],t,n)}function jw(e,t){t=t||{};var n=new Dw(t);n.noRefs||Hw(e,n);var o=e;return n.replacer&&(o=n.replacer.call({"":o},"",o)),wo(n,0,o,!0,!0)?n.dump+`
`:""}var Gw=jw,qw={dump:Gw};function uu(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Kw=tn,Yw=Hf,Jw=Kf,Xw=Zf,Qw=eg,Zw=eu,e5=xg.load,t5=xg.loadAll,n5=qw.dump,o5=hn,a5={binary:lg,float:Qf,map:qf,null:Yf,pairs:rg,set:ig,timestamp:og,bool:Jf,int:Xf,merge:ag,omap:sg,seq:Gf,str:jf},l5=uu("safeLoad","load"),s5=uu("safeLoadAll","loadAll"),r5=uu("safeDump","dump"),zg={Type:Kw,Schema:Yw,FAILSAFE_SCHEMA:Jw,JSON_SCHEMA:Xw,CORE_SCHEMA:Qw,DEFAULT_SCHEMA:Zw,load:e5,loadAll:t5,dump:n5,YAMLException:o5,types:a5,safeLoad:l5,safeLoadAll:s5,safeDump:r5};const i5={key:0,class:"loading-overlay"},u5={class:"settings-content"},c5={class:"info-links"},d5={class:"info-link-item"},p5={class:"info-link-label"},f5={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},g5={class:"info-link-item"},m5={class:"info-link-label"},v5={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},h5={class:"info-link-item"},_5={class:"info-link-label"},y5={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},b5={style:{"margin-bottom":"16px"}},w5=["placeholder"],S5={style:{"margin-bottom":"16px"}},x5=["placeholder"],T5=["placeholder"],k5={style:{"margin-bottom":"16px"}},C5=["placeholder"],E5=["placeholder"],$5={style:{"margin-bottom":"16px"}},L5=["placeholder"],A5={class:"data-container"},M5={key:0},I5={key:0},D5={class:"tag-group-container"},O5={style:{display:"flex","align-items":"center"}},R5={key:0},N5=["placeholder"],P5=["onClick"],F5=["onClick"],B5=["onClick"],U5=yt({__name:"import_tag",setup(e,{expose:t}){const{t:n}=_t(),o=v(!1),a=v(""),l=v(""),r=v(""),i=v(""),u=v(""),p=v(""),c=v(""),d=v(""),h=v(""),m=v([]),_=v(-1),x=v(""),k=v(""),T=v(null),D=v(null),K=v(null),S=v(!1),P=v(""),j=v(null);function G(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}j.value.click()}function q(){a.value="",l.value="",r.value="",i.value="",u.value="",p.value="",c.value="",d.value="",h.value="",m.value=[],_.value=-1,x.value="",k.value="",S.value=!1}function Y(w){const N=w.target.files[0];if(N){const Q=new FileReader;Q.onload=fe=>{const L=fe.target.result.split(`
`).filter(O=>O.trim());let y=0;L.forEach(O=>{const[W,we]=O.split(",");if(W&&we){const be=W.trim().replace(/'/g,"''"),ee=we.trim().replace(/'/g,"''"),pe=zo();y=y+1;const Oe=parseInt(new Date().getTime()/1e3)+y,Ne=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${be}', '${ee}', 'rgba(255, 123, 2, .4)', ${Oe}, '${h.value}', '${pe}');`;m.value.push(Ne)}})},Q.readAsText(N)}w.target.value=""}function _e(w){const N=w.target.files[0];if(N){const Q=new FileReader;Q.onload=fe=>{try{const he=JSON.parse(fe.target.result);let L=0;Object.entries(he).forEach(([y,O])=>{const W=y.replace(/'/g,"''"),we=O.replace(/'/g,"''"),be=zo();L=L+1;const ee=parseInt(new Date().getTime()/1e3)+L,pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${W}', '${we}', 'rgba(255, 123, 2, .4)', ${ee}, '${h.value}', '${be}');`;m.value.push(pe)})}catch{J({type:"warn",str:"message.jsonErrorMesg"})}},Q.readAsText(N)}w.target.value=""}function se(w){const N=w.target.files[0];if(N){const Q=new FileReader;Q.onload=fe=>{try{const he=zg.load(fe.target.result);let L=0;Object.entries(he).forEach(([y,O])=>{const W=y.replace(/'/g,"''"),we=String(O).replace(/'/g,"''"),be=zo();L=L+1;const ee=parseInt(new Date().getTime()/1e3)+L,pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${W}', '${we}', 'rgba(255, 123, 2, .4)', ${ee}, '${h.value}', '${be}');`;m.value.push(pe)})}catch{J({type:"warn",str:"message.yamlErrorMesg"})}},Q.readAsText(N)}w.target.value=""}function R(w){q();const N=w.target.files[0];if(N){const Q=new FileReader;Q.onload=fe=>{fe.target.result.split(";").filter(y=>y.trim()).forEach(y=>{if((y.includes("tag_groups")||y.includes("tag_subgroups"))&&y.includes("p_uuid"))if(y.includes("g_uuid")){u.value=y+";";const W=y.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);W&&(h.value=W[1]);const we=y.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);we&&(c.value=we[1].replace(/''/g,"'"))}else{i.value=y+";";const W=y.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);W&&(d.value=W[1]);const we=y.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);we&&(p.value=we[1].replace(/''/g,"'"))}else y.includes("tag_tags")&&m.value.push(y+";")})},Q.readAsText(N)}w.target.value=""}function Z(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}K.value.click()}function te(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}D.value.click()}function z(){T.value.click()}function ne(){const w=[i.value,u.value,...m.value].join(`
`),N=new Blob([w],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(N),P.value.length<=0){const fe=parseInt(new Date().getTime()/1e3);Q.download="export_"+fe+".sql"}else Q.download=P.value+".sql";Q.click()}const ae=()=>{const w=[...m.value].join(`
`),N=new Blob([w],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(N),P.value.length<=0){const fe=parseInt(new Date().getTime()/1e3);Q.download="export_tags_"+fe+".sql"}else Q.download=P.value+".sql";Q.click()};function F(w){const N=w.match(/VALUES\s*\([^']*'([^']+)'/),Q=w.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:N?N[1].replace(/''/g,"'"):"",desc:Q?Q[1].replace(/''/g,"'"):""}}function B(w){m.value.splice(w,1)}function ie(w){const N=m.value[w],Q=F(N);x.value=Q.text,k.value=Q.desc,_.value=w}function Ce(w){const N=x.value.replace(/'/g,"''"),Q=k.value.replace(/'/g,"''");m.value[w]=m.value[w].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${N}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${Q}'`),_.value=-1}function le(){_.value=-1}function de(){if(!h.value){J({type:"warn",str:"message.pleaseAddSub"});return}const w=a.value.replace(/'/g,"''"),N=l.value.replace(/'/g,"''"),Q=zo(),fe=parseInt(new Date().getTime()/1e3);r.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${w}', '${N}', 'rgba(255, 123, 2, .4)', ${fe}, '${h.value}', '${Q}');`,m.value.push(r.value)}function ve(){if(p.value.length<=0){J({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const w=p.value.replace(/'/g,"''");d.value.length<=0&&(d.value=zo());const N=parseInt(new Date().getTime()/1e3);i.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${w}', 'rgba(255, 123, 2, .4)', ${N}, '${d.value}');`}function oe(){if(c.value.length<=0){J({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!d.value){J({type:"warn",str:"message.pleaseAddMainCeb"});return}const w=c.value.replace(/'/g,"''");h.value.length<=0&&(h.value=zo());const N=parseInt(new Date().getTime()/1e3);u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${w}', 'rgba(255, 123, 2, .4)', ${N}, '${d.value}', '${h.value}');`}const X=v(null),M=()=>{X.value.open()},U=w=>{S.value=!0,p.value=w.group.name,c.value=w.sub.name,d.value=w.group.p_uuid,h.value=w.sub.g_uuid;const N=w.group.name.replace(/'/g,"''"),Q=w.sub.name.replace(/'/g,"''");i.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${N}', '${w.group.color}', ${w.group.create_time}, '${w.group.p_uuid}');`,u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${Q}', '${w.sub.color}', ${w.sub.create_time}, '${w.group.p_uuid}', '${w.sub.g_uuid}');`},H=v(!1),I=async w=>{H.value=!0;try{await Dt.runSQLToServer(w).then(N=>{if(N.code!=200){J({type:"warn",str:N.message});return}else V(),J({type:"success",str:"importDialog.successImport"})}).catch(N=>{console.error(N),J({type:"warn",str:"importDialog.importFail"})})}catch(N){console.error(N),J({type:"warn",str:"importDialog.importFail"})}finally{H.value=!1}},V=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},C=async()=>{if(S.value){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const w=[...m.value];await I(w)}else{if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const w=[i.value,u.value,...m.value];await I(w)}};return et(i,(w,N)=>{var he,L;if(!w||w===N)return;const Q=(he=w.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:he[1],fe=(L=N==null?void 0:N.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:L[1];Q&&fe&&u.value&&(u.value=u.value.replace(new RegExp(`'${fe}'`,"g"),`'${Q}'`))}),et(u,(w,N)=>{var he,L;if(!w||w===N)return;const Q=(he=w.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:he[1],fe=(L=N==null?void 0:N.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:L[1];Q&&fe&&m.value.length>0&&(m.value=m.value.map(y=>y.replace(new RegExp(`'${fe}'`,"g"),`'${Q}'`)))}),t({open:()=>{o.value=!0}}),(w,N)=>(b(),E(De,null,[H.value?(b(),E("div",i5,[...N[11]||(N[11]=[s("div",{class:"loading-spinner"},null,-1)])])):ce("",!0),He(Aa,{modelValue:o.value,"onUpdate:modelValue":N[10]||(N[10]=Q=>o.value=Q),title:f(n)("importDialog.title")},{footer:dt(()=>[s("button",{onClick:N[9]||(N[9]=Q=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:C},g(f(n)("importDialog.sure")),1)]),default:dt(()=>[s("div",u5,[s("div",c5,[s("div",d5,[s("span",p5,g(f(n)("importDialog.tips1")),1),s("a",f5,g(f(n)("importDialog.tips1text")),1)]),s("div",g5,[s("span",m5,g(f(n)("importDialog.tips2")),1),s("a",v5,g(f(n)("importDialog.tips2text")),1)]),s("div",h5,[s("span",_5,g(f(n)("importDialog.tips3")),1),s("a",y5,g(f(n)("importDialog.tips3text")),1)])]),s("div",b5,[s("button",{onClick:q,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:z,class:"upload-btn"},g(f(n)("importDialog.uploadSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:M},g(f(n)("importDialog.selectGroup")),1),s("button",{style:{"margin-left":"10px"},onClick:ne},g(f(n)("importDialog.dumpSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:ae},g(f(n)("importDialog.dumpOnlySQL")),1),me(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":N[0]||(N[0]=Q=>P.value=Q),placeholder:f(n)("importDialog.settingOutputName")},null,8,w5),[[Le,P.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:R,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"jsonFileInput",ref:D,onChange:_e,accept:".json",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"txtFileInput",ref:K,onChange:Y,accept:".txt",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"yamlFileInput",ref:j,onChange:se,accept:".yaml,.yml",style:{display:"none"}},null,544)]),s("div",S5,[me(s("input",{"onUpdate:modelValue":N[1]||(N[1]=Q=>p.value=Q),placeholder:f(n)("importDialog.pleaseMainCeb")},null,8,x5),[[Le,p.value]]),s("button",{onClick:ve},g(f(n)("importDialog.setMainCeb")),1),me(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":N[2]||(N[2]=Q=>d.value=Q),placeholder:f(n)("importDialog.pleaseMainCebUuid")},null,8,T5),[[Le,d.value]])]),s("div",k5,[me(s("input",{"onUpdate:modelValue":N[3]||(N[3]=Q=>c.value=Q),placeholder:f(n)("importDialog.pleaseSubGroup")},null,8,C5),[[Le,c.value]]),s("button",{onClick:oe},g(f(n)("importDialog.setSubCeb")),1),me(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":N[4]||(N[4]=Q=>h.value=Q),placeholder:f(n)("importDialog.pleaseSubGroupUuid")},null,8,E5),[[Le,h.value]])]),s("div",$5,[me(s("input",{"onUpdate:modelValue":N[5]||(N[5]=Q=>a.value=Q),placeholder:"Tag"},null,512),[[Le,a.value]]),me(s("input",{"onUpdate:modelValue":N[6]||(N[6]=Q=>l.value=Q),placeholder:f(n)("importDialog.translater")},null,8,L5),[[Le,l.value]]),s("button",{onClick:de},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:te,class:"upload-btn"},g(f(n)("importDialog.fromJSONImput")),1),s("button",{style:{"margin-left":"10px"},onClick:Z,class:"upload-btn"},g(f(n)("importDialog.fromTxtInput")),1),s("button",{style:{"margin-left":"10px"},onClick:G,class:"upload-btn"},g(f(n)("importDialog.fromYmalInput")),1)]),s("div",A5,[i.value?(b(),E("div",M5,[s("h3",null,g(F(i.value).text),1),u.value?(b(),E("div",I5,[s("h4",null,g(F(u.value).text),1),s("div",D5,[(b(!0),E(De,null,Ve(m.value,(Q,fe)=>(b(),E("div",{key:fe,style:{display:"flex","flex-direction":"column","align-items":"center"}},[s("p",null,g(F(Q).text)+" - "+g(F(Q).desc),1),s("div",O5,[_.value===fe?(b(),E("div",R5,[me(s("input",{"onUpdate:modelValue":N[7]||(N[7]=he=>x.value=he),placeholder:"Tag"},null,512),[[Le,x.value]]),me(s("input",{"onUpdate:modelValue":N[8]||(N[8]=he=>k.value=he),placeholder:f(n)("importDialog.translater")},null,8,N5),[[Le,k.value]]),s("button",{onClick:he=>Ce(fe)},g(f(n)("importDialog.sureYes")),9,P5),s("button",{style:{"margin-left":"10px"},onClick:le},g(f(n)("importDialog.cancel")),1)])):(b(),E("button",{key:1,onClick:he=>ie(fe)},g(f(n)("importDialog.edit")),9,F5)),s("button",{style:{"margin-left":"10px"},onClick:he=>B(fe)},g(f(n)("importDialog.delete")),9,B5)])]))),128))])])):ce("",!0)])):ce("",!0)])])]),_:1},8,["modelValue","title"]),He(Uf,{ref_key:"tagGroupSelectDialogItem",ref:X,onSureSelect:U},null,512)],64))}},[["__scopeId","data-v-98758c86"]]),V5={class:"tag-manager"},W5={class:"toolbar"},z5={class:"toolbar-top"},H5={class:"search-container"},j5=["placeholder"],G5={key:0,class:"no-results"},q5=["onClick"],K5={class:"result-content"},Y5={class:"result-text"},J5={class:"result-path"},X5={class:"toolbar-bottom"},Q5={class:"group-edit-mode"},Z5={class:"category-tabs"},e6={class:"tabs-wrapper primary-tabs"},t6={class:"tabs-scroll"},n6=["onClick","onMouseenter","onMouseleave"],o6={class:"tab-text"},a6={key:0,class:"tab-actions"},l6=["onClick","title"],s6=["onClick","title"],r6=["onClick","title"],i6=["onClick","title"],u6={class:"group-edit-mode"},c6={key:0,class:"tabs-wrapper group-tabs"},d6={class:"tabs-scroll"},p6=["onClick","onMouseenter","onMouseleave"],f6={class:"tab-text"},g6={key:0,class:"tab-actions"},m6=["onClick","title"],v6=["onClick","title"],h6=["onClick","title"],_6=["onClick","title"],y6={class:"group-edit-mode"},b6={class:"tags-content"},w6={class:"tags-header"},S6={class:"tags-title"},x6={class:"tags-actions"},T6=["disabled"],k6=["disabled"],C6=["disabled"],E6=["disabled"],$6=["disabled"],L6={key:0,class:"tags-grid"},A6=["onClick"],M6={class:"tag-actions"},I6=["onClick","title"],D6=["onClick","title"],O6=["onClick","title"],R6={class:"tag-desc"},N6=["value"],P6={key:0,class:"weilin-tools-dialog-overlay"},F6={class:"weilin-tools-dialog-header"},B6={class:"weilin-tools-dialog-body"},U6={key:0,class:"form-group"},V6=["placeholder"],W6={key:1,class:"form-group"},z6=["placeholder"],H6={class:"form-group"},j6={class:"color-picker"},G6={class:"color-controls"},q6={class:"alpha-control"},K6={class:"alpha-value"},Y6={class:"weilin-tools-dialog-footer"},J6={key:1,class:"weilin-tools-dialog-overlay"},X6={class:"weilin-tools-dialog-header"},Q6={class:"weilin-tools-dialog-body"},Z6={class:"form-group"},e8=["placeholder"],t8={class:"form-group"},n8=["placeholder"],o8={class:"form-group"},a8={class:"color-picker"},l8={class:"color-controls"},s8={class:"alpha-control"},r8={class:"alpha-value"},i8={class:"weilin-tools-dialog-footer"},u8={key:2,class:"weilin-tools-dialog-overlay"},c8={class:"weilin-tools-dialog-header"},d8={class:"weilin-tools-dialog-body"},p8={class:"confirm-message"},f8={class:"weilin-tools-dialog-footer"},g8={key:3,class:"weilin-tools-dialog-overlay"},m8={class:"weilin-tools-dialog-content"},v8={class:"weilin-tools-dialog-header"},h8={class:"weilin-tools-dialog-body"},_8={class:"form-group"},y8=["value"],b8={class:"form-group"},w8={class:"radio-group"},S8={class:"weilin-tools-dialog-footer"},x8={key:4,class:"weilin-tools-dialog-overlay"},T8={class:"weilin-tools-dialog-content"},k8={class:"weilin-tools-dialog-header"},C8={class:"weilin-tools-dialog-body"},E8={class:"form-group"},$8=["value"],L8={class:"form-group"},A8={class:"radio-group"},M8={class:"weilin-tools-dialog-footer"},I8={key:5,class:"weilin-tools-dialog-overlay"},D8={class:"weilin-tools-dialog-header"},O8={class:"weilin-tools-dialog-body"},R8={class:"config-section"},N8={class:"form-group"},P8={class:"width-control"},F8={class:"radio-label"},B8={class:"radio-label"},U8={class:"form-group"},V8={class:"form-group"},W8={class:"config-section"},z8={class:"form-group"},H8={class:"width-control"},j8={class:"radio-label"},G8={class:"radio-label"},q8={class:"form-group"},K8={class:"form-group"},Y8={class:"weilin-tools-dialog-footer"},Hg=yt({__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){Fs();const{t}=_t(),n=v([]),o=v(null),a=v([]),l=v([]),r=v(null),i=v(!1),u=v(!1),p=v(!1),c=v(!1),d=v("primary"),h=v([]),m=v(!1),_=v(!1),x=v("None"),k=v("None"),T=v(0),D=v(0),K=v(null),S=v(0),P=v(!1),j=v(null),G=v("before"),q=v(null),Y=v("before"),_e=v(null),se=v(null),R=v(!1),Z=v(!1),te=v(!1),z=v({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),ne={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},ae=e,F=v({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),B=v({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),ie=v({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),Ce=ge=>{const ue=ge.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(ue){const[,Se,Qe,Bt,Jt]=ue,ft=`#${((1<<24)+(parseInt(Se)<<16)+(parseInt(Qe)<<8)+parseInt(Bt)).toString(16).slice(1)}`,Ut=Jt?Math.round(parseFloat(Jt)*100):100;return{hex:ft,alpha:Ut}}return{hex:"#FFFFFF",alpha:100}},le=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},de=async()=>{try{await Dt.getTagMainGroup().then(ge=>{n.value=ge}).catch(ge=>{console.error(ge),J({type:"warn",str:"message.networkError"})}),o.value&&await ve(o.value.p_uuid),r.value&&await oe(r.value.g_uuid)}catch(ge){console.error("Tag:",ge)}},ve=async ge=>{try{await Dt.getTagSubGroup(ge).then(ue=>{a.value=ue}).catch(ue=>{console.error(ue),J({type:"warn",str:"message.networkError"})})}catch(ue){console.error(":",ue)}},oe=async ge=>{try{await Dt.getTagList(ge).then(ue=>{l.value=ue}).catch(ue=>{console.error(ue),J({type:"warn",str:"message.networkError"})})}catch(ue){console.error("Tag:",ue)}};ct(()=>{Yt(),window.addEventListener("click",ko),window.addEventListener("resize",Yt),window.addEventListener("message",dr),window.addEventListener("keydown",An),gr(),le()}),Do(()=>{window.removeEventListener("click",ko),window.removeEventListener("resize",Yt),window.removeEventListener("message",dr),window.removeEventListener("keydown",An)});const X=async ge=>{o.value=ge,r.value=null,m.value=!1,h.value=[],await ve(ge.p_uuid)},M=async ge=>{r.value=ge,m.value=!1,h.value=[],await oe(ge.g_uuid)},U=ge=>{d.value=ge,p.value=!1,L.value=Ce("rgba(255, 123, 2, .4)"),ge==="primary"?F.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:B.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},i.value=!0},H=ge=>{p.value=!0,d.value="primary",F.value={...ge},L.value=Ce(ge.color),i.value=!0},I=ge=>{p.value=!0,d.value="group",B.value={...ge},L.value=Ce(ge.color),i.value=!0},V=()=>{if(d.value==="primary"){if(!F.value.name){J({type:"warn",str:"tagManager.categoryNameRequired"});return}p.value?n.value.findIndex(ue=>ue.id_index===F.value.id_index)!==-1&&Dt.editPrimaryCategory({id_index:F.value.id_index,name:F.value.name,color:F.value.color}).then(ue=>{ue.code===200?(le(),J({type:"success",str:"message.editSuccess"})):ue.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(ue=>{J({type:"warn",str:"message.networkError"})}):Dt.addPrimaryCategory({name:F.value.name,color:F.value.color}).then(ge=>{ge.code===200?(le(),J({type:"success",str:"message.addSuccess"})):ge.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.addFailed"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})})}else{if(!B.value.name){J({type:"warn",str:"tagManager.groupNameRequired"});return}p.value?Dt.editSubCategory({id_index:B.value.id_index,name:B.value.name,color:B.value.color}).then(ge=>{ge.code===200?(le(),J({type:"success",str:"message.editSuccess"})):ge.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})}):Dt.addSubCategory({name:B.value.name,color:B.value.color,key:o.value.id_index,p_uuid:o.value.p_uuid}).then(ge=>{ge.code===200?(le(),J({type:"success",str:"message.addSuccess"})):ge.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})})}w()},C=()=>p.value?d.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):d.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),w=()=>{i.value=!1,F.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},L.value={hex:"#FFFFFF",alpha:0}},N=()=>{r.value&&(c.value=!1,ie.value={id:"",text:"",desc:"",categoryId:r.value.id,g_uuid:r.value.g_uuid,backgroundColor:B.value.color},L.value=Ce(B.value.color),u.value=!0)},Q=ge=>{c.value=!0,ie.value={...ge},L.value=Ce(ge.color),u.value=!0},fe=()=>{if(!ie.value.text||!ie.value.desc){J({type:"warn",str:"tagManager.textRequired"});return}c.value&&r.value?Dt.editTags({id_index:ie.value.id_index,text:ie.value.text,desc:ie.value.desc,color:ie.value.color}).then(ge=>{le(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.editSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})}):r.value&&Dt.addNewTags({id_index:r.value.id_index,g_uuid:r.value.g_uuid,text:ie.value.text,desc:ie.value.desc,color:ie.value.color?ie.value.color:"rgba(255, 123, 2, .4)"}).then(ge=>{le(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})}),he()},he=()=>{u.value=!1,ie.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},c.value=!1},L=v({hex:"#FFFFFF",alpha:100}),y=nt(()=>W(L.value.hex,L.value.alpha)),O=()=>{const ge=W(L.value.hex,L.value.alpha);i.value?d.value==="primary"?F.value.color=ge:B.value.color=ge:u.value&&(ie.value.color=ge)},W=(ge,ue)=>{const Se=parseInt(ge.slice(1,3),16),Qe=parseInt(ge.slice(3,5),16),Bt=parseInt(ge.slice(5,7),16);return`rgba(${Se}, ${Qe}, ${Bt}, ${ue/100})`},we=v(""),be=v([]),ee=v(!1),pe=async()=>{ee.value=we.value.trim().length>0;const ge=we.value.trim().toLowerCase();if(!ge){be.value=[];return}be.value=[],await Dt.searchTag(ge).then(ue=>{be.value=ue}).catch(ue=>{J({type:"warn",str:"message.networkError"})})};et(we,()=>{pe()});const Oe=async ge=>{const ue=n.value.find(Se=>Se.p_uuid===ge.p_uuid);ue&&await X(ue).then(async()=>{await Ke(async()=>{const Se=a.value.find(Qe=>Qe.g_uuid===ge.g_uuid);Se&&await M(Se).then(async()=>{await Ke(()=>{S.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ge.text},"*"),K.value=ge.id_index,setTimeout(()=>{const Qe=document.querySelector(".tag-wrapper.highlight");Qe&&Qe.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{K.value=null},5e3)})})})}),we.value=""},Ne=ge=>{if(!ge||ge==="transparent")return"var(--primary-text)";let ue,Se,Qe,Bt=1;if(ge.startsWith("rgba")){const ft=ge.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);ft&&([,ue,Se,Qe,Bt]=ft.map(Number))}else if(ge.startsWith("rgb")){const ft=ge.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);ft&&([,ue,Se,Qe]=ft.map(Number))}return Bt<.5?"var(--primary-text)":(ue*299+Se*587+Qe*114)/1e3>128?"#000000":"#ffffff"},ze=ge=>{ae.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ge.text},"*")},Xe=v(!1),it=v(""),wt=v(null),Ot=nt(()=>{if(!wt.value)return"";switch(it.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:wt.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:wt.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:wt.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),jn=ge=>{it.value="category",wt.value=ge,Xe.value=!0},qo=ge=>{it.value="group",wt.value=ge,Xe.value=!0},Ht=ge=>{it.value="tag",wt.value=ge,Xe.value=!0},Xt=async()=>{try{switch(it.value){case"category":Dt.deletePrimaryCategory({p_uuid:wt.value.p_uuid}).then(ge=>{le(),J({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})});break;case"group":Dt.deleteSubCategory({g_uuid:wt.value.g_uuid}).then(ge=>{le(),J({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})});break;case"tag":Dt.deleteTags({id_index:wt.value.id_index}).then(ge=>{le(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Dt.batchDeleteTags({id_indexs:h.value}).then(ge=>{le(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{J({type:"warn",str:"message.networkError"})});break}Va()}catch(ge){console.error(":",ge)}},Fn=async ge=>{const ue=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${ge.name.replace(/'/g,"''")}', '${ge.color}', ${ge.create_time}, '${ge.p_uuid}');`;try{const Se=await Dt.getTagSubGroup(ge.p_uuid);let Qe=[];Qe.push(ue);for(const ft of Se){const Ut=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ft.name.replace(/'/g,"''")}', '${ft.color}', ${ft.create_time}, '${ft.p_uuid}', '${ft.g_uuid}');`;Qe.push(Ut);try{(await Dt.getTagList(ft.g_uuid)).forEach(kn=>{const Su=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${kn.text!=null&&kn.text.length>0?kn.text.replace(/'/g,"''"):""}', '${kn.desc!=null&&kn.desc.length>0?kn.desc.replace(/'/g,"''"):""}', '${kn.color}', ${kn.create_time}, '${kn.g_uuid}', '${zo()}');`;Qe.push(Su)})}catch(mr){console.error("Tag:",mr),J({type:"warn",str:"message.shareTagError"})}}const Bt=new Blob([Qe.join(`
`)],{type:"text/sql"}),Jt=document.createElement("a");Jt.href=URL.createObjectURL(Bt),Jt.download=`${ge.name}_export_${Date.now()}.sql`,Jt.click(),J({type:"success",str:"tagManager.outputSuccess"})}catch(Se){console.error(":",Se),J({type:"warn",str:"message.shareGroupError"})}},xo=async ge=>{try{let ue=[];const Se=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ge.name.replace(/'/g,"''")}', '${ge.color}', ${ge.create_time}, '${ge.p_uuid}', '${ge.g_uuid}');`;ue.push(Se);try{(await Dt.getTagList(ge.g_uuid)).forEach(ft=>{const Ut=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${ft.text!=null&&ft.text.length>0?ft.text.replace(/'/g,"''"):""}', '${ft.desc!=null&&ft.desc.length>0?ft.desc.replace(/'/g,"''"):""}', '${ft.color}', ${ft.create_time}, '${ft.g_uuid}', '${zo()}');`;ue.push(Ut)})}catch(Jt){console.error("Tag:",Jt),J({type:"warn",str:"message.shareTagError"})}const Qe=new Blob([ue.join(`
`)],{type:"text/sql"}),Bt=document.createElement("a");Bt.href=URL.createObjectURL(Qe),Bt.download=`${ge.name}_export_${Date.now()}.sql`,Bt.click(),J({type:"success",str:"tagManager.outputSuccess"})}catch(ue){console.error(":",ue),J({type:"warn",str:"message.shareGroupError"})}},We=ge=>{q.value=ge.id_index,P.value=!0},ke=async()=>{try{Dt.moveTag({id_index:q.value,reference_id_index:j.value,position:G.value}).then(ge=>{le(),P.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{J({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),J({type:"error",str:t("message.moveFailed")})}},Ee=v([]),St=v(1),dn=(ge,ue)=>{St.value=ue,ue===1?(Ee.value=n.value,_e.value=ge.id_index,_.value=!0):(Ee.value=a.value,_e.value=ge.id_index,_.value=!0)},ur=async()=>{if(St.value===1)try{Dt.moveMainGroup({id_index:_e.value,reference_id_index:se.value,position:Y.value}).then(ge=>{le(),_.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{J({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),J({type:"error",str:t("message.moveFailed")})}else try{Dt.moveSubGroup({id_index:_e.value,reference_id_index:se.value,position:Y.value}).then(ge=>{le(),_.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{J({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),J({type:"error",str:t("message.moveFailed")})}},Pl=()=>{m.value=!0,R.value=!0},Fl=()=>{m.value=!1,R.value=!1,h.value=[]},hu=()=>{h.value.length!==0&&(it.value="deleteSelected",wt.value={},Xe.value=!0)},_u=()=>{m.value=!0,Z.value=!0},Bl=()=>{m.value=!1,Z.value=!1,h.value=[]},Ua=()=>{if(h.value.length===0){J({type:"warn",str:"tagManager.noTagsSelected"});return}const ge={};h.value.forEach(Qe=>{ge[Qe.text]=Qe.desc});const ue=new Blob([zg.dump(ge)],{type:"text/yaml"}),Se=document.createElement("a");Se.href=URL.createObjectURL(ue),Se.download=`selected_tags_export_${Date.now()}.yaml`,Se.click(),J({type:"success",str:"tagManager.outputSuccess"}),Bl()},Va=()=>{Xe.value=!1,it.value="",wt.value=null},cr=async()=>{try{await le()}catch(ge){console.error(":",ge)}},To=v(),Wa=v({}),Yt=()=>{if(To.value){const ge=To.value.getBoundingClientRect();Wa.value={position:"fixed",top:`${ge.bottom}px`,left:`${ge.left}px`,width:`${ge.width}px`,zIndex:1e3}}},dr=ge=>{ge.data.type==="weilin_prompt_ui_window_change_tagManager_position"||ge.data.type==="weilin_prompt_ui_window_change_tagManager_size"||ge.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_position"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_size"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?Yt():ge.data.type==="weilin_prompt_ui_window_change_click_outside"||ge.data.type==="weilin_prompt_ui_tag_manager_refresh"&&de()},ko=ge=>{ee.value&&!To.value.contains(ge.target)&&(ee.value=!1)},An=ge=>{ge.key==="Escape"&&(ee.value=!1)},da=ge=>{D.value==1&&(x.value="TabID-"+ge)},Ul=ge=>{x.value="None"},pr=ge=>{T.value==1&&(k.value="TabID-"+ge)},Co=ge=>{k.value="None"},pa=v(),fr=()=>{pa.value.open()},gr=()=>{const ge=JSON.parse(JSON.stringify(ne));try{const ue=localStorage.getItem("weilin_tag_manager_tab_size_config");if(ue){const Se=JSON.parse(ue);z.value={...ge,...Se}}else z.value={...ge}}catch(ue){console.error(":",ue),z.value={...ge}}},yu=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(z.value)),J({type:"success",str:"tagManager.tabSizeConfigSaved"}),te.value=!1}catch(ge){console.error(":",ge),J({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},bu=()=>{te.value=!0},Vl=()=>{te.value=!1,gr()},wu=()=>{const ge=JSON.parse(JSON.stringify(ne));z.value={...ge}};return(ge,ue)=>(b(),E("div",V5,[s("div",W5,[s("div",z5,[s("button",{class:"refresh-btn",onClick:cr},[...ue[40]||(ue[40]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),s("div",H5,[me(s("input",{type:"text","onUpdate:modelValue":ue[0]||(ue[0]=Se=>we.value=Se),placeholder:f(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:To,onInput:ue[1]||(ue[1]=Se=>ee.value=we.value.trim().length>0)},null,40,j5),[[Le,we.value]]),ee.value?(b(),E("div",{key:0,class:"search-results",style:gt(Wa.value)},[be.value.length===0?(b(),E("div",G5,g(f(t)("tagManager.noResults")),1)):(b(!0),E(De,{key:1},Ve(be.value,(Se,Qe)=>(b(),E("div",{key:`${Qe}-search_item`,class:"search-result-item",onClick:Bt=>Oe(Se)},[s("div",K5,[s("span",Y5,g(Se.name||Se.text),1),s("span",J5,g(Se.where),1)])],8,q5))),128))],4)):ce("",!0)]),s("button",{class:"import-btn",onClick:fr},g(f(t)("tagManager.importTags")),1)]),s("div",X5,[s("div",Q5,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ue[2]||(ue[2]=Se=>S.value=Se),"true-value":1,"false-value":0},null,512),[[Mt,S.value]]),je(" "+g(f(t)("tagManager.autoAddSearchTag")),1)])]),s("button",{class:"tab-size-btn",onClick:bu},g(f(t)("tagManager.modifyTabSize")),1)])]),s("div",Z5,[s("div",e6,[s("div",t6,[(b(!0),E(De,null,Ve(n.value,(Se,Qe)=>{var Bt,Jt,ft;return b(),E("div",{key:"Tabss-"+Qe,class:$e(["tab-item",{active:((Bt=o.value)==null?void 0:Bt.name)===Se.name}]),style:gt({backgroundColor:((Jt=o.value)==null?void 0:Jt.name)===Se.name?"var(--primary-color)":Se.color,color:((ft=o.value)==null?void 0:ft.name)===Se.name?"#ffffff":Ne(Se.color),width:z.value.primaryTab.width==="fit-content"?"fit-content":z.value.primaryTab.width+"px",height:z.value.primaryTab.height+"px",fontSize:z.value.primaryTab.fontSize+"px"}),onClick:Ut=>X(Se),onMouseenter:Ut=>da(Qe),onMouseleave:Ut=>Ul()},[s("span",o6,g(Se.name),1),x.value=="TabID-"+Qe?(b(),E("div",a6,[s("button",{class:"action-btn move",onClick:Ze(Ut=>dn(Se,1),["stop"]),title:f(t)("tagManager.moveGroup")},[...ue[41]||(ue[41]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,l6),s("button",{class:"action-btn edit",onClick:Ze(Ut=>H(Se),["stop"]),title:f(t)("tagManager.edit")},[...ue[42]||(ue[42]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,s6),s("button",{class:"action-btn share",onClick:Ze(Ut=>Fn(Se),["stop"]),title:f(t)("tagManager.share")},[...ue[43]||(ue[43]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,r6),s("button",{class:"action-btn delete",onClick:Ze(Ut=>jn(Se),["stop"]),title:f(t)("tagManager.delete")},[...ue[44]||(ue[44]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,i6)])):ce("",!0)],46,n6)}),128)),s("button",{class:"add-tab",onClick:ue[3]||(ue[3]=Se=>U("primary"))},[ue[45]||(ue[45]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addPrimaryCategory")),1)]),s("div",u6,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ue[4]||(ue[4]=Se=>D.value=Se),"true-value":1,"false-value":0},null,512),[[Mt,D.value]]),je(" "+g(D.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])]),o.value?(b(),E("div",c6,[s("div",d6,[(b(!0),E(De,null,Ve(a.value,(Se,Qe)=>{var Bt,Jt,ft;return b(),E("div",{key:"TabsSw-"+Qe,class:$e(["tab-item",{active:((Bt=r.value)==null?void 0:Bt.name)===Se.name}]),style:gt({backgroundColor:((Jt=r.value)==null?void 0:Jt.name)===Se.name?"var(--primary-color)":Se.color,color:((ft=r.value)==null?void 0:ft.name)===Se.name?"#ffffff":Ne(Se.color),width:z.value.groupTab.width==="fit-content"?"fit-content":z.value.groupTab.width+"px",height:z.value.groupTab.height+"px",fontSize:z.value.groupTab.fontSize+"px"}),onClick:Ut=>M(Se),onMouseenter:Ut=>pr(Qe),onMouseleave:Ut=>Co()},[s("span",f6,g(Se.name),1),k.value=="TabID-"+Qe?(b(),E("div",g6,[s("button",{class:"action-btn move",onClick:Ze(Ut=>dn(Se,2),["stop"]),title:f(t)("tagManager.moveGroup")},[...ue[46]||(ue[46]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,m6),s("button",{class:"action-btn edit",onClick:Ze(Ut=>I(Se),["stop"]),title:f(t)("tagManager.edit")},[...ue[47]||(ue[47]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,v6),s("button",{class:"action-btn delete",onClick:Ze(Ut=>qo(Se),["stop"]),title:f(t)("tagManager.delete")},[...ue[48]||(ue[48]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,h6),s("button",{class:"action-btn share",onClick:Ze(Ut=>xo(Se),["stop"]),title:f(t)("tagManager.share")},[...ue[49]||(ue[49]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,_6)])):ce("",!0)],46,p6)}),128)),o.value?(b(),E("button",{key:0,class:"add-tab",onClick:ue[5]||(ue[5]=Se=>U("group"))},[ue[50]||(ue[50]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addGroup")),1)])):ce("",!0),s("div",y6,[s("label",null,[me(s("input",{type:"checkbox","onUpdate:modelValue":ue[6]||(ue[6]=Se=>T.value=Se),"true-value":1,"false-value":0},null,512),[[Mt,T.value]]),je(" "+g(T.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])])):ce("",!0)]),s("div",b6,[s("div",w6,[s("div",S6,g(r.value?r.value.name:f(t)("tagManager.selectCategory")),1),s("div",x6,[s("button",{class:"add-btn",onClick:N,disabled:!r.value},[ue[51]||(ue[51]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addTag")),1)],8,T6),Z.value?(b(),E("button",{key:0,class:"share-selected-btn",onClick:Ua,disabled:!h.value.length},g(f(t)("tagManager.shareSelected")),9,k6)):(b(),E("button",{key:1,class:"share-btn",onClick:_u,disabled:!r.value},g(f(t)("tagManager.batchShare")),9,C6)),Z.value?(b(),E("button",{key:2,class:"cancel-delete-btn",onClick:Bl},g(f(t)("tagManager.cancelShare")),1)):ce("",!0),R.value?(b(),E("button",{key:3,class:"delete-btn",onClick:hu,disabled:!h.value.length},g(f(t)("tagManager.deleteSelected")),9,E6)):(b(),E("button",{key:4,class:"delete-action-btn",onClick:Pl,disabled:!r.value},g(f(t)("tagManager.hasDeleteAction")),9,$6)),R.value?(b(),E("button",{key:5,class:"cancel-delete-btn",onClick:Fl},g(f(t)("tagManager.cancelDelete")),1)):ce("",!0)])]),r.value?(b(),E("div",L6,[(b(!0),E(De,null,Ve(l.value,Se=>(b(),E("div",{key:"tag-grid-"+Se.id_index,class:$e(K.value===Se.id_index?"tag-wrapper highlight":"tag-wrapper")},[s("div",{class:"tag-content",onClick:Qe=>ze(Se)},[s("div",{class:"tag-main",style:gt({backgroundColor:Se.color||"transparent"})},[je(g(Se.desc)+" ",1),s("div",M6,[s("button",{class:"action-btn move",onClick:Ze(Qe=>We(Se),["stop"]),title:f(t)("tagManager.moveTag")},[...ue[52]||(ue[52]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,I6),s("button",{class:"action-btn edit",onClick:Ze(Qe=>Q(Se),["stop"]),title:f(t)("tagManager.editTag")},[...ue[53]||(ue[53]=[s("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,D6),s("button",{class:"action-btn delete",onClick:Ze(Qe=>Ht(Se),["stop"]),title:f(t)("tagManager.deleteTag")},[...ue[54]||(ue[54]=[s("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,O6)])],4),s("div",R6,g(Se.text),1)],8,A6),m.value?me((b(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":ue[7]||(ue[7]=Qe=>h.value=Qe),value:Se,class:"tag-checkbox"},null,8,N6)),[[Mt,h.value]]):ce("",!0)],2))),128))])):ce("",!0)]),i.value?(b(),E("div",P6,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ue[12]||(ue[12]=Ze(()=>{},["stop"]))},[s("div",F6,[s("h2",null,g(C()),1),s("button",{class:"close-btn",onClick:w},"")]),s("div",B6,[d.value=="primary"?(b(),E("div",U6,[s("label",null,g(f(t)("tagManager.categoryName")),1),me(s("input",{type:"text","onUpdate:modelValue":ue[8]||(ue[8]=Se=>F.value.name=Se),placeholder:f(t)("tagManager.categoryNamePlaceholder"),onKeyup:sn(V,["enter"])},null,40,V6),[[Le,F.value.name]])])):ce("",!0),d.value=="group"?(b(),E("div",W6,[s("label",null,g(f(t)("tagManager.groupName")),1),me(s("input",{type:"text","onUpdate:modelValue":ue[9]||(ue[9]=Se=>B.value.name=Se),placeholder:f(t)("tagManager.groupNamePlaceholder"),onKeyup:sn(V,["enter"])},null,40,z6),[[Le,B.value.name]])])):ce("",!0),s("div",H6,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",j6,[s("div",{class:"color-preview",style:gt({backgroundColor:y.value})},null,4),s("div",G6,[me(s("input",{type:"color","onUpdate:modelValue":ue[10]||(ue[10]=Se=>L.value.hex=Se),onInput:O,class:"color-input"},null,544),[[Le,L.value.hex]]),s("div",q6,[me(s("input",{type:"range","onUpdate:modelValue":ue[11]||(ue[11]=Se=>L.value.alpha=Se),min:"0",max:"100",onInput:O,class:"alpha-slider"},null,544),[[Le,L.value.alpha,void 0,{number:!0}]]),s("span",K6,g(L.value.alpha)+"%",1)])])])])]),s("div",Y6,[s("button",{class:"cancel-btn",onClick:w},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:V},g(f(t)("common.confirm")),1)])],32)])):ce("",!0),u.value?(b(),E("div",J6,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ue[17]||(ue[17]=Ze(()=>{},["stop"]))},[s("div",X6,[s("h2",null,g(c.value?f(t)("tagManager.editTag"):f(t)("tagManager.addTag")),1),s("button",{class:"close-btn",onClick:he},"")]),s("div",Q6,[s("div",Z6,[s("label",null,g(f(t)("tagManager.text")),1),me(s("input",{type:"text","onUpdate:modelValue":ue[13]||(ue[13]=Se=>ie.value.desc=Se),placeholder:f(t)("tagManager.textPlaceholder")},null,8,e8),[[Le,ie.value.desc]])]),s("div",t8,[s("label",null,g(f(t)("tagManager.description")),1),me(s("textarea",{"onUpdate:modelValue":ue[14]||(ue[14]=Se=>ie.value.text=Se),placeholder:f(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,n8),[[Le,ie.value.text]])]),s("div",o8,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",a8,[s("div",{class:"color-preview",style:gt({backgroundColor:y.value})},null,4),s("div",l8,[me(s("input",{type:"color","onUpdate:modelValue":ue[15]||(ue[15]=Se=>L.value.hex=Se),onInput:O,class:"color-input"},null,544),[[Le,L.value.hex]]),s("div",s8,[me(s("input",{type:"range","onUpdate:modelValue":ue[16]||(ue[16]=Se=>L.value.alpha=Se),min:"0",max:"100",onInput:O,class:"alpha-slider"},null,544),[[Le,L.value.alpha,void 0,{number:!0}]]),s("span",r8,g(L.value.alpha)+"%",1)])])])])]),s("div",i8,[s("button",{class:"cancel-btn",onClick:he},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:fe},g(f(t)("common.confirm")),1)])],32)])):ce("",!0),Xe.value?(b(),E("div",u8,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:ue[18]||(ue[18]=Ze(()=>{},["stop"]))},[s("div",c8,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:Va},"")]),s("div",d8,[s("p",p8,g(Ot.value),1)]),s("div",f8,[s("button",{class:"cancel-btn",onClick:Va},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:Xt},g(f(t)("common.delete")),1)])],32)])):ce("",!0),P.value?(b(),E("div",g8,[s("div",m8,[s("div",v8,[s("h2",null,g(f(t)("tagManager.moveTag")),1),s("button",{class:"close-btn",onClick:ue[19]||(ue[19]=Se=>P.value=!1)},"")]),s("div",h8,[s("div",_8,[s("label",null,g(f(t)("tagManager.targetTag")),1),me(s("select",{"onUpdate:modelValue":ue[20]||(ue[20]=Se=>j.value=Se),class:"form-select"},[(b(!0),E(De,null,Ve(l.value,Se=>(b(),E("option",{key:Se.id_index,value:Se.id_index},g(Se.desc+" --> "+Se.text),9,y8))),128))],512),[[Gt,j.value]])]),s("div",b8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",w8,[s("label",null,[me(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[21]||(ue[21]=Se=>G.value=Se),value:"before"},null,512),[[mo,G.value]]),je(" "+g(f(t)("tagManager.moveBefore")),1)]),s("label",null,[me(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[22]||(ue[22]=Se=>G.value=Se),value:"after"},null,512),[[mo,G.value]]),je(" "+g(f(t)("tagManager.moveAfter")),1)])])])]),s("div",S8,[s("button",{class:"cancel-btn",onClick:ue[23]||(ue[23]=Se=>P.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:ke},g(f(t)("common.confirm")),1)])])])):ce("",!0),_.value?(b(),E("div",x8,[s("div",T8,[s("div",k8,[s("h2",null,g(f(t)("tagManager.moveGroup")),1),s("button",{class:"close-btn",onClick:ue[24]||(ue[24]=Se=>_.value=!1)},"")]),s("div",C8,[s("div",E8,[s("label",null,g(f(t)("tagManager.targetGroup")),1),me(s("select",{"onUpdate:modelValue":ue[25]||(ue[25]=Se=>se.value=Se),class:"form-select"},[(b(!0),E(De,null,Ve(Ee.value,(Se,Qe)=>(b(),E("option",{key:"group_move_id"+Qe,value:Se.id_index},g(Se.name),9,$8))),128))],512),[[Gt,se.value]])]),s("div",L8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",A8,[s("label",null,[me(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[26]||(ue[26]=Se=>Y.value=Se),value:"before"},null,512),[[mo,Y.value]]),je(" "+g(f(t)("tagManager.moveGroupBefore")),1)]),s("label",null,[me(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[27]||(ue[27]=Se=>Y.value=Se),value:"after"},null,512),[[mo,Y.value]]),je(" "+g(f(t)("tagManager.moveGroupAfter")),1)])])])]),s("div",M8,[s("button",{class:"cancel-btn",onClick:ue[28]||(ue[28]=Se=>_.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:ur},g(f(t)("common.confirm")),1)])])])):ce("",!0),te.value?(b(),E("div",I8,[s("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:ue[39]||(ue[39]=Ze(()=>{},["stop"]))},[s("div",D8,[s("h2",null,g(f(t)("tagManager.tabSizeConfig")),1),s("button",{class:"close-btn",onClick:Vl},"")]),s("div",O8,[s("div",R8,[s("h3",null,g(f(t)("tagManager.primaryTabConfig")),1),s("div",N8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",P8,[s("label",F8,[me(s("input",{type:"radio","onUpdate:modelValue":ue[29]||(ue[29]=Se=>z.value.primaryTab.width=Se),value:"fit-content"},null,512),[[mo,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",B8,[me(s("input",{type:"radio","onUpdate:modelValue":ue[30]||(ue[30]=Se=>z.value.primaryTab.width=Se),value:"custom"},null,512),[[mo,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.primaryTab.width!=="fit-content"?me((b(),E("input",{key:0,type:"number","onUpdate:modelValue":ue[31]||(ue[31]=Se=>z.value.primaryTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Le,z.value.primaryTab.width,void 0,{number:!0}]]):ce("",!0)])]),s("div",U8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.primaryTab.height)+"px)",1),me(s("input",{type:"range","onUpdate:modelValue":ue[32]||(ue[32]=Se=>z.value.primaryTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Le,z.value.primaryTab.height,void 0,{number:!0}]])]),s("div",V8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.primaryTab.fontSize)+"px)",1),me(s("input",{type:"range","onUpdate:modelValue":ue[33]||(ue[33]=Se=>z.value.primaryTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Le,z.value.primaryTab.fontSize,void 0,{number:!0}]])])]),s("div",W8,[s("h3",null,g(f(t)("tagManager.groupTabConfig")),1),s("div",z8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",H8,[s("label",j8,[me(s("input",{type:"radio","onUpdate:modelValue":ue[34]||(ue[34]=Se=>z.value.groupTab.width=Se),value:"fit-content"},null,512),[[mo,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",G8,[me(s("input",{type:"radio","onUpdate:modelValue":ue[35]||(ue[35]=Se=>z.value.groupTab.width=Se),value:"custom"},null,512),[[mo,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.groupTab.width!=="fit-content"?me((b(),E("input",{key:0,type:"number","onUpdate:modelValue":ue[36]||(ue[36]=Se=>z.value.groupTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Le,z.value.groupTab.width,void 0,{number:!0}]]):ce("",!0)])]),s("div",q8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.groupTab.height)+"px)",1),me(s("input",{type:"range","onUpdate:modelValue":ue[37]||(ue[37]=Se=>z.value.groupTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Le,z.value.groupTab.height,void 0,{number:!0}]])]),s("div",K8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.groupTab.fontSize)+"px)",1),me(s("input",{type:"range","onUpdate:modelValue":ue[38]||(ue[38]=Se=>z.value.groupTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Le,z.value.groupTab.fontSize,void 0,{number:!0}]])])])]),s("div",Y8,[s("button",{class:"reset-btn",onClick:wu},g(f(t)("tagManager.resetDefault")),1),s("button",{class:"cancel-btn",onClick:Vl},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:yu},g(f(t)("common.confirm")),1)])],32)])):ce("",!0),He(U5,{ref_key:"importTagDialogItem",ref:pa},null,512)]))}},[["__scopeId","data-v-c9c6726d"]]),ar=100,jg=v(""),So=v({}),Be={setActiveWindow(e){jg.value!==e&&(jg.value=e,Object.keys(So.value).forEach(t=>{So.value[t]=ar}),So.value[e]=ar+10)},getZIndex(e){return So.value[e]||(So.value[e]=ar),So.value[e]},registerWindow(e){So.value[e]||(So.value[e]=ar)},unregisterWindow(e){delete So.value[e]}},Ln={getLoraList:async e=>await Ie({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await Ie({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await Ie({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await Ie({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await Ie({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,n)=>{const o=new FormData;return o.append("image",e),o.append("path",t),o.append("fileName",n),await Ie({url:"/lorainfo/api/loras/set/img",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const n=new FormData;return n.append("json",JSON.stringify(t)),await Ie({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await Ie({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await Ie({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await Ie({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await Ie({url:"/get_lora_list_by_search",method:"post",data:{search:e}})},J8=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Gg=yn({name:"JsonString",props:{jsonValue:{type:String,required:!0}},setup(e){const t=v(!0),n=v(!1),o=v(null),a=v(null);ct(()=>{o.value&&a.value&&o.value.offsetHeight>a.value.offsetHeight&&(n.value=!0)});const l=()=>{t.value=!t.value};return()=>{const r=e.jsonValue,i=J8.test(r);let u;!t.value&&n.value?u=$t("span",{class:{"jv-ellipsis":!0},onClick:l},"..."):i?u=$t("span",{class:{"jv-item":!0,"jv-string":!0},ref:o},[$t("span",null,'"'),$t("a",{href:r,target:"_blank",class:"jv-link"},r),$t("span",null,'"')]):u=$t("span",{class:{"jv-item":!0,"jv-string":!0},ref:o},`"${r}"`);const p=[];return n.value&&p.push($t("span",{class:{"jv-toggle":!0,open:t.value},onClick:l})),p.push($t("span",{class:{"jv-holder-node":!0},ref:a})),p.push(u),$t("span",{},p)}}}),X8={class:$e(["jv-item","jv-undefined"])},Q8=yn({__name:"json-undefined",props:{jsonValue:{type:null,default:void 0}},setup(e){const t=e,n=nt(()=>t.jsonValue===null?"null":"undefined");return(o,a)=>(b(),E("span",X8,g(n.value),1))}}),Z8=yn({__name:"json-number",props:{jsonValue:{type:Number,required:!0}},setup(e){const t=e,n=nt(()=>Number.isInteger(t.jsonValue));return(o,a)=>(b(),E("span",{class:$e(["jv-item","jv-number",n.value?"jv-number-integer":"jv-number-float"])},g(e.jsonValue.toString()),3))}}),e7={class:$e(["jv-item","jv-boolean"])},t7=yn({__name:"json-boolean",props:{jsonValue:{type:Boolean,required:!0}},setup(e){return(t,n)=>(b(),E("span",e7,g(e.jsonValue.toString()),1))}}),n7=yn({name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const n=v({});let o=null;const a=u=>{setTimeout(()=>{n.value=u},0)};et(()=>e.jsonValue,u=>{a(u)},{immediate:!0,deep:!0});const l=nt(()=>{if(!e.sort)return n.value;const u=Object.keys(n.value).sort(),p={};return u.forEach(c=>{p[c]=n.value[c]}),p}),r=()=>{if(o)try{o.dispatchEvent(new Event("resized"))}catch{const u=document.createEvent("Event");u.initEvent("resized",!0,!1),o.dispatchEvent(u)}},i=()=>{t("update:expand",!e.expand),r()};return()=>{const u=[];if(u.push($t("span",{class:["jv-item","jv-object"]},"{")),e.expand){for(const p in l.value)if(l.value.hasOwnProperty(p)){const c=l.value[p];u.push($t(cu,{key:p,sort:e.sort,keyName:p,depth:e.depth+1,value:c,previewMode:e.previewMode}))}}return!e.expand&&Object.keys(n.value).length>0&&u.push($t("span",{class:"jv-ellipsis",onClick:i,title:`click to reveal object content (keys: ${Object.keys(l.value).join(", ")})`},"...")),u.push($t("span",{class:["jv-item","jv-object"]},"}")),$t("span",{ref:p=>{o=p}},u)}}}),o7=yn({name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const n=v([]);let o=null;const a=(r,i=0)=>{i===0&&(n.value=[]),setTimeout(()=>{r&&r.length>i&&(n.value.push(r[i]),a(r,i+1))},0)};et(()=>e.jsonValue,r=>{a(r)},{immediate:!0,deep:!0});const l=()=>{if(t("update:expand",!e.expand),o)try{o.dispatchEvent(new Event("resized"))}catch{const r=document.createEvent("Event");r.initEvent("resized",!0,!1),o.dispatchEvent(r)}};return()=>{const r=[];return!e.previewMode&&!e.keyName&&r.push($t("span",{class:{"jv-toggle":!0,open:!!e.expand},onClick:l})),r.push($t("span",{class:["jv-item","jv-array"]},"[")),e.expand&&n.value.forEach((i,u)=>{r.push($t(cu,{key:u,sort:e.sort,depth:e.depth+1,value:i,previewMode:e.previewMode}))}),!e.expand&&n.value.length>0&&r.push($t("span",{class:"jv-ellipsis",onClick:l,title:`click to reveal ${n.value.length} hidden items`},"...")),r.push($t("span",{class:["jv-item","jv-array"]},"]")),$t("span",{ref:i=>{o=i}},r)}}}),a7=["title"],l7=yn({__name:"json-function",props:{jsonValue:{type:Function,required:!0}},setup(e){return(t,n)=>(b(),E("span",{class:$e(["jv-item","jv-function"]),title:e.jsonValue.toString()}," <function> ",8,a7))}}),s7={class:$e(["jv-item","jv-string"])},r7=yn({__name:"json-date",props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e,n=co("timeformat",a=>a.toLocaleString()),o=nt(()=>n(t.jsonValue));return(a,l)=>(b(),E("span",s7,' "'+g(o.value)+'" ',1))}}),i7={class:$e(["jv-item","jv-regexp"])},u7=yn({__name:"json-regexp",props:{jsonValue:{type:RegExp,required:!0}},setup(e){return(t,n)=>(b(),E("span",i7,g(e.jsonValue.toString()),1))}}),cu=yn({name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},setup(e){const t=co("expandDepth",1/0),n=co("keyClick",()=>{}),o=v(!0);let a=null;ct(()=>{o.value=e.previewMode||e.depth<t});const l=()=>{if(o.value=!o.value,a)try{a.dispatchEvent(new Event("resized"))}catch{const r=document.createEvent("Event");r.initEvent("resized",!0,!1),a.dispatchEvent(r)}};return()=>{const r=[];let i;e.value===null||e.value===void 0?i=Q8:Array.isArray(e.value)?i=o7:e.value instanceof Date?i=r7:e.value instanceof RegExp?i=u7:typeof e.value=="object"?i=n7:typeof e.value=="number"?i=Z8:typeof e.value=="string"?i=Gg:typeof e.value=="boolean"?i=t7:typeof e.value=="function"?i=l7:i=Gg;const u=e.value&&(Array.isArray(e.value)||typeof e.value=="object"&&!(e.value instanceof Date)&&!(e.value instanceof RegExp));return!e.previewMode&&u&&!(e.value instanceof RegExp)&&r.push($t("span",{class:{"jv-toggle":!0,open:!!o.value},onClick:l})),e.keyName&&r.push($t("span",{class:"jv-key",onClick:()=>{n&&n(e.keyName)}},`${e.keyName}:`)),r.push($t(i,{class:"jv-push",jsonValue:e.value,keyName:e.keyName,sort:e.sort,depth:e.depth,expand:o.value,previewMode:e.previewMode,"onUpdate:expand":p=>{o.value=p}})),$t("div",{class:{"jv-node":!0,"jv-key-node":!!e.keyName&&!u,toggle:!e.previewMode&&u},ref:p=>{a=p}},r)}}});function c7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var du={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var d7=du.exports,qg;function p7(){return qg||(qg=1,(function(e,t){(function(n,o){e.exports=o()})(d7,function(){return(function(){var n={686:(function(l,r,i){i.d(r,{default:function(){return Ce}});var u=i(279),p=i.n(u),c=i(370),d=i.n(c),h=i(817),m=i.n(h);function _(le){try{return document.execCommand(le)}catch{return!1}}var x=function(le){var de=m()(le);return _("cut"),de},k=x;function T(le){var de=document.documentElement.getAttribute("dir")==="rtl",ve=document.createElement("textarea");ve.style.fontSize="12pt",ve.style.border="0",ve.style.padding="0",ve.style.margin="0",ve.style.position="absolute",ve.style[de?"right":"left"]="-9999px";var oe=window.pageYOffset||document.documentElement.scrollTop;return ve.style.top="".concat(oe,"px"),ve.setAttribute("readonly",""),ve.value=le,ve}var D=function(le,de){var ve=T(le);de.container.appendChild(ve);var oe=m()(ve);return _("copy"),ve.remove(),oe},K=function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ve="";return typeof le=="string"?ve=D(le,de):le instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(le==null?void 0:le.type)?ve=D(le.value,de):(ve=m()(le),_("copy")),ve},S=K;function P(le){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(de){return typeof de}:P=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},P(le)}var j=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=le.action,ve=de===void 0?"copy":de,oe=le.container,X=le.target,M=le.text;if(ve!=="copy"&&ve!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(X!==void 0)if(X&&P(X)==="object"&&X.nodeType===1){if(ve==="copy"&&X.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ve==="cut"&&(X.hasAttribute("readonly")||X.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(M)return S(M,{container:oe});if(X)return ve==="cut"?k(X):S(X,{container:oe})},G=j;function q(le){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(de){return typeof de}:q=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},q(le)}function Y(le,de){if(!(le instanceof de))throw new TypeError("Cannot call a class as a function")}function _e(le,de){for(var ve=0;ve<de.length;ve++){var oe=de[ve];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(le,oe.key,oe)}}function se(le,de,ve){return de&&_e(le.prototype,de),ve&&_e(le,ve),le}function R(le,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(de&&de.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),de&&Z(le,de)}function Z(le,de){return Z=Object.setPrototypeOf||function(ve,oe){return ve.__proto__=oe,ve},Z(le,de)}function te(le){var de=ae();return function(){var ve=F(le),oe;if(de){var X=F(this).constructor;oe=Reflect.construct(ve,arguments,X)}else oe=ve.apply(this,arguments);return z(this,oe)}}function z(le,de){return de&&(q(de)==="object"||typeof de=="function")?de:ne(le)}function ne(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(le){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},F(le)}function B(le,de){var ve="data-clipboard-".concat(le);if(de.hasAttribute(ve))return de.getAttribute(ve)}var ie=(function(le){R(ve,le);var de=te(ve);function ve(oe,X){var M;return Y(this,ve),M=de.call(this),M.resolveOptions(X),M.listenClick(oe),M}return se(ve,[{key:"resolveOptions",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof oe.action=="function"?oe.action:this.defaultAction,this.target=typeof oe.target=="function"?oe.target:this.defaultTarget,this.text=typeof oe.text=="function"?oe.text:this.defaultText,this.container=q(oe.container)==="object"?oe.container:document.body}},{key:"listenClick",value:function(oe){var X=this;this.listener=d()(oe,"click",function(M){return X.onClick(M)})}},{key:"onClick",value:function(oe){var X=oe.delegateTarget||oe.currentTarget,M=this.action(X)||"copy",U=G({action:M,container:this.container,target:this.target(X),text:this.text(X)});this.emit(U?"success":"error",{action:M,text:U,trigger:X,clearSelection:function(){X&&X.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(oe){return B("action",oe)}},{key:"defaultTarget",value:function(oe){var X=B("target",oe);if(X)return document.querySelector(X)}},{key:"defaultText",value:function(oe){return B("text",oe)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(oe){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return S(oe,X)}},{key:"cut",value:function(oe){return k(oe)}},{key:"isSupported",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],X=typeof oe=="string"?[oe]:oe,M=!!document.queryCommandSupported;return X.forEach(function(U){M=M&&!!document.queryCommandSupported(U)}),M}}]),ve})(p()),Ce=ie}),828:(function(l){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function u(p,c){for(;p&&p.nodeType!==r;){if(typeof p.matches=="function"&&p.matches(c))return p;p=p.parentNode}}l.exports=u}),438:(function(l,r,i){var u=i(828);function p(h,m,_,x,k){var T=d.apply(this,arguments);return h.addEventListener(_,T,k),{destroy:function(){h.removeEventListener(_,T,k)}}}function c(h,m,_,x,k){return typeof h.addEventListener=="function"?p.apply(null,arguments):typeof _=="function"?p.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(T){return p(T,m,_,x,k)}))}function d(h,m,_,x){return function(k){k.delegateTarget=u(k.target,m),k.delegateTarget&&x.call(h,k)}}l.exports=c}),879:(function(l,r){r.node=function(i){return i!==void 0&&i instanceof HTMLElement&&i.nodeType===1},r.nodeList=function(i){var u=Object.prototype.toString.call(i);return i!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in i&&(i.length===0||r.node(i[0]))},r.string=function(i){return typeof i=="string"||i instanceof String},r.fn=function(i){var u=Object.prototype.toString.call(i);return u==="[object Function]"}}),370:(function(l,r,i){var u=i(879),p=i(438);function c(_,x,k){if(!_&&!x&&!k)throw new Error("Missing required arguments");if(!u.string(x))throw new TypeError("Second argument must be a String");if(!u.fn(k))throw new TypeError("Third argument must be a Function");if(u.node(_))return d(_,x,k);if(u.nodeList(_))return h(_,x,k);if(u.string(_))return m(_,x,k);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(_,x,k){return _.addEventListener(x,k),{destroy:function(){_.removeEventListener(x,k)}}}function h(_,x,k){return Array.prototype.forEach.call(_,function(T){T.addEventListener(x,k)}),{destroy:function(){Array.prototype.forEach.call(_,function(T){T.removeEventListener(x,k)})}}}function m(_,x,k){return p(document.body,_,x,k)}l.exports=c}),817:(function(l){function r(i){var u;if(i.nodeName==="SELECT")i.focus(),u=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var p=i.hasAttribute("readonly");p||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),p||i.removeAttribute("readonly"),u=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var c=window.getSelection(),d=document.createRange();d.selectNodeContents(i),c.removeAllRanges(),c.addRange(d),u=c.toString()}return u}l.exports=r}),279:(function(l){function r(){}r.prototype={on:function(i,u,p){var c=this.e||(this.e={});return(c[i]||(c[i]=[])).push({fn:u,ctx:p}),this},once:function(i,u,p){var c=this;function d(){c.off(i,d),u.apply(p,arguments)}return d._=u,this.on(i,d,p)},emit:function(i){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[i]||[]).slice(),c=0,d=p.length;for(c;c<d;c++)p[c].fn.apply(p[c].ctx,u);return this},off:function(i,u){var p=this.e||(this.e={}),c=p[i],d=[];if(c&&u)for(var h=0,m=c.length;h<m;h++)c[h].fn!==u&&c[h].fn._!==u&&d.push(c[h]);return d.length?p[i]=d:delete p[i],this}},l.exports=r,l.exports.TinyEmitter=r})},o={};function a(l){if(o[l])return o[l].exports;var r=o[l]={exports:{}};return n[l](r,r.exports,a),r.exports}return(function(){a.n=function(l){var r=l&&l.__esModule?(function(){return l.default}):(function(){return l});return a.d(r,{a:r}),r}})(),(function(){a.d=function(l,r){for(var i in r)a.o(r,i)&&!a.o(l,i)&&Object.defineProperty(l,i,{enumerable:!0,get:r[i]})}})(),(function(){a.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)}})(),a(686)})().default})})(du)),du.exports}var f7=p7();const g7=c7(f7),m7=function(e,t){let n=Date.now(),o;return(...a)=>{Date.now()-n<t&&o&&clearTimeout(o),o=setTimeout(()=>{e(...a)},t),n=Date.now()}},v7=yn({name:"JsonViewer",components:{JsonBox:cu},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},emits:["onKeyClick","copied"],setup(e,{emit:t}){const n=v(!1),o=v(!1),a=v(e.expanded),l=v(null),r=v(null);_s("expandDepth",e.expandDepth),_s("timeformat",e.timeformat),_s("keyClick",_=>{t("onKeyClick",_)});const i=nt(()=>"jv-container jv-"+e.theme+(e.boxed?" boxed":"")),u=nt(()=>{if(typeof e.copyable=="boolean"&&!e.copyable)return{copyText:"copy",copiedText:"copied!",timeout:2e3,align:"right"};const _=e.copyable;return{copyText:_.copyText||"copy",copiedText:_.copiedText||"copied!",timeout:_.timeout||2e3,align:_.align||"right"}}),p=nt(()=>{if(!e.parse||typeof e.value!="string")return e.value;try{return JSON.parse(e.value)}catch{return e.value}}),c=()=>{d()},d=m7(()=>{Ke(()=>{r.value&&(r.value.$el.clientHeight>=250?o.value=!0:o.value=!1)})},200),h=_=>{n.value||(n.value=!0,setTimeout(()=>{n.value=!1},u.value.timeout),t("copied",_))},m=()=>{a.value=!a.value};return et(()=>e.value,()=>{c()}),ct(()=>{e.boxed&&r.value&&(c(),r.value.$el.addEventListener("resized",c,!0)),e.copyable&&l.value&&new g7(l.value,{text:()=>JSON.stringify(p.value,null,2)}).on("success",h)}),{clip:l,jsonBox:r,copied:n,expandableCode:o,expandCode:a,jvClass:i,copyText:u,parseValue:p,toggleExpandCode:m}}}),h7=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n};function _7(e,t,n,o,a,l){const r=Om("json-box");return b(),E("div",{class:$e(e.jvClass)},[e.copyable?(b(),E("div",{key:0,class:$e(`jv-tooltip ${e.copyText.align||"right"}`)},[s("span",{ref:"clip",class:$e(["jv-button",{copied:e.copied}])},[al(e.$slots,"copy",{copied:e.copied},()=>[je(g(e.copied?e.copyText.copiedText:e.copyText.copyText),1)])],2)],2)):ce("",!0),s("div",{class:$e(["jv-code",{open:e.expandCode,boxed:e.boxed}])},[He(r,{ref:"jsonBox",value:e.parseValue,sort:e.sort,"preview-mode":e.previewMode},null,8,["value","sort","preview-mode"])],2),e.expandableCode&&e.boxed?(b(),E("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=(...i)=>e.toggleExpandCode&&e.toggleExpandCode(...i))},[s("span",{class:$e(["jv-toggle",{open:!!e.expandCode}])},null,2)])):ce("",!0)],2)}const y7=h7(v7,[["render",_7]]),b7={class:"lora-raw__content"},Kg="weilin_tools_",w7=yt({__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v({}),l=v(!1),r={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u=v((()=>{try{const m=localStorage.getItem(`${Kg}loraRawState`);if(m){const _=JSON.parse(m),x={...r};return _.loraRaw&&(x.loraRaw={...r.loraRaw,..._.loraRaw}),x}}catch(m){console.error("Error loading window states:",m)}return{...r}})());et(u,m=>{try{localStorage.setItem(`${Kg}loraRawState`,JSON.stringify(m))}catch(_){console.error("Error saving window states:",_)}},{deep:!0}),ct(()=>{Be.registerWindow("loraRaw")}),Rn(()=>{Be.unregisterWindow("loraRaw")});const p=m=>{l.value=!1},c=(m,_)=>{u.value[m]&&(u.value[m].position={..._})},d=(m,_)=>{u.value[m]&&(u.value[m].size={..._})};return t({open:m=>{l.value=!0,Be.setActiveWindow("loraRaw"),a.value=m}}),(m,_)=>l.value?(b(),xt($n,{key:0,title:f(o)("lora.rawTitle"),position:u.value.loraRaw.position,size:u.value.loraRaw.size,"z-index":f(Be).getZIndex("loraRaw"),"onUpdate:position":_[0]||(_[0]=x=>c("loraRaw",x)),"onUpdate:size":_[1]||(_[1]=x=>d("loraRaw",x)),onActive:_[2]||(_[2]=x=>f(Be).setActiveWindow("loraRaw")),onClose:_[3]||(_[3]=x=>p())},{default:dt(()=>[s("div",b7,[He(f(y7),{value:a.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):ce("",!0)}},[["__scopeId","data-v-4c910f08"]]),S7={key:0,class:"lora-detail__loading"},x7={class:"lora-detail__body"},T7={class:"lora-detail__tags"},k7=["title"],C7=["title"],E7={class:"lora-detail__table"},$7={class:"label"},L7={colspan:"2"},A7={colspan:"3"},M7={class:"label"},I7={colspan:"2",class:"hash"},D7={class:"label"},O7={colspan:"2"},R7=["href"],N7={key:1,class:"not-found"},P7=["title"],F7={class:"label"},B7=["title"],U7={key:1,class:"text"},V7={class:"actions"},W7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},z7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},H7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},j7={class:"label"},G7={colspan:"2"},q7={class:"label"},K7={colspan:"2"},Y7={class:"label"},J7=["title"],X7=["onUpdate:modelValue","type","onKeyup"],Q7={key:1,class:"text"},Z7={class:"actions"},e9=["onClick","title"],t9={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},n9={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},o9={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},a9={class:"label"},l9=["onUpdate:modelValue"],s9={key:1},r9=["onUpdate:modelValue","type","onKeyup"],i9={key:1,class:"text"},u9={class:"actions"},c9=["onClick","title"],d9={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},p9={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},f9={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},g9=["onClick","title"],m9={class:"field-management"},v9=["title"],h9={key:0},_9={class:"label"},y9=["title"],b9={key:0,class:"word-selection"},w9={colspan:"2"},S9={class:"word-list"},x9=["onClick"],T9={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},k9={key:1},C9={key:0,class:"lora-detail__images"},E9={class:"image-wrapper"},$9=["onClick"],L9=["src"],A9={class:"image-info"},M9={key:0,class:"info-item"},I9=["href"],D9={key:1,class:"info-item"},O9={key:2,class:"info-item"},R9={key:3,class:"info-item"},N9={key:4,class:"info-item"},P9={key:5,class:"info-item"},F9={key:6,class:"info-item"},B9={key:7,class:"info-item"},Yg="weilin_tools_",lr=yt({__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(!1),l=v({}),r=v(!1),i=v(),u=v({}),p={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d=v((()=>{try{const M=localStorage.getItem(`${Yg}loraDetailState`);if(M){const U=JSON.parse(M),H={...p};return U.loraDetail&&(H.loraDetail={...p.loraDetail,...U.loraDetail}),H}}catch(M){console.error("Error loading window states:",M)}return{...p}})());et(d,M=>{try{localStorage.setItem(`${Yg}loraDetailState`,JSON.stringify(M))}catch(U){console.error("Error saving window states:",U)}},{deep:!0}),ct(()=>{Be.registerWindow("loraDetail")}),Rn(()=>{Be.unregisterWindow("loraDetail")});const h=M=>{r.value=!1},m=(M,U)=>{d.value[M]&&(d.value[M].position={...U})},_=(M,U)=>{d.value[M]&&(d.value[M].size={...U})};t({open:M=>{r.value=!0,Be.setActiveWindow("loraDetail"),a.value=!0,l.value=M,Ke(()=>{Y()})}});const k=v(""),T=v(),D=M=>{T.value.open(M)},K=v({}),S=v({}),P=v([]),j=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}],G=()=>{const M=`custom_${Date.now()}`;l.value.user_diy_fileds||(l.value.user_diy_fileds={}),u.value[M]={label:"",type:"text"},l.value.user_diy_fileds[M]={label:"",value:""},S.value[M]="",F(M)},q=async M=>{var U,H;delete u.value[M],delete S.value[M],(H=(U=l.value)==null?void 0:U.user_diy_fileds)!=null&&H[M]&&delete l.value.user_diy_fileds[M],await Ke(async()=>{await Ce(M)})},Y=()=>{k.value=l.value.name,l.value={},P.value=[],S.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Ln.getLoraDetail({file:k.value,refresh:!1,light:!1}).then(M=>{l.value=M.data,Ke(function(){var U,H,I,V,C,w;l.value.name=l.value.name||((H=(U=l.value.raw)===null||U===void 0?void 0:U.metadata)===null||H===void 0?void 0:H.ss_output_name===void 0?H["modelspec.title"]:H.ss_output_name)||"",S.value.nameValue=l.value.name,l.value.strengthMin=(I=l.value.strengthMin)!==null&&I!==void 0?I:"",S.value.minValue=l.value.strengthMin,l.value.strengthMax=(V=l.value.strengthMax)!==null&&V!==void 0?V:"",S.value.maxValue=l.value.strengthMax,l.value.userNote=(C=l.value.userNote)!==null&&C!==void 0?C:"",S.value.notesValue=l.value.userNote,l.value.loraWorks=(w=l.value.loraWorks)!==null&&w!==void 0?w:"",S.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1})}).catch(M=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},_e=M=>{let H=new URL(M).pathname.split("/").pop();return H=H.split("?")[0],decodeURIComponent(H)},se=async M=>{try{const U=await fetch(M),H=_e(M),I=await U.blob();Ln.postUplaodImg(I,l.value.file,H).then(V=>{J({type:"success",str:"message.saveSuccess"})}).catch(V=>{J({type:"warn",str:"message.unknownError"})})}catch{J({type:"warn",str:"message.unknownError"})}},R=nt(()=>{var M;return(M=l.value.links)==null?void 0:M.find(U=>U.includes("civitai.com/models"))}),Z=nt(()=>{var M,U;return((U=(M=l.value.raw)==null?void 0:M.civitai)==null?void 0:U.error)==="Model not found"}),te=nt(()=>l.value.trainedWords||[]),z=async()=>{var U;const M=((U=i.value)==null?void 0:U.scrollTop)||0;a.value=!0,Ln.getLoraRefresh({file:k.value}).then(H=>{l.value=H.data,Ke(function(){var I,V,C,w,N,Q;l.value.name=l.value.name||((V=(I=l.value.raw)===null||I===void 0?void 0:I.metadata)===null||V===void 0?void 0:V.ss_output_name===void 0?V["modelspec.title"]:V.ss_output_name)||"",S.value.nameValue=l.value.name,l.value.strengthMin=(C=l.value.strengthMin)!==null&&C!==void 0?C:"",S.value.minValue=l.value.strengthMin,l.value.strengthMax=(w=l.value.strengthMax)!==null&&w!==void 0?w:"",S.value.maxValue=l.value.strengthMax,l.value.userNote=(N=l.value.userNote)!==null&&N!==void 0?N:"",S.value.notesValue=l.value.userNote,l.value.loraWorks=(Q=l.value.loraWorks)!==null&&Q!==void 0?Q:"",S.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1}),Ke(function(){a.value=!1}),i.value&&(i.value.scrollTop=M),J({type:"success",str:"message.dataLoaded"})}).catch(H=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},ne=M=>{K.value[M]?F(M):ae(M)},ae=M=>{var U,H;K.value[M]=!0,M in u.value?S.value[M]=((H=(U=l.value.user_diy_fileds)==null?void 0:U[M])==null?void 0:H.value)||"":S.value[M]=l.value[M],Ke(()=>{M==="name"&&nameInput.value&&nameInput.value.focus()})},F=M=>{M in u.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[M]={label:u.value[M].label,value:S.value[M]}):l.value[M]=S.value[M],ie(l.value),K.value[M]=!1},B=M=>{K.value[M]=!1,S.value[M]=l.value[M]},ie=M=>{var H;const U=((H=i.value)==null?void 0:H.scrollTop)||0;a.value=!0,Ln.postLoraSave(k.value,M).then(I=>{l.value=I.data,Ke(function(){var V,C,w,N,Q,fe;l.value.name=l.value.name||((C=(V=l.value.raw)===null||V===void 0?void 0:V.metadata)===null||C===void 0?void 0:C.ss_output_name===void 0?C["modelspec.title"]:C.ss_output_name)||"",S.value.nameValue=l.value.name,l.value.strengthMin=(w=l.value.strengthMin)!==null&&w!==void 0?w:"",S.value.minValue=l.value.strengthMin,l.value.strengthMax=(N=l.value.strengthMax)!==null&&N!==void 0?N:"",S.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",S.value.notesValue=l.value.userNote,l.value.loraWorks=(fe=l.value.loraWorks)!==null&&fe!==void 0?fe:"",S.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,Ke(function(){i.value&&(i.value.scrollTop=U)})}),J({type:"success",str:"message.saveSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},Ce=async M=>{var H;const U=((H=i.value)==null?void 0:H.scrollTop)||0;a.value=!0,await Ln.postLoraDelet(k.value,M).then(I=>{l.value=I.data,Ke(function(){var V,C,w,N,Q,fe;l.value.name=l.value.name||((C=(V=l.value.raw)===null||V===void 0?void 0:V.metadata)===null||C===void 0?void 0:C.ss_output_name===void 0?C["modelspec.title"]:C.ss_output_name)||"",S.value.nameValue=l.value.name,l.value.strengthMin=(w=l.value.strengthMin)!==null&&w!==void 0?w:"",S.value.minValue=l.value.strengthMin,l.value.strengthMax=(N=l.value.strengthMax)!==null&&N!==void 0?N:"",S.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",S.value.notesValue=l.value.userNote,l.value.loraWorks=(fe=l.value.loraWorks)!==null&&fe!==void 0?fe:"",S.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,Ke(function(){i.value&&(i.value.scrollTop=U)})}),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},le=M=>{const U=P.value.indexOf(M);U===-1?P.value.push(M):P.value.splice(U,1)},de=M=>P.value.includes(M),ve=async()=>{P.value.length&&navigator.clipboard.writeText(P.value).then(M=>{J({type:"success",str:"message.copySuccess"})},M=>{J({type:"warn",str:"message.copyFailed"})})};v(!1),v(!1),nt(()=>a.value?o("common.loading"):o("common.ready"));const oe=v(!0),X=()=>{oe.value=!oe.value};return(M,U)=>(b(),E(De,null,[r.value?(b(),xt($n,{key:0,title:f(o)("lora.title"),position:d.value.loraDetail.position,size:d.value.loraDetail.size,"z-index":f(Be).getZIndex("loraDetail"),"onUpdate:position":U[5]||(U[5]=H=>m("loraDetail",H)),"onUpdate:size":U[6]||(U[6]=H=>_("loraDetail",H)),onActive:U[7]||(U[7]=H=>f(Be).setActiveWindow("loraDetail")),onClose:U[8]||(U[8]=H=>h())},{default:dt(()=>{var H;return[s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:i},[a.value?(b(),E("div",S7,[...U[9]||(U[9]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):ce("",!0),s("div",x7,[U[24]||(U[24]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",T7,[l.value.type?(b(),E("li",{key:0,class:$e(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,k7)):ce("",!0),l.value.baseModel?(b(),E("li",{key:1,class:$e(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,C7)):ce("",!0)]),s("table",E7,[s("tbody",null,[s("tr",null,[s("td",$7,g(f(o)("lora.file")),1),s("td",L7,g(l.value.file),1),s("td",A7,[s("button",{class:"fetch-btn",onClick:U[0]||(U[0]=I=>D(l.value.raw.metadata))},g(f(o)("lora.seeLoraRaw")),1)])]),s("tr",null,[s("td",M7,g(f(o)("lora.hash")),1),s("td",I7,g(l.value.sha256),1)]),s("tr",null,[s("td",D7,g(f(o)("lora.civitai")),1),s("td",O7,[R.value?(b(),E(De,{key:0},[s("a",{href:R.value,target:"_blank",class:"civitai-link"},[U[10]||(U[10]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,R7),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:z},g(f(o)("lora.getCivitData")),1)],64)):Z.value?(b(),E("div",N7,[s("i",null,g(f(o)("lora.modelNotFound")),1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},[...U[11]||(U[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,P7))])):(b(),E("button",{key:2,class:"fetch-btn",onClick:z},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:$e({"is-editing":K.value.name})},[s("td",F7,[je(g(f(o)("lora.name"))+" ",1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},[...U[12]||(U[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,B7))]),s("td",null,[K.value.name?me((b(),E("input",{key:0,"onUpdate:modelValue":U[1]||(U[1]=I=>S.value.name=I),type:"text",onKeyup:[U[2]||(U[2]=sn(I=>F("name"),["enter"])),U[3]||(U[3]=sn(I=>B("name"),["esc"]))],ref:"nameInput"},null,544)),[[Le,S.value.name]]):(b(),E("span",U7,g(l.value.name),1))]),s("td",V7,[s("button",{class:"edit-btn",onClick:U[4]||(U[4]=I=>ne("name"))},[(b(),E("svg",W7,[K.value.name?(b(),E("path",z7)):(b(),E("path",H7))]))])])],2),s("tr",null,[s("td",j7,g(f(o)("lora.baseModel")),1),s("td",G7,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                    (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",q7,g(f(o)("lora.skipClip")),1),s("td",K7,g((M._t=(M._s=l.value.raw)===null||M._s===void 0?void 0:M._s.metadata)===null||M._t===void 0?void 0:M._t.ss_clip_skip),1)]),(b(),E(De,null,Ve(j,I=>s("tr",{key:I.key,class:$e({"is-editing":K.value[I.key]})},[s("td",Y7,[je(g(I.label)+" ",1),I.tip?(b(),E("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:I.tip},[...U[13]||(U[13]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,J7)):ce("",!0)]),s("td",null,[K.value[I.key]?me((b(),E("input",{key:0,"onUpdate:modelValue":V=>S.value[I.key]=V,type:I.type||"text",onKeyup:[sn(V=>F(I.key),["enter"]),sn(V=>B(I.key),["esc"])]},null,40,X7)),[[Fd,S.value[I.key]]]):(b(),E("span",Q7,g(l.value[I.key]),1))]),s("td",Z7,[s("button",{class:"edit-btn",onClick:V=>ne(I.key),title:f(o)("promptBox.settings.edit")},[(b(),E("svg",t9,[K.value[I.key]?(b(),E("path",n9)):(b(),E("path",o9))]))],8,e9)])],2)),64)),(b(!0),E(De,null,Ve(u.value,(I,V)=>{var C;return b(),E("tr",{key:V,class:$e({"is-editing":K.value[V]})},[s("td",a9,[K.value[V]?me((b(),E("input",{key:0,"onUpdate:modelValue":w=>I.label=w,type:"text"},null,8,l9)),[[Le,I.label]]):(b(),E("span",s9,g(I.label),1))]),s("td",null,[K.value[V]?me((b(),E("input",{key:0,"onUpdate:modelValue":w=>S.value[V]=w,type:I.type||"text",onKeyup:[sn(w=>F(V),["enter"]),sn(w=>B(V),["esc"])]},null,40,r9)),[[Fd,S.value[V]]]):(b(),E("span",i9,g(l.value.user_diy_fileds?(C=l.value.user_diy_fileds[V])==null?void 0:C.value:""),1))]),s("td",u9,[s("button",{class:"edit-btn",onClick:w=>ne(V),title:f(o)("promptBox.settings.edit")},[(b(),E("svg",d9,[K.value[V]?(b(),E("path",p9)):(b(),E("path",f9))]))],8,c9),s("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:w=>q(V),class:"edit-btn",title:f(o)("promptBox.settings.delete")},g(f(o)("promptBox.settings.delete")),9,g9)])],2)}),128)),s("div",m9,[s("button",{onClick:G,class:"add-btn",title:f(o)("lora.addDiyFiled")},g(f(o)("lora.addDiyFiled")),9,v9)]),te.value.length?(b(),E("tr",h9,[s("td",_9,[je(g(f(o)("lora.trainedWords"))+" ",1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},[...U[14]||(U[14]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,y9)),P.value.length?(b(),E("div",b9,[je(g(f(o)("lora.selectedWords",{count:P.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:ve},g(f(o)("common.copy")),1)])):ce("",!0)]),s("td",w9,[s("ul",S9,[(b(!0),E(De,null,Ve(oe.value?te.value.slice(0,10):te.value,(I,V)=>(b(),E("li",{key:"words-"+V,class:$e(["word-item",{"is-selected":de(I.word),"is-hidden":oe.value&&V>=10}]),onClick:C=>le(I.word)},[s("span",null,g(I.word),1),I.civitai?(b(),E("svg",T9,[...U[15]||(U[15]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):ce("",!0),I.count!=null?(b(),E("small",k9,g(I.count),1)):ce("",!0)],10,x9))),128)),te.value.length>10?(b(),E("li",{key:0,class:"toggle-btn",onClick:X},g(oe.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):ce("",!0)])])])):ce("",!0)])]),(H=l.value.images)!=null&&H.length?(b(),E("ul",C9,[(b(!0),E(De,null,Ve(l.value.images,(I,V)=>(b(),E("li",{key:V,class:"lora-detail__image-item"},[s("figure",null,[s("div",E9,[s("div",{class:"image-action",onClick:C=>se(I.url)}," Lora ",8,$9),s("img",{src:I.url},null,8,L9)]),s("figcaption",A9,[I.civitaiUrl?(b(),E("span",M9,[s("a",{href:I.civitaiUrl,target:"_blank",class:"civitai-link"},[...U[16]||(U[16]=[je(" C civitai ",-1),s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)])],8,I9)])):ce("",!0),I.seed?(b(),E("span",D9,[U[17]||(U[17]=s("label",null," seed",-1)),je(" "+g(I.seed),1)])):ce("",!0),I.steps?(b(),E("span",O9,[U[18]||(U[18]=s("label",null," steps",-1)),je(" "+g(I.steps),1)])):ce("",!0),I.cfg?(b(),E("span",R9,[U[19]||(U[19]=s("label",null," cfg",-1)),je(" "+g(I.cfg),1)])):ce("",!0),I.sampler?(b(),E("span",N9,[U[20]||(U[20]=s("label",null," sampler",-1)),je(" "+g(I.sampler),1)])):ce("",!0),I.model?(b(),E("span",P9,[U[21]||(U[21]=s("label",null," model",-1)),je(" "+g(I.model),1)])):ce("",!0),I.positive?(b(),E("span",F9,[U[22]||(U[22]=s("label",null," positive",-1)),je(" "+g(I.positive),1)])):ce("",!0),I.negative?(b(),E("span",B9,[U[23]||(U[23]=s("label",null," negative",-1)),je(" "+g(I.negative),1)])):ce("",!0)])])]))),128))])):ce("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):ce("",!0),He(w7,{ref_key:"loraRawRef",ref:T},null,512)],64))}},[["__scopeId","data-v-3a570568"]]),U9={key:0,class:"lora-detail__loading"},V9={class:"lora-detail__body"},W9={class:"lora-detail__tags"},z9=["title"],H9=["title"],j9={class:"lora-detail__table"},G9={class:"label"},q9={colspan:"2"},K9={class:"label"},Y9={colspan:"2",class:"hash"},J9={class:"label"},X9={colspan:"2"},Q9=["href"],Z9={key:1,class:"not-found"},eS=["title"],tS={class:"label"},nS=["title"],oS={key:1,class:"text"},aS={class:"label"},lS={colspan:"2"},sS={class:"label"},rS={colspan:"2"},iS={class:"label"},uS=["title"],cS={class:"text"},dS={class:"actions"},pS=["onClick","title"],fS={class:"label"},gS=["onUpdate:modelValue"],mS={key:1},vS={class:"text"},hS={class:"actions"},_S=["onClick","title"],yS={key:0},bS={class:"label"},wS=["title"],SS={key:0,class:"word-selection"},xS={colspan:"2"},TS={class:"word-list"},kS=["onClick"],CS={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},ES={key:1},$S={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},LS={class:"image-wrapper",style:{height:"200px"}},AS=["src"],pu=yt({__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(!1),l=v({}),r=v(),i=v({}),u=e,p=v(""),c=n,d=()=>{c("cardLeave")},h=()=>{c("cardenter")},m=v({}),_=v({}),x=v([]),k=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}];ct(()=>{T()});const T=()=>{p.value=u.fileNmae,l.value={},x.value=[],_.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Ln.getLoraDetail({file:p.value,refresh:!1,light:!1}).then(ne=>{l.value=ne.data,Ke(function(){var ae,F,B,ie,Ce,le;l.value.name=l.value.name||((F=(ae=l.value.raw)===null||ae===void 0?void 0:ae.metadata)===null||F===void 0?void 0:F.ss_output_name===void 0?F["modelspec.title"]:F.ss_output_name)||"",_.value.nameValue=l.value.name,l.value.strengthMin=(B=l.value.strengthMin)!==null&&B!==void 0?B:"",_.value.minValue=l.value.strengthMin,l.value.strengthMax=(ie=l.value.strengthMax)!==null&&ie!==void 0?ie:"",_.value.maxValue=l.value.strengthMax,l.value.userNote=(Ce=l.value.userNote)!==null&&Ce!==void 0?Ce:"",_.value.notesValue=l.value.userNote,l.value.loraWorks=(le=l.value.loraWorks)!==null&&le!==void 0?le:"",_.value.loraWorksValue=l.value.loraWorks,i.value=l.value.user_diy_fileds,a.value=!1})}).catch(ne=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},D=ne=>{navigator.clipboard.writeText(ne).then(()=>{J({type:"success",str:""})}).catch(ae=>{J({type:"error",str:""})})},K=nt(()=>{var ne;return(ne=l.value.links)==null?void 0:ne.find(ae=>ae.includes("civitai.com/models"))}),S=nt(()=>{var ne,ae;return((ae=(ne=l.value.raw)==null?void 0:ne.civitai)==null?void 0:ae.error)==="Model not found"}),P=nt(()=>l.value.trainedWords||[]),j=async()=>{var ae;const ne=((ae=r.value)==null?void 0:ae.scrollTop)||0;a.value=!0,Ln.getLoraRefresh({file:p.value}).then(F=>{l.value=F.data,Ke(function(){var B,ie,Ce,le,de;l.value.name=l.value.name||((ie=(B=l.value.raw)===null||B===void 0?void 0:B.metadata)===null||ie===void 0?void 0:ie.ss_output_name===void 0?ie["modelspec.title"]:ie.ss_output_name)||"",_.value.nameValue=l.value.name,l.value.strengthMin=(Ce=l.value.strengthMin)!==null&&Ce!==void 0?Ce:"",_.value.minValue=l.value.strengthMin,l.value.strengthMax=(le=l.value.strengthMax)!==null&&le!==void 0?le:"",_.value.maxValue=l.value.strengthMax,l.value.userNote=(de=l.value.userNote)!==null&&de!==void 0?de:"",_.value.notesValue=l.value.userNote,a.value=!1}),Ke(function(){a.value=!1}),r.value&&(r.value.scrollTop=ne),J({type:"success",str:"message.dataLoaded"})}).catch(F=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},G=ne=>{ne in i.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[ne]={label:i.value[ne].label,value:_.value[ne]}):l.value[ne]=_.value[ne],Y(l.value),m.value[ne]=!1},q=ne=>{m.value[ne]=!1,_.value[ne]=l.value[ne]},Y=ne=>{var F;const ae=((F=r.value)==null?void 0:F.scrollTop)||0;a.value=!0,Ln.postLoraSave(p.value,ne).then(B=>{l.value=B.data,Ke(function(){var ie,Ce,le,de,ve;l.value.name=l.value.name||((Ce=(ie=l.value.raw)===null||ie===void 0?void 0:ie.metadata)===null||Ce===void 0?void 0:Ce.ss_output_name===void 0?Ce["modelspec.title"]:Ce.ss_output_name)||"",_.value.nameValue=l.value.name,l.value.strengthMin=(le=l.value.strengthMin)!==null&&le!==void 0?le:"",_.value.minValue=l.value.strengthMin,l.value.strengthMax=(de=l.value.strengthMax)!==null&&de!==void 0?de:"",_.value.maxValue=l.value.strengthMax,l.value.userNote=(ve=l.value.userNote)!==null&&ve!==void 0?ve:"",_.value.notesValue=l.value.userNote,a.value=!1,Ke(function(){r.value&&(r.value.scrollTop=ae)})}),J({type:"success",str:"message.saveSuccess"})}).catch(B=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},_e=ne=>{const ae=x.value.indexOf(ne);ae===-1?x.value.push(ne):x.value.splice(ae,1)},se=ne=>x.value.includes(ne),R=async()=>{x.value.length&&navigator.clipboard.writeText(x.value).then(ne=>{J({type:"success",str:"message.copySuccess"})},ne=>{J({type:"warn",str:"message.copyFailed"})})},Z=v(!0),te=()=>{Z.value=!Z.value};return t({refresh:()=>{T()}}),(ne,ae)=>{var F;return b(),E("div",{class:"lora_catd_content",style:gt(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:h,onMouseleave:d},[s("div",{class:"close-button",onClick:d,title:""},[...ae[3]||(ae[3]=[s("span",null,"",-1)])]),s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:r},[a.value?(b(),E("div",U9,[...ae[4]||(ae[4]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):ce("",!0),s("div",V9,[ae[13]||(ae[13]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",W9,[l.value.type?(b(),E("li",{key:0,class:$e(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,z9)):ce("",!0),l.value.baseModel?(b(),E("li",{key:1,class:$e(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,H9)):ce("",!0)]),s("table",j9,[s("tbody",null,[s("tr",null,[s("td",G9,g(f(o)("lora.file")),1),s("td",q9,g(l.value.file),1)]),s("tr",null,[s("td",K9,g(f(o)("lora.hash")),1),s("td",Y9,g(l.value.sha256),1)]),s("tr",null,[s("td",J9,g(f(o)("lora.civitai")),1),s("td",X9,[K.value?(b(),E(De,{key:0},[s("a",{href:K.value,target:"_blank",class:"civitai-link"},[ae[5]||(ae[5]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,Q9),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:j},g(f(o)("lora.getCivitData")),1)],64)):S.value?(b(),E("div",Z9,[s("i",null,g(f(o)("lora.modelNotFound")),1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},[...ae[6]||(ae[6]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,eS))])):(b(),E("button",{key:2,class:"fetch-btn",onClick:j},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:$e({"is-editing":m.value.name})},[s("td",tS,[je(g(f(o)("lora.name"))+" ",1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},[...ae[7]||(ae[7]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,nS))]),s("td",null,[m.value.name?me((b(),E("input",{key:0,"onUpdate:modelValue":ae[0]||(ae[0]=B=>_.value.name=B),type:"text",onKeyup:[ae[1]||(ae[1]=sn(B=>G("name"),["enter"])),ae[2]||(ae[2]=sn(B=>q("name"),["esc"]))],ref:"nameInput"},null,544)),[[Le,_.value.name]]):(b(),E("span",oS,g(l.value.name),1))])],2),s("tr",null,[s("td",aS,g(f(o)("lora.baseModel")),1),s("td",lS,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",sS,g(f(o)("lora.skipClip")),1),s("td",rS,g((ne._t=(ne._s=l.value.raw)===null||ne._s===void 0?void 0:ne._s.metadata)===null||ne._t===void 0?void 0:ne._t.ss_clip_skip),1)]),(b(),E(De,null,Ve(k,B=>s("tr",{key:B.key,class:$e({"is-editing":m.value[B.key]})},[s("td",iS,[je(g(B.label)+" ",1),B.tip?(b(),E("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:B.tip},[...ae[8]||(ae[8]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,uS)):ce("",!0)]),s("td",null,[s("span",cS,g(l.value[B.key]),1)]),s("td",dS,[s("button",{class:"copy-btn",onClick:ie=>D(l.value[B.key]),title:f(o)("lora.copy")},[ae[9]||(ae[9]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,pS)])],2)),64)),(b(!0),E(De,null,Ve(i.value,(B,ie)=>{var Ce;return b(),E("tr",{key:ie,class:$e({"is-editing":m.value[ie]})},[s("td",fS,[m.value[ie]?me((b(),E("input",{key:0,"onUpdate:modelValue":le=>B.label=le,type:"text"},null,8,gS)),[[Le,B.label]]):(b(),E("span",mS,g(B.label),1))]),s("td",null,[s("span",vS,g(l.value.user_diy_fileds?(Ce=l.value.user_diy_fileds[ie])==null?void 0:Ce.value:""),1)]),s("td",hS,[s("button",{class:"copy-btn",onClick:le=>{var de;return D((de=l.value.user_diy_fileds[ie])==null?void 0:de.value)},title:f(o)("lora.copy")},[ae[10]||(ae[10]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,_S)])],2)}),128)),P.value.length?(b(),E("tr",yS,[s("td",bS,[je(g(f(o)("lora.trainedWords"))+" ",1),(b(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},[...ae[11]||(ae[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,wS)),x.value.length?(b(),E("div",SS,[je(g(f(o)("lora.selectedWords",{count:x.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:R},g(f(o)("common.copy")),1)])):ce("",!0)]),s("td",xS,[s("ul",TS,[(b(!0),E(De,null,Ve(Z.value?P.value.slice(0,10):P.value,(B,ie)=>(b(),E("li",{key:"words-"+ie,class:$e(["word-item",{"is-selected":se(B.word),"is-hidden":Z.value&&ie>=10}]),onClick:Ce=>_e(B.word)},[s("span",null,g(B.word),1),B.civitai?(b(),E("svg",CS,[...ae[12]||(ae[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):ce("",!0),B.count!=null?(b(),E("small",ES,g(B.count),1)):ce("",!0)],10,kS))),128)),P.value.length>10?(b(),E("li",{key:0,class:"toggle-btn",onClick:te},g(Z.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):ce("",!0)])])])):ce("",!0)])]),(F=l.value.images)!=null&&F.length?(b(),E("ul",$S,[(b(!0),E(De,null,Ve(l.value.images,(B,ie)=>(b(),E("li",{key:ie,class:"lora-detail__image-item"},[s("div",LS,[s("img",{src:B.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,AS)])]))),128))])):ce("",!0)])],512)],36)}}},[["__scopeId","data-v-d4b68239"]]),MS={class:"header-actions"},IS=["title"],DS=["onMouseover","onDragstart","onDrop"],OS={class:"lora-info"},RS={class:"lora-header"},NS=["title"],PS={class:"lora-actions"},FS=["onClick","title"],BS=["onClick","title"],US={class:"lora-weights-row"},VS={class:"weight-item-col"},WS=["onUpdate:modelValue"],zS={class:"weight-item-col"},HS=["onUpdate:modelValue"],jS={class:"switch-item-col"},GS={class:"switch"},qS=["checked","onChange"],Go="weilin_prompt_ui_",KS=yt({__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(!1),l=v(""),r=v(100),i=v(0),u=v(),p=v(!1),c=v(!1),d=v(),h=e,m=n,_=(se,R)=>{if(c.value=!0,l.value===se&&a.value)return;const te=R.currentTarget.getBoundingClientRect();let ne={left:te.left-450-10,top:te.top};ne.left<10&&(ne.left=te.right+10),ne.top=Math.max(10,Math.min(ne.top,window.innerHeight-310)),r.value=ne.left,i.value=ne.top,a.value=!0,l.value=se,Ke(()=>{d.value.refresh()})},x=()=>{c.value=!1,setTimeout(()=>{!p.value&&!c.value&&(a.value=!1,l.value="",p.value=!1)},200)},k=()=>{p.value=!0,c.value=!0},T=()=>{a.value=!1,l.value="",p.value=!1},D=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},K=se=>{se.hidden=!se.hidden},S=se=>{h.selectedLoras&&!h.selectedLoras.find(R=>R.name===se.name)&&(h.selectedLoras.push({name:se.name,weight:1,text_encoder_weight:1,...se}),m("update:selectedLoras",h.selectedLoras))},P=se=>{const R=h.selectedLoras.findIndex(Z=>Z.name===se.name);R>-1&&(h.selectedLoras.splice(R,1),m("update:selectedLoras",h.selectedLoras))},j=v(),G=se=>{j.value.open({name:se.lora})};window.addEventListener("message",se=>{se.data.type==="weilin_prompt_ui_selectLora"&&S(se.data.lora)});const q=v(null),Y=se=>{q.value=se},_e=se=>{if(q.value===null||q.value===se)return;const R=h.selectedLoras.splice(q.value,1)[0];h.selectedLoras.splice(se,0,R),q.value=null,m("update:selectedLoras",h.selectedLoras)};return t({addLora:S,removeLora:P}),(se,R)=>(b(),E("div",{class:$e(`${Go}lora-stack`),style:gt([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[s("div",{class:$e(`${Go}lora-content`)},[s("div",{class:$e(`${Go}lora-header`)},[s("h3",{class:$e(`${Go}lora-title`)},g(f(o)("controls.loraStack")),3),s("div",MS,[s("button",{class:$e(`${Go}add-btn`),onClick:D,title:f(o)("controls.addLora")},[...R[2]||(R[2]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,IS),s("button",{class:$e(`${Go}close-btn`),onClick:R[0]||(R[0]=Z=>se.$emit("close"))},[...R[3]||(R[3]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)])],2),s("div",{class:$e(`${Go}lora-body`)},[s("div",{class:$e(`${Go}lora-list`)},[(b(!0),E(De,null,Ve(e.selectedLoras,(Z,te)=>(b(),E("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:u,key:Z.name,class:$e(["lora-item",{"hidden-lora":Z.hidden}]),onMouseover:z=>_(Z.lora,z),onMouseleave:x,draggable:"true",onDragstart:z=>Y(te),onDragover:R[1]||(R[1]=Ze(()=>{},["prevent"])),onDrop:z=>_e(te)},[s("div",OS,[s("div",RS,[s("span",{class:"lora-name",title:Z.name},g(Z.name),9,NS),s("div",PS,[s("button",{class:"look-on-btn",onClick:z=>G(Z),title:f(o)("controls.lookOnLora")},[...R[4]||(R[4]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,FS),s("button",{class:"remove-btn",onClick:z=>P(Z),title:f(o)("controls.removeLora")},[...R[5]||(R[5]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,BS)])]),s("div",US,[s("div",VS,[s("label",null,g(f(o)("loraManager.modelWeight")),1),me(s("input",{type:"number","onUpdate:modelValue":z=>Z.weight=z,class:"lora-weight",step:"0.1"},null,8,WS),[[Le,Z.weight]])]),s("div",zS,[s("label",null,g(f(o)("loraManager.textEncoderWeight")),1),me(s("input",{type:"number","onUpdate:modelValue":z=>Z.text_encoder_weight=z,class:"lora-weight",step:"0.1"},null,8,HS),[[Le,Z.text_encoder_weight]])]),s("div",jS,[s("label",null,g(Z.hidden?f(o)("lora.hideLora"):f(o)("lora.showLora")),1),s("label",GS,[s("input",{type:"checkbox",checked:!Z.hidden,onChange:z=>K(Z)},null,40,qS),R[6]||(R[6]=s("span",{class:"slider"},null,-1))])])])])],42,DS))),128))],2)],2)],2),He(lr,{ref_key:"loraDetailLoraStackRef",ref:j},null,512),a.value?(b(),xt(pu,{key:0,ref_key:"loraCardItem",ref:d,fileNmae:l.value,paddingLeft:r.value,paddingTop:i.value,onCardLeave:T,onCardenter:k},null,8,["fileNmae","paddingLeft","paddingTop"])):ce("",!0)],6))}},[["__scopeId","data-v-19f5b628"]]),YS={class:"main-label-manager"},JS={class:"mlm-header"},XS={class:"mlm-grid"},QS=["disabled"],ZS=["disabled"],ex=["onClick","title","onDragstart","onDragenter","onDrop"],tx={class:"mlm-item-main"},nx={key:0,class:"pin-badge"},ox={class:"mlm-name"},ax={class:"mlm-item-actions"},lx=["title","onClick"],sx=["title","onClick"],Jg="/weilin/prompt_ui/api/",rx="weilin_prompt_ui_main_labels_v1",ix=yt({__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:n}){const o=e,a=n,l=v(null),r=v(""),i=v([]),u=v(o.selectedId),p=v(!0),c=v(!0),d=v("time"),h=v(null),m=v(null);async function _(){const oe={items:i.value,settings:{sortMode:d.value,sortTimeDesc:p.value,sortNameAsc:c.value,selectedId:u.value}};try{await Pt.post(Jg+"labels/save",oe)}catch(X){console.error(":",X),alert(": "+X.message)}}async function x(){var oe;try{const M=(oe=(await Pt.get(Jg+"labels/get")).data)==null?void 0:oe.data;if(!M)throw new Error("no data");const U=Array.isArray(M)?M:(M==null?void 0:M.items)??[],H=Array.isArray(M)?{}:(M==null?void 0:M.settings)??{};i.value=U.map((I,V)=>({id:I.id??K(),name:I.name??"",content:I.content??"",createdAt:I.createdAt??I.updatedAt??Date.now(),updatedAt:I.updatedAt??I.createdAt??Date.now(),pinned:!!I.pinned,highlighted:!!I.highlighted,order:typeof I.order=="number"?I.order:V})),H.sortMode&&(d.value=H.sortMode),typeof H.sortTimeDesc=="boolean"&&(p.value=H.sortTimeDesc),typeof H.sortNameAsc=="boolean"&&(c.value=H.sortNameAsc),(typeof H.selectedId=="string"||H.selectedId===null)&&(u.value=H.selectedId)}catch(X){console.error(":",X),i.value=[]}}ct(async()=>{await x()}),et(()=>o.selectedId,oe=>{u.value=oe}),et([d,p,c],()=>{_()}),et(i,()=>{_()},{deep:!0}),et(u,oe=>{_();const X=oe?S(oe):null;a("select",X?{...X}:null)});const k=nt(()=>{const oe=r.value.trim().toLowerCase();return oe?i.value.filter(X=>(X.name||"").toLowerCase().includes(oe)):i.value}),T=nt(()=>{const oe=[...k.value];if(d.value==="manual")return oe.sort((H,I)=>{const V=H.order??0,C=I.order??0;return V!==C?V-C:(H.createdAt??0)-(I.createdAt??0)});const X=(H,I)=>{const V=H.name||"",C=I.name||"";let w=V.localeCompare(C,void 0,{numeric:!0,sensitivity:"base"});return c.value||(w=-w),w},M=(H,I)=>{let V=H.createdAt-I.createdAt;return p.value&&(V=-V),V},U=H=>H.pinned?0:1;return oe.sort((H,I)=>{const V=U(H)-U(I);if(V!==0)return V;if(d.value==="name"){const w=X(H,I);return w!==0?w:M(H,I)}const C=M(H,I);return C!==0?C:X(H,I)}),oe}),D=nt(()=>S(u.value));function K(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function S(oe){return i.value.find(X=>X.id===oe)||null}function P(oe){u.value=oe.id,a("select",{...oe})}function j(){const oe=window.prompt("","");if(!oe)return;ne(),d.value="manual";const X=K(),M=Date.now(),U=i.value.reduce((I,V)=>typeof V.order=="number"?Math.min(I,V.order):I,0),H={id:X,name:oe.trim(),content:"",createdAt:M,updatedAt:M,pinned:!1,highlighted:!1,order:U-1};i.value.push(H),_(),u.value=X,a("select",{...H})}function G(){const oe=D.value;if(!oe)return;const X=window.prompt("",oe.name||"");X&&(oe.name=X.trim(),oe.updatedAt=Date.now(),_())}function q(){const oe=D.value;if(!oe||!window.confirm(`"${oe.name}"`))return;const X=i.value.findIndex(M=>M.id===oe.id);X>=0&&i.value.splice(X,1),_(),i.value.length?(u.value=i.value[0].id,a("select",{...i.value[0]})):(u.value=null,a("select",null))}function Y(){d.value="time",p.value=!p.value}function _e(){d.value="name",c.value=!c.value}function se(oe){oe.pinned=!oe.pinned,oe.updatedAt=Date.now(),_()}function R(oe){oe.highlighted=!oe.highlighted,oe.updatedAt=Date.now(),_()}function Z(oe){const X=D.value;X&&(X.content=oe??"",X.updatedAt=Date.now(),clearTimeout(te),te=setTimeout(()=>_(),400))}let te=null;function z(oe){try{const X=new Date(oe);return`${X.getFullYear()}-${(X.getMonth()+1).toString().padStart(2,"0")}-${X.getDate().toString().padStart(2,"0")} ${X.getHours().toString().padStart(2,"0")}:${X.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function ne(){T.value.forEach((X,M)=>{X.order=M})}function ae(oe,X,M){try{M.dataTransfer.effectAllowed="move"}catch{}h.value=oe.id,m.value=null,ne(),d.value="manual"}function F(oe){h.value&&(m.value=oe.id)}function B(oe){if(!h.value)return;const X=h.value,M=oe==null?void 0:oe.id;if(!M||X===M)return ie();const U=[...T.value],H=U.findIndex(C=>C.id===X),I=U.findIndex(C=>C.id===M);if(H<0||I<0)return ie();const[V]=U.splice(H,1);U.splice(I,0,V),U.forEach((C,w)=>{C.order=w}),_(),ie()}function ie(){h.value=null,m.value=null}async function Ce(){try{const oe=localStorage.getItem(rx);if(!oe){alert("");return}const X=JSON.parse(oe),M=Array.isArray(X)?X:(X==null?void 0:X.items)??[],U=Array.isArray(X)?{}:(X==null?void 0:X.settings)??{};if(!Array.isArray(M)||M.length===0){alert("");return}if(!window.confirm(` ${M.length} 

""
`))return;const I=new Set(i.value.map(w=>w.id)),V=i.value.reduce((w,N)=>Math.max(w,typeof N.order=="number"?N.order:w),-1);let C=0;M.forEach((w,N)=>{let Q=w.id;I.has(Q)&&(Q=K()),I.add(Q),i.value.push({id:Q,name:w.name??"",content:w.content??"",createdAt:w.createdAt??w.updatedAt??Date.now(),updatedAt:w.updatedAt??w.createdAt??Date.now(),pinned:!!w.pinned,highlighted:!!w.highlighted,order:(typeof w.order=="number",V+1+N)}),C++}),!d.value&&U.sortMode&&(d.value=U.sortMode),typeof p.value>"u"&&typeof U.sortTimeDesc=="boolean"&&(p.value=U.sortTimeDesc),typeof c.value>"u"&&typeof U.sortNameAsc=="boolean"&&(c.value=U.sortNameAsc),await _(),alert(`

 ${C} 
 ${i.value.length} `)}catch(oe){console.error(":",oe),alert(": "+oe.message)}}function le(){try{const oe={items:i.value,settings:{sortMode:d.value,sortTimeDesc:p.value,sortNameAsc:c.value,selectedId:u.value},exportTime:new Date().toISOString(),version:"v1"},X=JSON.stringify(oe,null,2),M=new Blob([X],{type:"application/json"}),U=URL.createObjectURL(M),H=document.createElement("a");H.href=U;const I=new Date,V=I.getFullYear()+(I.getMonth()+1).toString().padStart(2,"0")+I.getDate().toString().padStart(2,"0"),C=I.getHours().toString().padStart(2,"0")+I.getMinutes().toString().padStart(2,"0")+I.getSeconds().toString().padStart(2,"0");H.download=`weilin_prompt_labels_${V}_${C}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(U),alert(` ${i.value.length} `)}catch(oe){console.error(":",oe),alert(": "+oe.message)}}function de(){var oe;(oe=l.value)==null||oe.click()}async function ve(oe){var U;const X=(U=oe.target.files)==null?void 0:U[0];if(!X)return;const M=new FileReader;M.onload=async H=>{var I,V;try{const C=(I=H.target)==null?void 0:I.result;if(typeof C!="string")throw new Error("");const w=JSON.parse(C);if(!w||typeof w!="object")throw new Error("JSON");const N=Array.isArray(w)?w:(w==null?void 0:w.items)??[],Q=Array.isArray(w)?{}:(w==null?void 0:w.settings)??{};if(!Array.isArray(N))throw new Error("items");const fe=window.confirm(` ${N.length} 

""
""`)?"replace":"merge";if(fe==="replace"){i.value=N.map((L,y)=>({id:L.id??K(),name:L.name??"",content:L.content??"",createdAt:L.createdAt??L.updatedAt??Date.now(),updatedAt:L.updatedAt??L.createdAt??Date.now(),pinned:!!L.pinned,highlighted:!!L.highlighted,order:typeof L.order=="number"?L.order:y})),Q.sortMode&&(d.value=Q.sortMode),typeof Q.sortTimeDesc=="boolean"&&(p.value=Q.sortTimeDesc),typeof Q.sortNameAsc=="boolean"&&(c.value=Q.sortNameAsc);const he=Q.selectedId&&i.value.find(L=>L.id===Q.selectedId)?Q.selectedId:((V=i.value[0])==null?void 0:V.id)??null;u.value=he}else{const he=new Set(i.value.map(O=>O.id)),L=i.value.reduce((O,W)=>Math.max(O,typeof W.order=="number"?W.order:O),-1);let y=0;N.forEach((O,W)=>{let we=O.id;he.has(we)&&(we=K()),he.add(we),i.value.push({id:we,name:O.name??"",content:O.content??"",createdAt:O.createdAt??O.updatedAt??Date.now(),updatedAt:O.updatedAt??O.createdAt??Date.now(),pinned:!!O.pinned,highlighted:!!O.highlighted,order:(typeof O.order=="number",L+1+W)}),y++}),alert(` ${y}  ${i.value.length} `)}await _(),fe==="replace"&&alert(` ${i.value.length} `)}catch(C){console.error(":",C),alert(": "+C.message)}finally{l.value&&(l.value.value="")}},M.onerror=()=>{alert(""),l.value&&(l.value.value="")},M.readAsText(X)}return t({updateSelectedContent:Z}),(oe,X)=>(b(),E("div",YS,[s("div",JS,[me(s("input",{"onUpdate:modelValue":X[0]||(X[0]=M=>r.value=M),class:"mlm-search",type:"text",placeholder:""},null,512),[[Le,r.value]]),s("button",{class:"mlm-add",onClick:j},"+ "),s("button",{class:"mlm-migrate",onClick:Ce,title:""},"   "),s("div",{class:"mlm-io-grid"},[s("button",{class:"mlm-export",onClick:le,title:"JSON"},""),s("button",{class:"mlm-import",onClick:de,title:"JSON"},"")]),s("input",{ref_key:"fileInput",ref:l,type:"file",accept:".json",style:{display:"none"},onChange:ve},null,544),s("div",XS,[s("button",{class:"mlm-sort",onClick:Y},"  "+g(p.value?"":""),1),s("button",{class:"mlm-sort",onClick:_e},"  "+g(c.value?"AZ":"ZA"),1),s("button",{class:"mlm-edit",disabled:!D.value,onClick:G},"",8,QS),s("button",{class:"mlm-delete",disabled:!D.value,onClick:q},"",8,ZS)])]),He(qv,{name:"mlm",tag:"div",class:"mlm-list"},{default:dt(()=>[(b(!0),E(De,null,Ve(T.value,(M,U)=>(b(),E("div",{key:M.id,class:$e(["mlm-item",{active:M.id===u.value,pinned:!!M.pinned,highlighted:!!M.highlighted},{dragging:h.value===M.id,"drag-over":m.value===M.id}]),onClick:H=>P(M),title:M.updatedAt?z(M.updatedAt):"",draggable:"true",onDragstart:H=>ae(M,U,H),onDragenter:Ze(H=>F(M),["prevent"]),onDragover:X[1]||(X[1]=Ze(()=>{},["prevent"])),onDrop:Ze(H=>B(M),["prevent"]),onDragend:ie},[s("div",tx,[M.pinned?(b(),E("span",nx,"")):ce("",!0),s("span",ox,g(M.name),1)]),s("div",ax,[s("button",{class:$e(["mini-btn","pin",{active:M.pinned}]),title:M.pinned?"":"",onClick:Ze(H=>se(M),["stop"])},[...X[2]||(X[2]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)])],10,lx),s("button",{class:$e(["mini-btn","highlight",{active:M.highlighted}]),title:M.highlighted?"":"",onClick:Ze(H=>R(M),["stop"])},[...X[3]||(X[3]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)])],10,sx)])],42,ex))),128))]),_:1})]))}},[["__scopeId","data-v-e9866347"]]),Hn={getHistory:async()=>await Ie({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await Ie({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await Ie({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await Ie({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await Ie({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await Ie({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await Ie({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await Ie({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await Ie({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},ux={class:"lora-manager-top-bar"},cx=["placeholder"],dx=["title"],px=["title"],fx={class:"checkbox-container"},gx=["onClick"],mx=["onClick"],vx={key:0,class:"loading-indicator"},hx={key:1,class:"empty-list"},_x=["onClick","onMouseover"],yx=["src","alt","title"],bx={key:0,class:"loading-more"},wx={key:1,class:"no-more-data"},zt="weilin_prompt_ui_",Xg=yt({__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:n}=_t(),o=v(!1),a=v(!1),l=v(!1),r=v(!1),i=v("all"),u=v(""),p=v(null),c=v(""),d=v(null),h=v(!1),m=v(""),_=v(100),x=v(0),k=v(),T=v(!1),D=v(!1),K=v(),S=v(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),P=v(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(S.value===null||S.value===void 0||S.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),S.value=!0),(P.value===null||P.value===void 0||P.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),P.value=!1);const j=e;et(S,y=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",y)}),et(P,y=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",y)});const G=v(1),q=v(50),Y=nt(()=>{if(i.value==="all"){const y=z.value;if(y){const O=Object.values(y);return Math.ceil(O.length/q.value)}}else{const y=z.value[u.value];if(y){const O=Object.values(y);return Math.ceil(O.length/q.value)}return 1}}),_e=()=>{T.value=!0,D.value=!0},se=(y,O)=>{if(!S.value||S.value=="false"||(D.value=!0,m.value===y&&h.value))return;const we=O.currentTarget.getBoundingClientRect(),be=window.innerHeight,ee=450;let pe={left:we.left+(we.width-ee)/2,top:we.top+we.height+10};pe.top+310>be&&(pe.top=we.top-310),pe.left=Math.max(10,Math.min(pe.left,window.innerWidth-ee-10)),pe.top=Math.max(10,Math.min(pe.top,be-310)),_.value=pe.left,x.value=pe.top,h.value=!0,m.value=y,Ke(()=>{K.value.refresh()})},R=()=>{D.value=!1,setTimeout(()=>{!T.value&&!D.value&&(h.value=!1,m.value="",T.value=!1)},200)},Z=()=>{h.value=!1,m.value="",T.value=!1},te=v([]),z=v([]),ne=v(""),ae=v(0),F=(y,O)=>{ae.value=y,ne.value=O},B=async()=>{try{const y=await Ln.getLoraFolderList();te.value=y.data}catch(y){console.error("Failed to get folder list:",y),J({type:"error",str:"message.loadFailed"})}},ie=()=>{if(!d.value||l.value||r.value)return;const y=d.value;y.scrollHeight-y.scrollTop-y.clientHeight<100&&Q()},Ce=v(!1);let le=null;const de=()=>{le&&clearTimeout(le),le=setTimeout(()=>{c.value.length>0?(Ce.value=!0,M()):(Ce.value=!1,N())},300)},ve=y=>{var O;return(O=y.local_info)!=null&&O.name&&y.local_info.name!==""&&y.local_info.name.length>0?y.local_info.name:y.name},oe=v(),X=y=>{j.loraManager==="addLora"?he(y):j.loraManager==="prompt_inner"&&P.value?L(y):oe.value.open(y)},M=async()=>{try{const y=await Ln.searchLoraGetFolderList(c.value);if(z.value=y.data,z.value.length>0){G.value=1;const O=Object.values(z.value),W=(G.value-1)*50,we=W+50,be=O.slice(W,we);V(be)}}catch(y){console.error("Failed to get folder list:",y),J({type:"error",str:"message.loadFailed"})}},U=v([]),H=y=>{if(y==="all"){U.value=[],i.value=y,u.value="/",z.value=te.value[y];const O=z.value;if(O){r.value=!1,G.value=1;const W=Object.values(O),we=(G.value-1)*50,be=we+50,ee=W.slice(we,be);V(ee)}}else{U.value=[],i.value=y,u.value="/",z.value=te.value[y];const O=z.value["/"];if(O){r.value=!1,G.value=1;const W=Object.values(O),we=(G.value-1)*50,be=we+50,ee=W.slice(we,be);V(ee)}}},I=y=>{if(y!=u.value){u.value=y,U.value=[];const O=z.value[u.value];if(O){r.value=!1,G.value=1;const W=Object.values(O),we=(G.value-1)*50,be=we+50,ee=W.slice(we,be);V(ee)}}},V=async y=>{const O=await Ln.getLoraRangeList(y);G.value===1?U.value=O.data.loras:U.value=U.value.concat(O.data.loras)},C=async()=>{if(p.value!=null){J({type:"warn",str:"message.isLoading"});return}try{J({type:"success",str:"message.isLoadingPleaseWait"}),await Ln.getAllLoraList(),p.value=setInterval(async()=>{await w()},1e3)}catch(y){console.error("Failed to get all lora list:",y),J({type:"error",str:"message.loadFailed"})}},w=async()=>{try{const y=await Ln.getAllLoraStatus();y.data.isLoading===!1?(clearInterval(p.value),p.value=null,J({type:"success",str:"message.loaddingSuccess"}),await N()):J({type:"warn",str:"message.loaddingPrc",name:y.data.progress})}catch(y){console.error("Failed to get lora status:",y),clearInterval(p.value),p.value=null,J({type:"error",str:"message.loadFailed"})}},N=async()=>{if(!o.value){o.value=!0,G.value=1,r.value=!1,l.value=!1;try{await B(),Ke(()=>{H("all")})}catch(y){console.error("Failed to refresh lora list:",y)}finally{o.value=!1}}},Q=async()=>{if(G.value>=Y.value){r.value=!0;return}l.value=!0;try{if(G.value++,Ce.value){if(z.value=res.data,z.value.length>0){const y=Object.values(z.value),O=(G.value-1)*50,W=O+50,we=y.slice(O,W);V(we)}}else if(i.value==="all"){z.value=te.value[i.value];const y=z.value;if(y){const O=Object.values(y),W=(G.value-1)*50,we=W+50,be=O.slice(W,we);V(be)}}else{const y=z.value[u.value];if(y){const O=Object.values(y),W=(G.value-1)*50,we=W+50,be=O.slice(W,we);V(be)}}}finally{l.value=!1}},fe=()=>{G.value=1,r.value=!1,l.value=!1};et([i,u,c],()=>{fe()}),ct(()=>{N()});const he=y=>{var O,W,we,be,ee,pe,Oe,Ne,ze;ae.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:y.model_name,display_name:ve(y),lora:y.name,weight:(O=y.local_info)!=null&&O.strengthMin?y.local_info.strengthMin:1,text_encoder_weight:(W=y.local_info)!=null&&W.strWeight?y.local_info.strWeight:1,loraWorks:(we=y.local_info)!=null&&we.loraWorks?y.local_info.loraWorks:""}},"*"):ae.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+ne.value,lora:{name:y.model_name,display_name:ve(y),lora:y.name,weight:(be=y.local_info)!=null&&be.strengthMin?y.local_info.strengthMin:1,text_encoder_weight:(ee=y.local_info)!=null&&ee.strWeight?y.local_info.strWeight:1,loraWorks:(pe=y.local_info)!=null&&pe.loraWorks?y.local_info.loraWorks:""}},"*"):ae.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+ne.value,lora:{name:y.model_name,display_name:ve(y),lora:y.name,weight:(Oe=y.local_info)!=null&&Oe.strengthMin?y.local_info.strengthMin:1,text_encoder_weight:(Ne=y.local_info)!=null&&Ne.strWeight?y.local_info.strWeight:1,loraWorks:(ze=y.local_info)!=null&&ze.loraWorks?y.local_info.loraWorks:""}},"*")},L=y=>{var O,W,we;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${y.model_name}:${(O=y.local_info)!=null&&O.strengthMin?y.local_info.strengthMin:1}:${(W=y.local_info)!=null&&W.strWeight?y.local_info.strWeight:1}>`,loraWorks:(we=y.local_info)!=null&&we.loraWorks?y.local_info.loraWorks:""}},"*")};return t({openSetSeed:F}),(y,O)=>(b(),E("div",{class:$e(`${zt}lora-manager`)},[s("div",ux,[me(s("input",{"onUpdate:modelValue":O[0]||(O[0]=W=>c.value=W),class:$e(`${zt}search-input`),placeholder:f(n)("loraManager.searchPlaceholder"),onInput:de},null,42,cx),[[Le,c.value]]),s("button",{class:$e(`${zt}refresh-btn`),onClick:N,title:f(n)("loraManager.refresh")},[(b(),E("svg",{class:$e([`${zt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...O[3]||(O[3]=[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)])],2))],10,dx),s("button",{style:{"margin-left":"10px"},class:$e(`${zt}refresh-btn`),onClick:C,title:f(n)("loraManager.cacheAll")},[(b(),E("svg",{class:$e([`${zt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...O[4]||(O[4]=[s("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)])],2))],10,px),s("div",fx,[s("label",{class:$e(`${zt}checkbox-label`)},[me(s("input",{type:"checkbox","onUpdate:modelValue":O[1]||(O[1]=W=>S.value=W),class:$e(`${zt}checkbox`)},null,2),[[Mt,S.value]]),O[5]||(O[5]=s("span",null,"",-1))],2),e.loraManager=="prompt_inner"?(b(),E("label",{key:0,class:$e(`${zt}checkbox-label`)},[me(s("input",{type:"checkbox","onUpdate:modelValue":O[2]||(O[2]=W=>P.value=W),class:$e(`${zt}checkbox`)},null,2),[[Mt,P.value]]),O[6]||(O[6]=s("span",null,"Tag",-1))],2)):ce("",!0)])]),Ce.value?ce("",!0):(b(),E("div",{key:0,class:$e(`${zt}category-nav`)},[(b(!0),E(De,null,Ve(Object.keys(te.value),W=>(b(),E("button",{key:W,class:$e([`${zt}category-btn`,{active:i.value===W}]),onClick:we=>H(W)},g(W==="/"?f(n)("loraManager.root"):W=="all"?f(n)("loraManager.all"):W),11,gx))),128))],2)),i.value!="all"&&!Ce.value?(b(),E("div",{key:1,class:$e(`${zt}subcategory-nav`)},[(b(!0),E(De,null,Ve(Object.keys(z.value),W=>(b(),E("button",{key:W,class:$e([`${zt}category-btn`,{active:u.value===W}]),onClick:we=>I(W)},g(W==="/"?f(n)("loraManager.root"):W=="all"?f(n)("loraManager.all"):W),11,mx))),128))],2)):ce("",!0),s("div",{class:$e(`${zt}lora-list-container`),ref_key:"scrollContainer",ref:d,onScroll:ie},[a.value&&!l.value?(b(),E("div",vx,g(f(n)("loraManager.loading")),1)):U.value.length===0?(b(),E("div",hx,g(f(n)("loraManager.noResults")),1)):ce("",!0),s("div",{class:$e(`${zt}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(b(!0),E(De,null,Ve(U.value,W=>(b(),E("div",{key:W.file_path,class:$e(`${zt}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:k,onClick:we=>X(W),onMouseover:we=>se(W.name,we),onMouseleave:R,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[s("div",{class:$e(`${zt}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[W.preview?(b(),E("img",{key:0,src:W.preview,alt:W.model_name,title:W.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,yx)):(b(),E("div",{key:1,class:$e(`${zt}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},[...O[7]||(O[7]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[s("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)])],2))],2),s("div",{class:$e(`${zt}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},g(ve(W)),3)],42,_x))),128))],2),s("div",null,[l.value?(b(),E("div",bx,g(f(n)("loraManager.loadingMore")),1)):ce("",!0),!l.value&&r.value?(b(),E("div",wx,g(f(n)("loraManager.noMoreData")),1)):ce("",!0)])],34),He(lr,{ref_key:"loraDetailRef",ref:oe},null,512),h.value?(b(),xt(pu,{key:2,ref_key:"loraCardItem",ref:K,fileNmae:m.value,paddingLeft:_.value,paddingTop:x.value,onCardLeave:Z,onCardenter:_e},null,8,["fileNmae","paddingLeft","paddingTop"])):ce("",!0)],2))}},[["__scopeId","data-v-e5643d0b"]]),Sx={class:"tag-manager"},xx={class:"selected-categories-container"},Tx={class:"selected-categories-header"},kx={class:"selected-categories-content"},Cx={key:0,class:"selected-category-section"},Ex={class:"section-title"},$x={class:"selected-items"},Lx={class:"category-name"},Ax=["onClick"],Mx={key:1,class:"selected-category-section"},Ix={class:"section-title"},Dx={class:"selected-items"},Ox={class:"category-name"},Rx={class:"subcategory-name"},Nx=["onClick"],Px={key:2,class:"no-selected"},Fx={class:"category-tabs"},Bx={class:"tabs-wrapper primary-tabs"},Ux={class:"tabs-scroll"},Vx=["onClick"],Wx={class:"tab-text"},zx=["onClick","title"],Hx={key:0,class:"tabs-wrapper group-tabs"},jx={class:"tabs-scroll"},Gx=["onClick"],qx={class:"tab-text"},Kx=["onClick","disabled","title"],Yx=yt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=n,l=v([]),r=v(null),i=v(null),u=v([]),p=v(!1),c=v([]),d=v(!1),h=v(0),m=nt(()=>c.value.filter(Z=>!Z.sub)),_=nt(()=>c.value.filter(Z=>Z.sub)),x=Z=>c.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&!te.sub),k=Z=>c.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&te.sub&&te.sub.g_uuid===Z.sub.g_uuid),T=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},D=async()=>{try{const Z=await Dt.getTagsGroupList();if(l.value=Z.info,i.value){const te=l.value.flatMap(z=>z.groups).find(z=>z.p_uuid===i.value.p_uuid);te?i.value=te:i.value=null}if(r.value){const te=l.value.find(z=>z.p_uuid===r.value.p_uuid);te?r.value=te:r.value=null}}catch(Z){console.error(":",Z)}},K=Z=>{if(!Z||Z==="transparent")return"var(--primary-text)";let te,z,ne,ae=1;if(Z.startsWith("rgba")){const B=Z.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);B&&([,te,z,ne,ae]=B.map(Number))}else if(Z.startsWith("rgb")){const B=Z.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);B&&([,te,z,ne]=B.map(Number))}return ae<.5?"var(--primary-text)":(te*299+z*587+ne*114)/1e3>128?"#000000":"#ffffff"};ct(()=>{window.addEventListener("message",se)}),Do(()=>{window.removeEventListener("message",se)});const S=Z=>{r.value=Z,i.value=null,p.value=!1,u.value=[]},P=Z=>{j(r.value)||(i.value=Z,p.value=!1,u.value=[])},j=Z=>Z?c.value.some(te=>te.group.p_uuid===Z.p_uuid&&!te.sub):!1,G=Z=>{const te=c.value.findIndex(z=>z.group.p_uuid===Z.p_uuid&&!z.sub);te!==-1?c.value.splice(te,1):(c.value=c.value.filter(z=>z.group.p_uuid!==Z.p_uuid),c.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:null}))},q=(Z,te)=>{if(j(Z))return;const z=c.value.findIndex(ne=>ne.group.p_uuid===Z.p_uuid&&ne.sub&&ne.sub.g_uuid===te.g_uuid);if(z!==-1)c.value.splice(z,1);else{const ne=c.value.findIndex(ae=>ae.group.p_uuid===Z.p_uuid&&!ae.sub);ne!==-1&&c.value.splice(ne,1),c.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:te?{g_uuid:te.g_uuid,name:te.name}:null})}},Y=Z=>{c.value.splice(Z,1)},_e=()=>{c.value=[]},se=Z=>{Z.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&D()},R=()=>{if(c.value.length===0){J({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{data:c.value,index:h.value}),d.value=!1};return t({open:(Z,te)=>{T(),h.value=Z,c.value=te,d.value=!0}}),(Z,te)=>(b(),xt(Aa,{modelValue:d.value,"onUpdate:modelValue":te[1]||(te[1]=z=>d.value=z),title:f(o)("importDialog.selectTitle")},{footer:dt(()=>[s("button",{onClick:te[0]||(te[0]=z=>d.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:R},g(f(o)("importDialog.sureSelect")),1)]),default:dt(()=>[s("div",Sx,[s("div",xx,[s("div",Tx,[s("span",null,g(f(o)("importDialog.selectedCategories")),1),c.value.length>0?(b(),E("button",{key:0,class:"clear-all-btn",onClick:_e},g(f(o)("importDialog.clearAll")),1)):ce("",!0)]),s("div",kx,[m.value.length>0?(b(),E("div",Cx,[s("div",Ex,g(f(o)("importDialog.primaryCategories")),1),s("div",$x,[(b(!0),E(De,null,Ve(m.value,(z,ne)=>(b(),E("div",{key:"primary-"+ne,class:"selected-item"},[s("span",Lx,g(z.group.name),1),s("button",{class:"remove-selected-btn",onClick:ae=>Y(x(z))},"",8,Ax)]))),128))])])):ce("",!0),_.value.length>0?(b(),E("div",Mx,[s("div",Ix,g(f(o)("importDialog.subCategories")),1),s("div",Dx,[(b(!0),E(De,null,Ve(_.value,(z,ne)=>(b(),E("div",{key:"sub-"+ne,class:"selected-item"},[s("span",Ox,g(z.group.name),1),te[2]||(te[2]=s("span",{class:"separator"},">",-1)),s("span",Rx,g(z.sub.name),1),s("button",{class:"remove-selected-btn",onClick:ae=>Y(k(z))},"",8,Nx)]))),128))])])):ce("",!0),c.value.length===0?(b(),E("div",Px,g(f(o)("importDialog.noSelectedCategories")),1)):ce("",!0)])]),s("div",Fx,[s("div",Bx,[s("div",Ux,[(b(!0),E(De,null,Ve(l.value,(z,ne)=>{var ae,F,B;return b(),E("div",{key:"Tabss-"+ne,class:$e(["tab-item",{active:((ae=r.value)==null?void 0:ae.p_uuid)===z.p_uuid}]),style:gt({backgroundColor:((F=r.value)==null?void 0:F.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((B=r.value)==null?void 0:B.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-text)":K(z.color)}),onClick:ie=>S(z)},[s("span",Wx,g(z.name),1),s("button",{class:"select-tab-btn",onClick:Ze(ie=>G(z),["stop"]),title:f(o)("importDialog.selectCategory")},[...te[3]||(te[3]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,zx)],14,Vx)}),128))])]),r.value?(b(),E("div",Hx,[s("div",jx,[(b(!0),E(De,null,Ve(r.value.groups,(z,ne)=>{var ae,F,B;return b(),E("div",{key:"TabsSw-"+ne,class:$e(["tab-item",{active:((ae=i.value)==null?void 0:ae.g_uuid)===z.g_uuid,disabled:j(r.value)}]),style:gt({backgroundColor:((F=i.value)==null?void 0:F.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((B=i.value)==null?void 0:B.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-text)":K(z.color),opacity:j(r.value)?"0.5":"1",cursor:j(r.value)?"not-allowed":"pointer"}),onClick:ie=>j(r.value)?null:P(z)},[s("span",qx,g(z.name),1),j(r.value)?ce("",!0):(b(),E("button",{key:0,class:"select-tab-btn",onClick:Ze(ie=>q(r.value,z),["stop"]),disabled:j(r.value),title:f(o)("importDialog.selectSubcategory")},[...te[4]||(te[4]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,Kx))],14,Gx)}),128))])])):ce("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-7c9863cd"]]),_n={getTemplateList:async()=>await Ie({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await Ie({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await Ie({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await Ie({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await Ie({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await Ie({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await Ie({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await Ie({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await Ie({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},Jx={class:"random-rule-container"},Xx={class:"settings-section template-section"},Qx={class:"section-header"},Zx={class:"template-controls"},eT={class:"template-select-group"},tT={class:"template-select-with-apply"},nT={value:""},oT=["value"],aT=["disabled"],lT={class:"template-bottom-buttons"},sT=["disabled"],rT=["disabled"],iT={key:0,class:"template-name-input"},uT=["placeholder"],cT={class:"template-actions"},dT={key:0},pT={class:"settings-section"},fT={class:"section-header"},gT={class:"rules-reminder"},mT={class:"rules-list"},vT={class:"rule-header"},hT=["onClick"],_T={class:"rule-content"},yT={class:"form-group"},bT={class:"range-inputs"},wT=["onUpdate:modelValue"],ST=["onUpdate:modelValue"],xT={class:"form-group"},TT=["onUpdate:modelValue"],kT={value:"category"},CT={value:"specific"},ET={key:0,class:"form-group"},$T={class:"selected-categories-container"},LT={class:"selected-categories-header"},AT={class:"selected-categories-content"},MT={key:0,class:"selected-category-section"},IT={class:"section-title"},DT={class:"selected-items"},OT={class:"category-name"},RT={key:1,class:"selected-category-section"},NT={class:"section-title"},PT={class:"selected-items"},FT={class:"category-name"},BT={class:"subcategory-name"},UT={key:2,class:"no-selected"},VT=["onClick"],WT={key:1,class:"form-group"},zT={class:"tags-input-container"},HT=["onClick"],jT=["onUpdate:modelValue","onKeydown","placeholder"],GT=["onClick"],qT={class:"actions-section"},KT=["disabled"],Qg="weilin_tools_",YT=yt({__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(!1),l=v(null),r=v(!1),i=v(""),u=v(""),p={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},d=v({});async function h(){try{i.value=="prompt_global"?await _n.getRandomTemplateApple().then(async H=>{H.data==""?d.value=c:await _n.getTemplateData(H.data).then(async I=>{z.value=H.data,d.value=I.data,r.value=!0}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(H=>{console.error(H),J({type:"warn",str:"message.networkError"})}):u.value==""?d.value=c:await _n.getTemplateData(u.value).then(async H=>{z.value=u.value,d.value=H.data,r.value=!0}).catch(H=>{console.error(":",H),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(H){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",H)}}function m(){try{const H=JSON.parse(JSON.stringify(d.value));H.rules&&H.rules.forEach(I=>{delete I.tagInput}),_n.updateTemplateData(z.value,H).then(async I=>{await _n.getTemplateData(I.path_name).then(async V=>{d.value=V.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(H){console.error("Error saving random tag settings:",H),J({type:"warn",str:"randomUtils.errorSavingSettings"})}}function _(){d.value.rules.push({range:{min:d.value.rules.length>0?d.value.rules[d.value.rules.length-1].range.max+1:1,max:d.value.rules.length>0?d.value.rules[d.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function x(H){d.value.rules.splice(H,1)}function k(H){H.tagInput&&H.tagInput.trim()&&(H.specificTags.push(H.tagInput.trim()),H.tagInput="")}function T(H,I){H.specificTags.splice(I,1)}function D(){}const S=v((()=>{try{const H=localStorage.getItem(`${Qg}randomRuleSettingState`);if(H){const I=JSON.parse(H),V={...p};return I.randomRuleSetting&&(V.randomRuleSetting={...p.randomRuleSetting,...I.randomRuleSetting}),V}}catch(H){console.error("Error loading window states:",H)}return{...p}})());et(S,H=>{try{localStorage.setItem(`${Qg}randomRuleSettingState`,JSON.stringify(H))}catch(I){console.error("Error saving window states:",I)}},{deep:!0});const P=H=>{a.value=!1},j=(H,I)=>{S.value[H]&&(S.value[H].position={...I})},G=(H,I)=>{S.value[H]&&(S.value[H].size={...I})},q=H=>{a.value=!0,i.value=H,Be.registerWindow("randomRuleSetting"),Ke(()=>{Be.setActiveWindow("randomRuleSetting"),H=="prompt_global"?B(1):M()})},Y=(H,I)=>{l.value.open(H,I)},_e=()=>void 0,se=H=>!H||!Array.isArray(H)||H.length<=0?[]:H.filter(I=>!I.sub),R=H=>!H||!Array.isArray(H)||H.length<=0?[]:H.filter(I=>I.sub),Z=H=>{H&&H.data&&Array.isArray(H.data)?d.value.rules[H.index].tagGroupList=H.data:d.value.rules[H.index].tagGroupList=[]},te=v([]),z=v(""),ne=v(""),ae=v(!1),F=v(!1);async function B(H=0){try{await _n.getTemplateList().then(I=>{te.value=I.data,H==1&&h()}).catch(I=>{console.error(I),J({type:"warn",str:"message.networkError"})})}catch(I){J({type:"warn",str:"message.networkError"}),console.error("RandomTemplate:",I)}}function ie(){ae.value=!0,ne.value=""}function Ce(){ae.value=!1,ne.value=""}function le(){if(!z.value){J.warm(o("randomUtils.pleaseChooseTemplate"));return}i.value=="prompt_global"?_n.updateRandomTemplateApple(z.value).then(H=>{J({type:"success",str:"randomUtils.templateApplied"})}).catch(H=>{console.error(":",H),J({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:z.value},"*"),J({type:"success",str:"randomUtils.templateApplied"}))}function de(){z.value&&_n.deleteTemplateData(z.value).then(()=>{J({type:"success",str:"randomUtils.templateDeleted"}),B(),z.value=""}).catch(H=>{console.error(":",H),J({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function ve(){if(!z.value)return;const H=te.value.find(I=>I.path_name===z.value);H&&(ae.value=!0,ne.value=H.file_name,F.value=!0)}function oe(){if(!ne.value.trim()){J({type:"warn",str:"randomUtils.templateNameRequired"});return}if(d.value.file_name=ne.value.trim(),F.value){const H=te.value.find(I=>I.path_name===z.value);if(H){H.file_name=ne.value.trim();const I=JSON.parse(JSON.stringify(d.value));I.rules&&I.rules.forEach(V=>{delete V.tagInput}),_n.updateTemplateData(H.path_name,I).then(async V=>{J({type:"success",str:"randomUtils.templateSaved"}),await B().then(async()=>{await _n.getTemplateData(V.path_name).then(async C=>{z.value=V.path_name,d.value=C.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(C=>{console.error(":",C),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{d.value=c,d.value.file_name=ne.value.trim();const H=JSON.parse(JSON.stringify(d.value));H.rules&&H.rules.forEach(I=>{delete I.tagInput}),_n.saveTemplateData(H).then(async I=>{await B().then(async()=>{await _n.getTemplateData(I.path_name).then(async V=>{z.value=I.path_name,d.value=V.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}ae.value=!1,ne.value="",F.value=!1}const X=async H=>{if(H.target.value!="")try{await _n.getTemplateData(H.target.value).then(async I=>{z.value=I.path_name,d.value=I.data,r.value=!0}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(I){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",I)}},M=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},U=H=>{H.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(u.value=H.data.data,B(1))};return ct(()=>{window.addEventListener("message",U)}),Rn(()=>{Be.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",U)}),t({open:q,getRandomTags:_e}),(H,I)=>(b(),E(De,null,[a.value?(b(),xt($n,{key:0,title:f(o)("randomUtils.title"),position:S.value.randomRuleSetting.position,size:S.value.randomRuleSetting.size,"z-index":f(Be).getZIndex("randomRuleSetting"),"onUpdate:position":I[2]||(I[2]=V=>j("randomRuleSetting",V)),"onUpdate:size":I[3]||(I[3]=V=>G("randomRuleSetting",V)),onActive:I[4]||(I[4]=V=>f(Be).setActiveWindow("randomRuleSetting")),onClose:I[5]||(I[5]=V=>P())},{default:dt(()=>[s("div",Jx,[s("div",Xx,[s("div",Qx,[s("h3",null,g(f(o)("randomUtils.ruleTemplates")),1)]),s("div",Zx,[s("div",eT,[s("div",tT,[me(s("select",{"onUpdate:modelValue":I[0]||(I[0]=V=>z.value=V),onChange:X,class:"form-select template-select"},[s("option",nT,g(f(o)("randomUtils.selectTemplate")),1),(b(!0),E(De,null,Ve(te.value,(V,C)=>(b(),E("option",{key:C,value:V.path_name},g(V.file_name),9,oT))),128))],544),[[Gt,z.value]]),s("button",{class:"apply-template-btn",onClick:le,disabled:!z.value},g(f(o)("randomUtils.applyTemplate")),9,aT)]),s("div",lT,[s("button",{class:"new-template-btn",onClick:ie},g(f(o)("randomUtils.newTemplate")),1),s("button",{class:"edit-template-btn",onClick:ve,disabled:!z.value},g(f(o)("randomUtils.editTemplate")),9,sT),s("button",{class:"delete-template-btn",onClick:de,disabled:!z.value},g(f(o)("randomUtils.deleteTemplate")),9,rT)])]),ae.value?(b(),E("div",iT,[me(s("input",{type:"text","onUpdate:modelValue":I[1]||(I[1]=V=>ne.value=V),class:"form-input",placeholder:f(o)("randomUtils.templateNamePlaceholder")},null,8,uT),[[Le,ne.value]]),s("div",cT,[s("button",{class:"save-template-btn",onClick:oe},g(f(o)("randomUtils.save")),1),s("button",{class:"cancel-template-btn",onClick:Ce},g(f(o)("randomUtils.cancel")),1)])])):ce("",!0)])]),z.value&&r.value?(b(),E("div",dT,[s("div",pT,[s("div",fT,[s("h3",null,g(f(o)("randomUtils.rules")),1),s("button",{class:"add-rule-btn",onClick:_},[I[6]||(I[6]=s("span",null,"+",-1)),je(" "+g(f(o)("randomUtils.addRule")),1)])]),s("div",gT,[s("p",null,g(f(o)("randomUtils.rulesReminder")),1)]),s("div",mT,[(b(!0),E(De,null,Ve(d.value.rules,(V,C)=>(b(),E("div",{key:C,class:"rule-item"},[s("div",vT,[s("h4",null,g(f(o)("randomUtils.rule"))+" #"+g(C+1),1),s("button",{class:"delete-rule-btn",onClick:w=>x(C)},"",8,hT)]),s("div",_T,[s("div",yT,[s("label",null,g(f(o)("randomUtils.range")),1),s("div",bT,[me(s("input",{type:"number","onUpdate:modelValue":w=>V.range.min=w,min:"1",class:"form-input range-input"},null,8,wT),[[Le,V.range.min,void 0,{number:!0}]]),I[7]||(I[7]=s("span",null,"-",-1)),me(s("input",{type:"number","onUpdate:modelValue":w=>V.range.max=w,min:"1",class:"form-input range-input"},null,8,ST),[[Le,V.range.max,void 0,{number:!0}]])])]),s("div",xT,[s("label",null,g(f(o)("randomUtils.tagType")),1),me(s("select",{"onUpdate:modelValue":w=>V.type=w,class:"form-select"},[s("option",kT,g(f(o)("randomUtils.category")),1),s("option",CT,g(f(o)("randomUtils.specificTags")),1)],8,TT),[[Gt,V.type]])]),V.type==="category"?(b(),E("div",ET,[s("div",$T,[s("div",LT,[s("span",null,g(f(o)("importDialog.selectedCategories")),1)]),s("div",AT,[se(V.tagGroupList).length>0?(b(),E("div",MT,[s("div",IT,g(f(o)("importDialog.primaryCategories")),1),s("div",DT,[(b(!0),E(De,null,Ve(se(V.tagGroupList),(w,N)=>(b(),E("div",{key:"primary-"+N,class:"selected-item"},[s("span",OT,g(w.group.name),1)]))),128))])])):ce("",!0),R(V.tagGroupList).length>0?(b(),E("div",RT,[s("div",NT,g(f(o)("importDialog.subCategories")),1),s("div",PT,[(b(!0),E(De,null,Ve(R(V.tagGroupList),(w,N)=>(b(),E("div",{key:"sub-"+N,class:"selected-item"},[s("span",FT,g(w.group.name),1),I[8]||(I[8]=s("span",{class:"separator"},">",-1)),s("span",BT,g(w.sub.name),1)]))),128))])])):ce("",!0),!V.tagGroupList||V.tagGroupList.length===0?(b(),E("div",UT,g(f(o)("importDialog.noSelectedCategories")),1)):ce("",!0)])]),s("button",{class:"add-tag-btn",onClick:w=>Y(C,V.tagGroupList)},g(f(o)("randomUtils.selectTagGroup")),9,VT)])):ce("",!0),V.type==="specific"?(b(),E("div",WT,[s("label",null,g(f(o)("randomUtils.specificTags")),1),s("div",zT,[(b(!0),E(De,null,Ve(V.specificTags,(w,N)=>(b(),E("div",{key:N,class:"tag-chip"},[je(g(w)+" ",1),s("button",{class:"remove-tag-btn",onClick:Q=>T(V,N)},"",8,HT)]))),128)),me(s("input",{type:"text","onUpdate:modelValue":w=>V.tagInput=w,onKeydown:sn(Ze(w=>k(V),["prevent"]),["enter"]),class:"tag-input",placeholder:f(o)("randomUtils.addTagPlaceholder")},null,40,jT),[[Le,V.tagInput]])]),s("button",{class:"add-tag-btn",onClick:w=>k(V)},g(f(o)("randomUtils.addTag")),9,GT)])):ce("",!0)])]))),128))])])])):ce("",!0)]),s("div",qT,[s("button",{class:"save-btn",onClick:m,disabled:!z.value},g(f(o)("common.save")),9,KT)])]),_:1},8,["title","position","size","z-index"])):ce("",!0),He(Yx,{ref_key:"tagGroupSelectItem",ref:l,onSureSelect:Z},null,512)],64))}},[["__scopeId","data-v-61460fd3"]]);function Na(e){let t=e.length;for(;--t>=0;)e[t]=0}const JT=3,XT=258,Zg=29,QT=256+1+Zg,e1=30,ZT=512,ek=new Array((QT+2)*2);Na(ek);const tk=new Array(e1*2);Na(tk);const nk=new Array(ZT);Na(nk);const ok=new Array(XT-JT+1);Na(ok);const ak=new Array(Zg);Na(ak);const lk=new Array(e1);Na(lk);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const fu=new Uint8Array(256);for(let e=0;e<256;e++)fu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;fu[254]=fu[254]=1;const sk={class:"tag-manager"},rk={class:"form-group"},ik={class:"select-group-item"},uk=["value","placeholder"],ck={class:"form-group"},dk=["placeholder"],pk={class:"form-group"},fk=["placeholder"],gk={class:"form-group"},mk={class:"color-picker"},vk={class:"color-controls"},hk={class:"alpha-control"},_k={class:"alpha-value"},yk=yt({__name:"favour",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(null),l=v(!1),r=v({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),i=v({group:{id_index:0,name:"",color:"",create_time:0,p_uuid:""},sub:{id_index:0,name:"",color:"",create_time:0,g_uuid:"",p_uuid:""}}),u=v({hex:"#ff7b02",alpha:40}),p=nt(()=>d(u.value.hex,u.value.alpha)),c=()=>{const k=d(u.value.hex,u.value.alpha);r.value.color=k},d=(k,T)=>{const D=parseInt(k.slice(1,3),16),K=parseInt(k.slice(3,5),16),S=parseInt(k.slice(5,7),16);return`rgba(${D}, ${K}, ${S}, ${T/100})`},h=()=>{a.value.open()},m=()=>{if(!r.value.text||!r.value.desc||!i.value.sub.id_index||!i.value.sub.g_uuid){J({type:"warn",str:"tagManager.textRequired"});return}Dt.addNewTags({id_index:i.value.sub.id_index,g_uuid:i.value.sub.g_uuid,text:r.value.text,desc:r.value.desc,color:r.value.color?r.value.color:"rgba(255, 123, 2, .4)"}).then(k=>{window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"}),_()}).catch(k=>{J({type:"warn",str:"message.networkError"})})},_=()=>{r.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},l.value=!1},x=k=>{i.value=k,r.value.id_index=k.sub.id_index};return t({open:(k,T)=>{r.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},r.value.text=k,r.value.desc=T,l.value=!0}}),(k,T)=>(b(),E(De,null,[He(Aa,{modelValue:l.value,"onUpdate:modelValue":T[5]||(T[5]=D=>l.value=D),title:f(o)("tagManager.addTag")},{footer:dt(()=>[s("button",{onClick:T[4]||(T[4]=D=>l.value=!1)},g(f(o)("common.cancel")),1),s("button",{onClick:m},g(f(o)("common.confirm")),1)]),default:dt(()=>[s("div",sk,[s("div",rk,[s("label",null,g(f(o)("importDialog.selectGroup")),1),s("div",ik,[s("input",{type:"text",value:r.value.id_index!=""?i.value.group.name+" -> "+i.value.sub.name:"",readonly:"",placeholder:f(o)("importDialog.selectGroup")},null,8,uk),s("button",{class:"add-tag-btn",style:{"margin-left":"10px","min-width":"fit-content"},onClick:h},g(f(o)("importDialog.selectGroup")),1)])]),s("div",ck,[s("label",null,g(f(o)("tagManager.text")),1),me(s("input",{type:"text","onUpdate:modelValue":T[0]||(T[0]=D=>r.value.desc=D),placeholder:f(o)("tagManager.textPlaceholder")},null,8,dk),[[Le,r.value.desc]])]),s("div",pk,[s("label",null,g(f(o)("tagManager.description")),1),me(s("textarea",{"onUpdate:modelValue":T[1]||(T[1]=D=>r.value.text=D),placeholder:f(o)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,fk),[[Le,r.value.text]])]),s("div",gk,[s("label",null,g(f(o)("tagManager.backgroundColor")),1),s("div",mk,[s("div",{class:"color-preview",style:gt({backgroundColor:p.value})},null,4),s("div",vk,[me(s("input",{type:"color","onUpdate:modelValue":T[2]||(T[2]=D=>u.value.hex=D),onInput:c,class:"color-input"},null,544),[[Le,u.value.hex]]),s("div",hk,[me(s("input",{type:"range","onUpdate:modelValue":T[3]||(T[3]=D=>u.value.alpha=D),min:"0",max:"100",onInput:c,class:"alpha-slider"},null,544),[[Le,u.value.alpha,void 0,{number:!0}]]),s("span",_k,g(u.value.alpha)+"%",1)])])])])])]),_:1},8,["modelValue","title"]),He(Uf,{ref_key:"tagGroupSelectItem",ref:a,onSureSelect:x},null,512)],64))}},[["__scopeId","data-v-08abaad1"]]),bk={class:"weilin_prompt_ui_prompt-box"},wk={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},Sk={class:"center-container"},xk={class:"action-item"},Tk=["title"],kk={class:"action-text"},Ck={class:"action-item"},Ek=["title"],$k={class:"action-text"},Lk={class:"action-item"},Ak={class:"action-text"},Mk={class:"action-item"},Ik=["title"],Dk={class:"action-text"},Ok={class:"action-item"},Rk=["title"],Nk={class:"action-text"},Pk={class:"action-item"},Fk=["title"],Bk={class:"action-text"},Uk={key:0,class:"action-item"},Vk=["title"],Wk={class:"action-text"},zk={class:"action-item"},Hk=["title"],jk={class:"action-text"},Gk={class:"action-item"},qk=["title"],Kk={class:"action-text"},Yk={class:"action-item"},Jk=["title"],Xk={class:"action-text"},Qk={class:"action-item"},Zk=["title"],eC={class:"action-text"},tC={class:"action-item"},nC=["title"],oC={class:"action-text"},aC={class:"action-item"},lC=["title"],sC={class:"action-text"},rC={class:"action-item"},iC=["title"],uC={class:"action-text"},cC={class:"action-item weilin-comfyui-toolbar-right"},dC=["disabled"],pC=["placeholder"],fC={class:"token-counter"},gC=["onClick"],mC={class:"tag"},vC={class:"desc"},hC={class:"prompt-input-translate-area"},_C={style:{display:"flex","align-items":"center"}},yC=["placeholder"],bC=["title"],wC={style:{"margin-left":"5px"},class:"action-text"},SC=["title"],xC={class:"action-text"},TC=["title"],kC={class:"action-text"},CC=["title"],EC={class:"action-text"},$C=["title"],LC={class:"action-text"},AC=["title"],MC={class:"action-text"},IC={key:0,class:"tokens-container"},DC=["draggable","onDragstart","onDragover","onDrop","onDblclick"],OC={key:0,class:"newline-token"},RC=["title"],NC=["onMouseenter","onMouseleave"],PC=["title"],FC=["title","onMouseenter","onMouseleave"],BC={style:{"margin-left":"5px"}},UC=["onMouseenter","onMouseleave"],VC=["onClick"],WC=["value","onInput","onBlur","onKeyup"],zC=["onClick","title"],HC={key:4,class:"translation-result"},jC=["onClick","title"],GC={class:"translated-text"},qC={key:0,class:"line-break"},KC={class:"tag-tips-content"},YC=["innerHTML"],JC={key:0,class:"weight-control"},XC={class:"weight-label"},QC={key:1,class:"lora-weight-controls"},ZC={class:"weight-control"},eE={class:"weight-label"},tE={class:"weight-control"},nE={class:"weight-label"},oE=["title"],aE=["title"],lE={key:2,class:"bracket-btn-group"},sE={class:"bracket-btn-container"},rE={class:"vertical-btn-group"},iE=["title"],uE=["title"],cE={class:"bracket-btn-container"},dE={class:"vertical-btn-group"},pE=["title"],fE=["title"],gE={class:"bracket-btn-container"},mE={class:"vertical-btn-group"},vE=["title"],hE=["title"],_E=["title"],yE={class:"tag-manager-section"},bE={class:"weilin-comfyui-selection-actions-content"},wE={class:"weilin-comfyui-selection-actions-count"},SE={class:"header-left"},xE={class:"section-title"},TE={class:"header-right"},kE={class:"lora-manager-container"},CE={class:"tag-manager-section"},EE={class:"header-left"},$E={class:"section-title"},LE={class:"header-right"},AE={class:"tag-manager-container"},ME="weilin_prompt_ui_",Nl="weilin-selection-box",IE=16,t1="weilin_prompt_ui_sidebar_visible",DE="weilin_prompt_ui_main_labels_v1",OE=50,RE=yt({__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=v(null),{t:o}=_t(),a=v(),l=v(),r=v({top:0,left:0}),i=v(0),u=e,p=v(null),c=v(""),d=v([]),h={},m=v(null),_=v(!1),x=v({top:"0px",left:"0px"}),k=v(!1),T=v(null),D=v(null),K=v(null),S=v([]),P=v(!1),j=v(!1),G=v([]),q=v(0),Y=v(null),_e=v(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),se=v(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),R=v(""),Z=v(!1),te=v({x:0,y:0}),z=v({x:0,y:0}),ne=v([]),ae=v(null),F=v(!1),B=v(!1),ie=v(!1),Ce=v({top:"0px",left:"0px"}),le=v(!1),de=v(!1),ve=v(0),oe=v(!1),X=v({top:"0px",left:"0px"}),M=v(localStorage.getItem("weilin_prompt_ui_show_delete_button")!=="false"),U=()=>{localStorage.setItem("weilin_prompt_ui_show_delete_button",String(M.value))},H=()=>{M.value=!M.value,U()},I=A=>{A.key==="weilin_prompt_ui_show_delete_button"&&(M.value=A.newValue!=="false")};ct(()=>{window.addEventListener("storage",I),window.addEventListener("storage",we)}),Rn(()=>{window.removeEventListener("storage",I),window.removeEventListener("storage",we)});const V=v(null),C=v(null),w=v(""),N=v(0),Q=v(!0),fe=v(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),he=v(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),L=v(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),y=v(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),O=v(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),W=v(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false");et([fe,he,L,y,O,W],([A,$,re,ye,Pe,Te])=>{localStorage.setItem("weilin_function_toggles_clearAll",String(A)),localStorage.setItem("weilin_function_toggles_deleteButton",String($)),localStorage.setItem("weilin_function_toggles_randomTag",String(re)),localStorage.setItem("weilin_function_toggles_randomTagSettings",String(ye)),localStorage.setItem("weilin_function_toggles_translateTag",String(Pe)),localStorage.setItem("weilin_function_toggles_clearDisabled",String(Te))});const we=A=>{A.key==="weilin_function_toggles_clearAll"?fe.value=A.newValue!=="false":A.key==="weilin_function_toggles_deleteButton"?he.value=A.newValue!=="false":A.key==="weilin_function_toggles_randomTag"?L.value=A.newValue!=="false":A.key==="weilin_function_toggles_randomTagSettings"?y.value=A.newValue!=="false":A.key==="weilin_function_toggles_translateTag"?O.value=A.newValue!=="false":A.key==="weilin_function_toggles_clearDisabled"&&(W.value=A.newValue!=="false")},be=()=>{Q.value=!Q.value};et(Q,A=>{localStorage.setItem(t1,String(A))}),ct(()=>{const A=localStorage.getItem(t1);Q.value=A!=="false"});const ee=()=>(N.value++,`token_${N.value}_${Date.now()}`),pe=()=>{P.value=!P.value},Oe=()=>{P.value=!1},Ne=v(null),ze=v(null),Xe=v(!1),it=`weilin_prompt_ui_last_main_label_id_${u.promptManager||"default"}`,wt=nt(()=>{const A=Q.value?280:0;return`calc(100% - ${(P.value?300:0)+A}px)`});let Ot=!1;const jn=A=>{if(!A){ze.value=null,c.value="",Ke(()=>{l.value&&(l.value.value="",To({target:l.value}))}),Xe.value=!1;return}ze.value=A.id,Ot=!0,c.value=A.content||"",Ke(()=>{l.value&&(l.value.value=c.value,To({target:l.value}))}),Xe.value=!1};et(c,A=>{if(Ot){Ot=!1;return}Xe.value=!0}),et(d,()=>{Ot||(Xe.value=!0)},{deep:!0}),et(ze,A=>{try{localStorage.setItem(it,A||"")}catch{}});function qo(){try{const A=localStorage.getItem(it);if(!A)return;const $=localStorage.getItem(DE),re=$?JSON.parse($):[],ye=Array.isArray(re)?re.find(Pe=>Pe&&Pe.id===A):null;if(!ye)return;ze.value=A,Ot=!0,c.value=ye.content||"",Ke(()=>{l.value&&(l.value.value=c.value,To({target:l.value})),Ot=!1}),Xe.value=!1}catch{}}ct(()=>{qo();const A=()=>{try{localStorage.setItem(it,ze.value||"")}catch{}};window.addEventListener("beforeunload",A),Do(()=>window.removeEventListener("beforeunload",A))});function Ht(){var A;ze.value&&(A=Ne.value)!=null&&A.updateSelectedContent&&(Ne.value.updateSelectedContent(c.value),Xe.value=!1,xo())}const Xt=v(!1);let Fn=null;function xo(){Xt.value=!0,Fn&&clearTimeout(Fn),Fn=setTimeout(()=>{Xt.value=!1},1600)}Do(()=>{Fn&&clearTimeout(Fn)});const We=()=>{T.value.open()},ke=v(1),Ee=()=>{if(m.value===null)return;let $=d.value[m.value].text;if(!hu($)){J({type:"warn",str:"message.noFinishKuo"});return}const re=Ae=>Ae.startsWith("(")&&Ae.endsWith(")")&&!Ae.slice(1,-1).includes("(")&&!Ae.slice(1,-1).includes(")")&&!Ae.slice(1,-1).includes("[")&&!Ae.slice(1,-1).includes("]")&&!Ae.slice(1,-1).includes("{")&&!Ae.slice(1,-1).includes("}")&&!Ae.slice(1,-1).includes("<")&&!Ae.slice(1,-1).includes(">");let ye=$;const Pe=/:(-?\d+(\.\d+)?)$/.test($),Te=$.match(/^\((.*?):(-?\d+(\.\d+)?)\)$/);if(Pe||Te)ke.value===1?$.startsWith("(")&&$.endsWith(")")?ye=$.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):ye=$.replace(/:(\d+(\.\d+)?)$/,""):Te?ye=`(${Te[1]}:${ke.value})`:ye=$.replace(/:(-?\d+(\.\d+)?)$/,`:${ke.value}`);else{const Ae=$.match(/^([^_]+)_(\([^)]+\))$/);if(Ae&&!$.includes("\\(")&&!$.includes("\\)")){const[,Me,at]=Ae;ke.value===1?ye=$:ye=`(${Me} ${at}:${ke.value})`}else $.includes("\\(")&&$.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test($.replace(/\\[\(\)\[\]\{\}<>]/g,""))?ke.value===1?ye=$:$.startsWith("(")&&$.endsWith(")")?ye=$.replace(/\)$/,`:${ke.value})`):ye=`(${$}:${ke.value})`:/[\(\[\{\<\)\]\}\>]/.test($)?ke.value===1&&re($)?ye=$.slice(1,-1):ke.value===1?ye=$:$.startsWith("(")&&$.endsWith(")")?ye=$.replace(/\)$/,`:${ke.value})`):ye=`(${$}:${ke.value})`:ke.value===1?ye=$:ye=`(${$}:${ke.value})`}d.value[m.value].text=ye,Mn()},St=v(.5),dn=v(.5);et(m,A=>{var $;if(A!==null&&(($=d.value[A])!=null&&$.isLoraTag)){const ye=d.value[A].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);ye&&(St.value=parseFloat(ye[2]),dn.value=parseFloat(ye[3]))}});const ur=()=>{var A;if(m.value!==null&&((A=d.value[m.value])!=null&&A.isLoraTag)){const $=d.value[m.value],re=$.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(re){const Pe=`<wlr:${re[1]}:${St.value}:${dn.value}>`;$.text=Pe,Mn()}}},Pl=A=>{if(m.value===null)return;let re=d.value[m.value].text;const ye={"(":")","[":"]","{":"}","<":">"}[A];re=`${A}${re}${ye}`,d.value[m.value].text=re,An()},Fl=A=>{if(m.value===null)return;let re=d.value[m.value].text;const ye={"(":")","[":"]","{":"}","<":">"};re.startsWith(A)&&re.endsWith(ye[A])&&(re=re.slice(1,-1),d.value[m.value].text=re,An())},hu=A=>{const $=[],re={"(":")","[":"]","{":"}","<":">"};for(let ye of A)if(re[ye])$.push(ye);else if(Object.values(re).includes(ye)&&($.length===0||re[$.pop()]!==ye))return!1;return $.length===0};$c(()=>{for(const A in h)delete h[A]}),v(!0),v(!1);const _u=A=>/[\p{L}]/u.test(A),Bl=A=>{const $=A.match(/([^:]+):[\d.]+/);return $?$[1]:A};let Ua=null;const Va=async()=>{Ua&&clearTimeout(Ua),Ua=setTimeout(async()=>{if(!l.value)return;const A=l.value,$=A.selectionStart;await Ke();const re=A.value.substring(0,$),ye=document.createElement("div");ye.style.position="absolute",ye.style.top="0",ye.style.left="0",ye.style.visibility="hidden",ye.style.whiteSpace="pre-wrap",ye.style.wordWrap="break-word",ye.style.width=window.getComputedStyle(A).width,ye.style.font=window.getComputedStyle(A).font,ye.style.padding=window.getComputedStyle(A).padding;const Pe=document.createTextNode(re),Te=document.createElement("span");Te.textContent="|",ye.appendChild(Pe),ye.appendChild(Te),A.parentNode.appendChild(ye);const Ae=Te.getBoundingClientRect(),Me=A.parentNode.getBoundingClientRect();let at=Ae.top-Me.top+Ae.height,lt=Ae.left-Me.left;if(await Ke(),a.value){const ut=a.value.offsetWidth,Qt=A.offsetWidth,bt=A.getBoundingClientRect().left-Me.left;lt+ut>bt+Qt&&(lt=bt+Qt-ut),lt<bt&&(lt=bt),lt=Math.max(0,Math.min(lt,Me.width-ut))}A.parentNode.removeChild(ye),r.value={top:at,left:lt},Ua=null},50)},cr=v(null),To=A=>{if(!(A!=null&&A.target)||!l.value)return;const $=A.target.value,re=A.target.selectionStart,ye=A.target.selectionEnd,Pe={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern://g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern://g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"["},{pattern://g,replace:"]"},{pattern://g,replace:"("},{pattern://g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"<"},{pattern://g,replace:">"}]}};let Te=$.substring(0,re),Ae=$;Object.values(Pe).forEach(tt=>{tt.enabled&&(tt.pattern?(Te=Te.replace(tt.pattern,tt.replace),Ae=Ae.replace(tt.pattern,tt.replace)):tt.patterns&&tt.patterns.forEach(({pattern:Lt,replace:kt})=>{Te=Te.replace(Lt,kt),Ae=Ae.replace(Lt,kt)}))}),c.value=Ae;const Me=Te.length,at=ye-re,lt=Me+at;Ke(()=>{l.value&&(l.value.setSelectionRange(Me,lt),l.value.focus())});const ut=Ae.substring(0,Me),Qt=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",bt=Me>0?ut[Me-1]:"";if((bt===","||bt===" ")&&Qt){j.value=!1,V.value&&clearTimeout(V.value),V.value=setTimeout(()=>{var jl;const tt=((jl=l.value)==null?void 0:jl.selectionStart)||0,kt=(c.value||"").substring(0,tt);let pn=tt;for(;pn>0&&!/[,\s]/.test(kt[pn-1]);)pn--;const Hl=kt.substring(pn,tt).trim();Hl&&_1(Hl),da()},300),i.value=Wa(c.value);return}let rt=Me;for(;rt>0&&!/[,\s]/.test(ut[rt-1]);)rt--;const Ye=ut.substring(rt,Me).trim();V.value&&clearTimeout(V.value),V.value=setTimeout(()=>{Ye&&_1(Ye),da()},300),i.value=Wa(c.value)},Wa=A=>A?A.trim().split(/\s+/).length:0,Yt=async()=>{let A=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",$=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",re=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",ye=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),A=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),$=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),re=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),ye=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),A&&(c.value=c.value.replace(//g,",")),$&&(c.value=c.value.replace(//g,".")),re&&(c.value=c.value.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),ye&&(c.value=c.value.replace(//g,"<").replace(//g,">"));const Pe=c.value;let Te=[];const Ae=d.value.map((Ge,rt)=>({token:Ge,originalIndex:rt,currentIndex:rt})).filter(({token:Ge})=>Ge.isHidden);Te=((Ge,rt=0)=>{let Ye=[],tt=rt,Lt="",kt=[];for(;tt<Ge.length;){const pn=Ge[tt];if(pn===`
`){Lt.trim()&&(Ye.push(Lt.trim()),Lt=""),Ye.push(`
`),tt++;continue}kt.length===0&&pn===","?(Lt.trim()&&Ye.push(Lt.trim()),Lt=""):Lt+=pn,tt++}return Lt.trim()&&(kt.length===0?Ye.push(...Lt.split(",").filter(Boolean).map(pn=>pn.trim())):Ye.push(Lt.trim())),Ye})(Pe);const at=new Map;d.value.forEach((Ge,rt)=>{Ge.id||(Ge.id=ee()),at.set(rt,Ge)});const lt=[];Te.forEach(Ge=>{if(Ge===`
`)lt.push({id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(Ge.trim()){const rt=Ge.trim(),Ye=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(rt);let tt=!1;for(const[Lt,kt]of at)if(kt.text===rt&&!kt.isHidden&&!lt.includes(kt)){Ye&&!kt.isLoraTag&&(kt.isLoraTag=!0),lt.push(kt),at.delete(Lt),tt=!0;break}if(!tt){for(const[Lt,kt]of at)if(kt.text===rt&&!lt.includes(kt)){Ye&&!kt.isLoraTag&&(kt.isLoraTag=!0),lt.push(kt),at.delete(Lt),tt=!0;break}}tt||lt.push({id:ee(),text:rt,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:Ye})}});const ut=new Set;Ae.forEach(({token:Ge,originalIndex:rt})=>{if(ut.has(Ge.id)||(ut.add(Ge.id),lt.some(Lt=>Lt.id===Ge.id)))return;let tt=rt;for(;tt>lt.length;)tt--;tt<0?lt.push(Ge):lt.splice(tt,0,Ge)}),d.value=lt,c.value=d.value.length>0?d.value.reduce((Ge,rt,Ye)=>{var jl,T1;if(rt.isHidden)return Ge;if(rt.text===`
`){const Eo=ja(Ye);return Eo!==-1&&d.value[Eo],Ge+rt.text}if(Ge===""){let Eo=Ye+1;for(;Eo<d.value.length&&((jl=d.value[Eo])!=null&&jl.isHidden);)Eo++;const fI=Eo>=d.value.length,k1=Eo<d.value.length?d.value[Eo]:null,gI=fI||k1&&k1.text===`
`;return rt.text+(gI?",":"")}let tt=Ye+1;for(;tt<d.value.length&&((T1=d.value[tt])!=null&&T1.isHidden);)tt++;const Lt=tt>=d.value.length,kt=tt<d.value.length?d.value[tt]:null,pn=kt&&kt.text===`
`||Lt,Hl=ja(Ye);return Hl!==-1&&d.value[Hl].text===`
`?Ge+rt.text+(pn?",":""):Ge+", "+rt.text+(pn?",":"")},""):"",C.value&&clearTimeout(C.value),C.value=setTimeout(()=>{An()},1e3),da();const Qt=50;let bt=0;for(;bt<d.value.length;){const Ge=Math.min(bt+Qt,d.value.length),rt=[];for(let Ye=bt;Ye<Ge;Ye++)if(d.value[Ye].text.length>0&&!d.value[Ye].translate){let tt=d.value[Ye].text;const Lt=Bl(tt.trim());rt.push(vn.getTranslateLocal(Lt).then(kt=>{const pn=kt;d.value[Ye].translate=pn.translated.translate,d.value[Ye].color=pn.translated.color}))}await Promise.all(rt),bt=Ge}i.value=Wa(c.value)},dr=async()=>{let $=0,re=0,ye=0;const Pe=performance.now();for(let Ae=0;Ae<d.value.length;Ae++){const Me=d.value[Ae];Me.translate&&(Me.translate===Me.text||/[a-zA-Z]/.test(Me.translate))&&!(typeof Me.text=="string"&&Me.text.startsWith("<wlr"))&&ye++}for(console.log(` ${ye} : 50`);$<d.value.length;){const Ae=Math.min($+50,d.value.length),Me=[],at=[];for(let lt=$;lt<Ae;lt++){const ut=d.value[lt];ut.translate&&(ut.translate===ut.text||/[a-zA-Z]/.test(ut.translate))&&!(typeof ut.text=="string"&&ut.text.startsWith("<wlr"))&&(Me.push(ut.text),at.push(lt))}if(Me.length>0){console.log(` ${Math.floor($/50)+1}  ${Me.length} `);const lt=Me.join(`
`);try{const ut=new Promise((bt,Ge)=>setTimeout(()=>Ge(new Error("")),3e4)),Qt=await Promise.race([vn.translaterText("",lt),ut]);if(Qt.data&&Qt.data.length>0){const bt=Qt.data.split(`
`);if(bt.length===Me.length){for(let Ge=0;Ge<at.length;Ge++){const rt=at[Ge];Ge<bt.length&&bt[Ge].trim()&&(d.value[rt].translate=bt[Ge].trim(),re++)}console.log(` ${Math.floor($/50)+1}  ${re}/${ye} `)}else throw new Error(`: ${Me.length}${bt.length}`)}else throw new Error("")}catch(ut){console.error(` ${Math.floor($/50)+1} :`,ut),console.log("...");let Qt=0;for(let bt=0;bt<at.length;bt++){const Ge=at[bt],rt=Me[bt];try{const Ye=await vn.translaterText("",rt);Ye.data&&Ye.data.length>0&&(d.value[Ge].translate=Ye.data,re++,Qt++)}catch(Ye){console.error(` (${rt}):`,Ye)}}console.log(` ${Qt} `)}}$=Ae}const Te=(performance.now()-Pe)/1e3;console.log(` ${re}/${ye} : ${Te.toFixed(2)}`)},ko=v(""),An=()=>{const A=c.value.replace(/[\s\t\n]+/g,"");if(S.value.length>0){if(A.length>0){const $=S.value.filter(Pe=>!Pe.hidden);let re={prompt:c.value,lora:"",temp_prompt:d.value,temp_lora:S.value};$.length>0&&(re.lora=$);const ye=JSON.stringify(re);ko.value!=ye&&(ko.value=ye,Hn.saveHistory({tag:ye}))}}else if(ko.value!=c.value){const $={prompt:c.value,lora:"",temp_prompt:d.value,temp_lora:""},re=JSON.stringify($);A.length>0&&Hn.saveHistory({tag:re})}da(),Ot||(Xe.value=!0)},da=()=>{if(S.value.length>0){ko.value=c.value;const A=S.value.filter(ye=>!ye.hidden);let $={prompt:c.value,lora:"",temp_prompt:d.value,temp_lora:S.value};A.length>0&&($.lora=A);const re=JSON.stringify($);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:re},"*")}else{ko.value=c.value;const A={prompt:c.value,lora:"",temp_prompt:d.value,temp_lora:""},$=JSON.stringify(A);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:$},"*")}},Ul=(A,$)=>{if(F.value)return;Co.value&&(clearTimeout(Co.value),Co.value=null);const re=$.target.getBoundingClientRect();x.value={top:`${re.top-50}px`,left:`${re.left+re.width/2}px`},m.value=A;const ye=d.value[A].text;ke.value=pr(ye),X.value={top:`${re.bottom+window.scrollY+re.height+10}px`,left:`${re.left+re.width/2}px`},d.value[A].isLoraTag||(oe.value=!0)},pr=A=>{const $=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const ye of $)if(A.startsWith(ye.open)&&A.endsWith(ye.close))return pr(A.slice(1,-1));const re=A.match(/:(\d+(\.\d+)?)$/);return re?parseFloat(re[1]):1},Co=v(null),pa=A=>{Co.value&&clearTimeout(Co.value),Co.value=setTimeout(()=>{_.value||gr(),Co.value=null},100),oe.value=!1},fr=()=>{_.value=!1,pa(m.value),setTimeout(()=>{_.value||(F.value=!1)},100)},gr=()=>{_.value||(m.value=null)},yu=()=>{if(m.value!==null){const A=m.value;Vl(A),m.value=null,_.value=!1}},bu=()=>{if(m.value!==null){const A=m.value;d.value.splice(A+1,0,{id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),Mn()}},Vl=A=>{const $=c.value;let re=d.value[A],ye=0,Pe=-1;for(let Te=0;Te<A;Te++){let Ae=$.indexOf(d.value[Te].text,ye);Ae!==-1&&(ye=Ae+d.value[Te].text.length)}if(re.text===`
`||re.text==="	"){for(let Te=ye;Te<$.length;Te++)if($[Te]===re.text){Pe=Te;break}}else Pe=$.indexOf(re.text,ye);if(Pe!==-1){const Te=re.text===`
`?" ":"",Ae=$.substring(0,Pe)+Te+$.substring(Pe+re.text.length);c.value=Ae}d.value.splice(A,1),c.value=d.value.length>0?d.value.reduce((Te,Ae,Me)=>{var Ge,rt;if(Ae.isHidden)return Te;if(Ae.text===`
`){const Ye=ja(Me);return Ye!==-1&&d.value[Ye],Te+Ae.text}if(Te===""){let Ye=Me+1;for(;Ye<d.value.length&&((Ge=d.value[Ye])!=null&&Ge.isHidden);)Ye++;const tt=Ye>=d.value.length,Lt=Ye<d.value.length?d.value[Ye]:null,kt=tt||Lt&&Lt.text===`
`;return Ae.text+(kt?",":"")}let at=Me+1;for(;at<d.value.length&&((rt=d.value[at])!=null&&rt.isHidden);)at++;const lt=at>=d.value.length,ut=at<d.value.length?d.value[at]:null,Qt=ut&&ut.text===`
`||lt,bt=ja(Me);return bt!==-1&&d.value[bt].text===`
`?Te+Ae.text+(Qt?",":""):Te+", "+Ae.text+(Qt?",":"")},""):"",An(),Xe.value=!0},wu=(A,$)=>{const re=c.value;let ye=0,Pe=-1;for(let Ae=0;Ae<A;Ae++){let Me=re.indexOf(d.value[Ae].text,ye);Me!==-1&&(ye=Me+d.value[Ae].text.length)}const Te=d.value[A].text;if(Pe=re.indexOf(Te,ye),Pe!==-1){const Ae=$.target.value,Me=re.substring(0,Pe)+Ae+re.substring(Pe+Te.length);c.value=Me,d.value[A]={...d.value[A],text:Ae},An()}},ge=A=>{d.value[A].isPunctuation||(d.value[A].isEditing=!0,setTimeout(()=>{const $=h[A];if($){$.focus();const re=$.value.length;$.setSelectionRange(re,re),ue($),$.addEventListener("input",()=>ue($)),An(),Xe.value=!0}}))},ue=A=>{const $=document.createElement("span");$.style.visibility="hidden",$.style.position="absolute",$.style.whiteSpace="pre";const re=window.getComputedStyle(A);$.style.font=re.font,$.style.fontSize=re.fontSize,$.style.fontFamily=re.fontFamily,$.style.padding=re.padding,$.style.border=re.border,$.textContent=A.value||A.placeholder||"",document.body.appendChild($);const ye=$.offsetWidth;A.style.width=`${Math.max(ye+4,20)}px`,document.body.removeChild($)},Se=A=>{d.value[A].isEditing=!1};et(d,A=>{Mn()},{deep:!0}),et(S,A=>{An(),Xe.value=!0},{deep:!0});const Qe=()=>{k.value=!k.value,k.value&&Ke(()=>{var $;const A=D.value.getBoundingClientRect();($=K.value)==null||$.setPosition(A)})},Bt=()=>{k.value=!1},Jt=A=>{var $,re;D.value&&!D.value.contains(A.target)&&K.value&&!K.value.$el.contains(A.target)&&Bt(),($=a.value)!=null&&$.contains&&((re=l.value)!=null&&re.contains)&&!a.value.contains(A.target)&&!l.value.contains(A.target)&&(j.value=!1)},ft=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},Ut=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},mr=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},kn=v(!0),Su=()=>{kn.value=!kn.value},vr=v(!1),RM=()=>{vr.value=!vr.value};v(null);const NM=()=>{const A=l.value;A&&(A.addEventListener("keyup",za),A.addEventListener("click",za),A.addEventListener("input",za))},za=()=>{j.value&&Va()},c1=()=>{if(l.value){const A=l.value.style.height||`${l.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",A)}},PM=()=>{const A=localStorage.getItem("weilinPromptTextAreaHeight");A&&l.value&&(l.value.style.height=A)};ct(()=>{document.addEventListener("click",Jt),window.addEventListener("message",m1),v1(),NM(),Ke(()=>{PM()}),setTimeout(()=>{ae.value||(ae.value=document.querySelector(".tokens-container")),ae.value?(ae.value.removeEventListener("mousedown",hr),ae.value.removeEventListener("mousemove",_r),ae.value.removeEventListener("mouseup",Ko),ae.value.removeEventListener("mouseleave",Ko),ae.value.addEventListener("mousedown",hr),ae.value.addEventListener("mousemove",_r),ae.value.addEventListener("mouseup",Ko),ae.value.addEventListener("mouseleave",Ko),ae.value.style.userSelect="none",ae.value.style.cursor="default",console.log("")):console.warn("tokens-container")},100)}),Do(()=>{ae.value&&(ae.value.removeEventListener("mousedown",hr),ae.value.removeEventListener("mousemove",_r),ae.value.removeEventListener("mouseup",Ko),ae.value.removeEventListener("mouseleave",Ko)),yr()});const hr=A=>{if(A.button===0&&!A.ctrlKey&&!A.metaKey){const $=A.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),re=ae.value;if(re&&!$){B.value=!1,Z.value=!1,le.value=!1,de.value=!1,Wl(),yr();const ye=re.getBoundingClientRect();te.value={x:Math.max(A.clientX,ye.left),y:Math.max(A.clientY,ye.top)},z.value={x:Math.max(A.clientX,ye.left),y:Math.max(A.clientY,ye.top)},B.value=!0,console.log("")}}},_r=A=>{if(B.value&&ae.value&&!Z.value&&Math.sqrt(Math.pow(A.clientX-te.value.x,2)+Math.pow(A.clientY-te.value.y,2))>3&&(A.preventDefault(),A.stopPropagation(),Z.value=!0,F.value=!0,ne.value=[],d1(),console.log("")),Z.value&&ae.value){A.preventDefault(),A.stopPropagation();const $=ae.value.getBoundingClientRect();z.value={x:Math.min(Math.max(A.clientX,$.left),$.right),y:Math.min(Math.max(A.clientY,$.top),$.bottom)};const re=5;Math.abs(z.value.x-te.value.x)<re&&(z.value.x=te.value.x+re),Math.abs(z.value.y-te.value.y)<re&&(z.value.y=te.value.y+re),(!le.value||Date.now()-ve.value>100)&&(le.value=!0,requestAnimationFrame(()=>{p1(),le.value=!1}));const ye=Date.now();!de.value&&ye-ve.value>IE&&(ve.value=ye,de.value=!0,requestAnimationFrame(()=>{FM(),de.value=!1}))}},Ko=()=>{if(B.value=!1,Z.value){const A=ne.value.length;Z.value=!1,F.value=!1,le.value=!1,de.value=!1,yr(),A>0&&BM()}},d1=()=>{try{let A=document.getElementById(Nl);A&&document.body.removeChild(A),A=document.createElement("div"),A.id=Nl,A.style.cssText=`
      position: fixed;
      background-color: rgba(66, 133, 244, 0.4);
      border: 2px dashed #4285f4;
      box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
      pointer-events: none;
      z-index: 99999;
      transition: none;
      opacity: 1;
      display: block;
    `,document.body.appendChild(A),console.log(""),p1()}catch(A){console.error(":",A),le.value=!1}},p1=()=>{try{let A=document.getElementById(Nl);if(!A&&Z.value&&(d1(),A=document.getElementById(Nl),!A))return;const $=Math.min(te.value.x,z.value.x),re=Math.min(te.value.y,z.value.y),ye=Math.abs(z.value.x-te.value.x),Pe=Math.abs(z.value.y-te.value.y),Te=5,Ae=Math.max(ye,Te),Me=Math.max(Pe,Te);A&&(A.style.left=`${$}px`,A.style.top=`${re}px`,A.style.width=`${Ae}px`,A.style.height=`${Me}px`)}catch(A){console.error(":",A),le.value=!1}},yr=()=>{try{const A=document.getElementById(Nl);A&&document.body.removeChild(A)}catch(A){console.error(":",A)}},FM=()=>{ne.value=[];const A=Math.min(te.value.x,z.value.x),$=Math.min(te.value.y,z.value.y),re=Math.max(te.value.x,z.value.x),ye=Math.max(te.value.y,z.value.y);document.querySelectorAll(".token-item-box").forEach((Te,Ae)=>{if(!Te.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const at=Te.getBoundingClientRect();at.right>=A&&at.left<=re&&at.bottom>=$&&at.top<=ye&&ne.value.push(Ae)}),f1()},f1=()=>{const A=document.querySelectorAll(".token-item-box"),$=[],re=[];A.forEach((ye,Pe)=>{ne.value.includes(Pe)?$.push(ye):re.push(ye)}),$.forEach(ye=>{ye.classList.add("token-item-box-selected")}),re.forEach(ye=>{ye.classList.remove("token-item-box-selected"),ye.style.border="",ye.style.boxShadow="",ye.style.backgroundColor=ye.dataset.originalBgColor||""})},BM=()=>{if(ne.value.length>0){const A=Math.min(te.value.x,z.value.x),$=Math.min(te.value.y,z.value.y),re=Math.max(te.value.x,z.value.x);Math.max(te.value.y,z.value.y),Ce.value={top:`${$-50}px`,left:`${(A+re)/2}px`},ie.value=!0,setTimeout(()=>{document.addEventListener("click",xu)},0)}},UM=()=>{if(ne.value.length===0)return;const re=[...ne.value].sort((ye,Pe)=>ye-Pe).map(ye=>d.value[ye].text).join(", ");navigator.clipboard.writeText(re).then(()=>{const ye=document.createElement("div");ye.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,ye.textContent="",document.body.appendChild(ye),setTimeout(()=>{document.body.removeChild(ye)},2e3)}),Wl()},VM=()=>{ne.value.length!==0&&(ne.value.forEach(A=>{d.value[A]&&!d.value[A].isHidden&&(d.value[A].isHidden=!0,d.value[A].hiddenHint=o("promptBox.hiddenHint"))}),Mn(),An(),Wl())},WM=()=>{ne.value.length!==0&&(ne.value.forEach(A=>{d.value[A]&&d.value[A].isHidden&&(d.value[A].isHidden=!1,d.value[A].hiddenHint="")}),Mn(),An(),Wl())},zM=()=>{ne.value.length>0&&(confirm(` ${ne.value.length} `)?HM():br())},Wl=()=>{ie.value=!1,document.removeEventListener("click",xu),br()},xu=A=>{const $=document.querySelector(".token-controls");$&&!$.contains(A.target)&&Wl()},HM=()=>{if(ne.value.length===0)return;[...ne.value].sort(($,re)=>re-$).forEach($=>{d.value.splice($,1)}),Mn(),An(),br()},br=()=>{document.querySelectorAll(".token-item-box-selected").forEach($=>{$.classList.remove("token-item-box-selected"),$.style.border="",$.style.boxShadow="",$.style.backgroundColor=$.dataset.originalBgColor||""}),ne.value=[],ie.value&&(ie.value=!1,document.removeEventListener("click",xu))},g1=A=>{if(ne.value.length===0)return;const $=A.target.closest(".token-item-box, .token-item, .token-controls, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box"),re=ae.value;(A.target===l.value||!$&&(!re||!re.contains(A.target)))&&br()};ct(()=>{document.addEventListener("click",g1)}),Rn(()=>{document.removeEventListener("click",Jt),document.removeEventListener("click",g1),cr.value&&clearTimeout(cr.value),window.removeEventListener("message",m1);const A=l.value;A&&(A.removeEventListener("keyup",za),A.removeEventListener("click",za),A.removeEventListener("input",za)),ae.value&&(ae.value.removeEventListener("mousedown",hr),ae.value.removeEventListener("mousemove",_r),ae.value.removeEventListener("mouseup",Ko),ae.value.removeEventListener("mouseleave",Ko)),yr()});const m1=A=>{if(A.data.type==="weilin_prompt_ui_insertTag"){const $=c.value,re=A.data.tagText;$===""?c.value=re:($.endsWith(" "),c.value=$+", "+re+","),w.value=c.value,Yt()}else if(A.data.type==="weilin_prompt_ui_user_history_tag"){const $=A.data.tagText;ko.value=$,S1($)}else if(A.data.type!=="weilin_prompt_ui_refresh_all_data"){if(A.data.type==="weilin_prompt_ui_translate_setting")v1();else if(A.data.type==="weilin_prompt_ui_selectLora"){if(A.data.lora.loraWorks!=null&&A.data.lora.loraWorks.length>0){const $=c.value,re=A.data.lora.loraWorks;$===""?c.value=re:($.endsWith(" "),c.value=$+", "+re+","),w.value=c.value,Yt()}}else if(A.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")iI(A.data.data);else if(A.data.type==="weilin_prompt_ui_addLoraTag_inner")if(A.data.lora.loraWorks!=null&&A.data.lora.loraWorks.length>0){const $=c.value,re=A.data.lora.tag+(A.data.lora.loraWorks===""?"":", "+A.data.lora.loraWorks);$===""?c.value=re:($.endsWith(" "),c.value=$+", "+re+","),w.value=c.value,Yt()}else{const $=c.value,re=A.data.lora.tag;$===""?c.value=re:($.endsWith(" "),c.value=$+", "+re+","),w.value=c.value,Yt()}}},v1=async()=>{const A=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",$=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",A),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",$),await Ke()},jM=(A,$)=>{vn.translaterText("",A).then(re=>{re.data.length>0&&($.translate=re.data)})},h1=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")!="network")if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="translater")vn.translaterInputText("",R.value).then(A=>{A.text.length>0&&(d.value.push({text:A.data,translate:R.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),R.value="",Mn())});else{let A={text:R.value,translate:""};const $=JSON.stringify(A);vn.translaterInputText($,"").then(re=>{if(re&&re.data){const ye=JSON.parse(re.data);d.value.push({text:ye.translate,translate:R.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),R.value="",Mn()}})}},GM=()=>{setTimeout(()=>{j.value||(w.value=c.value,Yt())},100)},_1=A=>{let $=A.replace(/[\[\]{}]/g,"").trim();const ye=Bl($).trim();if(!ye){j.value=!1;return}if(ye.length>20){j.value=!1;return}try{const Pe=ye.toLowerCase();Ki.getAutocomplete(String(Pe)).then(async Te=>{G.value=Te.data,await Va(),setTimeout(()=>{_e.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,se.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,j.value=G.value.length>0,q.value=0},50)})}catch(Pe){console.error("Autocomplete error:",Pe),j.value=!1}},qM=A=>{j.value&&(A.key==="ArrowDown"?(A.preventDefault(),q.value=Math.min(q.value+1,G.value.length-1),y1()):A.key==="ArrowUp"?(A.preventDefault(),q.value=Math.max(q.value-1,0),y1()):A.key==="Tab"||A.key==="Enter"?(A.preventDefault(),b1(q.value,null)):A.key==="Escape"&&(A.preventDefault(),w1()))},y1=()=>{Ke(()=>{if(Y.value&&a.value){const A=a.value,$=Y.value,re=A.getBoundingClientRect(),ye=$.getBoundingClientRect(),Pe=ye.top<re.top,Te=ye.bottom>re.bottom;Pe?A.scrollTop=A.scrollTop+(ye.top-re.top):Te&&(A.scrollTop=A.scrollTop+(ye.bottom-re.bottom))}})},KM=nt(()=>{if(!p.value)return{left:r.value.left};const A=p.value.offsetWidth;_e.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const $=_e.value;let re=r.value.left;return re+$>A&&(re=A-$),re<0&&(re=0),{left:re}}),b1=(A,$)=>{if($&&($.preventDefault(),$.stopPropagation()),!G.value[A])return;j.value=!1;const re=l.value.selectionStart,ye=l.value.selectionEnd,Pe=c.value;let Te=G.value[A].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(Te=Te.replace(//g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(Te=Te.replace(//g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(Te=Te.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(Te=Te.replace(//g,"<").replace(//g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(Te=Te.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(Te=Te.replace(/\(([^)]+)\)/g,"\\($1\\)"));let Ae=re,Me=ye;for(;Ae>0&&!/[,\s]/.test(Pe[Ae-1]);)Ae--;for(;!1;)Me++;let at=Pe.substring(0,Ae)+Te+", "+Pe.substring(Me);const lt=Ae+Te.length+2;c.value=at,w.value=at,Yt(),Ke(()=>{l.value&&(l.value.selectionStart=lt,l.value.selectionEnd=lt)})},w1=()=>{j.value=!1},S1=A=>{if(A.length>0)try{const $=JSON.parse(A);if(c.value=$.prompt,w.value=c.value,$.lora&&$.lora!=""&&(S.value=$.lora),$.temp_prompt&&$.temp_prompt!=""){const re=$.temp_prompt;let ye=!1;re.tokens&&re.tokens.length>0&&re.tokens!=""&&(d.value=re.tokens,ye=!0),re.lora&&re.lora.length>0&&re.lora!=""&&(S.value=re.lora,ye=!0),!ye&&re.length>0&&re!=""&&(d.value=re)}if($.temp_lora&&$.temp_lora.length>0&&$.temp_lora!=""){const re=$.temp_lora;S.value=re}Yt()}catch{J({type:"warn",str:"promptBox.settings.errorPrompt"})}},wr=v(!1),zl=v(null),Gn=v([]);let Ha=null,Yo=null;const YM=(A,$=!1)=>{wr.value=!0,zl.value=null,Gn.value=[],$&&ne.value.length>1&&ne.value.includes(A)?Gn.value=[...ne.value].sort((re,ye)=>re-ye):(ne.value=[],zl.value=A),Yo={originalTokens:[...d.value],draggedItems:Gn.value.length>0?Gn.value.map(re=>d.value[re]):[d.value[A]]}},JM=(A,$)=>{if(F.value){$.preventDefault();return}YM(A,!0),$.dataTransfer.effectAllowed="move"},XM=(A,$,re)=>{const ye=$.filter(Ae=>Ae<re).length;let Pe=Math.max(0,re-ye);const Te=A.length-$.length;return Pe=Math.min(Pe,Te),Pe},x1=A=>{if(!Yo)return;const $=[...Yo.originalTokens],re=Gn.value.length>0?Gn.value:[zl.value],ye=re.map(Te=>Yo.originalTokens[Te]);for(let Te=re.length-1;Te>=0;Te--){const Ae=re[Te];Ae<$.length&&$.splice(Ae,1)}const Pe=XM(Yo.originalTokens,re,A);if(Yo.draggedItems.forEach((Te,Ae)=>{$.splice(Pe+Ae,0,Te)}),d.value=$,Mn(),Gn.value.length>0&&ne.value.length>0){const Te=[];for(let Ae=0;Ae<$.length;Ae++){const Me=$[Ae];ye.some(at=>at.text===Me.text)&&Te.push(Ae)}ne.value=Te,setTimeout(()=>{f1()},0)}},QM=(A,$)=>{if(F.value){$.preventDefault();return}$.preventDefault(),wr.value&&(A<0||A>=d.value.length||Gn.value.length>0&&Gn.value.includes(A)||Gn.value.length===0&&zl.value===A||(Ha&&clearTimeout(Ha),Ha=setTimeout(()=>{x1(A)},OE)))},ZM=(A,$)=>{$.preventDefault(),Ha&&(clearTimeout(Ha),Ha=null),wr.value&&Yo&&x1(A),wr.value=!1,zl.value=null,Gn.value=[],Yo=null},Mn=()=>{c.value=d.value.length>0?d.value.reduce((A,$,re)=>{var at,lt;if($.isHidden)return A;if($.text===`
`){const ut=ja(re);return ut!==-1&&d.value[ut],A+$.text}if(A===""){let ut=re+1;for(;ut<d.value.length&&((at=d.value[ut])!=null&&at.isHidden);)ut++;const Qt=ut>=d.value.length,bt=ut<d.value.length?d.value[ut]:null,Ge=Qt||bt&&bt.text===`
`;return $.text+(Ge?",":"")}let ye=re+1;for(;ye<d.value.length&&((lt=d.value[ye])!=null&&lt.isHidden);)ye++;const Pe=ye>=d.value.length,Te=ye<d.value.length?d.value[ye]:null,Ae=Te&&Te.text===`
`||Pe,Me=ja(re);return Me!==-1&&d.value[Me].text===`
`?A+$.text+(Ae?",":""):A+", "+$.text+(Ae?",":"")},""):"",da(),Ot||(Xe.value=!0)},eI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},tI=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},nI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},oI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},aI=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},ja=A=>{for(let $=A-1;$>=0;$--)if(!d.value[$].isHidden)return $;return-1},lI=A=>{if(A>=0&&A<d.value.length){if(d.value[A].text===`
`||d.value[A].text==="	")return;d.value[A].isHidden=!d.value[A].isHidden,d.value[A].isHidden?d.value[A].hiddenHint=o("promptBox.hiddenHint"):d.value[A].hiddenHint="",Mn()}},sI=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},rI=async()=>{if(u.promptManager=="prompt_global")try{await _n.goRandomTemplate().then(A=>{A.code===200?(c.value=A.random_tags,Ke(()=>{Yt()})):J({type:"warn",str:A.info})}).catch(A=>{console.error(A),J({type:"warn",str:"message.networkError"})})}catch(A){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",A)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},iI=async A=>{try{await _n.goRandomTemplatePath(A).then($=>{$.code===200?(c.value=$.random_tags,Ke(()=>{Yt()})):J({type:"warn",str:$.info})}).catch($=>{console.error($),J({type:"warn",str:"message.networkError"})})}catch($){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",$)}},Tu=v(null),uI=A=>{Tu.value&&Tu.value.open(A.text,A.translate)},cI=()=>{n.value.open(u.promptManager)},dI=()=>{c.value="",d.value=[],R.value="",S.value=[],w.value="",Mn()},pI=()=>{const A=d.value.filter($=>!$.isHidden);d.value=A,Mn(),J({type:"success",str:o("promptBox.clearDisabledSuccess")||""})};return t({setPromptText:S1}),(A,$)=>{var re,ye,Pe;return b(),E(De,null,[s("div",bk,[He(Ts,{name:"weilin-fade"},{default:dt(()=>[Xt.value?(b(),E("div",wk,"")):ce("",!0)]),_:1}),u.promptManager==="prompt"?(b(),xt(KS,{key:0,"is-open":P.value,"selected-loras":S.value,onClose:Oe},null,8,["is-open","selected-loras"])):ce("",!0),Q.value?(b(),xt(ix,{key:1,ref_key:"mainLabelManagerRef",ref:Ne,"selected-id":ze.value,onSelect:jn},null,8,["selected-id"])):ce("",!0),s("div",{class:$e(`${ME}main-content`),style:gt({width:wt.value})},[s("div",Sk,[s("div",xk,[s("button",{class:"tag-manager-btn",onClick:be,title:Q.value?"":""},[(b(),E("svg",{class:$e(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!Q.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[...$[16]||($[16]=[s("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)])],2)),s("span",kk,g(Q.value?"":""),1)],8,Tk)]),s("div",Ck,[s("button",{class:"language-switch-btn",onClick:Ze(Qe,["stop"]),ref_key:"langBtnRef",ref:D,title:f(o)("controls.language")},[$[17]||($[17]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[s("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),s("span",$k,g(f(o)("controls.language")),1)],8,Ek),He(Ts,{name:"fade"},{default:dt(()=>[k.value?(b(),xt(K0,{key:0,ref_key:"languageSwitcherRef",ref:K,onClose:Bt},null,512)):ce("",!0)]),_:1})]),s("div",Lk,[He($b,{title:f(o)("controls.switchTheme")},{default:dt(({isDark:Te})=>[s("span",Ak,g(f(o)(Te?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),s("div",Mk,[s("button",{class:"settings-btn",onClick:We,title:f(o)("controls.settings")},[$[18]||($[18]=s("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),s("span",Dk,g(f(o)("controls.settings")),1)],8,Ik)]),s("div",Ok,[s("button",{class:"tag-manager-btn",onClick:ft,title:f(o)("controls.tagManager")},[$[19]||($[19]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",Nk,g(f(o)("controls.tagManager")),1)],8,Rk)]),s("div",Pk,[s("button",{class:"tag-manager-btn",onClick:oI,title:f(o)("controls.danbooruManager")},[$[20]||($[20]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",Bk,g(f(o)("controls.danbooruManager")),1)],8,Fk)]),u.hasPromptLoraStack?(b(),E("div",Uk,[s("button",{class:"tag-manager-btn",onClick:pe,title:f(o)("controls.loraStack")},[$[21]||($[21]=s("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),s("span",Wk,g(f(o)("controls.loraStack")),1)],8,Vk)])):ce("",!0),s("div",zk,[s("button",{class:"tag-manager-btn",onClick:Ut,title:f(o)("controls.loraManager")},[$[22]||($[22]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",jk,g(f(o)("controls.loraManager")),1)],8,Hk)]),s("div",Gk,[s("button",{class:"tag-manager-btn",onClick:mr,title:f(o)("controls.history")},[$[23]||($[23]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),s("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),s("span",Kk,g(f(o)("controls.history")),1)],8,qk)]),s("div",Yk,[s("button",{class:"tag-manager-btn",onClick:eI,title:f(o)("controls.aiChat")},[$[24]||($[24]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),s("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),s("span",Xk,g(f(o)("controls.aiChat")),1)],8,Jk)]),s("div",Qk,[s("button",{class:"tag-manager-btn",onClick:tI,title:f(o)("controls.github")},[$[25]||($[25]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),s("span",eC,g(f(o)("controls.github")),1)],8,Zk)]),s("div",tC,[s("button",{class:"tag-manager-btn",onClick:nI,title:f(o)("controls.shareCloudData")},[$[26]||($[26]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),s("span",oC,g(f(o)("controls.shareCloudData")),1)],8,nC)]),s("div",aC,[s("button",{class:"tag-manager-btn",onClick:sI,title:f(o)("controls.tutorialVideo")},[$[27]||($[27]=s("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[s("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),s("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),s("span",sC,g(f(o)("controls.tutorialVideo")),1)],8,lC)]),s("div",rC,[s("button",{class:"tag-manager-btn",onClick:aI,title:f(o)("controls.sponsor")},[$[28]||($[28]=s("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[s("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),s("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),s("span",uC,g(f(o)("controls.sponsor")),1)],8,iC)]),He(Ff,{ref_key:"settingDialog",ref:T},null,512),s("div",cC,[s("button",{class:$e(["update-label-btn",{"is-dirty":Xe.value}]),disabled:!ze.value||!Xe.value,onClick:Ht},"  ",10,dC)])]),s("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:p},[me(s("textarea",{"onUpdate:modelValue":$[0]||($[0]=Te=>c.value=Te),class:"input-area",onInput:To,placeholder:f(o)("promptBox.placeholder"),onKeydown:qM,onBlur:GM,rows:"6",ref_key:"inputAreaRef",ref:l,onMouseup:c1,onResize:c1},null,40,pC),[[Le,c.value]]),s("div",fC,g(i.value)+" tokens ",1),s("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:a,style:gt({top:`${r.value.top}px`,left:`${KM.value.left}px`,display:j.value?"block":"none",width:`${_e.value}px`,maxHeight:`${se.value}px`})},[s("button",{class:"close-autocomplete-btn",onClick:Ze(w1,["stop"])},""),(b(!0),E(De,null,Ve(G.value,(Te,Ae)=>(b(),E("div",{key:Ae,class:$e(["autocomplete-item",{selected:Ae===q.value}]),onClick:Ze(Me=>b1(Ae,Me),["stop"]),ref_for:!0,ref:Me=>{Me&&Ae===q.value&&(Y.value=Me)}},[s("span",mC,g(Te.text),1),s("span",vC,g(Te.desc),1)],10,gC))),128))],4)],512),s("div",hC,[s("div",_C,[me(s("input",{type:"text","onUpdate:modelValue":$[1]||($[1]=Te=>R.value=Te),class:"prompt-input-translate-area-textarea",onKeyup:$[2]||($[2]=sn(Te=>h1(),["enter"])),placeholder:f(o)("promptBox.translatePlaceholder")},null,40,yC),[[Le,R.value]]),s("button",{class:"translate-btn",style:{"margin-left":"8px"},onClick:$[3]||($[3]=Te=>h1())},"  ")]),O.value?(b(),E("button",{key:0,class:"translate-btn random-tag-settings-btn",onClick:dr,title:f(o)("promptBox.oneClickTranslate")},[$[29]||($[29]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),s("span",wC,g(f(o)("promptBox.oneClickTranslate")),1)],8,bC)):ce("",!0),y.value?(b(),E("button",{key:1,class:"translate-btn random-tag-settings-btn",onClick:cI,title:f(o)("promptBox.randomTagSettings")},[$[30]||($[30]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),s("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),s("span",xC,g(f(o)("promptBox.randomTagSettings")),1)],8,SC)):ce("",!0),L.value?(b(),E("button",{key:2,class:"translate-btn random-tag-btn",onClick:rI,title:f(o)("promptBox.oneClickRandomTag")},[$[31]||($[31]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),s("span",kC,g(f(o)("promptBox.oneClickRandomTag")),1)],8,TC)):ce("",!0),he.value?(b(),E("button",{key:3,class:$e(["translate-btn toggle-delete-btn",{active:M.value}]),onClick:H,title:M.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")},[$[32]||($[32]=s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})],-1)),s("span",EC,g(M.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")),1)],10,CC)):ce("",!0),fe.value?(b(),E("button",{key:4,class:"translate-btn clear-all-btn",onClick:dI,title:f(o)("promptBox.oneClickCleanAll")},[$[33]||($[33]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",LC,g(f(o)("promptBox.oneClickCleanAll")),1)],8,$C)):ce("",!0),W.value?(b(),E("button",{key:5,class:"translate-btn clear-disabled-btn",onClick:pI,title:f(o)("promptBox.oneClickClearDisabled")},[$[34]||($[34]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",MC,g(f(o)("promptBox.oneClickClearDisabled")),1)],8,AC)):ce("",!0)]),d.value.length>0?(b(),E("div",IC,[(b(!0),E(De,null,Ve(d.value,(Te,Ae)=>(b(),E(De,{key:"tag-item-"+Ae},[s("div",{class:$e(["token-item-box",{"token-item-box-disabled":Te.isHidden}]),draggable:!Te.isEditing,onDragstart:Me=>JM(Ae,Me),onDragover:Ze(Me=>QM(Ae,Me),["prevent"]),onDrop:Me=>ZM(Ae,Me),onDblclick:Me=>lI(Ae),style:gt({backgroundColor:Te.color})},[Te.text===`
`?(b(),E("div",OC,[s("span",{class:"token-symbol",title:f(o)("promptBox.newline")},"",8,RC)])):Te.text==="	"?(b(),E("div",{key:1,class:"token-item tab-token",onMouseenter:Me=>Ul(Ae,Me),onMouseleave:Me=>pa()},[s("span",{class:"token-symbol",title:f(o)("promptBox.tab")},"",8,PC)],40,NC)):Te.isLoraTag?(b(),E("div",{key:2,class:"lora-tag-icon",title:f(o)("promptBox.loraTag"),onMouseenter:Me=>Ul(Ae,Me),onMouseleave:Me=>pa()},[$[35]||($[35]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[s("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),s("span",BC,g(Te.text),1)],40,FC)):Te.text&&!Te.isLoraTag?(b(),E("div",{key:3,class:$e(["token-item",{punctuation:Te.isPunctuation}]),onMouseenter:Me=>Ul(Ae,Me),onMouseleave:Me=>pa()},[!Te.isEditing||Te.isPunctuation?(b(),E("span",{key:0,onClick:Me=>!Te.isPunctuation&&ge(Ae)},g(Te.text),9,VC)):Te.isPunctuation?ce("",!0):(b(),E("input",{key:1,value:Te.text,onInput:Me=>wu(Ae,Me),onBlur:Me=>Se(Ae),onKeyup:sn(Me=>Se(Ae),["enter"]),ref_for:!0,ref:Me=>{Me&&(h[Ae]=Me)}},null,40,WC)),M.value?(b(),E("button",{key:2,class:"quick-delete-btn",onClick:Ze(Me=>Vl(Ae),["stop"]),title:f(o)("promptBox.delete"),style:{"margin-left":"4px"}},[...$[36]||($[36]=[s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#ff4d4f70"})],-1)])],8,zC)):ce("",!0)],42,UC)):ce("",!0),Te.text!==`
`&&Te.text!=="	"&&!Te.isLoraTag?(b(),E("div",HC,[_u(Te.text)?(b(),E("div",{key:0,onClick:Me=>jM(Te.text,Te),class:"translate-button",title:f(o)("promptBox.translate")},[...$[37]||($[37]=[s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)])],8,jC)):ce("",!0),s("span",GC,g(Te.translate?Te.translate:""),1)])):ce("",!0)],46,DC),Te.text===`
`?(b(),E("div",qC)):ce("",!0)],64))),128))])):ce("",!0),oe.value?(b(),E("div",{key:1,class:"tag-tips-box",style:gt(X.value)},[s("div",KC,[s("p",{innerHTML:f(o)("promptBox.tagTips")},null,8,YC)])],4)):ce("",!0),me(s("div",{class:"token-controls",style:gt(x.value),onMouseenter:$[14]||($[14]=Te=>_.value=!0),onMouseleave:fr},[(re=d.value[m.value])!=null&&re.isLoraTag?ce("",!0):(b(),E("div",JC,[me(s("input",{type:"number","onUpdate:modelValue":$[4]||($[4]=Te=>ke.value=Te),step:"0.1",class:"weight-input",onChange:Ee},null,544),[[Le,ke.value]]),s("span",XC,g(f(o)("promptBox.weight")),1)])),(ye=d.value[m.value])!=null&&ye.isLoraTag?(b(),E("div",QC,[s("div",ZC,[me(s("input",{type:"number","onUpdate:modelValue":$[5]||($[5]=Te=>St.value=Te),step:"0.1",class:"weight-input",onChange:ur},null,544),[[Le,St.value]]),s("span",eE,g(f(o)("promptBox.modelWeight")),1)]),s("div",tE,[me(s("input",{type:"number","onUpdate:modelValue":$[6]||($[6]=Te=>dn.value=Te),step:"0.1",class:"weight-input",onChange:ur},null,544),[[Le,dn.value]]),s("span",nE,g(f(o)("promptBox.textWeight")),1)])])):ce("",!0),s("button",{class:"favour-btn",onClick:$[7]||($[7]=Te=>uI(d.value[m.value])),title:f(o)("promptBox.favour")},[...$[38]||($[38]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:"#FFD700"})],-1)])],8,oE),s("button",{onClick:yu,class:"delete-btn",title:f(o)("promptBox.delete")},[...$[39]||($[39]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,aE),(Pe=d.value[m.value])!=null&&Pe.isLoraTag?ce("",!0):(b(),E("div",lE,[s("div",sE,[$[40]||($[40]=s("div",{class:"bracket-btn"}," () ",-1)),s("div",rE,[s("button",{class:"vertical-btn",onClick:$[8]||($[8]=Te=>Pl("(")),title:f(o)("promptBox.addBracket")}," + ",8,iE),s("button",{class:"vertical-btn",onClick:$[9]||($[9]=Te=>Fl("(")),title:f(o)("promptBox.removeLayer")}," - ",8,uE)])]),s("div",cE,[$[41]||($[41]=s("div",{class:"bracket-btn"}," [] ",-1)),s("div",dE,[s("button",{class:"vertical-btn",onClick:$[10]||($[10]=Te=>Pl("[")),title:f(o)("promptBox.addBracket")}," + ",8,pE),s("button",{class:"vertical-btn",onClick:$[11]||($[11]=Te=>Fl("[")),title:f(o)("promptBox.removeLayer")}," - ",8,fE)])]),s("div",gE,[$[42]||($[42]=s("div",{class:"bracket-btn"}," {} ",-1)),s("div",mE,[s("button",{class:"vertical-btn",onClick:$[12]||($[12]=Te=>Pl("{")),title:f(o)("promptBox.addBracket")}," + ",8,vE),s("button",{class:"vertical-btn",onClick:$[13]||($[13]=Te=>Fl("{")),title:f(o)("promptBox.removeLayer")}," - ",8,hE)])])])),s("button",{class:"line-token-btn",onClick:bu,title:f(o)("promptBox.addLineToken"),style:{"margin-left":"8px"}},[...$[43]||($[43]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M5 19h14v-2H5v2zm0-7h14v-2H5v2zm0-7v2h14V5H5z",fill:"#888"}),s("path",{d:"M7 17v-2h2v2H7zm0-7V8h2v2H7zm0-7V3h2v2H7z",fill:"#4285f4"})],-1)])],8,_E)],36),[[gl,m.value!==null&&d.value[m.value]]]),s("div",yE,[me(s("div",{class:"token-controls",style:gt(Ce.value),onMouseenter:$[15]||($[15]=Te=>_.value=!0),onMouseleave:fr},[s("div",bE,[s("div",wE," "+g(ne.value.length)+" ",1),s("div",{class:"weilin-comfyui-selection-actions-buttons"},[s("button",{class:"delete-btn copy-btn",onClick:UM,title:""},[...$[44]||($[44]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])]),s("button",{class:"delete-btn",onClick:VM,title:""},[...$[45]||($[45]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),s("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])]),s("button",{class:"delete-btn enable-btn",onClick:WM,title:""},[...$[46]||($[46]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])]),s("button",{class:"delete-btn",onClick:zM,title:""},[...$[47]||($[47]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])])])])],36),[[gl,ie.value]]),s("div",{class:"tag-manager-header",onClick:RM},[s("div",SE,[$[48]||($[48]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",xE,g(f(o)("controls.loraManager")),1)]),s("div",TE,[(b(),E("svg",{class:$e(["collapse-icon",{"is-collapsed":!vr.value}]),viewBox:"0 0 24 24"},[...$[49]||($[49]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),me(s("div",kE,[He(Xg,{loraManager:"prompt_inner"})],512),[[gl,vr.value]])]),s("div",CE,[s("div",{class:"tag-manager-header",onClick:Su},[s("div",EE,[$[50]||($[50]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",$E,g(f(o)("controls.tagManager")),1)]),s("div",LE,[(b(),E("svg",{class:$e(["collapse-icon",{"is-collapsed":!kn.value}]),viewBox:"0 0 24 24"},[...$[51]||($[51]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),me(s("div",AE,[He(Hg)],512),[[gl,kn.value]])])],6)]),He(YT,{ref_key:"randomSettingItem",ref:n},null,512),He(yk,{ref_key:"favourItemRef",ref:Tu},null,512)],64)}}},[["__scopeId","data-v-d9ce5a60"]]),NE={class:"container"},PE={class:"tab-container"},FE={key:0},BE={class:"search-container"},UE=["placeholder"],VE=["title"],WE=["title","disabled"],zE=["title"],HE={class:"history-list"},jE={class:"action-buttons"},GE=["onClick","title"],qE=["onClick","title"],KE=["onClick","title"],YE=["value"],JE={key:1},XE={class:"search-container"},QE=["placeholder"],ZE=["title"],e$=["title"],t$=["title","disabled"],n$=["title"],o$={class:"history-list"},a$={key:0,class:"favor-name"},l$={class:"action-buttons"},s$=["onClick","title"],r$=["onClick","title"],i$=["onClick","title"],u$=["value"],c$={key:2,class:"weilin-tools-dialog-overlay"},d$={class:"weilin-tools-dialog-header"},p$={class:"weilin-tools-dialog-body"},f$={class:"form-group"},g$=["placeholder"],m$={class:"form-group"},v$=["placeholder"],h$={class:"form-group"},_$={class:"color-picker"},y$={class:"color-controls"},b$={class:"alpha-control"},w$={class:"alpha-value"},S$={class:"weilin-tools-dialog-footer"},x$={key:3,class:"weilin-tools-dialog-overlay"},T$={class:"weilin-tools-dialog-header"},k$={class:"weilin-tools-dialog-body"},C$={class:"confirm-message"},E$={class:"weilin-tools-dialog-footer"},$$=yt({__name:"history_index",setup(e){const{t}=_t(),n=v(""),o=v([]),a=v([]),l=v([]),r=v([]),i=v("history"),u=v([]),p=v(!1),c=v(!1),d=v(!1),h=v({hex:"rgba(255, 123, 2, .4)",alpha:100}),m=v({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),_=v(!1),x=v(0),k=I=>JSON.parse(I).prompt,T=I=>({hex:"#FFFFFF",alpha:0}),D=I=>{const{hex:V,alpha:C}=T();h.value={hex:V,alpha:C}},K=()=>{d.value=!1,m.value={id:"",name:"",tag:"",backgroundColor:"transparent"},D(),p.value=!0},S=I=>{const V=I.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(V){const[,C,w,N,Q]=V,fe=`#${((1<<24)+(parseInt(C)<<16)+(parseInt(w)<<8)+parseInt(N)).toString(16).slice(1)}`,he=Q?Math.round(parseFloat(Q)*100):100;return{hex:fe,alpha:he}}return{hex:"#FF7B02",alpha:50}},P=I=>{d.value=!0,m.value={...I},h.value=S(I.color),p.value=!0},j=()=>{const I=ae(h.value.hex,h.value.alpha);m.value.color=I},G=()=>{p.value=!1,m.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},d.value=!1},q=v(""),Y=v(null),_e=nt(()=>{if(!Y.value)return"";switch(q.value){case"history":return t("history.deleteHistoryConfirm",{name:Y.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:Y.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),se=I=>{q.value="history",Y.value=I,c.value=!0},R=I=>{q.value="favorite",Y.value=I,c.value=!0},Z=()=>{_.value=!1,x.value=0,q.value="deleteSelected",Y.value=u.value,c.value=!0},te=()=>{_.value=!1,x.value=0,q.value="deleteSelectedFavorite",Y.value=u.value,c.value=!0},z=async()=>{try{switch(q.value){case"history":Hn.deleteHistory(Y.value.id_index).then(I=>{ie(),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"favorite":Hn.deleteFavorite(Y.value.id_index).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Hn.batchDeleteHistory(u.value).then(I=>{ie(),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":Hn.batchDeleteFavorite(Y.value).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break}F()}catch{J({type:"warn",str:"message.networkError"})}},ne=I=>{I.target.checked?i.value==="history"?u.value=o.value.map(V=>V.id_index):u.value=l.value.map(V=>V.id_index):u.value=[]},ae=(I,V)=>{const C=parseInt(I.slice(1,3),16),w=parseInt(I.slice(3,5),16),N=parseInt(I.slice(5,7),16);return`rgba(${C}, ${w}, ${N}, ${V/100})`},F=()=>{c.value=!1,q.value="",Y.value=null},B=()=>{if(!m.value.tag){J({type:"warn",str:"history.dialog.tag_placeholder"});return}d.value?Hn.editFavorite({id_index:m.value.id_index,name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.editSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})}):Hn.addFavorite({name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})}),G()},ie=()=>{Hn.getHistory({}).then(I=>{o.value=I.data,a.value=o.value}).catch(I=>{J({type:"warn",str:"message.networkError"})})},Ce=()=>{Hn.getFavorite().then(I=>{l.value=I.data,r.value=l.value}).catch(I=>{J({type:"warn",str:"message.networkError"})})},le=()=>{a.value=o.value.filter(I=>I.tag.includes(n.value))},de=()=>{r.value=l.value.filter(I=>I.tag.includes(n.value))},ve=()=>{ie()},oe=()=>{Ce()},X=I=>{Hn.addFavorite({tag:I.tag}).then(V=>{V.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Ce(),J({type:"success",str:"message.addFavoriteSuccess"})):J({type:"success",str:"message.addFavoriteIsExist"})}).catch(V=>{J({type:"warn",str:"message.networkError"})})},M=I=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:I.tag},"*")},U=()=>{u.value=[],_.value=!0},H=()=>{u.value=[],_.value=!1,x.value=0};return ct(()=>{ie(),Ce()}),(I,V)=>(b(),E("div",NE,[s("h1",null,g(i.value==="history"?f(t)("history.title"):f(t)("history.favorites")),1),s("div",PE,[s("button",{class:$e([{active:i.value==="history"},"tab-button"]),onClick:V[0]||(V[0]=C=>i.value="history")},g(f(t)("history.history")),3),s("button",{class:$e([{active:i.value==="favorites"},"tab-button"]),onClick:V[1]||(V[1]=C=>i.value="favorites")},g(f(t)("history.favorites")),3)]),i.value==="history"?(b(),E("div",FE,[s("div",BE,[s("button",{class:"refresh-btn",onClick:ve},[...V[14]||(V[14]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),me(s("input",{type:"text","onUpdate:modelValue":V[2]||(V[2]=C=>n.value=C),placeholder:f(t)("history.search_placeholder"),onInput:le,class:"search-input"},null,40,UE),[[Le,n.value]]),_.value?me((b(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":V[3]||(V[3]=C=>x.value=C),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[Mt,x.value]]):ce("",!0),_.value?ce("",!0):(b(),E("button",{key:1,class:"bulk-delete-btn",onClick:U,title:f(t)("history.bulk_delete")},[...V[15]||(V[15]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,VE)),_.value?(b(),E("button",{key:2,class:"bulk-delete-btn",onClick:Z,title:f(t)("history.sure_delete"),disabled:u.value.length===0},[...V[16]||(V[16]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,WE)):ce("",!0),_.value?(b(),E("button",{key:3,class:"bulk-delete-btn",onClick:H,title:f(t)("history.cancel_delete")},[...V[17]||(V[17]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,zE)):ce("",!0)]),s("ul",HE,[(b(!0),E(De,null,Ve(a.value,C=>(b(),E("li",{key:C.id_index,class:"history-item"},[s("span",null,g(k(C.tag)),1),s("div",jE,[s("button",{onClick:w=>X(C),class:"favorite-btn",title:f(t)("history.add_to_favorites")},[...V[18]||(V[18]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,GE),s("button",{onClick:w=>se(C),class:"delete-favorite-btn",title:f(t)("history.delete_history")},[...V[19]||(V[19]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,qE),s("button",{onClick:w=>M(C),class:"use-btn",title:f(t)("history.use_item")},[...V[20]||(V[20]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,KE),_.value?me((b(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":V[4]||(V[4]=w=>u.value=w),value:C.id_index,class:"tag-checkbox"},null,8,YE)),[[Mt,u.value]]):ce("",!0)])]))),128))])])):(b(),E("div",JE,[s("div",XE,[s("button",{class:"refresh-btn",onClick:oe},[...V[21]||(V[21]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),me(s("input",{type:"text","onUpdate:modelValue":V[5]||(V[5]=C=>n.value=C),placeholder:f(t)("history.search_placeholder"),onInput:de,class:"search-input"},null,40,QE),[[Le,n.value]]),_.value?me((b(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":V[6]||(V[6]=C=>x.value=C),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[Mt,x.value]]):ce("",!0),s("button",{class:"add-his-btn",onClick:K,title:f(t)("history.add_new")},[...V[22]||(V[22]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[s("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)])],8,ZE),_.value?ce("",!0):(b(),E("button",{key:1,class:"bulk-delete-btn",onClick:U,title:f(t)("history.bulk_delete")},[...V[23]||(V[23]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,e$)),_.value?(b(),E("button",{key:2,class:"bulk-delete-btn",onClick:te,title:f(t)("history.sure_delete"),disabled:u.value.length===0},[...V[24]||(V[24]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,t$)):ce("",!0),_.value?(b(),E("button",{key:3,class:"bulk-delete-btn",onClick:H,title:f(t)("history.cancel_delete")},[...V[25]||(V[25]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,n$)):ce("",!0)]),s("ul",o$,[(b(!0),E(De,null,Ve(r.value,C=>(b(),E("li",{key:C.id_index,class:"history-item"},[s("div",{class:"favor-name-box",style:gt({backgroundColor:C.color||"transparent"})},[C.name.length>0?(b(),E("span",a$,g(C.name),1)):ce("",!0)],4),s("span",null,g(k(C.tag)),1),s("div",l$,[s("button",{onClick:w=>P(C),class:"delete-favorite-btn",title:f(t)("history.edit_favorite")},[...V[26]||(V[26]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)])],8,s$),s("button",{onClick:w=>R(C),class:"delete-favorite-btn",title:f(t)("history.delete_favorite")},[...V[27]||(V[27]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,r$),s("button",{onClick:w=>M(C),class:"use-btn",title:f(t)("history.use_favorite")},[...V[28]||(V[28]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,i$),_.value?me((b(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":V[7]||(V[7]=w=>u.value=w),value:C.id_index,class:"tag-checkbox"},null,8,u$)),[[Mt,u.value]]):ce("",!0)])]))),128))])])),p.value?(b(),E("div",c$,[s("div",{class:"weilin-tools-dialog-content",onMousedown:V[12]||(V[12]=Ze(()=>{},["stop"]))},[s("div",d$,[s("h2",null,g(d.value?f(t)("history.dialog.edit_tag"):f(t)("history.dialog.add_tag")),1),s("button",{class:"close-btn",onClick:G},"")]),s("div",p$,[s("div",f$,[s("label",null,g(f(t)("history.dialog.name")),1),me(s("input",{type:"text","onUpdate:modelValue":V[8]||(V[8]=C=>m.value.name=C),placeholder:f(t)("history.dialog.name_placeholder")},null,8,g$),[[Le,m.value.name]])]),s("div",m$,[s("label",null,g(f(t)("history.dialog.tag")),1),me(s("textarea",{"onUpdate:modelValue":V[9]||(V[9]=C=>m.value.tag=C),placeholder:f(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,v$),[[Le,m.value.tag]])]),s("div",h$,[s("label",null,g(f(t)("history.dialog.background_color")),1),s("div",_$,[s("div",{class:"color-preview",style:gt({backgroundColor:I.previewColor})},null,4),s("div",y$,[me(s("input",{type:"color","onUpdate:modelValue":V[10]||(V[10]=C=>h.value.hex=C),onInput:j,class:"color-input"},null,544),[[Le,h.value.hex]]),s("div",b$,[me(s("input",{type:"range","onUpdate:modelValue":V[11]||(V[11]=C=>h.value.alpha=C),min:"0",max:"100",onInput:j,class:"alpha-slider"},null,544),[[Le,h.value.alpha,void 0,{number:!0}]]),s("span",w$,g(h.value.alpha)+"%",1)])])])])]),s("div",S$,[s("button",{class:"cancel-btn",onClick:G},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:B},g(f(t)("common.confirm")),1)])],32)])):ce("",!0),c.value?(b(),E("div",x$,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:V[13]||(V[13]=Ze(()=>{},["stop"]))},[s("div",T$,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:F},"")]),s("div",k$,[s("p",C$,g(_e.value),1)]),s("div",E$,[s("button",{class:"cancel-btn",onClick:F},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("common.delete")),1)])],32)])):ce("",!0)]))}},[["__scopeId","data-v-d9f9b5c3"]]),L$={key:0,class:"drop-zone"},A$={key:1,class:"preview-container"},M$=["srcdoc"],I$={class:"action-buttons"},n1="weilin_tools_",D$=yt({__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=_t(),a=v(!1),l=v(""),r=v(null),i={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},p=v((()=>{try{const q=localStorage.getItem(`${n1}tranToWebState`);if(q){const Y=JSON.parse(q),_e={...i};return Y.tranToWeb&&(_e.tranToWeb={...i.tranToWeb,...Y.tranToWeb}),_e}}catch(q){console.error("Error loading window states:",q)}return{...i}})());et(p,q=>{try{localStorage.setItem(`${n1}tranToWebState`,JSON.stringify(q))}catch(Y){console.error("Error saving window states:",Y)}},{deep:!0}),ct(()=>{Be.registerWindow("tranToWeb")}),Rn(()=>{Be.unregisterWindow("tranToWeb")});const c=q=>{a.value=!1},d=(q,Y)=>{p.value[q]&&(p.value[q].position={...Y})},h=(q,Y)=>{p.value[q]&&(p.value[q].size={...Y})},m=()=>{a.value=!0,Be.setActiveWindow("tranToWeb")},_=q=>{q.dataTransfer.dropEffect="copy"},x=q=>{const Y=q.dataTransfer.files[0];Y&&Y.type.startsWith("image/")&&T(Y)},k=q=>{const Y=q.clipboardData.items;for(let _e=0;_e<Y.length;_e++)if(Y[_e].type.startsWith("image/")){const se=Y[_e].getAsFile();T(se);break}},T=q=>{const Y=new FileReader;Y.onload=_e=>{const se=_e.target.result,R=btoa(se);r.value=R,D()},Y.readAsDataURL(q)},D=()=>{l.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 
                    try {
                        const encryptedData = "${r.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error(':', e);
                        document.body.innerHTML = '<p></p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},K=()=>{const q=new Blob([l.value],{type:"text/html"}),Y=URL.createObjectURL(q),_e=document.createElement("a");_e.href=Y,_e.download="image-to-html.html",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),URL.revokeObjectURL(Y)},S=()=>{l.value="",r.value=null},P=v(null),j=()=>{l.value||P.value.click()},G=q=>{const Y=q.target.files[0];Y&&Y.type.startsWith("image/")&&T(Y)};return t({open:m}),(q,Y)=>a.value?(b(),xt($n,{key:0,title:f(o)("utils.tranToWeb"),position:p.value.tranToWeb.position,size:p.value.tranToWeb.size,"z-index":f(Be).getZIndex("tranToWeb"),"onUpdate:position":Y[0]||(Y[0]=_e=>d("tranToWeb",_e)),"onUpdate:size":Y[1]||(Y[1]=_e=>h("tranToWeb",_e)),onActive:Y[2]||(Y[2]=_e=>f(Be).setActiveWindow("tranToWeb")),onClose:Y[3]||(Y[3]=_e=>c())},{default:dt(()=>[s("div",{class:"utils_tran_web__content",onDragover:Ze(_,["prevent"]),onDrop:Ze(x,["prevent"]),onPaste:k,onClick:j},[l.value?(b(),E("div",A$,[s("iframe",{srcdoc:l.value,class:"html-preview"},null,8,M$),s("div",I$,[s("button",{onClick:K},g(f(o)("utils.downloadHtml")),1),s("button",{onClick:S},g(f(o)("utils.clear")),1)])])):(b(),E("div",L$,g(f(o)("utils.dropOrPasteImage")),1)),s("input",{type:"file",ref_key:"fileInput",ref:P,style:{display:"none"},accept:"image/*",onChange:G},null,544)],32)]),_:1},8,["title","position","size","z-index"])):ce("",!0)}},[["__scopeId","data-v-aaebcad3"]]),O$=["onMouseenter","onMouseleave","onMousedown","onMouseup"],R$=yt({__name:"FloatingBall",setup(e){const{t}=_t(),n=v(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),o=v(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),a=v(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||o.value),l=v(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),r=v(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),i=v(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),u=v(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),p=v(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),c=v(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);n.value<1&&(n.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value)),o.value<5&&(o.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value)),a.value<5&&(a.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",a.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",o.value);const d=v([]),h=v([]),m=v([]),_=v([]),x=v(null),k=nt(()=>_.value.map(se=>{const R={...se};return l.value==="custom"&&r.value?(R.backgroundImage=`url(${r.value})`,R.backgroundSize="contain",R.backgroundRepeat="no-repeat",R.backgroundPosition="center",R.imageRendering="optimizeQuality"):i.value==="gradient"?R.background=`linear-gradient(135deg, ${u.value}, ${p.value})`:R.background="transparent",R.borderRadius=`${c.value}%`,R}));for(let se=0;se<n.value;se++){m.value[se]=!1,h.value[se]=!1;const R=window.innerWidth,Z=window.innerHeight,te=o.value,z=a.value,ne=10,ae=Math.floor(R/(te+ne)),F=Math.floor(se/ae);let ie=20+se%ae*(te+ne),Ce=Z-100-F*(z+ne);ie=Math.max(0,ie),ie=Math.min(ie,R-te),Ce=Math.max(0,Ce),Ce=Math.min(Ce,Z-z),d.value[se]={x:ie,y:Ce,width:te+"px",height:z+"px"},_.value[se]={left:`${d.value[se].x}px`,top:`${d.value[se].y}px`,width:`${te}px`,height:`${z}px`}}const T=(se,R)=>{se.target.closest(".weilin_prompt_ui_floating-ball")&&(h.value[R]=!0,document.addEventListener("mousemove",te=>D(te,R)),document.addEventListener("mouseup",te=>K(te,R)))},D=(se,R)=>{if(h.value[R]){const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value;let ae=se.clientX-z/2,F=se.clientY-ne/2;ae=Math.max(0,ae),ae=Math.min(ae,Z-z),F=Math.max(0,F),F=Math.min(F,te-ne),d.value[R]={x:ae,y:F,width:z+"px",height:ne+"px"},_.value[R]={left:`${d.value[R].x}px`,top:`${d.value[R].y}px`,width:`${z}px`,height:`${ne}px`}}},K=(se,R)=>{h.value[R]=!1,document.removeEventListener("mousemove",Z=>D(Z,R)),document.removeEventListener("mouseup",Z=>K(Z,R))},S=()=>{},P=se=>{switch(se){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":G();break;case"item8":x.value.open();break}},j=v(),G=()=>{j.value.open()},q=se=>{if(se.data.type==="weilin_prompt_ui_floating_ball_setting"){n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||o.value,l.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",r.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",i.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",u.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",p.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",c.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,m.value=[],h.value=[],d.value=[],_.value=[];for(let R=0;R<n.value;R++){m.value[R]=!1,h.value[R]=!1;const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value,ae=10,F=Math.floor(Z/(z+ae)),B=Math.floor(R/F);let Ce=20+R%F*(z+ae),le=te-100-B*(ne+ae);Ce=Math.max(0,Ce),Ce=Math.min(Ce,Z-z),le=Math.max(0,le),le=Math.min(le,te-ne),d.value[R]={x:Ce,y:le,width:z+"px",height:ne+"px"},_.value[R]={left:`${d.value[R].x}px`,top:`${d.value[R].y}px`,width:`${z}px`,height:`${ne}px`,...l.value==="custom"&&r.value?{backgroundImage:`url(${r.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:i.value==="gradient"?{background:`linear-gradient(135deg, ${u.value}, ${p.value})`}:{background:"transparent"},borderRadius:`${c.value}%`}}}},Y=se=>{m.value[se]=!0},_e=se=>{m.value[se]=!1};return ct(()=>{window.addEventListener("message",q)}),Rn(()=>{window.removeEventListener("message",q),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",K)}),(se,R)=>(b(),E(De,null,[(b(!0),E(De,null,Ve(n.value,Z=>(b(),E("div",{class:"weilin_prompt_ui_floating-ball",style:gt(k.value[Z-1]),onMouseenter:te=>Y(Z-1),onMouseleave:te=>_e(Z-1),onMousedown:te=>T(te,Z-1),onMouseup:te=>K(te,Z-1),key:"floating-ball-"+Z},[s("div",{class:"weilin_prompt_ui_ball-content",onClick:S},g(l.value==="default"?"WeiLin":""),1),m.value[Z-1]?(b(),E("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:R[8]||(R[8]=Ze(()=>{},["stop"]))},[s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[0]||(R[0]=te=>P("item1"))},g(f(t)("floatingBall.promptBox")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[1]||(R[1]=te=>P("item2"))},g(f(t)("floatingBall.tagManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[2]||(R[2]=te=>P("item3"))},g(f(t)("floatingBall.loraManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[3]||(R[3]=te=>P("item4"))},g(f(t)("floatingBall.aiWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[4]||(R[4]=te=>P("item6"))},g(f(t)("floatingBall.openNodeListWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[5]||(R[5]=te=>P("item7"))},g(f(t)("floatingBall.tranToWeb")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[6]||(R[6]=te=>P("item8"))},g(f(t)("floatingBall.openSetting")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:R[7]||(R[7]=te=>P("item5"))},g(f(t)("floatingBall.restoreWindow")),1)],32)):ce("",!0)],44,O$))),128)),He(D$,{ref_key:"tranToWebRef",ref:j},null,512),He(Ff,{ref_key:"settingDialog",ref:x},null,512)],64))}},[["__scopeId","data-v-660fe17c"]]),N$={class:"ai-chat-window"},P$={class:"history-sidebar"},F$={class:"history-list"},B$=["onClick"],U$={key:0},V$=["onKeyup","onBlur"],W$={class:"item-actions"},z$=["onClick"],H$=["onClick"],j$={class:"chat-main"},G$={class:"message-list"},q$={class:"message-content"},K$={key:0,class:"message assistant"},Y$={class:"message-content"},J$={class:"input-area"},X$=["placeholder","onKeydown"],Q$=["disabled"],Z$=yt({__name:"ai_window",setup(e){const{t}=_t(),n=v([]),o=v(-1),a=v(""),l=v(!1),r=v({}),i=v(!1),u=v(""),p=P=>{var j;n.value[P]&&(i.value=!0,u.value=((j=n.value[P])==null?void 0:j.title)||` ${P+1}`,o.value=P)},c=P=>{n.value[P]&&(u.value.trim()&&(n.value[P].title=u.value.trim(),T()),i.value=!1)},d=()=>{i.value=!1},h=()=>{Ll.getOpenAiSetting().then(P=>{r.value=P.data}).catch(P=>{J({type:"warn",str:"message.networkError"})})};ct(()=>{h()});const m=nt(()=>n.value[o.value]||{messages:[]}),_=P=>{o.value=P},x=()=>{l.value=!0;const P={title:` ${n.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return n.value.push(P),o.value=n.value.length-1,T(),l.value=!1,P},k=()=>{const P=localStorage.getItem("aiChatHistory");P&&(n.value=JSON.parse(P))},T=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(n.value))};ct(()=>{h(),k()});const D=async()=>{if(!a.value.trim()||l.value)return;(n.value.length===0||o.value===-1)&&x();const P={role:"user",content:a.value,timestamp:new Date().toISOString()};m.value.messages.push(P),T(),a.value="";const j={role:"assistant",content:"",timestamp:new Date().toISOString()};m.value.messages.push(j),T(),l.value=!0;try{await S({messages:m.value.messages},G=>{const q=m.value.messages[m.value.messages.length-1];q.content+=G.content,T()},G=>{console.error("Error:",G);const q=m.value.messages[m.value.messages.length-1];q.content="",T()},()=>{l.value=!1,T()})}catch(G){console.error("Error:",G),l.value=!1;const q=m.value.messages[m.value.messages.length-1];q.content="",T()}},K=P=>{n.value.splice(P,1),o.value===P&&(o.value=Math.max(0,P-1)),T()},S=async(P,j,G,q)=>{var Y,_e;try{const se=await fetch(r.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.value.api_key}`},body:JSON.stringify({model:r.value.model,messages:P.messages,stream:!0})});if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);const R=se.body.getReader(),Z=new TextDecoder;let te="";for(;;){const{done:z,value:ne}=await R.read();if(z){q();break}te+=Z.decode(ne,{stream:!0});const ae=te.split(`
`);te=ae.pop();for(const F of ae)if(F.trim()!==""){if(F==="data: [DONE]"){q();return}try{const B=F.replace(/^data: /,""),Ce=((_e=(Y=JSON.parse(B).choices[0])==null?void 0:Y.delta)==null?void 0:_e.content)||"";Ce&&j({content:Ce})}catch{console.error("Failed to parse message:",F)}}}}catch(se){G(se)}};return(P,j)=>(b(),E("div",N$,[s("div",P$,[s("button",{class:"new-chat-btn",onClick:x},g(f(t)("aiWindow.newChat")),1),s("div",F$,[(b(!0),E(De,null,Ve(n.value,(G,q)=>(b(),E("div",{key:q,class:$e(["history-item",{active:o.value===q}]),onClick:Y=>_(q)},[!i.value||o.value!==q?(b(),E("span",U$,g((G==null?void 0:G.title)||f(t)("aiWindow.chatName")+` ${q+1}`),1)):me((b(),E("input",{key:1,"onUpdate:modelValue":j[0]||(j[0]=Y=>u.value=Y),onKeyup:[sn(Y=>c(q),["enter"]),sn(d,["esc"])],onBlur:Y=>c(q),class:"rename-input"},null,40,V$)),[[Le,u.value]]),s("div",W$,[s("button",{class:"rename-btn",onClick:Ze(Y=>p(q),["stop"])},"",8,z$),i.value?ce("",!0):(b(),E("button",{key:0,class:"delete-btn",onClick:Ze(Y=>K(q),["stop"])},"",8,H$))])],10,B$))),128))])]),s("div",j$,[s("div",G$,[(b(!0),E(De,null,Ve(m.value.messages,(G,q)=>(b(),E("div",{key:q,class:$e(["message",G.role])},[s("div",q$,[s("pre",null,g(G.content),1)])],2))),128)),l.value?(b(),E("div",K$,[s("div",Y$,[s("pre",null,g(f(t)("aiWindow.thinking")),1)])])):ce("",!0)]),s("div",J$,[me(s("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":j[1]||(j[1]=G=>a.value=G),placeholder:f(t)("aiWindow.inputMessage"),onKeydown:sn(Ze(D,["exact","prevent"]),["enter"])},null,40,X$),[[Le,a.value]]),s("button",{class:"ai-chat-btn",onClick:D,disabled:l.value},g(f(t)("aiWindow.send")),9,Q$)])])]))}},[["__scopeId","data-v-0cea2906"]]),eL={class:"lora-info"},tL={class:"lora-header"},nL=["title"],oL={class:"lora-weights"},aL={class:"weight-item"},lL=["title"],sL={class:"weight-item"},rL={class:"center-box"},iL=["onClick"],sr="weilin_prompt_ui_",uL=yt({__name:"index",setup(e){const{t}=_t(),n=v([]);window.addEventListener("message",a=>{a.data.type==="weilin_prompt_ui_update_node_list_info"&&(n.value=a.data.nodeList)});const o=a=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:a},"*")};return ct(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(a,l)=>(b(),E("div",{class:$e(`${sr}lora-stack`)},[s("div",{class:$e(`${sr}lora-content`)},[s("div",{class:$e(`${sr}lora-body`)},[s("div",{class:$e(`${sr}lora-list`)},[(b(!0),E(De,null,Ve(n.value,r=>(b(),E("div",{key:r.id,class:"lora-item"},[s("div",eL,[s("div",tL,[s("span",{class:"lora-name",title:r.title},"#"+g(r.id)+" - "+g(r.title),9,nL)]),s("div",oL,[s("div",aL,[s("div",{class:"text-label",title:r.text},g(r.text),9,lL)]),s("div",sL,[s("div",rL,[s("button",{onClick:i=>o(r.seed),class:"open-button"},g(f(t)("nodeListWindow.openPromptUI")),9,iL)])])])])]))),128))],2)],2)],2)],2))}},[["__scopeId","data-v-0c15a742"]]),gu={getTreeFromCloud:async e=>await Ie({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await Ie({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await Ie({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},cL={class:"cloud-manager"},dL={class:"toolbar"},pL={class:"current-path"},fL={class:"file-list"},gL={class:"file-info"},mL={class:"file-name"},vL={class:"file-type"},hL={class:"file-actions"},_L=["onClick"],yL={key:1,class:"install-container"},bL={key:0,class:"installed-badge"},wL=["onClick","disabled"],SL=yt({__name:"index",setup(e){const{t}=_t(),n=v([]),o=v("tags"),a=v("tags"),l=v([]),r=async x=>{try{const k=await gu.getTreeFromCloud(x);n.value=k.data}catch(k){console.error(":",k),J({type:"warn",str:"message.networkError"})}},i=async()=>{try{const x=await gu.getLocalInstallPackage();l.value=x.data||[]}catch(x){console.error(":",x),J({type:"warn",str:"message.networkError"})}},u=x=>l.value.some(k=>k===x),p=async x=>{try{const k=n.value.find(T=>T.path===x);k&&(k.isInstalling=!0,await gu.installSelectPackage(a.value,[x]).then(()=>{i(),J({type:"success",str:"message.installPackageSuccess"})}))}catch(k){console.error(":",k),J({type:"warn",str:"message.installPackageFail"})}finally{const k=n.value.find(T=>T.path===x);k&&(k.isInstalling=!1)}},c=()=>{const x=o.value.split("/");x.length>1&&(o.value=x.slice(0,-1).join("/"),r(o.value))},d=()=>{r(o.value),i()},h=x=>{o.value=x,r(x)},m=()=>{a.value="tags",o.value="tags",r(o.value)},_=()=>{a.value="danbooru",o.value="danbooru",r(o.value)};return ct(()=>{r(o.value),i()}),(x,k)=>(b(),E("div",cL,[s("div",dL,[s("button",{class:"refresh-btn",onClick:d},[...k[0]||(k[0]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),s("button",{class:"database-btn",onClick:m},[k[1]||(k[1]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",null,g(f(t)("cloudWindow.tagDatabase")),1)]),s("button",{class:"database-btn",onClick:_},[k[2]||(k[2]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),s("span",null,g(f(t)("cloudWindow.danbooruDatabase")),1)]),s("div",pL,[s("span",null,g(f(t)("cloudWindow.currentPath"))+": "+g(a.value=="tags"?f(t)("cloudWindow.tagDatabase"):f(t)("cloudWindow.danbooruDatabase")),1)])]),s("div",fL,[o.value!=="tags"&&o.value!=="danbooru"?(b(),E("button",{key:0,class:"back-btn",onClick:c},[k[3]||(k[3]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),je(" "+g(f(t)("cloudWindow.back")),1)])):ce("",!0),(b(!0),E(De,null,Ve(n.value,T=>(b(),E("div",{key:T.path,class:"file-item"},[s("div",gL,[s("span",mL,g(T.name),1),s("span",vL,g(T.type=="dir"?"":T.type=="file"?"":""),1)]),s("div",hL,[T.type==="dir"?(b(),E("button",{key:0,onClick:D=>h(T.path),class:"open-btn"},g(f(t)("cloudWindow.open")),9,_L)):T.type==="file"?(b(),E("div",yL,[u(T.path)?(b(),E("span",bL,g(f(t)("cloudWindow.installed")),1)):(b(),E("button",{key:1,onClick:D=>p(T.path),class:"install-btn",disabled:T.isInstalling},g(T.isInstalling?f(t)("cloudWindow.installing"):f(t)("cloudWindow.install")),9,wL))])):ce("",!0)])]))),128))])]))}},[["__scopeId","data-v-508c00b0"]]),xL={class:"header-actions"},TL=["title"],kL=["onMouseover","onDragstart","onDrop"],CL={class:"lora-info"},EL={class:"lora-header"},$L=["title"],LL={class:"lora-actions"},AL=["onClick","title"],ML=["onClick","title"],IL={class:"lora-weights-row"},DL={class:"weight-item-col"},OL=["onUpdate:modelValue"],RL={class:"weight-item-col"},NL=["onUpdate:modelValue"],PL={class:"switch-item-col"},FL={class:"switch"},BL=["checked","onChange"],Pa="weilin_prompt_ui_",UL=yt({__name:"lora_stack",setup(e,{expose:t}){const{t:n}=_t(),o=v([]),a=v(""),l=v(!1),r=v(""),i=v(100),u=v(0),p=v(),c=v(!1),d=v(!1),h=v(),m=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:a.value},"*")},_=R=>{R.hidden=!R.hidden},x=(R,Z)=>{if(d.value=!0,r.value===R&&l.value)return;const z=Z.currentTarget.getBoundingClientRect();let ae={left:z.left-450-10,top:z.top};ae.left<10&&(ae.left=z.right+10),ae.top=Math.max(10,Math.min(ae.top,window.innerHeight-310)),i.value=ae.left,u.value=ae.top,l.value=!0,r.value=R,Ke(()=>{h.value.refresh()})},k=()=>{d.value=!1,setTimeout(()=>{!c.value&&!d.value&&(l.value=!1,r.value="",c.value=!1)},200)},T=()=>{c.value=!0,d.value=!0},D=()=>{l.value=!1,r.value="",c.value=!1},K=R=>{o.value.find(Z=>Z.name===R.name)||o.value.push({name:R.name,weight:1,text_encoder_weight:1,...R})},S=R=>{const Z=o.value.findIndex(te=>te.name===R.name);Z>-1&&o.value.splice(Z,1)},P=v(),j=R=>{P.value.open({name:R.lora})};window.addEventListener("message",R=>{R.data.type==="weilin_prompt_ui_selectLora_stack_"+a.value&&K(R.data.lora)});const G=(R,Z)=>{if(a.value=Z,R.length>0)try{const te=JSON.parse(R);if(te.lora&&te.lora!=""&&(o.value=te.lora),te.temp_lora&&te.temp_lora.length>0&&te.temp_lora!=""){const z=te.temp_lora;o.value=z}}catch{J({type:"warn",str:"promptBox.settings.errorPrompt"})}};et(o,R=>{q()},{deep:!0});const q=()=>{if(o.value.length>0){const R=o.value.filter(z=>!z.hidden);let Z={lora:"",temp_lora:o.value};R.length>0&&(Z.lora=R);const te=JSON.stringify(Z);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:te},"*")}else{const Z=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:Z},"*")}},Y=v(null),_e=R=>{Y.value=R},se=R=>{if(Y.value===null||Y.value===R)return;const Z=o.value.splice(Y.value,1)[0];o.value.splice(R,0,Z),Y.value=null,q()};return t({initLoraStack:G}),(R,Z)=>(b(),E("div",{class:$e(`${Pa}lora-stack`)},[s("div",{class:$e(`${Pa}lora-content`)},[s("div",{class:$e(`${Pa}lora-header`)},[s("div",xL,[s("button",{class:$e(`${Pa}add-btn`),onClick:m,title:f(n)("controls.addLora")},[...Z[1]||(Z[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,TL)])],2),s("div",{class:$e(`${Pa}lora-body`)},[s("div",{class:$e(`${Pa}lora-list`)},[(b(!0),E(De,null,Ve(o.value,(te,z)=>(b(),E("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:p,key:te.name,class:$e(["lora-item",{"hidden-lora":te.hidden}]),onMouseover:ne=>x(te.lora,ne),onMouseleave:k,draggable:"true",onDragstart:ne=>_e(z),onDragover:Z[0]||(Z[0]=Ze(()=>{},["prevent"])),onDrop:ne=>se(z)},[s("div",CL,[s("div",EL,[s("span",{class:"lora-name",title:te.name},g(te.name),9,$L),s("div",LL,[s("button",{class:"look-on-btn",onClick:ne=>j(te),title:f(n)("controls.lookOnLora")},[...Z[2]||(Z[2]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,AL),s("button",{class:"remove-btn",onClick:ne=>S(te),title:f(n)("controls.removeLora")},[...Z[3]||(Z[3]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,ML)])]),s("div",IL,[s("div",DL,[s("label",null,g(f(n)("loraManager.modelWeight")),1),me(s("input",{type:"number","onUpdate:modelValue":ne=>te.weight=ne,class:"lora-weight",step:"0.1"},null,8,OL),[[Le,te.weight]])]),s("div",RL,[s("label",null,g(f(n)("loraManager.textEncoderWeight")),1),me(s("input",{type:"number","onUpdate:modelValue":ne=>te.text_encoder_weight=ne,class:"lora-weight",step:"0.1"},null,8,NL),[[Le,te.text_encoder_weight]])]),s("div",PL,[s("label",null,g(te.hidden?f(n)("lora.hideLora"):f(n)("lora.showLora")),1),s("label",FL,[s("input",{type:"checkbox",checked:!te.hidden,onChange:ne=>_(te)},null,40,BL),Z[4]||(Z[4]=s("span",{class:"slider"},null,-1))])])])])],42,kL))),128))],2)],2)],2),He(lr,{ref_key:"loraDetailLoraStackRef",ref:P},null,512),l.value?(b(),xt(pu,{key:0,ref_key:"loraCardItem",ref:h,fileNmae:r.value,paddingLeft:i.value,paddingTop:u.value,onCardLeave:D,onCardenter:T},null,8,["fileNmae","paddingLeft","paddingTop"])):ce("",!0)],2))}},[["__scopeId","data-v-c2ab38ea"]]),Fa={searchDanbooru:async(e="",t=1,n=100)=>await Ie({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:n}}),addDanbooruTag:async e=>await Ie({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await Ie({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await Ie({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await Ie({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await Ie({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},VL={key:0,class:"loading-overlay"},WL={class:"settings-content"},zL={style:{"margin-bottom":"16px"}},HL=["placeholder"],jL={style:{"margin-bottom":"16px"}},GL=["placeholder"],qL=["placeholder"],KL=["placeholder"],YL={class:"data-container"},JL={key:0},XL={key:0},QL={class:"tag-group-container"},ZL={key:0},eA={key:1},tA={style:{display:"flex","align-items":"center"}},nA={key:0},oA=["placeholder"],aA=["placeholder"],lA=["placeholder"],sA=["placeholder"],rA=["onClick"],iA=["onClick"],uA=["onClick"],cA={key:1},dA={class:"tag-group-container"},pA={key:0},fA={key:1},gA={style:{display:"flex","align-items":"center"}},mA={key:0},vA=["placeholder"],hA=["placeholder"],_A=["placeholder"],yA=["placeholder"],bA=["onClick"],wA=["onClick"],SA=["onClick"],xA=yt({__name:"import_danbooru",setup(e,{expose:t}){const{t:n}=_t(),o=v(!1),a=v(""),l=v(""),r=v(""),i=v(""),u=v(""),p=v(""),c=v(""),d=v(""),h=v(""),m=v([]),_=v(-1),x=v(""),k=v(""),T=v(null);v(null);const D=v(null),K=v(!1),S=v(""),P=v(0),j=v(0);function G(){a.value="",l.value="",P.value=0,j.value=0,r.value="",i.value="",u.value="",p.value="",c.value="",d.value="",h.value="",m.value=[],_.value=-1,x.value="",k.value="",K.value=!1}function q(X){G();const M=X.target.files[0];if(M){const U=new FileReader;U.onload=H=>{H.target.result.split(";").filter(C=>C.trim()).forEach(C=>{if((C.includes("tag_groups")||C.includes("tag_subgroups"))&&C.includes("p_uuid"))if(C.includes("g_uuid")){u.value=C+";";const N=C.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);N&&(h.value=N[1]);const Q=C.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(c.value=Q[1].replace(/''/g,"'"))}else{i.value=C+";";const N=C.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);N&&(d.value=N[1]);const Q=C.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(p.value=Q[1].replace(/''/g,"'"))}else C.includes("tag_tags")&&m.value.push(C+";")})},U.readAsText(M)}X.target.value=""}function Y(X){const M=X.target.files[0];if(M){const U=new FileReader;U.onload=H=>{H.target.result.split(`
`).filter(C=>C.trim()).forEach(C=>{const w=C.split(",");if(w.length>=2){let N,Q,fe,he;w.length===2?(N=w[0].trim(),he=w[1].trim(),Q=0,fe=0):w.length>=3&&(N=w[0].trim(),Q=parseInt(w[1].trim())||0,fe=parseInt(w[2].trim())||0,he=w.slice(3).join(",").trim(),he=he.replace(/^"(.*)"$/,"$1"));const L=N.replace(/'/g,"''"),y=he.replace(/'/g,"''"),O=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${L}', '', '${y}', ${fe}, ${Q});`;m.value.push(O)}})},U.readAsText(M)}X.target.value=""}function _e(){D.value.click()}function se(){let X;m.value.length>0&&Z(m.value[0])?X=[...m.value].join(`
`):X=[i.value,u.value,...m.value].join(`
`);const M=new Blob([X],{type:"text/sql"}),U=document.createElement("a");if(U.href=URL.createObjectURL(M),S.value.length<=0){const H=parseInt(new Date().getTime()/1e3);U.download="export_"+H+".sql"}else U.download=S.value+".sql";U.click()}function R(X){const M=X.match(/VALUES\s*\([^']*'([^']+)'/),U=X.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:M?M[1].replace(/''/g,"'"):"",desc:U?U[1].replace(/''/g,"'"):""}}function Z(X){return X.includes("danbooru_tag")}function te(X){const M=X.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return M?{tag:M[1].replace(/''/g,"'"),color_id:M[2],translate:M[3].replace(/''/g,"'"),hot:parseInt(M[4]),aliases:parseInt(M[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const z=v(0),ne=v(0);function ae(X){const M=m.value[X];if(Z(M)){const U=te(M);x.value=U.tag,k.value=U.translate,z.value=U.hot,ne.value=U.aliases}else{const U=R(M);x.value=U.text,k.value=U.desc}_.value=X}function F(X){const M=x.value.replace(/'/g,"''"),U=k.value.replace(/'/g,"''");if(Z(m.value[X])){const H=te(m.value[X]),I=parseInt(z.value)||0,V=parseInt(ne.value)||0;m.value[X]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${M}', '${H.color_id}', '${U}', ${I}, ${V});`}else m.value[X]=m.value[X].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${M}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${U}'`);_.value=-1}function B(){_.value=-1,x.value="",k.value="",z.value=0,ne.value=0}function ie(X){m.value.splice(X,1)}function Ce(){const X=a.value.replace(/'/g,"''"),M=l.value.replace(/'/g,"''"),U=parseInt(P.value)||0,H=parseInt(j.value)||0,I=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${X}', '', '${M}', ${U}, ${H});`;m.value.push(I),a.value="",l.value="",P.value=0,j.value=0}const le=v(!1),de=async X=>{le.value=!0;try{await Fa.runSQLToServer(X).then(M=>{if(M.code!=200){J({type:"warn",str:M.message});return}else ve(),J({type:"success",str:"importDialog.successImport"})}).catch(M=>{console.error(M),J({type:"warn",str:"importDialog.importFail"})})}catch(M){console.error(M),J({type:"warn",str:"importDialog.importFail"})}finally{le.value=!1}},ve=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},oe=async()=>{if(m.value.length>0&&Z(m.value[0])){const X=[...m.value];await de(X)}else if(K.value){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const X=[...m.value];await de(X)}else{if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const X=[i.value,u.value,...m.value];await de(X)}};return et(i,(X,M)=>{var I,V;if(!X||X===M)return;const U=(I=X.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],H=(V=M==null?void 0:M.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:V[1];U&&H&&u.value&&(u.value=u.value.replace(new RegExp(`'${H}'`,"g"),`'${U}'`))}),et(u,(X,M)=>{var I,V;if(!X||X===M)return;const U=(I=X.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],H=(V=M==null?void 0:M.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:V[1];U&&H&&m.value.length>0&&(m.value=m.value.map(C=>C.replace(new RegExp(`'${H}'`,"g"),`'${U}'`)))}),t({open:()=>{o.value=!0}}),(X,M)=>(b(),E(De,null,[le.value?(b(),E("div",VL,[...M[19]||(M[19]=[s("div",{class:"loading-spinner"},null,-1)])])):ce("",!0),He(Aa,{modelValue:o.value,"onUpdate:modelValue":M[18]||(M[18]=U=>o.value=U),title:f(n)("danbooruManager.importBatchTitle")},{footer:dt(()=>[s("button",{onClick:M[17]||(M[17]=U=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:oe},g(f(n)("importDialog.sure")),1)]),default:dt(()=>[s("div",WL,[s("div",zL,[s("button",{onClick:G,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:se},g(f(n)("importDialog.dumpSQL")),1),me(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":M[0]||(M[0]=U=>S.value=U),placeholder:f(n)("importDialog.settingOutputName")},null,8,HL),[[Le,S.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:q,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:D,onChange:Y,accept:".txt,.csv",style:{display:"none"}},null,544)]),s("div",jL,[me(s("input",{"onUpdate:modelValue":M[1]||(M[1]=U=>a.value=U),placeholder:"Tag"},null,512),[[Le,a.value]]),me(s("input",{"onUpdate:modelValue":M[2]||(M[2]=U=>l.value=U),placeholder:f(n)("importDialog.translater")},null,8,GL),[[Le,l.value]]),me(s("input",{"onUpdate:modelValue":M[3]||(M[3]=U=>P.value=U),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,qL),[[Le,P.value]]),me(s("input",{"onUpdate:modelValue":M[4]||(M[4]=U=>j.value=U),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,KL),[[Le,j.value]]),s("button",{onClick:Ce},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:_e,class:"upload-btn"},g(f(n)("danbooruManager.import")),1)]),s("div",YL,[i.value?(b(),E("div",JL,[s("h3",null,g(R(i.value).text),1),u.value?(b(),E("div",XL,[s("h4",null,g(R(u.value).text),1),s("div",QL,[(b(!0),E(De,null,Ve(m.value,(U,H)=>(b(),E("div",{key:H,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(U)?(b(),E("p",ZL,g(te(U).tag)+" - "+g(te(U).translate)+" ("+g(f(n)("danbooruManager.hot"))+": "+g(te(U).hot)+", "+g(f(n)("danbooruManager.aliases"))+": "+g(te(U).aliases)+")",1)):(b(),E("p",eA,g(R(U).text)+" - "+g(R(U).desc),1)),s("div",tA,[_.value===H?(b(),E("div",nA,[Z(U)?me((b(),E("input",{key:0,"onUpdate:modelValue":M[5]||(M[5]=I=>x.value=I),placeholder:"Tag"},null,512)),[[Le,x.value]]):me((b(),E("input",{key:1,"onUpdate:modelValue":M[6]||(M[6]=I=>x.value=I),placeholder:"Tag"},null,512)),[[Le,x.value]]),Z(U)?me((b(),E("input",{key:2,"onUpdate:modelValue":M[7]||(M[7]=I=>k.value=I),placeholder:f(n)("importDialog.translate")},null,8,oA)),[[Le,k.value]]):me((b(),E("input",{key:3,"onUpdate:modelValue":M[8]||(M[8]=I=>k.value=I),placeholder:f(n)("importDialog.translater")},null,8,aA)),[[Le,k.value]]),Z(U)?me((b(),E("input",{key:4,"onUpdate:modelValue":M[9]||(M[9]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,lA)),[[Le,z.value]]):ce("",!0),Z(U)?me((b(),E("input",{key:5,"onUpdate:modelValue":M[10]||(M[10]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,sA)),[[Le,ne.value]]):ce("",!0),s("button",{onClick:I=>F(H)},g(f(n)("importDialog.sureYes")),9,rA),s("button",{style:{"margin-left":"10px"},onClick:B},g(f(n)("importDialog.cancel")),1)])):(b(),E("button",{key:1,onClick:I=>ae(H)},g(f(n)("importDialog.edit")),9,iA)),s("button",{style:{"margin-left":"10px"},onClick:I=>ie(H)},g(f(n)("importDialog.delete")),9,uA)])]))),128))])])):ce("",!0)])):m.value.length>0?(b(),E("div",cA,[s("h3",null,g(f(n)("danbooruManager.importTitle")),1),s("div",dA,[(b(!0),E(De,null,Ve(m.value,(U,H)=>(b(),E("div",{key:H,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(U)?(b(),E("p",pA,g(te(U).tag)+" - "+g(te(U).translate)+" (: "+g(te(U).hot)+", : "+g(te(U).aliases)+")",1)):(b(),E("p",fA,g(R(U).text)+" - "+g(R(U).desc),1)),s("div",gA,[_.value===H?(b(),E("div",mA,[Z(U)?me((b(),E("input",{key:0,"onUpdate:modelValue":M[11]||(M[11]=I=>x.value=I),placeholder:"Tag"},null,512)),[[Le,x.value]]):me((b(),E("input",{key:1,"onUpdate:modelValue":M[12]||(M[12]=I=>x.value=I),placeholder:"Tag"},null,512)),[[Le,x.value]]),Z(U)?me((b(),E("input",{key:2,"onUpdate:modelValue":M[13]||(M[13]=I=>k.value=I),placeholder:f(n)("importDialog.translater")},null,8,vA)),[[Le,k.value]]):me((b(),E("input",{key:3,"onUpdate:modelValue":M[14]||(M[14]=I=>k.value=I),placeholder:f(n)("importDialog.translater")},null,8,hA)),[[Le,k.value]]),Z(U)?me((b(),E("input",{key:4,"onUpdate:modelValue":M[15]||(M[15]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,_A)),[[Le,z.value]]):ce("",!0),Z(U)?me((b(),E("input",{key:5,"onUpdate:modelValue":M[16]||(M[16]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,yA)),[[Le,ne.value]]):ce("",!0),s("button",{onClick:I=>F(H)},g(f(n)("importDialog.sureYes")),9,bA),s("button",{style:{"margin-left":"10px"},onClick:B},g(f(n)("importDialog.cancel")),1)])):(b(),E("button",{key:1,onClick:I=>ae(H)},g(f(n)("importDialog.edit")),9,wA)),s("button",{style:{"margin-left":"10px"},onClick:I=>ie(H)},g(f(n)("importDialog.delete")),9,SA)])]))),128))])])):ce("",!0)])])]),_:1},8,["modelValue","title"])],64))}},[["__scopeId","data-v-4dfbaa15"]]),TA={class:"danbooru-manager"},kA={class:"title"},CA={class:"action-bar"},EA={class:"search-box"},$A=["placeholder"],LA=["disabled"],AA={class:"pagination"},MA=["disabled"],IA={class:"page-info"},DA=["disabled"],OA={class:"page-size-control"},RA={key:0,class:"tag-list"},NA={style:{"table-layout":"fixed",overflow:"auto"}},PA={class:"checkbox-column"},FA=["checked"],BA={class:"tag-column"},UA={class:"translate-column"},VA={class:"color-column"},WA={class:"hot-column"},zA={class:"aliases-column"},HA={class:"control-column"},jA=["value"],GA=["onClick"],qA=["onClick"],KA={key:1,class:"no-results"},YA={key:2,class:"weilin-tools-dialog"},JA={class:"weilin-tools-dialog-content"},XA={class:"form-group"},QA=["placeholder"],ZA={class:"form-group"},eM=["placeholder"],tM={class:"form-group"},nM=["value"],oM={class:"form-group"},aM={key:0,class:"form-group"},lM={class:"weilin-tools-dialog-actions"},sM={key:3,class:"weilin-tools-dialog"},rM={class:"weilin-tools-dialog-content"},iM={class:"weilin-tools-dialog-actions"},uM={key:4,class:"weilin-tools-dialog"},cM={class:"weilin-tools-dialog-content"},dM={class:"weilin-tools-dialog-actions"},pM={key:5,class:"overlay"},fM=yt({__name:"danbooru_manager",setup(e){const{t}=_t(),n=v(""),o=v([]),a=v(1),l=v(1),r=v(100),i=v(!1),u=v(!1),p=v(!1),c=v(!1),d=v(!1),h=v(null),m=v({tag:"",translate:"",color_id:0,hot:0,aliases:0}),_=[{name:"",color:"#888888"},{name:"",color:"#FF6666"},{name:"",color:"#66FF66"},{name:"",color:"#6666FF"},{name:"",color:"#FFFF66"},{name:"",color:"#FF66FF"},{name:"",color:"#66FFFF"},{name:"",color:"#FF9966"},{name:"",color:"#FF99CC"},{name:"",color:"#996633"}],x=F=>_[F]?_[F].color:_[0].color;let k=null;const T=()=>{k&&clearTimeout(k),k=setTimeout(()=>{a.value=1,D()},300)},D=async()=>{i.value=!0,se.value=[];try{const F=await Fa.searchDanbooru(n.value,a.value,r.value);F&&F.data?(o.value=F.data.data||[],l.value=F.data.total_pages||1):(o.value=[],l.value=1)}catch(F){console.error(":",F),J({type:"error",str:t("message.searchFailed")}),o.value=[]}finally{i.value=!1}},K=F=>{F<1||F>l.value||(a.value=F,D())},S=()=>{r.value<10&&(r.value=10),r.value>500&&(r.value=500),a.value=1,se.value=[],D()},P=()=>{d.value=!1,m.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},u.value=!0},j=F=>{d.value=!0,h.value=F,m.value={id:F.id_index,tag:F.tag,translate:F.translate||"",color_id:F.color_id||0,hot:F.hot||0,aliases:F.aliases||0},u.value=!0},G=()=>{u.value=!1},q=async()=>{if(!m.value.tag){J({type:"error",str:t("tagManager.textRequired")});return}try{if(d.value){const F=await Fa.updateDanbooruTag({id:m.value.id,update_data:{tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases}});F&&F.code===200?(J({type:"success",str:t("message.editSuccess")}),D()):J({type:"error",str:t("message.editFailed")})}else{const F=await Fa.addDanbooruTag({tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases});F&&F.code===200?(J({type:"success",str:t("message.addSuccess")}),D()):J({type:"error",str:t("message.addFailed")})}G()}catch(F){console.error(":",F),J({type:"error",str:d.value?t("message.editFailed"):t("message.addFailed")})}},Y=F=>{h.value=F,p.value=!0},_e=async()=>{if(!(!h.value||!h.value.id_index))try{const F=await Fa.deleteDanbooruTag(h.value.id_index);F&&F.code===200?(J({type:"success",str:t("message.deleteSuccess")}),D()):J({type:"error",str:t("message.deleteFailed")}),p.value=!1}catch(F){console.error(":",F),J({type:"error",str:t("message.deleteFailed")})}},se=v([]),R=nt(()=>o.value.length>0&&se.value.length===o.value.length),Z=()=>{R.value?se.value=[]:se.value=o.value.map(F=>F.id_index)},te=()=>{se.value.length!==0&&(c.value=!0)},z=async()=>{if(se.value.length!==0){try{const F=await Fa.batchDeleteDanbooruTags(se.value);F&&F.code===200?(J({type:"success",str:` ${se.value.length} `}),se.value=[],D()):J({type:"error",str:""})}catch(F){console.error(":",F),J({type:"error",str:""})}c.value=!1}},ne=v(),ae=()=>{ne.value.open()};return ct(()=>{D()}),(F,B)=>{var ie;return b(),E("div",TA,[s("h2",kA,g(f(t)("danbooruManager.title")),1),s("div",CA,[s("div",EA,[me(s("input",{"onUpdate:modelValue":B[0]||(B[0]=Ce=>n.value=Ce),type:"text",placeholder:f(t)("danbooruManager.searchPlaceholder"),onInput:T},null,40,$A),[[Le,n.value]]),s("button",{class:"search-btn",onClick:D},g(f(t)("tagManager.search")),1)]),s("button",{class:"add-btn",onClick:P},g(f(t)("danbooruManager.add")),1),s("button",{class:"add-btn",onClick:ae},g(f(t)("tagManager.importDanbooru")),1),s("button",{class:$e(["batch-delete-btn",{disabled:se.value.length===0}]),disabled:se.value.length===0,onClick:te},g(f(t)("tagManager.hasDeleteAction"))+" ("+g(se.value.length)+") ",11,LA)]),s("div",AA,[s("button",{disabled:a.value<=1,onClick:B[1]||(B[1]=Ce=>K(a.value-1)),class:"page-btn"},g(f(t)("loraManager.prevPage")),9,MA),s("span",IA,g(a.value)+" / "+g(l.value),1),s("button",{disabled:a.value>=l.value,onClick:B[2]||(B[2]=Ce=>K(a.value+1)),class:"page-btn"},g(f(t)("loraManager.nextPage")),9,DA),s("div",OA,[s("label",null,g(f(t)("danbooruManager.pageShow")),1),me(s("input",{"onUpdate:modelValue":B[3]||(B[3]=Ce=>r.value=Ce),type:"number",min:"10",max:"500",onChange:S,class:"page-size-input"},null,544),[[Le,r.value,void 0,{number:!0}]]),s("span",null,g(f(t)("danbooruManager.pageLimit")),1)])]),o.value.length>0?(b(),E("div",RA,[s("table",NA,[s("thead",null,[s("tr",null,[s("th",PA,[s("input",{type:"checkbox",checked:R.value,onChange:Z},null,40,FA)]),B[12]||(B[12]=s("th",{class:"id-column"},"ID",-1)),s("th",BA,g(f(t)("tagManager.description")),1),s("th",UA,g(f(t)("promptBox.translate")),1),s("th",VA,g(f(t)("tagManager.backgroundColor")),1),s("th",WA,g(f(t)("danbooruManager.hot")),1),s("th",zA,g(f(t)("danbooruManager.aliases")),1),s("th",HA,g(f(t)("danbooruManager.controle")),1)])]),s("tbody",null,[(b(!0),E(De,null,Ve(o.value,Ce=>(b(),E("tr",{key:Ce.id_index},[s("td",null,[me(s("input",{type:"checkbox",value:Ce.id_index,"onUpdate:modelValue":B[4]||(B[4]=le=>se.value=le)},null,8,jA),[[Mt,se.value]])]),s("td",null,g(Ce.id_index),1),s("td",null,g(Ce.tag),1),s("td",null,g(Ce.translate),1),s("td",null,[s("div",{class:"color-box",style:gt({backgroundColor:x(Ce.color_id)})},null,4)]),s("td",null,g(Ce.hot),1),s("td",null,g(Ce.aliases),1),s("td",null,[s("button",{class:"edit-btn",onClick:le=>j(Ce)},g(f(t)("common.edit")),9,GA),s("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:le=>Y(Ce)},g(f(t)("common.delete")),9,qA)])]))),128))])])])):(b(),E("div",KA,g(f(t)("tagManager.noResults")),1)),u.value?(b(),E("div",YA,[s("div",JA,[s("h3",null,g(d.value?f(t)("danbooruManager.edit"):f(t)("danbooruManager.add")),1),s("div",XA,[s("label",null,g(f(t)("tagManager.description")),1),me(s("input",{"onUpdate:modelValue":B[5]||(B[5]=Ce=>m.value.tag=Ce),type:"text",placeholder:f(t)("tagManager.descriptionPlaceholder")},null,8,QA),[[Le,m.value.tag]])]),s("div",ZA,[s("label",null,g(f(t)("promptBox.translate")),1),me(s("input",{"onUpdate:modelValue":B[6]||(B[6]=Ce=>m.value.translate=Ce),type:"text",placeholder:f(t)("danbooruManager.translatePlaceholder")},null,8,eM),[[Le,m.value.translate]])]),s("div",tM,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),me(s("select",{"onUpdate:modelValue":B[7]||(B[7]=Ce=>m.value.color_id=Ce)},[(b(),E(De,null,Ve(_,(Ce,le)=>s("option",{key:le,value:le},g(Ce.name),9,nM)),64))],512),[[Gt,m.value.color_id]]),s("div",{class:"color-preview",style:gt({backgroundColor:x(m.value.color_id)})},null,4)]),s("div",oM,[B[13]||(B[13]=s("label",null,"Hot",-1)),me(s("input",{"onUpdate:modelValue":B[8]||(B[8]=Ce=>m.value.hot=Ce),type:"number",min:"0"},null,512),[[Le,m.value.hot,void 0,{number:!0}]])]),d.value?ce("",!0):(b(),E("div",aM,[B[14]||(B[14]=s("label",null,"Aliases",-1)),me(s("input",{"onUpdate:modelValue":B[9]||(B[9]=Ce=>m.value.aliases=Ce),type:"number",min:"0"},null,512),[[Le,m.value.aliases,void 0,{number:!0}]])])),s("div",lM,[s("button",{onClick:G},g(f(t)("common.cancel")),1),s("button",{onClick:q},g(f(t)("common.save")),1)])])])):ce("",!0),p.value?(b(),E("div",sM,[s("div",rM,[s("h3",null,g(f(t)("common.confirmDelete")),1),s("p",null,g(f(t)("tagManager.deleteTagConfirm",{name:((ie=h.value)==null?void 0:ie.tag)||""})),1),s("div",iM,[s("button",{onClick:B[10]||(B[10]=Ce=>p.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:_e},g(f(t)("common.delete")),1)])])])):ce("",!0),c.value?(b(),E("div",uM,[s("div",cM,[s("h3",null,g(f(t)("danbooruManager.sureBatchDelete")),1),s("p",null,g(f(t)("danbooruManager.sureBatchDeleteTips1"))+" "+g(se.value.length)+" "+g(f(t)("danbooruManager.sureBatchDeleteTips2")),1),s("div",dM,[s("button",{onClick:B[11]||(B[11]=Ce=>c.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("danbooruManager.sureDelete")),1)])])])):ce("",!0),u.value||p.value||c.value?(b(),E("div",pM)):ce("",!0),He(xA,{ref_key:"importDanbooruDialog",ref:ne},null,512)])}}},[["__scopeId","data-v-0c23bf70"]]),gM={id:"weilin_comfyui_tools_prompt_ui_container_main"},mM={key:10,class:"version-update-notification"},vM={class:"version-update-content"},Ba="weilin_tools_",hM=yt({__name:"App",setup(e){Fs();const t=v(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:n}=_t(),o=v(""),a=v("look"),l=v("manager"),r=v("prompt_global"),i=v(!1),u=`${Ba}theme`,p=v(localStorage.getItem(u)==="dark"),c=v(""),d=v(!1),h=v(""),m=v(null),_=`${Ba}version_update_remind`,x=()=>{d.value=!1,m.value&&(clearTimeout(m.value),m.value=null)},k=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),x()},T=()=>{localStorage.setItem(_,"false"),x()},D={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},K=()=>{try{const F=localStorage.getItem(`${Ba}windowStates`);if(F){const B=JSON.parse(F),ie={...D};for(const Ce in B)Ce in ie&&(ie[Ce]={...D[Ce],...B[Ce],visible:B[Ce].is_default_close?!1:B[Ce].visible});return ie}}catch(F){console.error("Error loading window states:",F)}return{...D}},S=v(K());et(S,F=>{try{localStorage.setItem(`${Ba}windowStates`,JSON.stringify(F))}catch(B){console.error("Error saving window states:",B)}},{deep:!0}),ct(()=>{Object.keys(S.value).forEach(F=>{Be.registerWindow(F)}),P(),window.addEventListener("message",ne),ae()});const P=()=>{let F=localStorage.getItem(u);F||(localStorage.setItem(u,"dark"),F="dark",p.value=!0),p.value=F==="dark";const B=document.getElementById("weilin_comfyui_tools_prompt_ui_div");B&&B.setAttribute("data-theme",p.value?"dark":"light")};Rn(()=>{Object.keys(S.value).forEach(F=>{Be.unregisterWindow(F)}),window.removeEventListener("message",ne),m.value&&(clearTimeout(m.value),m.value=null)});const j=F=>{F==="prompt"&&(o.value=""),S.value[F].visible=!1},G=(F,B)=>{S.value[F]&&(S.value[F].position={...B})},q=(F,B)=>{S.value[F]&&(S.value[F].size={...B})},Y=()=>{const F={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},B={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${Ba}windowStates`,JSON.stringify(B)),localStorage.setItem(`${Ba}loraDetailState`,JSON.stringify(F)),S.value=K()};(()=>{vn.getTranslateSetting().then(F=>{localStorage.setItem("weilin_prompt_ui_translater_setting",F.data)}).catch(F=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const se=v(),R=v(),Z=v(),te=v(),z=v(),ne=F=>{F.data.type==="weilin_prompt_ui_openTagManager"?(l.value="manager",S.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openTagManager_prompt"?(l.value="prompt",S.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openPromptBox"?(o.value=F.data.id,r.value="prompt",S.value.prompt.visible=!0,i.value=!1,F.data.node==="WeiLinPromptUI"&&(i.value=!0),Ke(()=>{se.value.setPromptText(F.data.prompt)}),Be.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_openLoraManager"?(a.value="look",S.value.lora.visible=!0,Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(a.value="addLora",S.value.lora.visible=!0,Ke(()=>{Z.value.openSetSeed(0,"")}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(a.value="addLora",S.value.lora.visible=!0,Ke(()=>{Z.value.openSetSeed(1,F.data.seed)}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(a.value="addLora",S.value.lora.visible=!0,Ke(()=>{Z.value.openSetSeed(2,F.data.seed)}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openHistoryManager"?(S.value.history.visible=!0,Be.setActiveWindow("history")):F.data.type==="weilin_prompt_ui_openAiWindow"?(S.value.ai_window.visible=!0,Be.setActiveWindow("ai_window")):F.data.type==="weilin_prompt_ui_open_node_list_window"?(S.value.node_list_window.visible=!0,Be.setActiveWindow("node_list_window")):F.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_open_global_prompt_box"?(r.value="prompt_global",o.value="global",S.value.prompt.visible=!0,i.value=!1,Ke(()=>{se.value.setPromptText(c.value)}),Be.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_open_global_tag_manager"?(l.value="manager",S.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_open_global_lora_manager"?(a.value="look",S.value.lora.visible=!0,Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?c.value=F.data.data:F.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":F.data.type==="weilin_prompt_ui_restore_window"?Y():F.data.type==="weilin_prompt_ui_open_cloud_window"?(S.value.cloud_window.visible=!0,Be.setActiveWindow("cloud_window")):F.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(S.value.lora_stack_window.visible=!0,Ke(()=>{R.value.initLoraStack(F.data.prompt,F.data.seed)}),Be.setActiveWindow("lora_stack_window")):F.data.type==="weilin_prompt_ui_openLoraDetail"?te.value.open({name:F.data.lora}):F.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(S.value.danbooru_manager_window.visible=!0,Be.setActiveWindow("danbooru_manager_window")):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_response"?o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_go_random_response"&&o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:F.data.data},"*")},ae=async()=>{try{if(localStorage.getItem(_)==="false"){console.info("WeiLin-Comfyui-Tools ");return}const B=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!B.ok){console.error(":",B.status);return}const Ce=(await B.text()).match(/export const version = "([^"]+)"/);if(Ce&&Ce[1]){const le=Ce[1];console.info(`WeiLin-Comfyui-Tools GitHub ${le}`),le!==yo&&(h.value=`WeiLin-Comfyui-Tools  ${le} ${yo}`,d.value=!0,m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{d.value=!1,m.value=null},1e4),console.info(`WeiLin-Comfyui-Tools  ${le} ${yo} GitHubhttps://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(F){console.error("WeiLin-Comfyui-Tools :",F)}};return(F,B)=>(b(),E("div",gM,[S.value.prompt.visible?(b(),xt($n,{key:0,name:"promptBox",title:r.value==="prompt"?f(n)("promptBox.windowTitle"):f(n)("promptBox.windowTitleGlobal"),position:S.value.prompt.position,size:S.value.prompt.size,"z-index":f(Be).getZIndex("prompt"),"onUpdate:position":B[0]||(B[0]=ie=>G("prompt",ie)),"onUpdate:size":B[1]||(B[1]=ie=>q("prompt",ie)),onActive:B[2]||(B[2]=ie=>f(Be).setActiveWindow("prompt")),onClose:B[3]||(B[3]=ie=>j("prompt"))},{default:dt(()=>[He(RE,{promptManager:r.value,hasPromptLoraStack:i.value,ref_key:"promptBoxRef",ref:se},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.tag.visible?(b(),xt($n,{key:1,name:"tagManager",title:f(n)("tagManager.windowTitle"),position:S.value.tag.position,size:S.value.tag.size,"z-index":f(Be).getZIndex("tag"),"onUpdate:position":B[4]||(B[4]=ie=>G("tag",ie)),"onUpdate:size":B[5]||(B[5]=ie=>q("tag",ie)),onActive:B[6]||(B[6]=ie=>f(Be).setActiveWindow("tag")),onClose:B[7]||(B[7]=ie=>j("tag"))},{default:dt(()=>[He(Hg,{tagManager:l.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.lora.visible?(b(),xt($n,{key:2,name:"loraManager",title:f(n)("loraManager.windowTitle"),position:S.value.lora.position,size:S.value.lora.size,"z-index":f(Be).getZIndex("lora"),"onUpdate:position":B[8]||(B[8]=ie=>G("lora",ie)),"onUpdate:size":B[9]||(B[9]=ie=>q("lora",ie)),onActive:B[10]||(B[10]=ie=>f(Be).setActiveWindow("lora")),onClose:B[11]||(B[11]=ie=>j("lora"))},{default:dt(()=>[He(Xg,{loraManager:a.value,ref_key:"loraManagerRef",ref:Z},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.history.visible?(b(),xt($n,{key:3,name:"historyManager",title:f(n)("history.windowTitle"),position:S.value.history.position,size:S.value.history.size,"z-index":f(Be).getZIndex("history"),"onUpdate:position":B[12]||(B[12]=ie=>G("history",ie)),"onUpdate:size":B[13]||(B[13]=ie=>q("history",ie)),onActive:B[14]||(B[14]=ie=>f(Be).setActiveWindow("history")),onClose:B[15]||(B[15]=ie=>j("history"))},{default:dt(()=>[He($$)]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.ai_window.visible?(b(),xt($n,{key:4,name:"aiWindow",title:f(n)("aiWindow.windowTitle"),position:S.value.ai_window.position,size:S.value.ai_window.size,"z-index":f(Be).getZIndex("ai_window"),"onUpdate:position":B[16]||(B[16]=ie=>G("ai_window",ie)),"onUpdate:size":B[17]||(B[17]=ie=>q("ai_window",ie)),onActive:B[18]||(B[18]=ie=>f(Be).setActiveWindow("ai_window")),onClose:B[19]||(B[19]=ie=>j("ai_window"))},{default:dt(()=>[He(Z$)]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.node_list_window.visible?(b(),xt($n,{key:5,name:"nodeListWindow",title:f(n)("nodeListWindow.windowTitle"),position:S.value.node_list_window.position,size:S.value.node_list_window.size,"z-index":f(Be).getZIndex("node_list_window"),"onUpdate:position":B[20]||(B[20]=ie=>G("node_list_window",ie)),"onUpdate:size":B[21]||(B[21]=ie=>q("node_list_window",ie)),onActive:B[22]||(B[22]=ie=>f(Be).setActiveWindow("node_list_window")),onClose:B[23]||(B[23]=ie=>j("node_list_window"))},{default:dt(()=>[He(uL)]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.cloud_window.visible?(b(),xt($n,{key:6,name:"cloudWindow",title:f(n)("cloudWindow.windowTitle"),position:S.value.cloud_window.position,size:S.value.cloud_window.size,"z-index":f(Be).getZIndex("cloud_window"),"onUpdate:position":B[24]||(B[24]=ie=>G("cloud_window",ie)),"onUpdate:size":B[25]||(B[25]=ie=>q("cloud_window",ie)),onActive:B[26]||(B[26]=ie=>f(Be).setActiveWindow("cloud_window")),onClose:B[27]||(B[27]=ie=>j("cloud_window"))},{default:dt(()=>[He(SL)]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.lora_stack_window.visible?(b(),xt($n,{key:7,name:"loraStackWindow",title:f(n)("controls.loraStack"),position:S.value.lora_stack_window.position,size:S.value.lora_stack_window.size,"z-index":f(Be).getZIndex("lora_stack_window"),"onUpdate:position":B[28]||(B[28]=ie=>G("lora_stack_window",ie)),"onUpdate:size":B[29]||(B[29]=ie=>q("lora_stack_window",ie)),onActive:B[30]||(B[30]=ie=>f(Be).setActiveWindow("lora_stack_window")),onClose:B[31]||(B[31]=ie=>j("lora_stack_window"))},{default:dt(()=>[He(UL,{ref_key:"loraStackRef",ref:R},null,512)]),_:1},8,["title","position","size","z-index"])):ce("",!0),S.value.danbooru_manager_window.visible?(b(),xt($n,{key:8,name:"DanbooruManagerWindow",title:f(n)("controls.danbooruManager"),position:S.value.danbooru_manager_window.position,size:S.value.danbooru_manager_window.size,"z-index":f(Be).getZIndex("danbooru_manager_window"),"onUpdate:position":B[32]||(B[32]=ie=>G("danbooru_manager_window",ie)),"onUpdate:size":B[33]||(B[33]=ie=>q("danbooru_manager_window",ie)),onActive:B[34]||(B[34]=ie=>f(Be).setActiveWindow("danbooru_manager_window")),onClose:B[35]||(B[35]=ie=>j("danbooru_manager_window"))},{default:dt(()=>[He(fM,{ref_key:"danbooruManagerRef",ref:z},null,512)]),_:1},8,["title","position","size","z-index"])):ce("",!0),t.value?(b(),xt(R$,{key:9})):ce("",!0),He(lr,{ref_key:"loraDetailLoraStackRef",ref:te},null,512),d.value?(b(),E("div",mM,[s("div",vM,[s("span",null,g(h.value),1),s("div",{class:"version-update-actions"},[s("button",{class:"goto-github-btn",onClick:k},"GitHub"),s("button",{class:"no-remind-btn",onClick:T},""),s("button",{class:"close-version-update",onClick:x},"")])])])):ce("",!0)]))}},[["__scopeId","data-v-b86e2bdb"]]);function _M(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rr={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var yM=rr.exports,o1;function bM(){return o1||(o1=1,(function(e,t){(function(o,a){e.exports=a()})(yM,function(){return(function(){var n={686:(function(l,r,i){i.d(r,{default:function(){return Ce}});var u=i(279),p=i.n(u),c=i(370),d=i.n(c),h=i(817),m=i.n(h);function _(le){try{return document.execCommand(le)}catch{return!1}}var x=function(de){var ve=m()(de);return _("cut"),ve},k=x;function T(le){var de=document.documentElement.getAttribute("dir")==="rtl",ve=document.createElement("textarea");ve.style.fontSize="12pt",ve.style.border="0",ve.style.padding="0",ve.style.margin="0",ve.style.position="absolute",ve.style[de?"right":"left"]="-9999px";var oe=window.pageYOffset||document.documentElement.scrollTop;return ve.style.top="".concat(oe,"px"),ve.setAttribute("readonly",""),ve.value=le,ve}var D=function(de,ve){var oe=T(de);ve.container.appendChild(oe);var X=m()(oe);return _("copy"),oe.remove(),X},K=function(de){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},oe="";return typeof de=="string"?oe=D(de,ve):de instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(de==null?void 0:de.type)?oe=D(de.value,ve):(oe=m()(de),_("copy")),oe},S=K;function P(le){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(ve){return typeof ve}:P=function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},P(le)}var j=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=de.action,oe=ve===void 0?"copy":ve,X=de.container,M=de.target,U=de.text;if(oe!=="copy"&&oe!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(M!==void 0)if(M&&P(M)==="object"&&M.nodeType===1){if(oe==="copy"&&M.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(oe==="cut"&&(M.hasAttribute("readonly")||M.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(U)return S(U,{container:X});if(M)return oe==="cut"?k(M):S(M,{container:X})},G=j;function q(le){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(ve){return typeof ve}:q=function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},q(le)}function Y(le,de){if(!(le instanceof de))throw new TypeError("Cannot call a class as a function")}function _e(le,de){for(var ve=0;ve<de.length;ve++){var oe=de[ve];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(le,oe.key,oe)}}function se(le,de,ve){return de&&_e(le.prototype,de),ve&&_e(le,ve),le}function R(le,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(de&&de.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),de&&Z(le,de)}function Z(le,de){return Z=Object.setPrototypeOf||function(oe,X){return oe.__proto__=X,oe},Z(le,de)}function te(le){var de=ae();return function(){var oe=F(le),X;if(de){var M=F(this).constructor;X=Reflect.construct(oe,arguments,M)}else X=oe.apply(this,arguments);return z(this,X)}}function z(le,de){return de&&(q(de)==="object"||typeof de=="function")?de:ne(le)}function ne(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(le){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(ve){return ve.__proto__||Object.getPrototypeOf(ve)},F(le)}function B(le,de){var ve="data-clipboard-".concat(le);if(de.hasAttribute(ve))return de.getAttribute(ve)}var ie=(function(le){R(ve,le);var de=te(ve);function ve(oe,X){var M;return Y(this,ve),M=de.call(this),M.resolveOptions(X),M.listenClick(oe),M}return se(ve,[{key:"resolveOptions",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof X.action=="function"?X.action:this.defaultAction,this.target=typeof X.target=="function"?X.target:this.defaultTarget,this.text=typeof X.text=="function"?X.text:this.defaultText,this.container=q(X.container)==="object"?X.container:document.body}},{key:"listenClick",value:function(X){var M=this;this.listener=d()(X,"click",function(U){return M.onClick(U)})}},{key:"onClick",value:function(X){var M=X.delegateTarget||X.currentTarget,U=this.action(M)||"copy",H=G({action:U,container:this.container,target:this.target(M),text:this.text(M)});this.emit(H?"success":"error",{action:U,text:H,trigger:M,clearSelection:function(){M&&M.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(X){return B("action",X)}},{key:"defaultTarget",value:function(X){var M=B("target",X);if(M)return document.querySelector(M)}},{key:"defaultText",value:function(X){return B("text",X)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(X){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return S(X,M)}},{key:"cut",value:function(X){return k(X)}},{key:"isSupported",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],M=typeof X=="string"?[X]:X,U=!!document.queryCommandSupported;return M.forEach(function(H){U=U&&!!document.queryCommandSupported(H)}),U}}]),ve})(p()),Ce=ie}),828:(function(l){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function u(p,c){for(;p&&p.nodeType!==r;){if(typeof p.matches=="function"&&p.matches(c))return p;p=p.parentNode}}l.exports=u}),438:(function(l,r,i){var u=i(828);function p(h,m,_,x,k){var T=d.apply(this,arguments);return h.addEventListener(_,T,k),{destroy:function(){h.removeEventListener(_,T,k)}}}function c(h,m,_,x,k){return typeof h.addEventListener=="function"?p.apply(null,arguments):typeof _=="function"?p.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(T){return p(T,m,_,x,k)}))}function d(h,m,_,x){return function(k){k.delegateTarget=u(k.target,m),k.delegateTarget&&x.call(h,k)}}l.exports=c}),879:(function(l,r){r.node=function(i){return i!==void 0&&i instanceof HTMLElement&&i.nodeType===1},r.nodeList=function(i){var u=Object.prototype.toString.call(i);return i!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in i&&(i.length===0||r.node(i[0]))},r.string=function(i){return typeof i=="string"||i instanceof String},r.fn=function(i){var u=Object.prototype.toString.call(i);return u==="[object Function]"}}),370:(function(l,r,i){var u=i(879),p=i(438);function c(_,x,k){if(!_&&!x&&!k)throw new Error("Missing required arguments");if(!u.string(x))throw new TypeError("Second argument must be a String");if(!u.fn(k))throw new TypeError("Third argument must be a Function");if(u.node(_))return d(_,x,k);if(u.nodeList(_))return h(_,x,k);if(u.string(_))return m(_,x,k);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(_,x,k){return _.addEventListener(x,k),{destroy:function(){_.removeEventListener(x,k)}}}function h(_,x,k){return Array.prototype.forEach.call(_,function(T){T.addEventListener(x,k)}),{destroy:function(){Array.prototype.forEach.call(_,function(T){T.removeEventListener(x,k)})}}}function m(_,x,k){return p(document.body,_,x,k)}l.exports=c}),817:(function(l){function r(i){var u;if(i.nodeName==="SELECT")i.focus(),u=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var p=i.hasAttribute("readonly");p||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),p||i.removeAttribute("readonly"),u=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var c=window.getSelection(),d=document.createRange();d.selectNodeContents(i),c.removeAllRanges(),c.addRange(d),u=c.toString()}return u}l.exports=r}),279:(function(l){function r(){}r.prototype={on:function(i,u,p){var c=this.e||(this.e={});return(c[i]||(c[i]=[])).push({fn:u,ctx:p}),this},once:function(i,u,p){var c=this;function d(){c.off(i,d),u.apply(p,arguments)}return d._=u,this.on(i,d,p)},emit:function(i){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[i]||[]).slice(),c=0,d=p.length;for(c;c<d;c++)p[c].fn.apply(p[c].ctx,u);return this},off:function(i,u){var p=this.e||(this.e={}),c=p[i],d=[];if(c&&u)for(var h=0,m=c.length;h<m;h++)c[h].fn!==u&&c[h].fn._!==u&&d.push(c[h]);return d.length?p[i]=d:delete p[i],this}},l.exports=r,l.exports.TinyEmitter=r})},o={};function a(l){if(o[l])return o[l].exports;var r=o[l]={exports:{}};return n[l](r,r.exports,a),r.exports}return(function(){a.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(r,{a:r}),r}})(),(function(){a.d=function(l,r){for(var i in r)a.o(r,i)&&!a.o(l,i)&&Object.defineProperty(l,i,{enumerable:!0,get:r[i]})}})(),(function(){a.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)}})(),a(686)})().default})})(rr)),rr.exports}var wM=bM();const SM=_M(wM),xM=e=>({toClipboard(t,n){return new Promise((o,a)=>{const l=document.createElement("button"),r=new SM(l,{text:()=>t,action:()=>"copy",container:n!==void 0?n:document.body});r.on("success",i=>{r.destroy(),o(i)}),r.on("error",i=>{r.destroy(),a(i)}),document.body.appendChild(l),l.click(),document.body.removeChild(l)})}}),TM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,kM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,CM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function EM(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){$M(e);return}return t}function $M(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function LM(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!CM.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(TM.test(e)||kM.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,EM)}return JSON.parse(e)}catch(o){if(t.strict)throw o;return e}}function AM(e,t){if(e==null)return;let n=e;for(let o=0;o<t.length;o++){if(n==null||n[t[o]]==null)return;n=n[t[o]]}return n}function mu(e,t,n){if(n.length===0)return t;const o=n[0];return n.length>1&&(t=mu(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,o)?Number.isInteger(Number(n[1]))?[]:{}:e[o],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(o))&&Array.isArray(e)?e.slice()[o]:Object.assign({},e,{[o]:t})}function a1(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const o in e)n[o]=e[o];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const o in e)n[o]=e[o];return n}return mu(e,a1(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function l1(e,t){return t.map(n=>n.split(".")).map(n=>[n,AM(e,n)]).filter(n=>n[1]!==void 0).reduce((n,o)=>mu(n,o[1],o[0]),{})}function s1(e,t){return t.map(n=>n.split(".")).reduce((n,o)=>a1(n,o),e)}function r1(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:r,beforeHydrate:i,afterHydrate:u},p,c=!0){try{c&&(i==null||i(p));const d=t.getItem(o);if(d){const h=n.deserialize(d),m=l?l1(h,l):h,_=r?s1(m,r):m;e.$patch(_)}c&&(u==null||u(p))}catch(d){a&&console.error("[pinia-plugin-persistedstate]",d)}}function i1(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:r}){try{const i=l?l1(e,l):e,u=r?s1(i,r):i,p=n.serialize(u);t.setItem(o,p)}catch(i){a&&console.error("[pinia-plugin-persistedstate]",i)}}function MM(e,t,n){const{pinia:o,store:a,options:{persist:l=n}}=e;if(!l)return;if(!(a.$id in o.state.value)){const u=o._s.get(a.$id.replace("__hot:",""));u&&Promise.resolve().then(()=>u.$persist());return}const i=(Array.isArray(l)?l:l===!0?[{}]:[l]).map(t);a.$hydrate=({runHooks:u=!0}={})=>{i.forEach(p=>{r1(a,p,e,u)})},a.$persist=()=>{i.forEach(u=>{i1(a.$state,u)})},i.forEach(u=>{r1(a,u,e),a.$subscribe((p,c)=>i1(c,u),{detached:!0})})}function IM(e={}){return function(t){MM(t,n=>({key:(e.key?e.key:o=>o)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:o=>JSON.stringify(o),deserialize:o=>LM(o)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var DM=IM();const{toClipboard:OM}=xM(),vu=document.createElement("div");vu.id="weilin_comfyui_tools_prompt_ui_div",document.querySelector("body").appendChild(vu);const u1=i_();u1.use(DM);const ir=ah(hM);ir.use(u1),ir.use($l),U0(),ir.config.globalProperties.$copyText=OM,ir.mount(vu),console.log("WeiLin Prompt UI is running - version "+yo),console.log("WeiLin  -  "+yo)}));
//# sourceMappingURL=main.entry.js.map
