(function(ua){typeof define=="function"&&define.amd?define(ua):ua()})(function(){"use strict";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ua(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Tt={},ca=[],qn=()=>{},ym=()=>!1,Hl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),yi=e=>e.startsWith("onUpdate:"),Ht=Object.assign,bi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bm=Object.prototype.hasOwnProperty,gt=(e,t)=>bm.call(e,t),We=Array.isArray,da=e=>Ga(e)==="[object Map]",pa=e=>Ga(e)==="[object Set]",bu=e=>Ga(e)==="[object Date]",Ge=e=>typeof e=="function",Rt=e=>typeof e=="string",Pn=e=>typeof e=="symbol",kt=e=>e!==null&&typeof e=="object",wu=e=>(kt(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),xu=Object.prototype.toString,Ga=e=>xu.call(e),wm=e=>Ga(e).slice(8,-1),Su=e=>Ga(e)==="[object Object]",wi=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qa=ua(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xm=/-(\w)/g,Ln=jl(e=>e.replace(xm,(t,n)=>n?n.toUpperCase():"")),Sm=/\B([A-Z])/g,xo=jl(e=>e.replace(Sm,"-$1").toLowerCase()),Gl=jl(e=>e.charAt(0).toUpperCase()+e.slice(1)),xi=jl(e=>e?`on${Gl(e)}`:""),So=(e,t)=>!Object.is(e,t),ql=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Tu=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Kl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Tm=e=>{const t=Rt(e)?Number(e):NaN;return isNaN(t)?e:t};let ku;const Yl=()=>ku||(ku=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ct(e){if(We(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=Rt(o)?$m(o):ct(o);if(a)for(const l in a)t[l]=a[l]}return t}else if(Rt(e)||kt(e))return e}const km=/;(?![^(]*\))/g,Cm=/:([^]+)/,Em=/\/\*[^]*?\*\//g;function $m(e){const t={};return e.replace(Em,"").split(km).forEach(n=>{if(n){const o=n.split(Cm);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Le(e){let t="";if(Rt(e))t=e;else if(We(e))for(let n=0;n<e.length;n++){const o=Le(e[n]);o&&(t+=o+" ")}else if(kt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Lm=ua("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Cu(e){return!!e||e===""}function Am(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=jo(e[o],t[o]);return n}function jo(e,t){if(e===t)return!0;let n=bu(e),o=bu(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Pn(e),o=Pn(t),n||o)return e===t;if(n=We(e),o=We(t),n||o)return n&&o?Am(e,t):!1;if(n=kt(e),o=kt(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,l=Object.keys(t).length;if(a!==l)return!1;for(const i in e){const r=e.hasOwnProperty(i),u=t.hasOwnProperty(i);if(r&&!u||!r&&u||!jo(e[i],t[i]))return!1}}return String(e)===String(t)}function Si(e,t){return e.findIndex(n=>jo(n,t))}const Eu=e=>!!(e&&e.__v_isRef===!0),g=e=>Rt(e)?e:e==null?"":We(e)||kt(e)&&(e.toString===xu||!Ge(e.toString))?Eu(e)?g(e.value):JSON.stringify(e,$u,2):String(e),$u=(e,t)=>Eu(t)?$u(e,t.value):da(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],l)=>(n[Ti(o,l)+" =>"]=a,n),{})}:pa(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ti(n))}:Pn(t)?Ti(t):kt(t)&&!We(t)&&!Su(t)?String(t):t,Ti=(e,t="")=>{var n;return Pn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let un;class Lu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=un,!t&&un&&(this.index=(un.scopes||(un.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=un;try{return un=this,t()}finally{un=n}}}on(){un=this}off(){un=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function ki(e){return new Lu(e)}function Au(){return un}function Mm(e,t=!1){un&&un.cleanups.push(e)}let Et;const Ci=new WeakSet;class Mu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,un&&un.active&&un.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ci.has(this)&&(Ci.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Du(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fu(this),Ru(this);const t=Et,n=Fn;Et=this,Fn=!0;try{return this.fn()}finally{Ou(this),Et=t,Fn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ai(t);this.deps=this.depsTail=void 0,Fu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ci.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Li(this)&&this.run()}get dirty(){return Li(this)}}let Iu=0,Ka,Ya;function Du(e,t=!1){if(e.flags|=8,t){e.next=Ya,Ya=e;return}e.next=Ka,Ka=e}function Ei(){Iu++}function $i(){if(--Iu>0)return;if(Ya){let t=Ya;for(Ya=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ka;){let t=Ka;for(Ka=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ru(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ou(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),Ai(o),Im(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Li(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ja))return;e.globalVersion=Ja;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Li(e)){e.flags&=-3;return}const n=Et,o=Fn;Et=e,Fn=!0;try{Ru(e);const a=e.fn(e._value);(t.version===0||So(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Et=n,Fn=o,Ou(e),e.flags&=-3}}function Ai(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)Ai(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Im(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Fn=!0;const Pu=[];function no(){Pu.push(Fn),Fn=!1}function oo(){const e=Pu.pop();Fn=e===void 0?!0:e}function Fu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Et;Et=void 0;try{t()}finally{Et=n}}}let Ja=0;class Dm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Et||!Fn||Et===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Et)n=this.activeLink=new Dm(Et,this),Et.deps?(n.prevDep=Et.depsTail,Et.depsTail.nextDep=n,Et.depsTail=n):Et.deps=Et.depsTail=n,Bu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Et.depsTail,n.nextDep=void 0,Et.depsTail.nextDep=n,Et.depsTail=n,Et.deps===n&&(Et.deps=o)}return n}trigger(t){this.version++,Ja++,this.notify(t)}notify(t){Ei();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$i()}}}function Bu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Bu(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Jl=new WeakMap,Go=Symbol(""),Ii=Symbol(""),Xa=Symbol("");function nn(e,t,n){if(Fn&&Et){let o=Jl.get(e);o||Jl.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Mi),a.map=o,a.key=n),a.track()}}function ao(e,t,n,o,a,l){const i=Jl.get(e);if(!i){Ja++;return}const r=u=>{u&&u.trigger()};if(Ei(),t==="clear")i.forEach(r);else{const u=We(e),p=u&&wi(n);if(u&&n==="length"){const d=Number(o);i.forEach((c,v)=>{(v==="length"||v===Xa||!Pn(v)&&v>=d)&&r(c)})}else switch((n!==void 0||i.has(void 0))&&r(i.get(n)),p&&r(i.get(Xa)),t){case"add":u?p&&r(i.get("length")):(r(i.get(Go)),da(e)&&r(i.get(Ii)));break;case"delete":u||(r(i.get(Go)),da(e)&&r(i.get(Ii)));break;case"set":da(e)&&r(i.get(Go));break}}$i()}function Rm(e,t){const n=Jl.get(e);return n&&n.get(t)}function fa(e){const t=nt(e);return t===e?t:(nn(t,"iterate",Xa),An(e)?t:t.map(on))}function Xl(e){return nn(e=nt(e),"iterate",Xa),e}const Om={__proto__:null,[Symbol.iterator](){return Di(this,Symbol.iterator,on)},concat(...e){return fa(this).concat(...e.map(t=>We(t)?fa(t):t))},entries(){return Di(this,"entries",e=>(e[1]=on(e[1]),e))},every(e,t){return lo(this,"every",e,t,void 0,arguments)},filter(e,t){return lo(this,"filter",e,t,n=>n.map(on),arguments)},find(e,t){return lo(this,"find",e,t,on,arguments)},findIndex(e,t){return lo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return lo(this,"findLast",e,t,on,arguments)},findLastIndex(e,t){return lo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return lo(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ri(this,"includes",e)},indexOf(...e){return Ri(this,"indexOf",e)},join(e){return fa(this).join(e)},lastIndexOf(...e){return Ri(this,"lastIndexOf",e)},map(e,t){return lo(this,"map",e,t,void 0,arguments)},pop(){return Qa(this,"pop")},push(...e){return Qa(this,"push",e)},reduce(e,...t){return Uu(this,"reduce",e,t)},reduceRight(e,...t){return Uu(this,"reduceRight",e,t)},shift(){return Qa(this,"shift")},some(e,t){return lo(this,"some",e,t,void 0,arguments)},splice(...e){return Qa(this,"splice",e)},toReversed(){return fa(this).toReversed()},toSorted(e){return fa(this).toSorted(e)},toSpliced(...e){return fa(this).toSpliced(...e)},unshift(...e){return Qa(this,"unshift",e)},values(){return Di(this,"values",on)}};function Di(e,t,n){const o=Xl(e),a=o[t]();return o!==e&&!An(e)&&(a._next=a.next,a.next=()=>{const l=a._next();return l.value&&(l.value=n(l.value)),l}),a}const Nm=Array.prototype;function lo(e,t,n,o,a,l){const i=Xl(e),r=i!==e&&!An(e),u=i[t];if(u!==Nm[t]){const c=u.apply(e,l);return r?on(c):c}let p=n;i!==e&&(r?p=function(c,v){return n.call(this,on(c),v,e)}:n.length>2&&(p=function(c,v){return n.call(this,c,v,e)}));const d=u.call(i,p,o);return r&&a?a(d):d}function Uu(e,t,n,o){const a=Xl(e);let l=n;return a!==e&&(An(e)?n.length>3&&(l=function(i,r,u){return n.call(this,i,r,u,e)}):l=function(i,r,u){return n.call(this,i,on(r),u,e)}),a[t](l,...o)}function Ri(e,t,n){const o=nt(e);nn(o,"iterate",Xa);const a=o[t](...n);return(a===-1||a===!1)&&Ni(n[0])?(n[0]=nt(n[0]),o[t](...n)):a}function Qa(e,t,n=[]){no(),Ei();const o=nt(e)[t].apply(e,n);return $i(),oo(),o}const Pm=ua("__proto__,__v_isRef,__isVue"),Vu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pn));function Fm(e){Pn(e)||(e=String(e));const t=nt(this);return nn(t,"has",e),t.hasOwnProperty(e)}class Wu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return l;if(n==="__v_raw")return o===(a?l?Ku:qu:l?Gu:ju).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=We(t);if(!a){let u;if(i&&(u=Om[n]))return u;if(n==="hasOwnProperty")return Fm}const r=Reflect.get(t,n,Ot(t)?t:o);return(Pn(n)?Vu.has(n):Pm(n))||(a||nn(t,"get",n),l)?r:Ot(r)?i&&wi(n)?r:r.value:kt(r)?a?Yu(r):ts(r):r}}class zu extends Wu{constructor(t=!1){super(!1,t)}set(t,n,o,a){let l=t[n];if(!this._isShallow){const u=qo(l);if(!An(o)&&!qo(o)&&(l=nt(l),o=nt(o)),!We(t)&&Ot(l)&&!Ot(o))return u?!1:(l.value=o,!0)}const i=We(t)&&wi(n)?Number(n)<t.length:gt(t,n),r=Reflect.set(t,n,o,Ot(t)?t:a);return t===nt(a)&&(i?So(o,l)&&ao(t,"set",n,o):ao(t,"add",n,o)),r}deleteProperty(t,n){const o=gt(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&ao(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Pn(n)||!Vu.has(n))&&nn(t,"has",n),o}ownKeys(t){return nn(t,"iterate",We(t)?"length":Go),Reflect.ownKeys(t)}}class Hu extends Wu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Bm=new zu,Um=new Hu,Vm=new zu(!0),Wm=new Hu(!0),Oi=e=>e,Ql=e=>Reflect.getPrototypeOf(e);function zm(e,t,n){return function(...o){const a=this.__v_raw,l=nt(a),i=da(l),r=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,p=a[e](...o),d=n?Oi:t?Fi:on;return!t&&nn(l,"iterate",u?Ii:Go),{next(){const{value:c,done:v}=p.next();return v?{value:c,done:v}:{value:r?[d(c[0]),d(c[1])]:d(c),done:v}},[Symbol.iterator](){return this}}}}function Zl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hm(e,t){const n={get(a){const l=this.__v_raw,i=nt(l),r=nt(a);e||(So(a,r)&&nn(i,"get",a),nn(i,"get",r));const{has:u}=Ql(i),p=t?Oi:e?Fi:on;if(u.call(i,a))return p(l.get(a));if(u.call(i,r))return p(l.get(r));l!==i&&l.get(a)},get size(){const a=this.__v_raw;return!e&&nn(nt(a),"iterate",Go),Reflect.get(a,"size",a)},has(a){const l=this.__v_raw,i=nt(l),r=nt(a);return e||(So(a,r)&&nn(i,"has",a),nn(i,"has",r)),a===r?l.has(a):l.has(a)||l.has(r)},forEach(a,l){const i=this,r=i.__v_raw,u=nt(r),p=t?Oi:e?Fi:on;return!e&&nn(u,"iterate",Go),r.forEach((d,c)=>a.call(l,p(d),p(c),i))}};return Ht(n,e?{add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear")}:{add(a){!t&&!An(a)&&!qo(a)&&(a=nt(a));const l=nt(this);return Ql(l).has.call(l,a)||(l.add(a),ao(l,"add",a,a)),this},set(a,l){!t&&!An(l)&&!qo(l)&&(l=nt(l));const i=nt(this),{has:r,get:u}=Ql(i);let p=r.call(i,a);p||(a=nt(a),p=r.call(i,a));const d=u.call(i,a);return i.set(a,l),p?So(l,d)&&ao(i,"set",a,l):ao(i,"add",a,l),this},delete(a){const l=nt(this),{has:i,get:r}=Ql(l);let u=i.call(l,a);u||(a=nt(a),u=i.call(l,a)),r&&r.call(l,a);const p=l.delete(a);return u&&ao(l,"delete",a,void 0),p},clear(){const a=nt(this),l=a.size!==0,i=a.clear();return l&&ao(a,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=zm(a,e,t)}),n}function es(e,t){const n=Hm(e,t);return(o,a,l)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(gt(n,a)&&a in o?n:o,a,l)}const jm={get:es(!1,!1)},Gm={get:es(!1,!0)},qm={get:es(!0,!1)},Km={get:es(!0,!0)},ju=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Ku=new WeakMap;function Ym(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jm(e){return e.__v_skip||!Object.isExtensible(e)?0:Ym(wm(e))}function ts(e){return qo(e)?e:ns(e,!1,Bm,jm,ju)}function Xm(e){return ns(e,!1,Vm,Gm,Gu)}function Yu(e){return ns(e,!0,Um,qm,qu)}function lI(e){return ns(e,!0,Wm,Km,Ku)}function ns(e,t,n,o,a){if(!kt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=a.get(e);if(l)return l;const i=Jm(e);if(i===0)return e;const r=new Proxy(e,i===2?o:n);return a.set(e,r),r}function To(e){return qo(e)?To(e.__v_raw):!!(e&&e.__v_isReactive)}function qo(e){return!!(e&&e.__v_isReadonly)}function An(e){return!!(e&&e.__v_isShallow)}function Ni(e){return e?!!e.__v_raw:!1}function nt(e){const t=e&&e.__v_raw;return t?nt(t):e}function Pi(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&Tu(e,"__v_skip",!0),e}const on=e=>kt(e)?ts(e):e,Fi=e=>kt(e)?Yu(e):e;function Ot(e){return e?e.__v_isRef===!0:!1}function h(e){return Ju(e,!1)}function Qm(e){return Ju(e,!0)}function Ju(e,t){return Ot(e)?e:new Zm(e,t)}class Zm{constructor(t,n){this.dep=new Mi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:nt(t),this._value=n?t:on(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||An(t)||qo(t);t=o?t:nt(t),So(t,n)&&(this._rawValue=t,this._value=o?t:on(t),this.dep.trigger())}}function f(e){return Ot(e)?e.value:e}const e1={get:(e,t,n)=>t==="__v_raw"?e:f(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return Ot(a)&&!Ot(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Xu(e){return To(e)?e:new Proxy(e,e1)}function t1(e){const t=We(e)?new Array(e.length):{};for(const n in e)t[n]=o1(e,n);return t}class n1{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Rm(nt(this._object),this._key)}}function o1(e,t,n){const o=e[t];return Ot(o)?o:new n1(e,t,n)}class a1{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Mi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ja-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return Du(this,!0),!0}get value(){const t=this.dep.track();return Nu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function l1(e,t,n=!1){let o,a;return Ge(e)?o=e:(o=e.get,a=e.set),new a1(o,a,n)}const os={},as=new WeakMap;let Ko;function s1(e,t=!1,n=Ko){if(n){let o=as.get(n);o||as.set(n,o=[]),o.push(e)}}function i1(e,t,n=Tt){const{immediate:o,deep:a,once:l,scheduler:i,augmentJob:r,call:u}=n,p=x=>a?x:An(x)||a===!1||a===0?so(x,1):so(x);let d,c,v,m,y=!1,S=!1;if(Ot(e)?(c=()=>e.value,y=An(e)):To(e)?(c=()=>p(e),y=!0):We(e)?(S=!0,y=e.some(x=>To(x)||An(x)),c=()=>e.map(x=>{if(Ot(x))return x.value;if(To(x))return p(x);if(Ge(x))return u?u(x,2):x()})):Ge(e)?t?c=u?()=>u(e,2):e:c=()=>{if(v){no();try{v()}finally{oo()}}const x=Ko;Ko=d;try{return u?u(e,3,[m]):e(m)}finally{Ko=x}}:c=qn,t&&a){const x=c,N=a===!0?1/0:a;c=()=>so(x(),N)}const $=Au(),T=()=>{d.stop(),$&&$.active&&bi($.effects,d)};if(l&&t){const x=t;t=(...N)=>{x(...N),T()}}let D=S?new Array(e.length).fill(os):os;const J=x=>{if(!(!(d.flags&1)||!d.dirty&&!x))if(t){const N=d.run();if(a||y||(S?N.some((H,j)=>So(H,D[j])):So(N,D))){v&&v();const H=Ko;Ko=d;try{const j=[N,D===os?void 0:S&&D[0]===os?[]:D,m];u?u(t,3,j):t(...j),D=N}finally{Ko=H}}}else d.run()};return r&&r(J),d=new Mu(c),d.scheduler=i?()=>i(J,!1):J,m=x=>s1(x,!1,d),v=d.onStop=()=>{const x=as.get(d);if(x){if(u)u(x,4);else for(const N of x)N();as.delete(d)}},t?o?J(!0):D=d.run():i?i(J.bind(null,!0),!0):d.run(),T.pause=d.pause.bind(d),T.resume=d.resume.bind(d),T.stop=T,T}function so(e,t=1/0,n){if(t<=0||!kt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ot(e))so(e.value,t,n);else if(We(e))for(let o=0;o<e.length;o++)so(e[o],t,n);else if(pa(e)||da(e))e.forEach(o=>{so(o,t,n)});else if(Su(e)){for(const o in e)so(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&so(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Za=[];let Bi=!1;function sI(e,...t){if(Bi)return;Bi=!0,no();const n=Za.length?Za[Za.length-1].component:null,o=n&&n.appContext.config.warnHandler,a=r1();if(o)ga(o,n,11,[e+t.map(l=>{var i,r;return(r=(i=l.toString)==null?void 0:i.call(l))!=null?r:JSON.stringify(l)}).join(""),n&&n.proxy,a.map(({vnode:l})=>`at <${ad(n,l.type)}>`).join(`
`),a]);else{const l=[`[Vue warn]: ${e}`,...t];a.length&&l.push(`
`,...u1(a)),console.warn(...l)}oo(),Bi=!1}function r1(){let e=Za[Za.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function u1(e){const t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...c1(n))}),t}function c1({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,a=` at <${ad(e.component,e.type,o)}`,l=">"+n;return e.props?[a,...d1(e.props),l]:[a+l]}function d1(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...Qu(o,e[o]))}),n.length>3&&t.push(" ..."),t}function Qu(e,t,n){return Rt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:Ot(t)?(t=Qu(e,nt(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Ge(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=nt(t),n?t:[`${e}=`,t])}function ga(e,t,n,o){try{return o?e(...o):e()}catch(a){ls(a,t,n)}}function Bn(e,t,n,o){if(Ge(e)){const a=ga(e,t,n,o);return a&&wu(a)&&a.catch(l=>{ls(l,t,n)}),a}if(We(e)){const a=[];for(let l=0;l<e.length;l++)a.push(Bn(e[l],t,n,o));return a}}function ls(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Tt;if(t){let r=t.parent;const u=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const d=r.ec;if(d){for(let c=0;c<d.length;c++)if(d[c](e,u,p)===!1)return}r=r.parent}if(l){no(),ga(l,null,10,[e,u,p]),oo();return}}p1(e,n,a,o,i)}function p1(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const cn=[];let Kn=-1;const ma=[];let ko=null,va=0;const Zu=Promise.resolve();let ss=null;function qe(e){const t=ss||Zu;return e?t.then(this?e.bind(this):e):t}function f1(e){let t=Kn+1,n=cn.length;for(;t<n;){const o=t+n>>>1,a=cn[o],l=el(a);l<e||l===e&&a.flags&2?t=o+1:n=o}return t}function Ui(e){if(!(e.flags&1)){const t=el(e),n=cn[cn.length-1];!n||!(e.flags&2)&&t>=el(n)?cn.push(e):cn.splice(f1(t),0,e),e.flags|=1,ec()}}function ec(){ss||(ss=Zu.then(oc))}function g1(e){We(e)?ma.push(...e):ko&&e.id===-1?ko.splice(va+1,0,e):e.flags&1||(ma.push(e),e.flags|=1),ec()}function tc(e,t,n=Kn+1){for(;n<cn.length;n++){const o=cn[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;cn.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function nc(e){if(ma.length){const t=[...new Set(ma)].sort((n,o)=>el(n)-el(o));if(ma.length=0,ko){ko.push(...t);return}for(ko=t,va=0;va<ko.length;va++){const n=ko[va];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ko=null,va=0}}const el=e=>e.id==null?e.flags&2?-1:1/0:e.id;function oc(e){try{for(Kn=0;Kn<cn.length;Kn++){const t=cn[Kn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ga(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kn<cn.length;Kn++){const t=cn[Kn];t&&(t.flags&=-2)}Kn=-1,cn.length=0,nc(),ss=null,(cn.length||ma.length)&&oc()}}let jt=null,ac=null;function is(e){const t=jt;return jt=e,ac=e&&e.type.__scopeId||null,t}function it(e,t=jt,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&Jc(-1);const l=is(t);let i;try{i=e(...a)}finally{is(l),o._d&&Jc(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function ve(e,t){if(jt===null)return e;const n=_s(jt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[l,i,r,u=Tt]=t[a];l&&(Ge(l)&&(l={mounted:l,updated:l}),l.deep&&so(i),o.push({dir:l,instance:n,value:i,oldValue:void 0,arg:r,modifiers:u}))}return e}function Yo(e,t,n,o){const a=e.dirs,l=t&&t.dirs;for(let i=0;i<a.length;i++){const r=a[i];l&&(r.oldValue=l[i].value);let u=r.dir[o];u&&(no(),Bn(u,n,8,[e.el,r,e,t]),oo())}}const lc=Symbol("_vte"),sc=e=>e.__isTeleport,tl=e=>e&&(e.disabled||e.disabled===""),ic=e=>e&&(e.defer||e.defer===""),rc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,uc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Vi=(e,t)=>{const n=e&&e.to;return Rt(n)?t?t(n):null:n},cc={name:"Teleport",__isTeleport:!0,process(e,t,n,o,a,l,i,r,u,p){const{mc:d,pc:c,pbc:v,o:{insert:m,querySelector:y,createText:S,createComment:$}}=p,T=tl(t.props);let{shapeFlag:D,children:J,dynamicChildren:x}=t;if(e==null){const N=t.el=S(""),H=t.anchor=S("");m(N,n,o),m(H,n,o);const j=(X,_e)=>{D&16&&(a&&a.isCE&&(a.ce._teleportTarget=X),d(J,X,_e,a,l,i,r,u))},K=()=>{const X=t.target=Vi(t.props,y),_e=pc(X,t,S,m);X&&(i!=="svg"&&rc(X)?i="svg":i!=="mathml"&&uc(X)&&(i="mathml"),T||(j(X,_e),us(t,!1)))};T&&(j(n,H),us(t,!0)),ic(t.props)?pn(()=>{K(),t.el.__isMounted=!0},l):K()}else{if(ic(t.props)&&!e.el.__isMounted){pn(()=>{cc.process(e,t,n,o,a,l,i,r,u,p),delete e.el.__isMounted},l);return}t.el=e.el,t.targetStart=e.targetStart;const N=t.anchor=e.anchor,H=t.target=e.target,j=t.targetAnchor=e.targetAnchor,K=tl(e.props),X=K?n:H,_e=K?N:j;if(i==="svg"||rc(H)?i="svg":(i==="mathml"||uc(H))&&(i="mathml"),x?(v(e.dynamicChildren,x,X,a,l,i,r),Qi(e,t,!0)):u||c(e,t,X,_e,a,l,i,r,!1),T)K?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):rs(t,n,N,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const le=t.target=Vi(t.props,y);le&&rs(t,le,null,p,0)}else K&&rs(t,H,j,p,1);us(t,T)}},remove(e,t,n,{um:o,o:{remove:a}},l){const{shapeFlag:i,children:r,anchor:u,targetStart:p,targetAnchor:d,target:c,props:v}=e;if(c&&(a(p),a(d)),l&&a(u),i&16){const m=l||!tl(v);for(let y=0;y<r.length;y++){const S=r[y];o(S,t,n,m,!!S.dynamicChildren)}}},move:rs,hydrate:m1};function rs(e,t,n,{o:{insert:o},m:a},l=2){l===0&&o(e.targetAnchor,t,n);const{el:i,anchor:r,shapeFlag:u,children:p,props:d}=e,c=l===2;if(c&&o(i,t,n),(!c||tl(d))&&u&16)for(let v=0;v<p.length;v++)a(p[v],t,n,2);c&&o(r,t,n)}function m1(e,t,n,o,a,l,{o:{nextSibling:i,parentNode:r,querySelector:u,insert:p,createText:d}},c){const v=t.target=Vi(t.props,u);if(v){const m=tl(t.props),y=v._lpa||v.firstChild;if(t.shapeFlag&16)if(m)t.anchor=c(i(e),t,r(e),n,o,a,l),t.targetStart=y,t.targetAnchor=y&&i(y);else{t.anchor=i(e);let S=y;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")t.targetStart=S;else if(S.data==="teleport anchor"){t.targetAnchor=S,v._lpa=t.targetAnchor&&i(t.targetAnchor);break}}S=i(S)}t.targetAnchor||pc(v,t,d,p),c(y&&i(y),t,v,n,o,a,l)}us(t,m)}return t.anchor&&i(t.anchor)}const dc=cc;function us(e,t){const n=e.ctx;if(n&&n.ut){let o,a;for(t?(o=e.el,a=e.anchor):(o=e.targetStart,a=e.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function pc(e,t,n,o){const a=t.targetStart=n(""),l=t.targetAnchor=n("");return a[lc]=l,e&&(o(a,e),o(l,e)),l}const Co=Symbol("_leaveCb"),cs=Symbol("_enterCb");function fc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{e.isMounted=!0}),Eo(()=>{e.isUnmounting=!0}),e}const Mn=[Function,Array],gc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Mn,onEnter:Mn,onAfterEnter:Mn,onEnterCancelled:Mn,onBeforeLeave:Mn,onLeave:Mn,onAfterLeave:Mn,onLeaveCancelled:Mn,onBeforeAppear:Mn,onAppear:Mn,onAfterAppear:Mn,onAppearCancelled:Mn},mc=e=>{const t=e.subTree;return t.component?mc(t.component):t},v1={name:"BaseTransition",props:gc,setup(e,{slots:t}){const n=ea(),o=fc();return()=>{const a=t.default&&zi(t.default(),!0);if(!a||!a.length)return;const l=vc(a),i=nt(e),{mode:r}=i;if(o.isLeaving)return Wi(l);const u=_c(l);if(!u)return Wi(l);let p=nl(u,i,o,n,c=>p=c);u.type!==fn&&Jo(u,p);let d=n.subTree&&_c(n.subTree);if(d&&d.type!==fn&&!Zo(u,d)&&mc(n).type!==fn){let c=nl(d,i,o,n);if(Jo(d,c),r==="out-in"&&u.type!==fn)return o.isLeaving=!0,c.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete c.afterLeave,d=void 0},Wi(l);r==="in-out"&&u.type!==fn?c.delayLeave=(v,m,y)=>{const S=hc(o,d);S[String(d.key)]=d,v[Co]=()=>{m(),v[Co]=void 0,delete p.delayedLeave,d=void 0},p.delayedLeave=()=>{y(),delete p.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return l}}};function vc(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==fn){t=n;break}}return t}const h1=v1;function hc(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function nl(e,t,n,o,a){const{appear:l,mode:i,persisted:r=!1,onBeforeEnter:u,onEnter:p,onAfterEnter:d,onEnterCancelled:c,onBeforeLeave:v,onLeave:m,onAfterLeave:y,onLeaveCancelled:S,onBeforeAppear:$,onAppear:T,onAfterAppear:D,onAppearCancelled:J}=t,x=String(e.key),N=hc(n,e),H=(X,_e)=>{X&&Bn(X,o,9,_e)},j=(X,_e)=>{const le=_e[1];H(X,_e),We(X)?X.every(P=>P.length<=1)&&le():X.length<=1&&le()},K={mode:i,persisted:r,beforeEnter(X){let _e=u;if(!n.isMounted)if(l)_e=$||u;else return;X[Co]&&X[Co](!0);const le=N[x];le&&Zo(e,le)&&le.el[Co]&&le.el[Co](),H(_e,[X])},enter(X){let _e=p,le=d,P=c;if(!n.isMounted)if(l)_e=T||p,le=D||d,P=J||c;else return;let Z=!1;const te=X[cs]=z=>{Z||(Z=!0,z?H(P,[X]):H(le,[X]),K.delayedLeave&&K.delayedLeave(),X[cs]=void 0)};_e?j(_e,[X,te]):te()},leave(X,_e){const le=String(e.key);if(X[cs]&&X[cs](!0),n.isUnmounting)return _e();H(v,[X]);let P=!1;const Z=X[Co]=te=>{P||(P=!0,_e(),te?H(S,[X]):H(y,[X]),X[Co]=void 0,N[le]===e&&delete N[le])};N[le]=e,m?j(m,[X,Z]):Z()},clone(X){const _e=nl(X,t,n,o,a);return a&&a(_e),_e}};return K}function Wi(e){if(ps(e))return e=$o(e),e.children=null,e}function _c(e){if(!ps(e))return sc(e.type)&&e.children?vc(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ge(n.default))return n.default()}}function Jo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Jo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zi(e,t=!1,n){let o=[],a=0;for(let l=0;l<e.length;l++){let i=e[l];const r=n==null?i.key:String(n)+String(i.key!=null?i.key:l);i.type===Ie?(i.patchFlag&128&&a++,o=o.concat(zi(i.children,t,r))):(t||i.type!==fn)&&o.push(r!=null?$o(i,{key:r}):i)}if(a>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Hi(e,t){return Ge(e)?Ht({name:e.name},t,{setup:e}):e}function yc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ds(e,t,n,o,a=!1){if(We(e)){e.forEach((y,S)=>ds(y,t&&(We(t)?t[S]:t),n,o,a));return}if(ha(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ds(e,t,n,o.component.subTree);return}const l=o.shapeFlag&4?_s(o.component):o.el,i=a?null:l,{i:r,r:u}=e,p=t&&t.r,d=r.refs===Tt?r.refs={}:r.refs,c=r.setupState,v=nt(c),m=c===Tt?()=>!1:y=>gt(v,y);if(p!=null&&p!==u&&(Rt(p)?(d[p]=null,m(p)&&(c[p]=null)):Ot(p)&&(p.value=null)),Ge(u))ga(u,r,12,[i,d]);else{const y=Rt(u),S=Ot(u);if(y||S){const $=()=>{if(e.f){const T=y?m(u)?c[u]:d[u]:u.value;a?We(T)&&bi(T,l):We(T)?T.includes(l)||T.push(l):y?(d[u]=[l],m(u)&&(c[u]=d[u])):(u.value=[l],e.k&&(d[e.k]=u.value))}else y?(d[u]=i,m(u)&&(c[u]=i)):S&&(u.value=i,e.k&&(d[e.k]=i))};i?($.id=-1,pn($,n)):$()}}}Yl().requestIdleCallback,Yl().cancelIdleCallback;const ha=e=>!!e.type.__asyncLoader,ps=e=>e.type.__isKeepAlive;function _1(e,t){bc(e,"a",t)}function y1(e,t){bc(e,"da",t)}function bc(e,t,n=Qt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(fs(t,o,n),n){let a=n.parent;for(;a&&a.parent;)ps(a.parent.vnode)&&b1(o,t,n,a),a=a.parent}}function b1(e,t,n,o){const a=fs(t,e,o,!0);In(()=>{bi(o[t],a)},n)}function fs(e,t,n=Qt,o=!1){if(n){const a=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...i)=>{no();const r=cl(n),u=Bn(t,n,e,i);return r(),oo(),u});return o?a.unshift(l):a.push(l),l}}const io=e=>(t,n=Qt)=>{(!dl||e==="sp")&&fs(e,(...o)=>t(...o),n)},w1=io("bm"),mt=io("m"),wc=io("bu"),xc=io("u"),Eo=io("bum"),In=io("um"),x1=io("sp"),S1=io("rtg"),T1=io("rtc");function k1(e,t=Qt){fs("ec",e,t)}const C1="components";function E1(e,t){return L1(C1,e,!0,t)||e}const $1=Symbol.for("v-ndc");function L1(e,t,n=!0,o=!1){const a=jt||Qt;if(a){const l=a.type;{const r=od(l,!1);if(r&&(r===t||r===Ln(t)||r===Gl(Ln(t))))return l}const i=Sc(a[e]||l[e],t)||Sc(a.appContext[e],t);return!i&&o?l:i}}function Sc(e,t){return e&&(e[t]||e[Ln(t)]||e[Gl(Ln(t))])}function ze(e,t,n,o){let a;const l=n,i=We(e);if(i||Rt(e)){const r=i&&To(e);let u=!1;r&&(u=!An(e),e=Xl(e)),a=new Array(e.length);for(let p=0,d=e.length;p<d;p++)a[p]=t(u?on(e[p]):e[p],p,void 0,l)}else if(typeof e=="number"){a=new Array(e);for(let r=0;r<e;r++)a[r]=t(r+1,r,void 0,l)}else if(kt(e))if(e[Symbol.iterator])a=Array.from(e,(r,u)=>t(r,u,void 0,l));else{const r=Object.keys(e);a=new Array(r.length);for(let u=0,p=r.length;u<p;u++){const d=r[u];a[u]=t(e[d],d,u,l)}}else a=[];return a}function ol(e,t,n={},o,a){if(jt.ce||jt.parent&&ha(jt.parent)&&jt.parent.ce)return t!=="default"&&(n.name=t),b(),wt(Ie,null,[Ue("slot",n,o&&o())],64);let l=e[t];l&&l._c&&(l._d=!1),b();const i=l&&Tc(l(n)),r=n.key||i&&i.key,u=wt(Ie,{key:(r&&!Pn(r)?r:`_${t}`)+(!i&&o?"_fb":"")},i||(o?o():[]),i&&e._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function Tc(e){return e.some(t=>ul(t)?!(t.type===fn||t.type===Ie&&!Tc(t.children)):!0)?e:null}const ji=e=>e?ed(e)?_s(e):ji(e.parent):null,al=Ht(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ji(e.parent),$root:e=>ji(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$c(e),$forceUpdate:e=>e.f||(e.f=()=>{Ui(e.update)}),$nextTick:e=>e.n||(e.n=qe.bind(e.proxy)),$watch:e=>Q1.bind(e)}),Gi=(e,t)=>e!==Tt&&!e.__isScriptSetup&&gt(e,t),A1={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:l,accessCache:i,type:r,appContext:u}=e;let p;if(t[0]!=="$"){const m=i[t];if(m!==void 0)switch(m){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return l[t]}else{if(Gi(o,t))return i[t]=1,o[t];if(a!==Tt&&gt(a,t))return i[t]=2,a[t];if((p=e.propsOptions[0])&&gt(p,t))return i[t]=3,l[t];if(n!==Tt&&gt(n,t))return i[t]=4,n[t];qi&&(i[t]=0)}}const d=al[t];let c,v;if(d)return t==="$attrs"&&nn(e.attrs,"get",""),d(e);if((c=r.__cssModules)&&(c=c[t]))return c;if(n!==Tt&&gt(n,t))return i[t]=4,n[t];if(v=u.config.globalProperties,gt(v,t))return v[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:l}=e;return Gi(a,t)?(a[t]=n,!0):o!==Tt&&gt(o,t)?(o[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:l}},i){let r;return!!n[i]||e!==Tt&&gt(e,i)||Gi(t,i)||(r=l[0])&&gt(r,i)||gt(o,i)||gt(al,i)||gt(a.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function kc(e){return We(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qi=!0;function M1(e){const t=$c(e),n=e.proxy,o=e.ctx;qi=!1,t.beforeCreate&&Cc(t.beforeCreate,e,"bc");const{data:a,computed:l,methods:i,watch:r,provide:u,inject:p,created:d,beforeMount:c,mounted:v,beforeUpdate:m,updated:y,activated:S,deactivated:$,beforeDestroy:T,beforeUnmount:D,destroyed:J,unmounted:x,render:N,renderTracked:H,renderTriggered:j,errorCaptured:K,serverPrefetch:X,expose:_e,inheritAttrs:le,components:P,directives:Z,filters:te}=t;if(p&&I1(p,o,null),i)for(const oe in i){const F=i[oe];Ge(F)&&(o[oe]=F.bind(n))}if(a){const oe=a.call(n,n);kt(oe)&&(e.data=ts(oe))}if(qi=!0,l)for(const oe in l){const F=l[oe],U=Ge(F)?F.bind(n,n):Ge(F.get)?F.get.bind(n,n):qn,ue=!Ge(F)&&Ge(F.set)?F.set.bind(n):qn,ke=vt({get:U,set:ue});Object.defineProperty(o,oe,{enumerable:!0,configurable:!0,get:()=>ke.value,set:ie=>ke.value=ie})}if(r)for(const oe in r)Ec(r[oe],o,n,oe);if(u){const oe=Ge(u)?u.call(n):u;Reflect.ownKeys(oe).forEach(F=>{F1(F,oe[F])})}d&&Cc(d,e,"c");function ne(oe,F){We(F)?F.forEach(U=>oe(U.bind(n))):F&&oe(F.bind(n))}if(ne(w1,c),ne(mt,v),ne(wc,m),ne(xc,y),ne(_1,S),ne(y1,$),ne(k1,K),ne(T1,H),ne(S1,j),ne(Eo,D),ne(In,x),ne(x1,X),We(_e))if(_e.length){const oe=e.exposed||(e.exposed={});_e.forEach(F=>{Object.defineProperty(oe,F,{get:()=>n[F],set:U=>n[F]=U})})}else e.exposed||(e.exposed={});N&&e.render===qn&&(e.render=N),le!=null&&(e.inheritAttrs=le),P&&(e.components=P),Z&&(e.directives=Z),X&&yc(e)}function I1(e,t,n=qn){We(e)&&(e=Ki(e));for(const o in e){const a=e[o];let l;kt(a)?"default"in a?l=_a(a.from||o,a.default,!0):l=_a(a.from||o):l=_a(a),Ot(l)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:i=>l.value=i}):t[o]=l}}function Cc(e,t,n){Bn(We(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ec(e,t,n,o){let a=o.includes(".")?jc(n,o):()=>n[o];if(Rt(e)){const l=t[e];Ge(l)&&ot(a,l)}else if(Ge(e))ot(a,e.bind(n));else if(kt(e))if(We(e))e.forEach(l=>Ec(l,t,n,o));else{const l=Ge(e.handler)?e.handler.bind(n):t[e.handler];Ge(l)&&ot(a,l,e)}}function $c(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:l,config:{optionMergeStrategies:i}}=e.appContext,r=l.get(t);let u;return r?u=r:!a.length&&!n&&!o?u=t:(u={},a.length&&a.forEach(p=>gs(u,p,i,!0)),gs(u,t,i)),kt(t)&&l.set(t,u),u}function gs(e,t,n,o=!1){const{mixins:a,extends:l}=t;l&&gs(e,l,n,!0),a&&a.forEach(i=>gs(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const r=D1[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const D1={data:Lc,props:Ac,emits:Ac,methods:ll,computed:ll,beforeCreate:dn,created:dn,beforeMount:dn,mounted:dn,beforeUpdate:dn,updated:dn,beforeDestroy:dn,beforeUnmount:dn,destroyed:dn,unmounted:dn,activated:dn,deactivated:dn,errorCaptured:dn,serverPrefetch:dn,components:ll,directives:ll,watch:O1,provide:Lc,inject:R1};function Lc(e,t){return t?e?function(){return Ht(Ge(e)?e.call(this,this):e,Ge(t)?t.call(this,this):t)}:t:e}function R1(e,t){return ll(Ki(e),Ki(t))}function Ki(e){if(We(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function dn(e,t){return e?[...new Set([].concat(e,t))]:t}function ll(e,t){return e?Ht(Object.create(null),e,t):t}function Ac(e,t){return e?We(e)&&We(t)?[...new Set([...e,...t])]:Ht(Object.create(null),kc(e),kc(t??{})):t}function O1(e,t){if(!e)return t;if(!t)return e;const n=Ht(Object.create(null),e);for(const o in t)n[o]=dn(e[o],t[o]);return n}function Mc(){return{app:null,config:{isNativeTag:ym,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N1=0;function P1(e,t){return function(o,a=null){Ge(o)||(o=Ht({},o)),a!=null&&!kt(a)&&(a=null);const l=Mc(),i=new WeakSet,r=[];let u=!1;const p=l.app={_uid:N1++,_component:o,_props:a,_container:null,_context:l,_instance:null,version:bv,get config(){return l.config},set config(d){},use(d,...c){return i.has(d)||(d&&Ge(d.install)?(i.add(d),d.install(p,...c)):Ge(d)&&(i.add(d),d(p,...c))),p},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),p},component(d,c){return c?(l.components[d]=c,p):l.components[d]},directive(d,c){return c?(l.directives[d]=c,p):l.directives[d]},mount(d,c,v){if(!u){const m=p._ceVNode||Ue(o,a);return m.appContext=l,v===!0?v="svg":v===!1&&(v=void 0),e(m,d,v),u=!0,p._container=d,d.__vue_app__=p,_s(m.component)}},onUnmount(d){r.push(d)},unmount(){u&&(Bn(r,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(d,c){return l.provides[d]=c,p},runWithContext(d){const c=Xo;Xo=p;try{return d()}finally{Xo=c}}};return p}}let Xo=null;function F1(e,t){if(Qt){let n=Qt.provides;const o=Qt.parent&&Qt.parent.provides;o===n&&(n=Qt.provides=Object.create(o)),n[e]=t}}function _a(e,t,n=!1){const o=Qt||jt;if(o||Xo){const a=Xo?Xo._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&Ge(t)?t.call(o&&o.proxy):t}}function B1(){return!!(Qt||jt||Xo)}const Ic={},Dc=()=>Object.create(Ic),Rc=e=>Object.getPrototypeOf(e)===Ic;function U1(e,t,n,o=!1){const a={},l=Dc();e.propsDefaults=Object.create(null),Oc(e,t,a,l);for(const i in e.propsOptions[0])i in a||(a[i]=void 0);n?e.props=o?a:Xm(a):e.type.props?e.props=a:e.props=l,e.attrs=l}function V1(e,t,n,o){const{props:a,attrs:l,vnode:{patchFlag:i}}=e,r=nt(a),[u]=e.propsOptions;let p=!1;if((o||i>0)&&!(i&16)){if(i&8){const d=e.vnode.dynamicProps;for(let c=0;c<d.length;c++){let v=d[c];if(ms(e.emitsOptions,v))continue;const m=t[v];if(u)if(gt(l,v))m!==l[v]&&(l[v]=m,p=!0);else{const y=Ln(v);a[y]=Yi(u,r,y,m,e,!1)}else m!==l[v]&&(l[v]=m,p=!0)}}}else{Oc(e,t,a,l)&&(p=!0);let d;for(const c in r)(!t||!gt(t,c)&&((d=xo(c))===c||!gt(t,d)))&&(u?n&&(n[c]!==void 0||n[d]!==void 0)&&(a[c]=Yi(u,r,c,void 0,e,!0)):delete a[c]);if(l!==r)for(const c in l)(!t||!gt(t,c))&&(delete l[c],p=!0)}p&&ao(e.attrs,"set","")}function Oc(e,t,n,o){const[a,l]=e.propsOptions;let i=!1,r;if(t)for(let u in t){if(qa(u))continue;const p=t[u];let d;a&&gt(a,d=Ln(u))?!l||!l.includes(d)?n[d]=p:(r||(r={}))[d]=p:ms(e.emitsOptions,u)||(!(u in o)||p!==o[u])&&(o[u]=p,i=!0)}if(l){const u=nt(n),p=r||Tt;for(let d=0;d<l.length;d++){const c=l[d];n[c]=Yi(a,u,c,p[c],e,!gt(p,c))}}return i}function Yi(e,t,n,o,a,l){const i=e[n];if(i!=null){const r=gt(i,"default");if(r&&o===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&Ge(u)){const{propsDefaults:p}=a;if(n in p)o=p[n];else{const d=cl(a);o=p[n]=u.call(null,t),d()}}else o=u;a.ce&&a.ce._setProp(n,o)}i[0]&&(l&&!r?o=!1:i[1]&&(o===""||o===xo(n))&&(o=!0))}return o}const W1=new WeakMap;function Nc(e,t,n=!1){const o=n?W1:t.propsCache,a=o.get(e);if(a)return a;const l=e.props,i={},r=[];let u=!1;if(!Ge(e)){const d=c=>{u=!0;const[v,m]=Nc(c,t,!0);Ht(i,v),m&&r.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!l&&!u)return kt(e)&&o.set(e,ca),ca;if(We(l))for(let d=0;d<l.length;d++){const c=Ln(l[d]);Pc(c)&&(i[c]=Tt)}else if(l)for(const d in l){const c=Ln(d);if(Pc(c)){const v=l[d],m=i[c]=We(v)||Ge(v)?{type:v}:Ht({},v),y=m.type;let S=!1,$=!0;if(We(y))for(let T=0;T<y.length;++T){const D=y[T],J=Ge(D)&&D.name;if(J==="Boolean"){S=!0;break}else J==="String"&&($=!1)}else S=Ge(y)&&y.name==="Boolean";m[0]=S,m[1]=$,(S||gt(m,"default"))&&r.push(c)}}const p=[i,r];return kt(e)&&o.set(e,p),p}function Pc(e){return e[0]!=="$"&&!qa(e)}const Fc=e=>e[0]==="_"||e==="$stable",Ji=e=>We(e)?e.map(Yn):[Yn(e)],z1=(e,t,n)=>{if(t._n)return t;const o=it((...a)=>Ji(t(...a)),n);return o._c=!1,o},Bc=(e,t,n)=>{const o=e._ctx;for(const a in e){if(Fc(a))continue;const l=e[a];if(Ge(l))t[a]=z1(a,l,o);else if(l!=null){const i=Ji(l);t[a]=()=>i}}},Uc=(e,t)=>{const n=Ji(t);e.slots.default=()=>n},Vc=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},H1=(e,t,n)=>{const o=e.slots=Dc();if(e.vnode.shapeFlag&32){const a=t._;a?(Vc(o,t,n),n&&Tu(o,"_",a,!0)):Bc(t,o)}else t&&Uc(e,t)},j1=(e,t,n)=>{const{vnode:o,slots:a}=e;let l=!0,i=Tt;if(o.shapeFlag&32){const r=t._;r?n&&r===1?l=!1:Vc(a,t,n):(l=!t.$stable,Bc(t,a)),i=t}else t&&(Uc(e,t),i={default:1});if(l)for(const r in a)!Fc(r)&&i[r]==null&&delete a[r]},pn=lv;function G1(e){return q1(e)}function q1(e,t){const n=Yl();n.__VUE__=!0;const{insert:o,remove:a,patchProp:l,createElement:i,createText:r,createComment:u,setText:p,setElementText:d,parentNode:c,nextSibling:v,setScopeId:m=qn,insertStaticContent:y}=e,S=(k,w,O,Q=null,pe=null,ye=null,L=void 0,_=null,R=!!w.dynamicChildren)=>{if(k===w)return;k&&!Zo(k,w)&&(Q=A(k),ie(k,pe,ye,!0),k=null),w.patchFlag===-2&&(R=!1,w.dynamicChildren=null);const{type:q,ref:xe,shapeFlag:we}=w;switch(q){case sl:$(k,w,O,Q);break;case fn:T(k,w,O,Q);break;case Zi:k==null&&D(w,O,Q,L);break;case Ie:P(k,w,O,Q,pe,ye,L,_,R);break;default:we&1?N(k,w,O,Q,pe,ye,L,_,R):we&6?Z(k,w,O,Q,pe,ye,L,_,R):(we&64||we&128)&&q.process(k,w,O,Q,pe,ye,L,_,R,I)}xe!=null&&pe&&ds(xe,k&&k.ref,ye,w||k,!w)},$=(k,w,O,Q)=>{if(k==null)o(w.el=r(w.children),O,Q);else{const pe=w.el=k.el;w.children!==k.children&&p(pe,w.children)}},T=(k,w,O,Q)=>{k==null?o(w.el=u(w.children||""),O,Q):w.el=k.el},D=(k,w,O,Q)=>{[k.el,k.anchor]=y(k.children,w,O,Q,k.el,k.anchor)},J=({el:k,anchor:w},O,Q)=>{let pe;for(;k&&k!==w;)pe=v(k),o(k,O,Q),k=pe;o(w,O,Q)},x=({el:k,anchor:w})=>{let O;for(;k&&k!==w;)O=v(k),a(k),k=O;a(w)},N=(k,w,O,Q,pe,ye,L,_,R)=>{w.type==="svg"?L="svg":w.type==="math"&&(L="mathml"),k==null?H(w,O,Q,pe,ye,L,_,R):X(k,w,pe,ye,L,_,R)},H=(k,w,O,Q,pe,ye,L,_)=>{let R,q;const{props:xe,shapeFlag:we,transition:ee,dirs:me}=k;if(R=k.el=i(k.type,ye,xe&&xe.is,xe),we&8?d(R,k.children):we&16&&K(k.children,R,null,Q,pe,Xi(k,ye),L,_),me&&Yo(k,null,Q,"created"),j(R,k,k.scopeId,L,Q),xe){for(const Pe in xe)Pe!=="value"&&!qa(Pe)&&l(R,Pe,null,xe[Pe],ye,Q);"value"in xe&&l(R,"value",null,xe.value,ye),(q=xe.onVnodeBeforeMount)&&Jn(q,Q,k)}me&&Yo(k,null,Q,"beforeMount");const Re=K1(pe,ee);Re&&ee.beforeEnter(R),o(R,w,O),((q=xe&&xe.onVnodeMounted)||Re||me)&&pn(()=>{q&&Jn(q,Q,k),Re&&ee.enter(R),me&&Yo(k,null,Q,"mounted")},pe)},j=(k,w,O,Q,pe)=>{if(O&&m(k,O),Q)for(let ye=0;ye<Q.length;ye++)m(k,Q[ye]);if(pe){let ye=pe.subTree;if(w===ye||Yc(ye.type)&&(ye.ssContent===w||ye.ssFallback===w)){const L=pe.vnode;j(k,L,L.scopeId,L.slotScopeIds,pe.parent)}}},K=(k,w,O,Q,pe,ye,L,_,R=0)=>{for(let q=R;q<k.length;q++){const xe=k[q]=_?Lo(k[q]):Yn(k[q]);S(null,xe,w,O,Q,pe,ye,L,_)}},X=(k,w,O,Q,pe,ye,L)=>{const _=w.el=k.el;let{patchFlag:R,dynamicChildren:q,dirs:xe}=w;R|=k.patchFlag&16;const we=k.props||Tt,ee=w.props||Tt;let me;if(O&&Qo(O,!1),(me=ee.onVnodeBeforeUpdate)&&Jn(me,O,w,k),xe&&Yo(w,k,O,"beforeUpdate"),O&&Qo(O,!0),(we.innerHTML&&ee.innerHTML==null||we.textContent&&ee.textContent==null)&&d(_,""),q?_e(k.dynamicChildren,q,_,O,Q,Xi(w,pe),ye):L||F(k,w,_,null,O,Q,Xi(w,pe),ye,!1),R>0){if(R&16)le(_,we,ee,O,pe);else if(R&2&&we.class!==ee.class&&l(_,"class",null,ee.class,pe),R&4&&l(_,"style",we.style,ee.style,pe),R&8){const Re=w.dynamicProps;for(let Pe=0;Pe<Re.length;Pe++){const He=Re[Pe],Xe=we[He],at=ee[He];(at!==Xe||He==="value")&&l(_,He,Xe,at,pe,O)}}R&1&&k.children!==w.children&&d(_,w.children)}else!L&&q==null&&le(_,we,ee,O,pe);((me=ee.onVnodeUpdated)||xe)&&pn(()=>{me&&Jn(me,O,w,k),xe&&Yo(w,k,O,"updated")},Q)},_e=(k,w,O,Q,pe,ye,L)=>{for(let _=0;_<w.length;_++){const R=k[_],q=w[_],xe=R.el&&(R.type===Ie||!Zo(R,q)||R.shapeFlag&70)?c(R.el):O;S(R,q,xe,null,Q,pe,ye,L,!0)}},le=(k,w,O,Q,pe)=>{if(w!==O){if(w!==Tt)for(const ye in w)!qa(ye)&&!(ye in O)&&l(k,ye,w[ye],null,pe,Q);for(const ye in O){if(qa(ye))continue;const L=O[ye],_=w[ye];L!==_&&ye!=="value"&&l(k,ye,_,L,pe,Q)}"value"in O&&l(k,"value",w.value,O.value,pe)}},P=(k,w,O,Q,pe,ye,L,_,R)=>{const q=w.el=k?k.el:r(""),xe=w.anchor=k?k.anchor:r("");let{patchFlag:we,dynamicChildren:ee,slotScopeIds:me}=w;me&&(_=_?_.concat(me):me),k==null?(o(q,O,Q),o(xe,O,Q),K(w.children||[],O,xe,pe,ye,L,_,R)):we>0&&we&64&&ee&&k.dynamicChildren?(_e(k.dynamicChildren,ee,O,pe,ye,L,_),(w.key!=null||pe&&w===pe.subTree)&&Qi(k,w,!0)):F(k,w,O,xe,pe,ye,L,_,R)},Z=(k,w,O,Q,pe,ye,L,_,R)=>{w.slotScopeIds=_,k==null?w.shapeFlag&512?pe.ctx.activate(w,O,Q,L,R):te(w,O,Q,pe,ye,L,R):z(k,w,R)},te=(k,w,O,Q,pe,ye,L)=>{const _=k.component=pv(k,Q,pe);if(ps(k)&&(_.ctx.renderer=I),fv(_,!1,L),_.asyncDep){if(pe&&pe.registerDep(_,ne,L),!k.el){const R=_.subTree=Ue(fn);T(null,R,w,O)}}else ne(_,k,w,O,pe,ye,L)},z=(k,w,O)=>{const Q=w.component=k.component;if(ov(k,w,O))if(Q.asyncDep&&!Q.asyncResolved){oe(Q,w,O);return}else Q.next=w,Q.update();else w.el=k.el,Q.vnode=w},ne=(k,w,O,Q,pe,ye,L)=>{const _=()=>{if(k.isMounted){let{next:we,bu:ee,u:me,parent:Re,vnode:Pe}=k;{const Dt=Wc(k);if(Dt){we&&(we.el=Pe.el,oe(k,we,L)),Dt.asyncDep.then(()=>{k.isUnmounted||_()});return}}let He=we,Xe;Qo(k,!1),we?(we.el=Pe.el,oe(k,we,L)):we=Pe,ee&&ql(ee),(Xe=we.props&&we.props.onVnodeBeforeUpdate)&&Jn(Xe,Re,we,Pe),Qo(k,!0);const at=qc(k),bt=k.subTree;k.subTree=at,S(bt,at,c(bt.el),A(bt),k,pe,ye),we.el=at.el,He===null&&av(k,at.el),me&&pn(me,pe),(Xe=we.props&&we.props.onVnodeUpdated)&&pn(()=>Jn(Xe,Re,we,Pe),pe)}else{let we;const{el:ee,props:me}=w,{bm:Re,m:Pe,parent:He,root:Xe,type:at}=k,bt=ha(w);Qo(k,!1),Re&&ql(Re),!bt&&(we=me&&me.onVnodeBeforeMount)&&Jn(we,He,w),Qo(k,!0);{Xe.ce&&Xe.ce._injectChildStyle(at);const Dt=k.subTree=qc(k);S(null,Dt,O,Q,k,pe,ye),w.el=Dt.el}if(Pe&&pn(Pe,pe),!bt&&(we=me&&me.onVnodeMounted)){const Dt=w;pn(()=>Jn(we,He,Dt),pe)}(w.shapeFlag&256||He&&ha(He.vnode)&&He.vnode.shapeFlag&256)&&k.a&&pn(k.a,pe),k.isMounted=!0,w=O=Q=null}};k.scope.on();const R=k.effect=new Mu(_);k.scope.off();const q=k.update=R.run.bind(R),xe=k.job=R.runIfDirty.bind(R);xe.i=k,xe.id=k.uid,R.scheduler=()=>Ui(xe),Qo(k,!0),q()},oe=(k,w,O)=>{w.component=k;const Q=k.vnode.props;k.vnode=w,k.next=null,V1(k,w.props,Q,O),j1(k,w.children,O),no(),tc(k),oo()},F=(k,w,O,Q,pe,ye,L,_,R=!1)=>{const q=k&&k.children,xe=k?k.shapeFlag:0,we=w.children,{patchFlag:ee,shapeFlag:me}=w;if(ee>0){if(ee&128){ue(q,we,O,Q,pe,ye,L,_,R);return}else if(ee&256){U(q,we,O,Q,pe,ye,L,_,R);return}}me&8?(xe&16&&G(q,pe,ye),we!==q&&d(O,we)):xe&16?me&16?ue(q,we,O,Q,pe,ye,L,_,R):G(q,pe,ye,!0):(xe&8&&d(O,""),me&16&&K(we,O,Q,pe,ye,L,_,R))},U=(k,w,O,Q,pe,ye,L,_,R)=>{k=k||ca,w=w||ca;const q=k.length,xe=w.length,we=Math.min(q,xe);let ee;for(ee=0;ee<we;ee++){const me=w[ee]=R?Lo(w[ee]):Yn(w[ee]);S(k[ee],me,O,null,pe,ye,L,_,R)}q>xe?G(k,pe,ye,!0,!1,we):K(w,O,Q,pe,ye,L,_,R,we)},ue=(k,w,O,Q,pe,ye,L,_,R)=>{let q=0;const xe=w.length;let we=k.length-1,ee=xe-1;for(;q<=we&&q<=ee;){const me=k[q],Re=w[q]=R?Lo(w[q]):Yn(w[q]);if(Zo(me,Re))S(me,Re,O,null,pe,ye,L,_,R);else break;q++}for(;q<=we&&q<=ee;){const me=k[we],Re=w[ee]=R?Lo(w[ee]):Yn(w[ee]);if(Zo(me,Re))S(me,Re,O,null,pe,ye,L,_,R);else break;we--,ee--}if(q>we){if(q<=ee){const me=ee+1,Re=me<xe?w[me].el:Q;for(;q<=ee;)S(null,w[q]=R?Lo(w[q]):Yn(w[q]),O,Re,pe,ye,L,_,R),q++}}else if(q>ee)for(;q<=we;)ie(k[q],pe,ye,!0),q++;else{const me=q,Re=q,Pe=new Map;for(q=Re;q<=ee;q++){const Yt=w[q]=R?Lo(w[q]):Yn(w[q]);Yt.key!=null&&Pe.set(Yt.key,q)}let He,Xe=0;const at=ee-Re+1;let bt=!1,Dt=0;const zn=new Array(at);for(q=0;q<at;q++)zn[q]=0;for(q=me;q<=we;q++){const Yt=k[q];if(Xe>=at){ie(Yt,pe,ye,!0);continue}let Zt;if(Yt.key!=null)Zt=Pe.get(Yt.key);else for(He=Re;He<=ee;He++)if(zn[He-Re]===0&&Zo(Yt,w[He])){Zt=He;break}Zt===void 0?ie(Yt,pe,ye,!0):(zn[Zt-Re]=q+1,Zt>=Dt?Dt=Zt:bt=!0,S(Yt,w[Zt],O,null,pe,ye,L,_,R),Xe++)}const Wo=bt?Y1(zn):ca;for(He=Wo.length-1,q=at-1;q>=0;q--){const Yt=Re+q,Zt=w[Yt],$n=Yt+1<xe?w[Yt+1].el:Q;zn[q]===0?S(null,Zt,O,$n,pe,ye,L,_,R):bt&&(He<0||q!==Wo[He]?ke(Zt,O,$n,2):He--)}}},ke=(k,w,O,Q,pe=null)=>{const{el:ye,type:L,transition:_,children:R,shapeFlag:q}=k;if(q&6){ke(k.component.subTree,w,O,Q);return}if(q&128){k.suspense.move(w,O,Q);return}if(q&64){L.move(k,w,O,I);return}if(L===Ie){o(ye,w,O);for(let we=0;we<R.length;we++)ke(R[we],w,O,Q);o(k.anchor,w,O);return}if(L===Zi){J(k,w,O);return}if(Q!==2&&q&1&&_)if(Q===0)_.beforeEnter(ye),o(ye,w,O),pn(()=>_.enter(ye),pe);else{const{leave:we,delayLeave:ee,afterLeave:me}=_,Re=()=>o(ye,w,O),Pe=()=>{we(ye,()=>{Re(),me&&me()})};ee?ee(ye,Re,Pe):Pe()}else o(ye,w,O)},ie=(k,w,O,Q=!1,pe=!1)=>{const{type:ye,props:L,ref:_,children:R,dynamicChildren:q,shapeFlag:xe,patchFlag:we,dirs:ee,cacheIndex:me}=k;if(we===-2&&(pe=!1),_!=null&&ds(_,null,O,k,!0),me!=null&&(w.renderCache[me]=void 0),xe&256){w.ctx.deactivate(k);return}const Re=xe&1&&ee,Pe=!ha(k);let He;if(Pe&&(He=L&&L.onVnodeBeforeUnmount)&&Jn(He,w,k),xe&6)ae(k.component,O,Q);else{if(xe&128){k.suspense.unmount(O,Q);return}Re&&Yo(k,null,w,"beforeUnmount"),xe&64?k.type.remove(k,w,O,I,Q):q&&!q.hasOnce&&(ye!==Ie||we>0&&we&64)?G(q,w,O,!1,!0):(ye===Ie&&we&384||!pe&&xe&16)&&G(R,w,O),Q&&ge(k)}(Pe&&(He=L&&L.onVnodeUnmounted)||Re)&&pn(()=>{He&&Jn(He,w,k),Re&&Yo(k,null,w,"unmounted")},O)},ge=k=>{const{type:w,el:O,anchor:Q,transition:pe}=k;if(w===Ie){de(O,Q);return}if(w===Zi){x(k);return}const ye=()=>{a(O),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(k.shapeFlag&1&&pe&&!pe.persisted){const{leave:L,delayLeave:_}=pe,R=()=>L(O,ye);_?_(k.el,ye,R):R()}else ye()},de=(k,w)=>{let O;for(;k!==w;)O=v(k),a(k),k=O;a(w)},ae=(k,w,O)=>{const{bum:Q,scope:pe,job:ye,subTree:L,um:_,m:R,a:q}=k;zc(R),zc(q),Q&&ql(Q),pe.stop(),ye&&(ye.flags|=8,ie(L,k,w,O)),_&&pn(_,w),pn(()=>{k.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},G=(k,w,O,Q=!1,pe=!1,ye=0)=>{for(let L=ye;L<k.length;L++)ie(k[L],w,O,Q,pe)},A=k=>{if(k.shapeFlag&6)return A(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const w=v(k.anchor||k.el),O=w&&w[lc];return O?v(O):w};let B=!1;const V=(k,w,O)=>{k==null?w._vnode&&ie(w._vnode,null,null,!0):S(w._vnode||null,k,w,null,null,null,O),w._vnode=k,B||(B=!0,tc(),nc(),B=!1)},I={p:S,um:ie,m:ke,r:ge,mt:te,mc:K,pc:F,pbc:_e,n:A,o:e};return{render:V,hydrate:void 0,createApp:P1(V)}}function Xi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Qo({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function K1(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qi(e,t,n=!1){const o=e.children,a=t.children;if(We(o)&&We(a))for(let l=0;l<o.length;l++){const i=o[l];let r=a[l];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=a[l]=Lo(a[l]),r.el=i.el),!n&&r.patchFlag!==-2&&Qi(i,r)),r.type===sl&&(r.el=i.el)}}function Y1(e){const t=e.slice(),n=[0];let o,a,l,i,r;const u=e.length;for(o=0;o<u;o++){const p=e[o];if(p!==0){if(a=n[n.length-1],e[a]<p){t[o]=a,n.push(o);continue}for(l=0,i=n.length-1;l<i;)r=l+i>>1,e[n[r]]<p?l=r+1:i=r;p<e[n[l]]&&(l>0&&(t[o]=n[l-1]),n[l]=o)}}for(l=n.length,i=n[l-1];l-- >0;)n[l]=i,i=t[i];return n}function Wc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wc(t)}function zc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const J1=Symbol.for("v-scx"),X1=()=>_a(J1);function ot(e,t,n){return Hc(e,t,n)}function Hc(e,t,n=Tt){const{immediate:o,deep:a,flush:l,once:i}=n,r=Ht({},n),u=t&&o||!t&&l!=="post";let p;if(dl){if(l==="sync"){const m=X1();p=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=qn,m.resume=qn,m.pause=qn,m}}const d=Qt;r.call=(m,y,S)=>Bn(m,d,y,S);let c=!1;l==="post"?r.scheduler=m=>{pn(m,d&&d.suspense)}:l!=="sync"&&(c=!0,r.scheduler=(m,y)=>{y?m():Ui(m)}),r.augmentJob=m=>{t&&(m.flags|=4),c&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=i1(e,t,r);return dl&&(p?p.push(v):u&&v()),v}function Q1(e,t,n){const o=this.proxy,a=Rt(e)?e.includes(".")?jc(o,e):()=>o[e]:e.bind(o,o);let l;Ge(t)?l=t:(l=t.handler,n=t);const i=cl(this),r=Hc(a,l.bind(o),n);return i(),r}function jc(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const Z1=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ln(t)}Modifiers`]||e[`${xo(t)}Modifiers`];function ev(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Tt;let a=n;const l=t.startsWith("update:"),i=l&&Z1(o,t.slice(7));i&&(i.trim&&(a=n.map(d=>Rt(d)?d.trim():d)),i.number&&(a=n.map(Kl)));let r,u=o[r=xi(t)]||o[r=xi(Ln(t))];!u&&l&&(u=o[r=xi(xo(t))]),u&&Bn(u,e,6,a);const p=o[r+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Bn(p,e,6,a)}}function Gc(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const l=e.emits;let i={},r=!1;if(!Ge(e)){const u=p=>{const d=Gc(p,t,!0);d&&(r=!0,Ht(i,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!l&&!r?(kt(e)&&o.set(e,null),null):(We(l)?l.forEach(u=>i[u]=null):Ht(i,l),kt(e)&&o.set(e,i),i)}function ms(e,t){return!e||!Hl(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,xo(t))||gt(e,t))}function iI(){}function qc(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[l],slots:i,attrs:r,emit:u,render:p,renderCache:d,props:c,data:v,setupState:m,ctx:y,inheritAttrs:S}=e,$=is(e);let T,D;try{if(n.shapeFlag&4){const x=a||o,N=x;T=Yn(p.call(N,x,d,c,m,v,y)),D=r}else{const x=t;T=Yn(x.length>1?x(c,{attrs:r,slots:i,emit:u}):x(c,null)),D=t.props?r:tv(r)}}catch(x){il.length=0,ls(x,e,1),T=Ue(fn)}let J=T;if(D&&S!==!1){const x=Object.keys(D),{shapeFlag:N}=J;x.length&&N&7&&(l&&x.some(yi)&&(D=nv(D,l)),J=$o(J,D,!1,!0))}return n.dirs&&(J=$o(J,null,!1,!0),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&Jo(J,n.transition),T=J,is($),T}const tv=e=>{let t;for(const n in e)(n==="class"||n==="style"||Hl(n))&&((t||(t={}))[n]=e[n]);return t},nv=(e,t)=>{const n={};for(const o in e)(!yi(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function ov(e,t,n){const{props:o,children:a,component:l}=e,{props:i,children:r,patchFlag:u}=t,p=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return o?Kc(o,i,p):!!i;if(u&8){const d=t.dynamicProps;for(let c=0;c<d.length;c++){const v=d[c];if(i[v]!==o[v]&&!ms(p,v))return!0}}}else return(a||r)&&(!r||!r.$stable)?!0:o===i?!1:o?i?Kc(o,i,p):!0:!!i;return!1}function Kc(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const l=o[a];if(t[l]!==e[l]&&!ms(n,l))return!0}return!1}function av({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Yc=e=>e.__isSuspense;function lv(e,t){t&&t.pendingBranch?We(e)?t.effects.push(...e):t.effects.push(e):g1(e)}const Ie=Symbol.for("v-fgt"),sl=Symbol.for("v-txt"),fn=Symbol.for("v-cmt"),Zi=Symbol.for("v-stc"),il=[];let Sn=null;function b(e=!1){il.push(Sn=e?null:[])}function sv(){il.pop(),Sn=il[il.length-1]||null}let rl=1;function Jc(e,t=!1){rl+=e,e<0&&Sn&&t&&(Sn.hasOnce=!0)}function Xc(e){return e.dynamicChildren=rl>0?Sn||ca:null,sv(),rl>0&&Sn&&Sn.push(e),e}function C(e,t,n,o,a,l){return Xc(s(e,t,n,o,a,l,!0))}function wt(e,t,n,o,a){return Xc(Ue(e,t,n,o,a,!0))}function ul(e){return e?e.__v_isVNode===!0:!1}function Zo(e,t){return e.type===t.type&&e.key===t.key}const Qc=({key:e})=>e??null,vs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Ot(e)||Ge(e)?{i:jt,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,a=null,l=e===Ie?0:1,i=!1,r=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qc(t),ref:t&&vs(t),scopeId:ac,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:jt};return r?(er(u,n),l&128&&e.normalize(u)):n&&(u.shapeFlag|=Rt(n)?8:16),rl>0&&!i&&Sn&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&Sn.push(u),u}const Ue=iv;function iv(e,t=null,n=null,o=0,a=null,l=!1){if((!e||e===$1)&&(e=fn),ul(e)){const r=$o(e,t,!0);return n&&er(r,n),rl>0&&!l&&Sn&&(r.shapeFlag&6?Sn[Sn.indexOf(e)]=r:Sn.push(r)),r.patchFlag=-2,r}if(yv(e)&&(e=e.__vccOpts),t){t=rv(t);let{class:r,style:u}=t;r&&!Rt(r)&&(t.class=Le(r)),kt(u)&&(Ni(u)&&!We(u)&&(u=Ht({},u)),t.style=ct(u))}const i=Rt(e)?1:Yc(e)?128:sc(e)?64:kt(e)?4:Ge(e)?2:0;return s(e,t,n,o,a,i,l,!0)}function rv(e){return e?Ni(e)||Rc(e)?Ht({},e):e:null}function $o(e,t,n=!1,o=!1){const{props:a,ref:l,patchFlag:i,children:r,transition:u}=e,p=t?uv(a||{},t):a,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&Qc(p),ref:t&&t.ref?n&&l?We(l)?l.concat(vs(t)):[l,vs(t)]:vs(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$o(e.ssContent),ssFallback:e.ssFallback&&$o(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&o&&Jo(d,u.clone(d)),d}function je(e=" ",t=0){return Ue(sl,null,e,t)}function re(e="",t=!1){return t?(b(),wt(fn,null,e)):Ue(fn,null,e)}function Yn(e){return e==null||typeof e=="boolean"?Ue(fn):We(e)?Ue(Ie,null,e.slice()):ul(e)?Lo(e):Ue(sl,null,String(e))}function Lo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$o(e)}function er(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(We(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),er(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!Rc(t)?t._ctx=jt:a===3&&jt&&(jt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ge(t)?(t={default:t,_ctx:jt},n=32):(t=String(t),o&64?(n=16,t=[je(t)]):n=8);e.children=t,e.shapeFlag|=n}function uv(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=Le([t.class,o.class]));else if(a==="style")t.style=ct([t.style,o.style]);else if(Hl(a)){const l=t[a],i=o[a];i&&l!==i&&!(We(l)&&l.includes(i))&&(t[a]=l?[].concat(l,i):i)}else a!==""&&(t[a]=o[a])}return t}function Jn(e,t,n,o=null){Bn(e,t,7,[n,o])}const cv=Mc();let dv=0;function pv(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||cv,l={uid:dv++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nc(o,a),emitsOptions:Gc(o,a),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:o.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=ev.bind(null,l),e.ce&&e.ce(l),l}let Qt=null;const ea=()=>Qt||jt;let hs,tr;{const e=Yl(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),l=>{a.length>1?a.forEach(i=>i(l)):a[0](l)}};hs=t("__VUE_INSTANCE_SETTERS__",n=>Qt=n),tr=t("__VUE_SSR_SETTERS__",n=>dl=n)}const cl=e=>{const t=Qt;return hs(e),e.scope.on(),()=>{e.scope.off(),hs(t)}},Zc=()=>{Qt&&Qt.scope.off(),hs(null)};function ed(e){return e.vnode.shapeFlag&4}let dl=!1;function fv(e,t=!1,n=!1){t&&tr(t);const{props:o,children:a}=e.vnode,l=ed(e);U1(e,o,l,t),H1(e,a,n);const i=l?gv(e,t):void 0;return t&&tr(!1),i}function gv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,A1);const{setup:o}=n;if(o){no();const a=e.setupContext=o.length>1?vv(e):null,l=cl(e),i=ga(o,e,0,[e.props,a]),r=wu(i);if(oo(),l(),(r||e.sp)&&!ha(e)&&yc(e),r){if(i.then(Zc,Zc),t)return i.then(u=>{td(e,u)}).catch(u=>{ls(u,e,0)});e.asyncDep=i}else td(e,i)}else nd(e)}function td(e,t,n){Ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:kt(t)&&(e.setupState=Xu(t)),nd(e)}function nd(e,t,n){const o=e.type;e.render||(e.render=o.render||qn);{const a=cl(e);no();try{M1(e)}finally{oo(),a()}}}const mv={get(e,t){return nn(e,"get",""),e[t]}};function vv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mv),slots:e.slots,emit:e.emit,expose:t}}function _s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xu(Pi(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in al)return al[n](e)},has(t,n){return n in t||n in al}})):e.proxy}const hv=/(?:^|[-_])(\w)/g,_v=e=>e.replace(hv,t=>t.toUpperCase()).replace(/[-_]/g,"");function od(e,t=!0){return Ge(e)?e.displayName||e.name:e.name||t&&e.__name}function ad(e,t,n=!1){let o=od(t);if(!o&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(o=a[1])}if(!o&&e&&e.parent){const a=l=>{for(const i in l)if(l[i]===t)return i};o=a(e.components||e.parent.type.components)||a(e.appContext.components)}return o?_v(o):n?"App":"Anonymous"}function yv(e){return Ge(e)&&"__vccOpts"in e}const vt=(e,t)=>l1(e,t,dl);function rt(e,t,n){const o=arguments.length;return o===2?kt(t)&&!We(t)?ul(t)?Ue(e,null,[t]):Ue(e,t):Ue(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&ul(n)&&(n=[n]),Ue(e,t,n))}const bv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nr;const ld=typeof window<"u"&&window.trustedTypes;if(ld)try{nr=ld.createPolicy("vue",{createHTML:e=>e})}catch{}const sd=nr?e=>nr.createHTML(e):e=>e,wv="http://www.w3.org/2000/svg",xv="http://www.w3.org/1998/Math/MathML",ro=typeof document<"u"?document:null,id=ro&&ro.createElement("template"),Sv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?ro.createElementNS(wv,e):t==="mathml"?ro.createElementNS(xv,e):n?ro.createElement(e,{is:n}):ro.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>ro.createTextNode(e),createComment:e=>ro.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ro.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,l){const i=n?n.previousSibling:t.lastChild;if(a&&(a===l||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===l||!(a=a.nextSibling)););else{id.innerHTML=sd(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const r=id.content;if(o==="svg"||o==="mathml"){const u=r.firstChild;for(;u.firstChild;)r.appendChild(u.firstChild);r.removeChild(u)}t.insertBefore(r,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ao="transition",pl="animation",ya=Symbol("_vtc"),rd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ud=Ht({},gc,rd),ys=(e=>(e.displayName="Transition",e.props=ud,e))((e,{slots:t})=>rt(h1,dd(e),t)),ta=(e,t=[])=>{We(e)?e.forEach(n=>n(...t)):e&&e(...t)},cd=e=>e?We(e)?e.some(t=>t.length>1):e.length>1:!1;function dd(e){const t={};for(const P in e)P in rd||(t[P]=e[P]);if(e.css===!1)return t;const{name:n="v",type:o,duration:a,enterFromClass:l=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:u=l,appearActiveClass:p=i,appearToClass:d=r,leaveFromClass:c=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,y=Tv(a),S=y&&y[0],$=y&&y[1],{onBeforeEnter:T,onEnter:D,onEnterCancelled:J,onLeave:x,onLeaveCancelled:N,onBeforeAppear:H=T,onAppear:j=D,onAppearCancelled:K=J}=t,X=(P,Z,te,z)=>{P._enterCancelled=z,Mo(P,Z?d:r),Mo(P,Z?p:i),te&&te()},_e=(P,Z)=>{P._isLeaving=!1,Mo(P,c),Mo(P,m),Mo(P,v),Z&&Z()},le=P=>(Z,te)=>{const z=P?j:D,ne=()=>X(Z,P,te);ta(z,[Z,ne]),pd(()=>{Mo(Z,P?u:l),Xn(Z,P?d:r),cd(z)||fd(Z,o,S,ne)})};return Ht(t,{onBeforeEnter(P){ta(T,[P]),Xn(P,l),Xn(P,i)},onBeforeAppear(P){ta(H,[P]),Xn(P,u),Xn(P,p)},onEnter:le(!1),onAppear:le(!0),onLeave(P,Z){P._isLeaving=!0;const te=()=>_e(P,Z);Xn(P,c),P._enterCancelled?(Xn(P,v),ar()):(ar(),Xn(P,v)),pd(()=>{P._isLeaving&&(Mo(P,c),Xn(P,m),cd(x)||fd(P,o,$,te))}),ta(x,[P,te])},onEnterCancelled(P){X(P,!1,void 0,!0),ta(J,[P])},onAppearCancelled(P){X(P,!0,void 0,!0),ta(K,[P])},onLeaveCancelled(P){_e(P),ta(N,[P])}})}function Tv(e){if(e==null)return null;if(kt(e))return[or(e.enter),or(e.leave)];{const t=or(e);return[t,t]}}function or(e){return Tm(e)}function Xn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ya]||(e[ya]=new Set)).add(t)}function Mo(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[ya];n&&(n.delete(t),n.size||(e[ya]=void 0))}function pd(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let kv=0;function fd(e,t,n,o){const a=e._endId=++kv,l=()=>{a===e._endId&&o()};if(n!=null)return setTimeout(l,n);const{type:i,timeout:r,propCount:u}=gd(e,t);if(!i)return o();const p=i+"end";let d=0;const c=()=>{e.removeEventListener(p,v),l()},v=m=>{m.target===e&&++d>=u&&c()};setTimeout(()=>{d<u&&c()},r+1),e.addEventListener(p,v)}function gd(e,t){const n=window.getComputedStyle(e),o=y=>(n[y]||"").split(", "),a=o(`${Ao}Delay`),l=o(`${Ao}Duration`),i=md(a,l),r=o(`${pl}Delay`),u=o(`${pl}Duration`),p=md(r,u);let d=null,c=0,v=0;t===Ao?i>0&&(d=Ao,c=i,v=l.length):t===pl?p>0&&(d=pl,c=p,v=u.length):(c=Math.max(i,p),d=c>0?i>p?Ao:pl:null,v=d?d===Ao?l.length:u.length:0);const m=d===Ao&&/\b(transform|all)(,|$)/.test(o(`${Ao}Property`).toString());return{type:d,timeout:c,propCount:v,hasTransform:m}}function md(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>vd(n)+vd(e[o])))}function vd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ar(){return document.body.offsetHeight}function Cv(e,t,n){const o=e[ya];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const bs=Symbol("_vod"),hd=Symbol("_vsh"),fl={beforeMount(e,{value:t},{transition:n}){e[bs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):gl(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),gl(e,!0),o.enter(e)):o.leave(e,()=>{gl(e,!1)}):gl(e,t))},beforeUnmount(e,{value:t}){gl(e,t)}};function gl(e,t){e.style.display=t?e[bs]:"none",e[hd]=!t}const Ev=Symbol(""),$v=/(^|;)\s*display\s*:/;function Lv(e,t,n){const o=e.style,a=Rt(n);let l=!1;if(n&&!a){if(t)if(Rt(t))for(const i of t.split(";")){const r=i.slice(0,i.indexOf(":")).trim();n[r]==null&&ws(o,r,"")}else for(const i in t)n[i]==null&&ws(o,i,"");for(const i in n)i==="display"&&(l=!0),ws(o,i,n[i])}else if(a){if(t!==n){const i=o[Ev];i&&(n+=";"+i),o.cssText=n,l=$v.test(n)}}else t&&e.removeAttribute("style");bs in e&&(e[bs]=l?o.display:"",e[hd]&&(o.display="none"))}const _d=/\s*!important$/;function ws(e,t,n){if(We(n))n.forEach(o=>ws(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Av(e,t);_d.test(n)?e.setProperty(xo(o),n.replace(_d,""),"important"):e[o]=n}}const yd=["Webkit","Moz","ms"],lr={};function Av(e,t){const n=lr[t];if(n)return n;let o=Ln(t);if(o!=="filter"&&o in e)return lr[t]=o;o=Gl(o);for(let a=0;a<yd.length;a++){const l=yd[a]+o;if(l in e)return lr[t]=l}return t}const bd="http://www.w3.org/1999/xlink";function wd(e,t,n,o,a,l=Lm(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(bd,t.slice(6,t.length)):e.setAttributeNS(bd,t,n):n==null||l&&!Cu(n)?e.removeAttribute(t):e.setAttribute(t,l?"":Pn(n)?String(n):n)}function xd(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?sd(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const r=l==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(r!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const r=typeof e[t];r==="boolean"?n=Cu(n):n==null&&r==="string"?(n="",i=!0):r==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(a||t)}function uo(e,t,n,o){e.addEventListener(t,n,o)}function Mv(e,t,n,o){e.removeEventListener(t,n,o)}const Sd=Symbol("_vei");function Iv(e,t,n,o,a=null){const l=e[Sd]||(e[Sd]={}),i=l[t];if(o&&i)i.value=o;else{const[r,u]=Dv(t);if(o){const p=l[t]=Nv(o,a);uo(e,r,p,u)}else i&&(Mv(e,r,i,u),l[t]=void 0)}}const Td=/(?:Once|Passive|Capture)$/;function Dv(e){let t;if(Td.test(e)){t={};let o;for(;o=e.match(Td);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xo(e.slice(2)),t]}let sr=0;const Rv=Promise.resolve(),Ov=()=>sr||(Rv.then(()=>sr=0),sr=Date.now());function Nv(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Bn(Pv(o,n.value),t,5,[o])};return n.value=e,n.attached=Ov(),n}function Pv(e,t){if(We(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const kd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Fv=(e,t,n,o,a,l)=>{const i=a==="svg";t==="class"?Cv(e,o,i):t==="style"?Lv(e,n,o):Hl(t)?yi(t)||Iv(e,t,n,o,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Bv(e,t,o,i))?(xd(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&wd(e,t,o,i,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Rt(o))?xd(e,Ln(t),o,l,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),wd(e,t,o,i))};function Bv(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&kd(t)&&Ge(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return kd(t)&&Rt(n)?!1:t in e}const Cd=new WeakMap,Ed=new WeakMap,xs=Symbol("_moveCb"),$d=Symbol("_enterCb"),Uv=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:Ht({},ud,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ea(),o=fc();let a,l;return xc(()=>{if(!a.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!Hv(a[0].el,n.vnode.el,i))return;a.forEach(Vv),a.forEach(Wv);const r=a.filter(zv);ar(),r.forEach(u=>{const p=u.el,d=p.style;Xn(p,i),d.transform=d.webkitTransform=d.transitionDuration="";const c=p[xs]=v=>{v&&v.target!==p||(!v||/transform$/.test(v.propertyName))&&(p.removeEventListener("transitionend",c),p[xs]=null,Mo(p,i))};p.addEventListener("transitionend",c)})}),()=>{const i=nt(e),r=dd(i);let u=i.tag||Ie;if(a=[],l)for(let p=0;p<l.length;p++){const d=l[p];d.el&&d.el instanceof Element&&(a.push(d),Jo(d,nl(d,r,o,n)),Cd.set(d,d.el.getBoundingClientRect()))}l=t.default?zi(t.default()):[];for(let p=0;p<l.length;p++){const d=l[p];d.key!=null&&Jo(d,nl(d,r,o,n))}return Ue(u,null,l)}}});function Vv(e){const t=e.el;t[xs]&&t[xs](),t[$d]&&t[$d]()}function Wv(e){Ed.set(e,e.el.getBoundingClientRect())}function zv(e){const t=Cd.get(e),n=Ed.get(e),o=t.left-n.left,a=t.top-n.top;if(o||a){const l=e.el.style;return l.transform=l.webkitTransform=`translate(${o}px,${a}px)`,l.transitionDuration="0s",e}}function Hv(e,t,n){const o=e.cloneNode(),a=e[ya];a&&a.forEach(r=>{r.split(/\s+/).forEach(u=>u&&o.classList.remove(u))}),n.split(/\s+/).forEach(r=>r&&o.classList.add(r)),o.style.display="none";const l=t.nodeType===1?t:t.parentNode;l.appendChild(o);const{hasTransform:i}=gd(o);return l.removeChild(o),i}const Io=e=>{const t=e.props["onUpdate:modelValue"]||!1;return We(t)?n=>ql(t,n):t};function jv(e){e.target.composing=!0}function Ld(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Dn=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[Dn]=Io(a);const l=o||a.props&&a.props.type==="number";uo(e,t?"change":"input",i=>{if(i.target.composing)return;let r=e.value;n&&(r=r.trim()),l&&(r=Kl(r)),e[Dn](r)}),n&&uo(e,"change",()=>{e.value=e.value.trim()}),t||(uo(e,"compositionstart",jv),uo(e,"compositionend",Ld),uo(e,"change",Ld))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:l}},i){if(e[Dn]=Io(i),e.composing)return;const r=(l||e.type==="number")&&!/^0\d/.test(e.value)?Kl(e.value):e.value,u=t??"";r!==u&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===u)||(e.value=u))}},$t={deep:!0,created(e,t,n){e[Dn]=Io(n),uo(e,"change",()=>{const o=e._modelValue,a=ba(e),l=e.checked,i=e[Dn];if(We(o)){const r=Si(o,a),u=r!==-1;if(l&&!u)i(o.concat(a));else if(!l&&u){const p=[...o];p.splice(r,1),i(p)}}else if(pa(o)){const r=new Set(o);l?r.add(a):r.delete(a),i(r)}else i(Id(e,l))})},mounted:Ad,beforeUpdate(e,t,n){e[Dn]=Io(n),Ad(e,t,n)}};function Ad(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(We(t))a=Si(t,o.props.value)>-1;else if(pa(t))a=t.has(o.props.value);else{if(t===n)return;a=jo(t,Id(e,!0))}e.checked!==a&&(e.checked=a)}const co={created(e,{value:t},n){e.checked=jo(t,n.props.value),e[Dn]=Io(n),uo(e,"change",()=>{e[Dn](ba(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[Dn]=Io(o),t!==n&&(e.checked=jo(t,o.props.value))}},Gt={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=pa(t);uo(e,"change",()=>{const l=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Kl(ba(i)):ba(i));e[Dn](e.multiple?a?new Set(l):l:l[0]),e._assigning=!0,qe(()=>{e._assigning=!1})}),e[Dn]=Io(o)},mounted(e,{value:t}){Md(e,t)},beforeUpdate(e,t,n){e[Dn]=Io(n)},updated(e,{value:t}){e._assigning||Md(e,t)}};function Md(e,t){const n=e.multiple,o=We(t);if(!(n&&!o&&!pa(t))){for(let a=0,l=e.options.length;a<l;a++){const i=e.options[a],r=ba(i);if(n)if(o){const u=typeof r;u==="string"||u==="number"?i.selected=t.some(p=>String(p)===String(r)):i.selected=Si(t,r)>-1}else i.selected=t.has(r);else if(jo(ba(i),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ba(e){return"_value"in e?e._value:e.value}function Id(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Dd={created(e,t,n){Ss(e,t,n,null,"created")},mounted(e,t,n){Ss(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){Ss(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){Ss(e,t,n,o,"updated")}};function Gv(e,t){switch(e){case"SELECT":return Gt;case"TEXTAREA":return Ae;default:switch(t){case"checkbox":return $t;case"radio":return co;default:return Ae}}}function Ss(e,t,n,o,a){const i=Gv(e.tagName,n.props&&n.props.type)[a];i&&i(e,t,n,o)}const qv=["ctrl","shift","alt","meta"],Kv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qv.some(n=>e[`${n}Key`]&&!t.includes(n))},Je=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...l)=>{for(let i=0;i<t.length;i++){const r=Kv[t[i]];if(r&&r(a,t))return}return e(a,...l)})},Yv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},an=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=a=>{if(!("key"in a))return;const l=xo(a.key);if(t.some(i=>i===l||Yv[i]===l))return e(a)})},Jv=Ht({patchProp:Fv},Sv);let Rd;function Od(){return Rd||(Rd=G1(Jv))}const Nd=(...e)=>{Od().render(...e)},Xv=(...e)=>{const t=Od().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Zv(o);if(!a)return;const l=t._component;!Ge(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const i=n(a,!1,Qv(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),i},t};function Qv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Zv(e){return Rt(e)?document.querySelector(e):e}/*!
  * shared v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Ts=typeof window<"u",Do=(e,t=!1)=>t?Symbol.for(e):Symbol(e),eh=(e,t,n)=>th({l:e,k:t,s:n}),th=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ut=e=>typeof e=="number"&&isFinite(e),nh=e=>ir(e)==="[object Date]",wa=e=>ir(e)==="[object RegExp]",ks=e=>Ze(e)&&Object.keys(e).length===0,qt=Object.assign,oh=Object.create,xt=(e=null)=>oh(e);let Pd;const na=()=>Pd||(Pd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:xt());function Fd(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const ah=Object.prototype.hasOwnProperty;function Un(e,t){return ah.call(e,t)}const Vt=Array.isArray,At=e=>typeof e=="function",Oe=e=>typeof e=="string",ut=e=>typeof e=="boolean",dt=e=>e!==null&&typeof e=="object",lh=e=>dt(e)&&At(e.then)&&At(e.catch),Bd=Object.prototype.toString,ir=e=>Bd.call(e),Ze=e=>ir(e)==="[object Object]",sh=e=>e==null?"":Vt(e)||Ze(e)&&e.toString===Bd?JSON.stringify(e,null,2):String(e);function rr(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}function ih(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Cs=e=>!dt(e)||Vt(e);function Es(e,t){if(Cs(e)||Cs(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:o,des:a}=n.pop();Object.keys(o).forEach(l=>{l!=="__proto__"&&(dt(o[l])&&!dt(a[l])&&(a[l]=Array.isArray(o[l])?[]:xt()),Cs(a[l])||Cs(o[l])?a[l]=o[l]:n.push({src:o[l],des:a[l]}))})}}/*!
  * message-compiler v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function rh(e,t,n){return{line:e,column:t,offset:n}}function ur(e,t,n){return{start:e,end:t}}const yt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},uh=17;function $s(e,t,n={}){const{domain:o,messages:a,args:l}=n,i=e,r=new SyntaxError(String(i));return r.code=e,t&&(r.location=t),r.domain=o,r}function ch(e){throw e}const po=" ",dh="\r",gn=`
`,ph="\u2028",fh="\u2029";function gh(e){const t=e;let n=0,o=1,a=1,l=0;const i=j=>t[j]===dh&&t[j+1]===gn,r=j=>t[j]===gn,u=j=>t[j]===fh,p=j=>t[j]===ph,d=j=>i(j)||r(j)||u(j)||p(j),c=()=>n,v=()=>o,m=()=>a,y=()=>l,S=j=>i(j)||u(j)||p(j)?gn:t[j],$=()=>S(n),T=()=>S(n+l);function D(){return l=0,d(n)&&(o++,a=0),i(n)&&n++,n++,a++,t[n]}function J(){return i(n+l)&&l++,l++,t[n+l]}function x(){n=0,o=1,a=1,l=0}function N(j=0){l=j}function H(){const j=n+l;for(;j!==n;)D();l=0}return{index:c,line:v,column:m,peekOffset:y,charAt:S,currentChar:$,currentPeek:T,next:D,peek:J,reset:x,resetPeek:N,skipToPeek:H}}const Ro=void 0,mh=".",Ud="'",vh="tokenizer";function hh(e,t={}){const n=t.location!==!1,o=gh(e),a=()=>o.index(),l=()=>rh(o.line(),o.column(),o.index()),i=l(),r=a(),u={currentType:13,offset:r,startLoc:i,endLoc:i,lastType:13,lastOffset:r,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},p=()=>u,{onError:d}=t;function c(L,_,R,...q){const xe=p();if(_.column+=R,_.offset+=R,d){const we=n?ur(xe.startLoc,_):null,ee=$s(L,we,{domain:vh,args:q});d(ee)}}function v(L,_,R){L.endLoc=l(),L.currentType=_;const q={type:_};return n&&(q.loc=ur(L.startLoc,L.endLoc)),R!=null&&(q.value=R),q}const m=L=>v(L,13);function y(L,_){return L.currentChar()===_?(L.next(),_):(c(yt.EXPECTED_TOKEN,l(),0,_),"")}function S(L){let _="";for(;L.currentPeek()===po||L.currentPeek()===gn;)_+=L.currentPeek(),L.peek();return _}function $(L){const _=S(L);return L.skipToPeek(),_}function T(L){if(L===Ro)return!1;const _=L.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_===95}function D(L){if(L===Ro)return!1;const _=L.charCodeAt(0);return _>=48&&_<=57}function J(L,_){const{currentType:R}=_;if(R!==2)return!1;S(L);const q=T(L.currentPeek());return L.resetPeek(),q}function x(L,_){const{currentType:R}=_;if(R!==2)return!1;S(L);const q=L.currentPeek()==="-"?L.peek():L.currentPeek(),xe=D(q);return L.resetPeek(),xe}function N(L,_){const{currentType:R}=_;if(R!==2)return!1;S(L);const q=L.currentPeek()===Ud;return L.resetPeek(),q}function H(L,_){const{currentType:R}=_;if(R!==7)return!1;S(L);const q=L.currentPeek()===".";return L.resetPeek(),q}function j(L,_){const{currentType:R}=_;if(R!==8)return!1;S(L);const q=T(L.currentPeek());return L.resetPeek(),q}function K(L,_){const{currentType:R}=_;if(!(R===7||R===11))return!1;S(L);const q=L.currentPeek()===":";return L.resetPeek(),q}function X(L,_){const{currentType:R}=_;if(R!==9)return!1;const q=()=>{const we=L.currentPeek();return we==="{"?T(L.peek()):we==="@"||we==="|"||we===":"||we==="."||we===po||!we?!1:we===gn?(L.peek(),q()):le(L,!1)},xe=q();return L.resetPeek(),xe}function _e(L){S(L);const _=L.currentPeek()==="|";return L.resetPeek(),_}function le(L,_=!0){const R=(xe=!1,we="")=>{const ee=L.currentPeek();return ee==="{"||ee==="@"||!ee?xe:ee==="|"?!(we===po||we===gn):ee===po?(L.peek(),R(!0,po)):ee===gn?(L.peek(),R(!0,gn)):!0},q=R();return _&&L.resetPeek(),q}function P(L,_){const R=L.currentChar();return R===Ro?Ro:_(R)?(L.next(),R):null}function Z(L){const _=L.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36}function te(L){return P(L,Z)}function z(L){const _=L.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36||_===45}function ne(L){return P(L,z)}function oe(L){const _=L.charCodeAt(0);return _>=48&&_<=57}function F(L){return P(L,oe)}function U(L){const _=L.charCodeAt(0);return _>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102}function ue(L){return P(L,U)}function ke(L){let _="",R="";for(;_=F(L);)R+=_;return R}function ie(L){let _="";for(;;){const R=L.currentChar();if(R==="{"||R==="}"||R==="@"||R==="|"||!R)break;if(R===po||R===gn)if(le(L))_+=R,L.next();else{if(_e(L))break;_+=R,L.next()}else _+=R,L.next()}return _}function ge(L){$(L);let _="",R="";for(;_=ne(L);)R+=_;return L.currentChar()===Ro&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R}function de(L){$(L);let _="";return L.currentChar()==="-"?(L.next(),_+=`-${ke(L)}`):_+=ke(L),L.currentChar()===Ro&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),_}function ae(L){return L!==Ud&&L!==gn}function G(L){$(L),y(L,"'");let _="",R="";for(;_=P(L,ae);)_==="\\"?R+=A(L):R+=_;const q=L.currentChar();return q===gn||q===Ro?(c(yt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),q===gn&&(L.next(),y(L,"'")),R):(y(L,"'"),R)}function A(L){const _=L.currentChar();switch(_){case"\\":case"'":return L.next(),`\\${_}`;case"u":return B(L,_,4);case"U":return B(L,_,6);default:return c(yt.UNKNOWN_ESCAPE_SEQUENCE,l(),0,_),""}}function B(L,_,R){y(L,_);let q="";for(let xe=0;xe<R;xe++){const we=ue(L);if(!we){c(yt.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${_}${q}${L.currentChar()}`);break}q+=we}return`\\${_}${q}`}function V(L){return L!=="{"&&L!=="}"&&L!==po&&L!==gn}function I(L){$(L);let _="",R="";for(;_=P(L,V);)R+=_;return R}function W(L){let _="",R="";for(;_=te(L);)R+=_;return R}function k(L){const _=R=>{const q=L.currentChar();return q==="{"||q==="@"||q==="|"||q==="("||q===")"||!q||q===po?R:(R+=q,L.next(),_(R))};return _("")}function w(L){$(L);const _=y(L,"|");return $(L),_}function O(L,_){let R=null;switch(L.currentChar()){case"{":return _.braceNest>=1&&c(yt.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),L.next(),R=v(_,2,"{"),$(L),_.braceNest++,R;case"}":return _.braceNest>0&&_.currentType===2&&c(yt.EMPTY_PLACEHOLDER,l(),0),L.next(),R=v(_,3,"}"),_.braceNest--,_.braceNest>0&&$(L),_.inLinked&&_.braceNest===0&&(_.inLinked=!1),R;case"@":return _.braceNest>0&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R=Q(L,_)||m(_),_.braceNest=0,R;default:{let xe=!0,we=!0,ee=!0;if(_e(L))return _.braceNest>0&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R=v(_,1,w(L)),_.braceNest=0,_.inLinked=!1,R;if(_.braceNest>0&&(_.currentType===4||_.currentType===5||_.currentType===6))return c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),_.braceNest=0,pe(L,_);if(xe=J(L,_))return R=v(_,4,ge(L)),$(L),R;if(we=x(L,_))return R=v(_,5,de(L)),$(L),R;if(ee=N(L,_))return R=v(_,6,G(L)),$(L),R;if(!xe&&!we&&!ee)return R=v(_,12,I(L)),c(yt.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,R.value),$(L),R;break}}return R}function Q(L,_){const{currentType:R}=_;let q=null;const xe=L.currentChar();switch((R===7||R===8||R===11||R===9)&&(xe===gn||xe===po)&&c(yt.INVALID_LINKED_FORMAT,l(),0),xe){case"@":return L.next(),q=v(_,7,"@"),_.inLinked=!0,q;case".":return $(L),L.next(),v(_,8,".");case":":return $(L),L.next(),v(_,9,":");default:return _e(L)?(q=v(_,1,w(L)),_.braceNest=0,_.inLinked=!1,q):H(L,_)||K(L,_)?($(L),Q(L,_)):j(L,_)?($(L),v(_,11,W(L))):X(L,_)?($(L),xe==="{"?O(L,_)||q:v(_,10,k(L))):(R===7&&c(yt.INVALID_LINKED_FORMAT,l(),0),_.braceNest=0,_.inLinked=!1,pe(L,_))}}function pe(L,_){let R={type:13};if(_.braceNest>0)return O(L,_)||m(_);if(_.inLinked)return Q(L,_)||m(_);switch(L.currentChar()){case"{":return O(L,_)||m(_);case"}":return c(yt.UNBALANCED_CLOSING_BRACE,l(),0),L.next(),v(_,3,"}");case"@":return Q(L,_)||m(_);default:{if(_e(L))return R=v(_,1,w(L)),_.braceNest=0,_.inLinked=!1,R;if(le(L))return v(_,0,ie(L));break}}return R}function ye(){const{currentType:L,offset:_,startLoc:R,endLoc:q}=u;return u.lastType=L,u.lastOffset=_,u.lastStartLoc=R,u.lastEndLoc=q,u.offset=a(),u.startLoc=l(),o.currentChar()===Ro?v(u,13):pe(o,u)}return{nextToken:ye,currentOffset:a,currentPosition:l,context:p}}const _h="parser",yh=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function bh(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(t||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):""}}}function wh(e={}){const t=e.location!==!1,{onError:n}=e;function o(T,D,J,x,...N){const H=T.currentPosition();if(H.offset+=x,H.column+=x,n){const j=t?ur(J,H):null,K=$s(D,j,{domain:_h,args:N});n(K)}}function a(T,D,J){const x={type:T};return t&&(x.start=D,x.end=D,x.loc={start:J,end:J}),x}function l(T,D,J,x){t&&(T.end=D,T.loc&&(T.loc.end=J))}function i(T,D){const J=T.context(),x=a(3,J.offset,J.startLoc);return x.value=D,l(x,T.currentOffset(),T.currentPosition()),x}function r(T,D){const J=T.context(),{lastOffset:x,lastStartLoc:N}=J,H=a(5,x,N);return H.index=parseInt(D,10),T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function u(T,D){const J=T.context(),{lastOffset:x,lastStartLoc:N}=J,H=a(4,x,N);return H.key=D,T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function p(T,D){const J=T.context(),{lastOffset:x,lastStartLoc:N}=J,H=a(9,x,N);return H.value=D.replace(yh,bh),T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function d(T){const D=T.nextToken(),J=T.context(),{lastOffset:x,lastStartLoc:N}=J,H=a(8,x,N);return D.type!==11?(o(T,yt.UNEXPECTED_EMPTY_LINKED_MODIFIER,J.lastStartLoc,0),H.value="",l(H,x,N),{nextConsumeToken:D,node:H}):(D.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,J.lastStartLoc,0,Qn(D)),H.value=D.value||"",l(H,T.currentOffset(),T.currentPosition()),{node:H})}function c(T,D){const J=T.context(),x=a(7,J.offset,J.startLoc);return x.value=D,l(x,T.currentOffset(),T.currentPosition()),x}function v(T){const D=T.context(),J=a(6,D.offset,D.startLoc);let x=T.nextToken();if(x.type===8){const N=d(T);J.modifier=N.node,x=N.nextConsumeToken||T.nextToken()}switch(x.type!==9&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(x)),x=T.nextToken(),x.type===2&&(x=T.nextToken()),x.type){case 10:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(x)),J.key=c(T,x.value||"");break;case 4:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(x)),J.key=u(T,x.value||"");break;case 5:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(x)),J.key=r(T,x.value||"");break;case 6:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(x)),J.key=p(T,x.value||"");break;default:{o(T,yt.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const N=T.context(),H=a(7,N.offset,N.startLoc);return H.value="",l(H,N.offset,N.startLoc),J.key=H,l(J,N.offset,N.startLoc),{nextConsumeToken:x,node:J}}}return l(J,T.currentOffset(),T.currentPosition()),{node:J}}function m(T){const D=T.context(),J=D.currentType===1?T.currentOffset():D.offset,x=D.currentType===1?D.endLoc:D.startLoc,N=a(2,J,x);N.items=[];let H=null;do{const X=H||T.nextToken();switch(H=null,X.type){case 0:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(X)),N.items.push(i(T,X.value||""));break;case 5:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(X)),N.items.push(r(T,X.value||""));break;case 4:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(X)),N.items.push(u(T,X.value||""));break;case 6:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Qn(X)),N.items.push(p(T,X.value||""));break;case 7:{const _e=v(T);N.items.push(_e.node),H=_e.nextConsumeToken||null;break}}}while(D.currentType!==13&&D.currentType!==1);const j=D.currentType===1?D.lastOffset:T.currentOffset(),K=D.currentType===1?D.lastEndLoc:T.currentPosition();return l(N,j,K),N}function y(T,D,J,x){const N=T.context();let H=x.items.length===0;const j=a(1,D,J);j.cases=[],j.cases.push(x);do{const K=m(T);H||(H=K.items.length===0),j.cases.push(K)}while(N.currentType!==13);return H&&o(T,yt.MUST_HAVE_MESSAGES_IN_PLURAL,J,0),l(j,T.currentOffset(),T.currentPosition()),j}function S(T){const D=T.context(),{offset:J,startLoc:x}=D,N=m(T);return D.currentType===13?N:y(T,J,x,N)}function $(T){const D=hh(T,qt({},e)),J=D.context(),x=a(0,J.offset,J.startLoc);return t&&x.loc&&(x.loc.source=T),x.body=S(D),e.onCacheKey&&(x.cacheKey=e.onCacheKey(T)),J.currentType!==13&&o(D,yt.UNEXPECTED_LEXICAL_ANALYSIS,J.lastStartLoc,0,T[J.offset]||""),l(x,D.currentOffset(),D.currentPosition()),x}return{parse:$}}function Qn(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function xh(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:l=>(n.helpers.add(l),l)}}function Vd(e,t){for(let n=0;n<e.length;n++)cr(e[n],t)}function cr(e,t){switch(e.type){case 1:Vd(e.cases,t),t.helper("plural");break;case 2:Vd(e.items,t);break;case 6:{cr(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function Sh(e,t={}){const n=xh(e);n.helper("normalize"),e.body&&cr(e.body,n);const o=n.context();e.helpers=Array.from(o.helpers)}function Th(e){const t=e.body;return t.type===2?Wd(t):t.cases.forEach(n=>Wd(n)),e}function Wd(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const o=e.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;t.push(o.value)}if(t.length===e.items.length){e.static=rr(t);for(let n=0;n<e.items.length;n++){const o=e.items[n];(o.type===3||o.type===9)&&delete o.value}}}}function xa(e){switch(e.t=e.type,e.type){case 0:{const t=e;xa(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let o=0;o<n.length;o++)xa(n[o]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let o=0;o<n.length;o++)xa(n[o]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;xa(t.key),t.k=t.key,delete t.key,t.modifier&&(xa(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function kh(e,t){const{filename:n,breakLineCode:o,needIndent:a}=t,l=t.location!==!1,i={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:a,indentLevel:0};l&&e.loc&&(i.source=e.loc.source);const r=()=>i;function u(S,$){i.code+=S}function p(S,$=!0){const T=$?o:"";u(a?T+"  ".repeat(S):T)}function d(S=!0){const $=++i.indentLevel;S&&p($)}function c(S=!0){const $=--i.indentLevel;S&&p($)}function v(){p(i.indentLevel)}return{context:r,push:u,indent:d,deindent:c,newline:v,helper:S=>`_${S}`,needIndent:()=>i.needIndent}}function Ch(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Sa(e,t.key),t.modifier?(e.push(", "),Sa(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function Eh(e,t){const{helper:n,needIndent:o}=e;e.push(`${n("normalize")}([`),e.indent(o());const a=t.items.length;for(let l=0;l<a&&(Sa(e,t.items[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}function $h(e,t){const{helper:n,needIndent:o}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(o());const a=t.cases.length;for(let l=0;l<a&&(Sa(e,t.cases[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}}function Lh(e,t){t.body?Sa(e,t.body):e.push("null")}function Sa(e,t){const{helper:n}=e;switch(t.type){case 0:Lh(e,t);break;case 1:$h(e,t);break;case 2:Eh(e,t);break;case 6:Ch(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const Ah=(e,t={})=>{const n=Oe(t.mode)?t.mode:"normal",o=Oe(t.filename)?t.filename:"message.intl";t.sourceMap;const a=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,l=t.needIndent?t.needIndent:n!=="arrow",i=e.helpers||[],r=kh(e,{filename:o,breakLineCode:a,needIndent:l});r.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),r.indent(l),i.length>0&&(r.push(`const { ${rr(i.map(d=>`${d}: _${d}`),", ")} } = ctx`),r.newline()),r.push("return "),Sa(r,e),r.deindent(l),r.push("}"),delete e.helpers;const{code:u,map:p}=r.context();return{ast:e,code:u,map:p?p.toJSON():void 0}};function Mh(e,t={}){const n=qt({},t),o=!!n.jit,a=!!n.minify,l=n.optimize==null?!0:n.optimize,r=wh(n).parse(e);return o?(l&&Th(r),a&&xa(r),{ast:r,code:""}):(Sh(r,n),Ah(r,n))}/*!
  * core-base v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Ih(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(na().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(na().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function dr(e){return n=>Dh(n,e)}function Dh(e,t){const n=Oh(t);if(n==null)throw ml(0);if(fr(n)===1){const l=Ph(n);return e.plural(l.reduce((i,r)=>[...i,zd(e,r)],[]))}else return zd(e,n)}const Rh=["b","body"];function Oh(e){return Oo(e,Rh)}const Nh=["c","cases"];function Ph(e){return Oo(e,Nh,[])}function zd(e,t){const n=Bh(t);if(n!=null)return e.type==="text"?n:e.normalize([n]);{const o=Vh(t).reduce((a,l)=>[...a,pr(e,l)],[]);return e.normalize(o)}}const Fh=["s","static"];function Bh(e){return Oo(e,Fh)}const Uh=["i","items"];function Vh(e){return Oo(e,Uh,[])}function pr(e,t){const n=fr(t);switch(n){case 3:return Ls(t,n);case 9:return Ls(t,n);case 4:{const o=t;if(Un(o,"k")&&o.k)return e.interpolate(e.named(o.k));if(Un(o,"key")&&o.key)return e.interpolate(e.named(o.key));throw ml(n)}case 5:{const o=t;if(Un(o,"i")&&Ut(o.i))return e.interpolate(e.list(o.i));if(Un(o,"index")&&Ut(o.index))return e.interpolate(e.list(o.index));throw ml(n)}case 6:{const o=t,a=jh(o),l=qh(o);return e.linked(pr(e,l),a?pr(e,a):void 0,e.type)}case 7:return Ls(t,n);case 8:return Ls(t,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Wh=["t","type"];function fr(e){return Oo(e,Wh)}const zh=["v","value"];function Ls(e,t){const n=Oo(e,zh);if(n)return n;throw ml(t)}const Hh=["m","modifier"];function jh(e){return Oo(e,Hh)}const Gh=["k","key"];function qh(e){const t=Oo(e,Gh);if(t)return t;throw ml(6)}function Oo(e,t,n){for(let o=0;o<t.length;o++){const a=t[o];if(Un(e,a)&&e[a]!=null)return e[a]}return n}function ml(e){return new Error(`unhandled node type: ${e}`)}const Kh=e=>e;let As=xt();function Ta(e){return dt(e)&&fr(e)===0&&(Un(e,"b")||Un(e,"body"))}function Yh(e,t={}){let n=!1;const o=t.onError||ch;return t.onError=a=>{n=!0,o(a)},{...Mh(e,t),detectError:n}}function Jh(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Oe(e)){ut(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||Kh)(e),a=As[o];if(a)return a;const{ast:l,detectError:i}=Yh(e,{...t,location:!1,jit:!0}),r=dr(l);return i?r:As[o]=r}else{const n=e.cacheKey;if(n){const o=As[n];return o||(As[n]=dr(e))}else return dr(e)}}let vl=null;function Xh(e){vl=e}function Qh(e,t,n){vl&&vl.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const Zh=e2("function:translate");function e2(e){return t=>vl&&vl.emit(e,t)}const fo={INVALID_ARGUMENT:uh,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},t2=24;function go(e){return $s(e,null,void 0)}function gr(e,t){return t.locale!=null?Hd(t.locale):Hd(e.locale)}let mr;function Hd(e){if(Oe(e))return e;if(At(e)){if(e.resolvedOnce&&mr!=null)return mr;if(e.constructor.name==="Function"){const t=e();if(lh(t))throw go(fo.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return mr=t}else throw go(fo.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw go(fo.NOT_SUPPORT_LOCALE_TYPE)}function n2(e,t,n){return[...new Set([n,...Vt(t)?t:dt(t)?Object.keys(t):Oe(t)?[t]:[n]])]}function jd(e,t,n){const o=Oe(n)?n:hl,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let l=a.__localeChainCache.get(o);if(!l){l=[];let i=[n];for(;Vt(i);)i=Gd(l,i,t);const r=Vt(t)||!Ze(t)?t:t.default?t.default:null;i=Oe(r)?[r]:r,Vt(i)&&Gd(l,i,!1),a.__localeChainCache.set(o,l)}return l}function Gd(e,t,n){let o=!0;for(let a=0;a<t.length&&ut(o);a++){const l=t[a];Oe(l)&&(o=o2(e,t[a],n))}return o}function o2(e,t,n){let o;const a=t.split("-");do{const l=a.join("-");o=a2(e,l,n),a.splice(-1,1)}while(a.length&&o===!0);return o}function a2(e,t,n){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(Vt(n)||Ze(n))&&n[a]&&(o=n[a])}return o}const No=[];No[0]={w:[0],i:[3,0],"[":[4],o:[7]},No[1]={w:[1],".":[2],"[":[4],o:[7]},No[2]={w:[2],i:[3,0],0:[3,0]},No[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},No[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},No[5]={"'":[4,0],o:8,l:[5,0]},No[6]={'"':[4,0],o:8,l:[6,0]};const l2=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function s2(e){return l2.test(e)}function i2(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function r2(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function u2(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:s2(t)?i2(t):"*"+t}function c2(e){const t=[];let n=-1,o=0,a=0,l,i,r,u,p,d,c;const v=[];v[0]=()=>{i===void 0?i=r:i+=r},v[1]=()=>{i!==void 0&&(t.push(i),i=void 0)},v[2]=()=>{v[0](),a++},v[3]=()=>{if(a>0)a--,o=4,v[0]();else{if(a=0,i===void 0||(i=u2(i),i===!1))return!1;v[1]()}};function m(){const y=e[n+1];if(o===5&&y==="'"||o===6&&y==='"')return n++,r="\\"+y,v[0](),!0}for(;o!==null;)if(n++,l=e[n],!(l==="\\"&&m())){if(u=r2(l),c=No[o],p=c[u]||c.l||8,p===8||(o=p[0],p[1]!==void 0&&(d=v[p[1]],d&&(r=l,d()===!1))))return;if(o===7)return t}}const qd=new Map;function d2(e,t){return dt(e)?e[t]:null}function p2(e,t){if(!dt(e))return null;let n=qd.get(t);if(n||(n=c2(t),n&&qd.set(t,n)),!n)return null;const o=n.length;let a=e,l=0;for(;l<o;){const i=a[n[l]];if(i===void 0||At(a))return null;a=i,l++}return a}const f2="11.1.2",Ms=-1,hl="en-US",Kd="",Yd=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function g2(){return{upper:(e,t)=>t==="text"&&Oe(e)?e.toUpperCase():t==="vnode"&&dt(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Oe(e)?e.toLowerCase():t==="vnode"&&dt(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Oe(e)?Yd(e):t==="vnode"&&dt(e)&&"__v_isVNode"in e?Yd(e.children):e}}let Jd;function m2(e){Jd=e}let Xd;function v2(e){Xd=e}let Qd;function h2(e){Qd=e}let Zd=null;const _2=e=>{Zd=e},y2=()=>Zd;let ep=null;const tp=e=>{ep=e},b2=()=>ep;let np=0;function w2(e={}){const t=At(e.onWarn)?e.onWarn:ih,n=Oe(e.version)?e.version:f2,o=Oe(e.locale)||At(e.locale)?e.locale:hl,a=At(o)?hl:o,l=Vt(e.fallbackLocale)||Ze(e.fallbackLocale)||Oe(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,i=Ze(e.messages)?e.messages:vr(a),r=Ze(e.datetimeFormats)?e.datetimeFormats:vr(a),u=Ze(e.numberFormats)?e.numberFormats:vr(a),p=qt(xt(),e.modifiers,g2()),d=e.pluralRules||xt(),c=At(e.missing)?e.missing:null,v=ut(e.missingWarn)||wa(e.missingWarn)?e.missingWarn:!0,m=ut(e.fallbackWarn)||wa(e.fallbackWarn)?e.fallbackWarn:!0,y=!!e.fallbackFormat,S=!!e.unresolving,$=At(e.postTranslation)?e.postTranslation:null,T=Ze(e.processor)?e.processor:null,D=ut(e.warnHtmlMessage)?e.warnHtmlMessage:!0,J=!!e.escapeParameter,x=At(e.messageCompiler)?e.messageCompiler:Jd,N=At(e.messageResolver)?e.messageResolver:Xd||d2,H=At(e.localeFallbacker)?e.localeFallbacker:Qd||n2,j=dt(e.fallbackContext)?e.fallbackContext:void 0,K=e,X=dt(K.__datetimeFormatters)?K.__datetimeFormatters:new Map,_e=dt(K.__numberFormatters)?K.__numberFormatters:new Map,le=dt(K.__meta)?K.__meta:{};np++;const P={version:n,cid:np,locale:o,fallbackLocale:l,messages:i,modifiers:p,pluralRules:d,missing:c,missingWarn:v,fallbackWarn:m,fallbackFormat:y,unresolving:S,postTranslation:$,processor:T,warnHtmlMessage:D,escapeParameter:J,messageCompiler:x,messageResolver:N,localeFallbacker:H,fallbackContext:j,onWarn:t,__meta:le};return P.datetimeFormats=r,P.numberFormats=u,P.__datetimeFormatters=X,P.__numberFormatters=_e,__INTLIFY_PROD_DEVTOOLS__&&Qh(P,n,le),P}const vr=e=>({[e]:xt()});function hr(e,t,n,o,a){const{missing:l,onWarn:i}=e;if(l!==null){const r=l(e,n,t,a);return Oe(r)?r:t}else return t}function _l(e,t,n){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function x2(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function S2(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let o=n+1;o<t.length;o++)if(x2(e,t[o]))return!0;return!1}function op(e,...t){const{datetimeFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:i}=e,{__datetimeFormatters:r}=e,[u,p,d,c]=_r(...t),v=ut(d.missingWarn)?d.missingWarn:e.missingWarn;ut(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn;const m=!!d.part,y=gr(e,d),S=i(e,a,y);if(!Oe(u)||u==="")return new Intl.DateTimeFormat(y,c).format(p);let $={},T,D=null;const J="datetime format";for(let H=0;H<S.length&&(T=S[H],$=n[T]||{},D=$[u],!Ze(D));H++)hr(e,u,T,v,J);if(!Ze(D)||!Oe(T))return o?Ms:u;let x=`${T}__${u}`;ks(c)||(x=`${x}__${JSON.stringify(c)}`);let N=r.get(x);return N||(N=new Intl.DateTimeFormat(T,qt({},D,c)),r.set(x,N)),m?N.formatToParts(p):N.format(p)}const ap=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function _r(...e){const[t,n,o,a]=e,l=xt();let i=xt(),r;if(Oe(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw go(fo.INVALID_ISO_DATE_ARGUMENT);const p=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();r=new Date(p);try{r.toISOString()}catch{throw go(fo.INVALID_ISO_DATE_ARGUMENT)}}else if(nh(t)){if(isNaN(t.getTime()))throw go(fo.INVALID_DATE_ARGUMENT);r=t}else if(Ut(t))r=t;else throw go(fo.INVALID_ARGUMENT);return Oe(n)?l.key=n:Ze(n)&&Object.keys(n).forEach(u=>{ap.includes(u)?i[u]=n[u]:l[u]=n[u]}),Oe(o)?l.locale=o:Ze(o)&&(i=o),Ze(a)&&(i=a),[l.key||"",r,l,i]}function lp(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__datetimeFormatters.has(l)&&o.__datetimeFormatters.delete(l)}}function sp(e,...t){const{numberFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:i}=e,{__numberFormatters:r}=e,[u,p,d,c]=yr(...t),v=ut(d.missingWarn)?d.missingWarn:e.missingWarn;ut(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn;const m=!!d.part,y=gr(e,d),S=i(e,a,y);if(!Oe(u)||u==="")return new Intl.NumberFormat(y,c).format(p);let $={},T,D=null;const J="number format";for(let H=0;H<S.length&&(T=S[H],$=n[T]||{},D=$[u],!Ze(D));H++)hr(e,u,T,v,J);if(!Ze(D)||!Oe(T))return o?Ms:u;let x=`${T}__${u}`;ks(c)||(x=`${x}__${JSON.stringify(c)}`);let N=r.get(x);return N||(N=new Intl.NumberFormat(T,qt({},D,c)),r.set(x,N)),m?N.formatToParts(p):N.format(p)}const ip=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function yr(...e){const[t,n,o,a]=e,l=xt();let i=xt();if(!Ut(t))throw go(fo.INVALID_ARGUMENT);const r=t;return Oe(n)?l.key=n:Ze(n)&&Object.keys(n).forEach(u=>{ip.includes(u)?i[u]=n[u]:l[u]=n[u]}),Oe(o)?l.locale=o:Ze(o)&&(i=o),Ze(a)&&(i=a),[l.key||"",r,l,i]}function rp(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__numberFormatters.has(l)&&o.__numberFormatters.delete(l)}}const T2=e=>e,k2=e=>"",C2="text",E2=e=>e.length===0?"":rr(e),$2=sh;function up(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function L2(e){const t=Ut(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Ut(e.named.count)||Ut(e.named.n))?Ut(e.named.count)?e.named.count:Ut(e.named.n)?e.named.n:t:t}function A2(e,t){t.count||(t.count=e),t.n||(t.n=e)}function M2(e={}){const t=e.locale,n=L2(e),o=dt(e.pluralRules)&&Oe(t)&&At(e.pluralRules[t])?e.pluralRules[t]:up,a=dt(e.pluralRules)&&Oe(t)&&At(e.pluralRules[t])?up:void 0,l=T=>T[o(n,T.length,a)],i=e.list||[],r=T=>i[T],u=e.named||xt();Ut(e.pluralIndex)&&A2(n,u);const p=T=>u[T];function d(T,D){const J=At(e.messages)?e.messages(T,!!D):dt(e.messages)?e.messages[T]:!1;return J||(e.parent?e.parent.message(T):k2)}const c=T=>e.modifiers?e.modifiers[T]:T2,v=Ze(e.processor)&&At(e.processor.normalize)?e.processor.normalize:E2,m=Ze(e.processor)&&At(e.processor.interpolate)?e.processor.interpolate:$2,y=Ze(e.processor)&&Oe(e.processor.type)?e.processor.type:C2,$={list:r,named:p,plural:l,linked:(T,...D)=>{const[J,x]=D;let N="text",H="";D.length===1?dt(J)?(H=J.modifier||H,N=J.type||N):Oe(J)&&(H=J||H):D.length===2&&(Oe(J)&&(H=J||H),Oe(x)&&(N=x||N));const j=d(T,!0)($),K=N==="vnode"&&Vt(j)&&H?j[0]:j;return H?c(H)(K,N):K},message:d,type:y,interpolate:m,normalize:v,values:qt(xt(),i,u)};return $}const cp=()=>"",Rn=e=>At(e);function dp(e,...t){const{fallbackFormat:n,postTranslation:o,unresolving:a,messageCompiler:l,fallbackLocale:i,messages:r}=e,[u,p]=br(...t),d=ut(p.missingWarn)?p.missingWarn:e.missingWarn,c=ut(p.fallbackWarn)?p.fallbackWarn:e.fallbackWarn,v=ut(p.escapeParameter)?p.escapeParameter:e.escapeParameter,m=!!p.resolvedMessage,y=Oe(p.default)||ut(p.default)?ut(p.default)?l?u:()=>u:p.default:n?l?u:()=>u:null,S=n||y!=null&&(Oe(y)||At(y)),$=gr(e,p);v&&I2(p);let[T,D,J]=m?[u,$,r[$]||xt()]:pp(e,u,$,i,c,d),x=T,N=u;if(!m&&!(Oe(x)||Ta(x)||Rn(x))&&S&&(x=y,N=x),!m&&(!(Oe(x)||Ta(x)||Rn(x))||!Oe(D)))return a?Ms:u;let H=!1;const j=()=>{H=!0},K=Rn(x)?x:fp(e,u,D,x,N,j);if(H)return x;const X=O2(e,D,J,p),_e=M2(X),le=D2(e,K,_e),P=o?o(le,u):le;if(__INTLIFY_PROD_DEVTOOLS__){const Z={timestamp:Date.now(),key:Oe(u)?u:Rn(x)?x.key:"",locale:D||(Rn(x)?x.locale:""),format:Oe(x)?x:Rn(x)?x.source:"",message:P};Z.meta=qt({},e.__meta,y2()||{}),Zh(Z)}return P}function I2(e){Vt(e.list)?e.list=e.list.map(t=>Oe(t)?Fd(t):t):dt(e.named)&&Object.keys(e.named).forEach(t=>{Oe(e.named[t])&&(e.named[t]=Fd(e.named[t]))})}function pp(e,t,n,o,a,l){const{messages:i,onWarn:r,messageResolver:u,localeFallbacker:p}=e,d=p(e,o,n);let c=xt(),v,m=null;const y="translate";for(let S=0;S<d.length&&(v=d[S],c=i[v]||xt(),(m=u(c,t))===null&&(m=c[t]),!(Oe(m)||Ta(m)||Rn(m)));S++)if(!S2(v,d)){const $=hr(e,t,v,l,y);$!==t&&(m=$)}return[m,v,c]}function fp(e,t,n,o,a,l){const{messageCompiler:i,warnHtmlMessage:r}=e;if(Rn(o)){const p=o;return p.locale=p.locale||n,p.key=p.key||t,p}if(i==null){const p=()=>o;return p.locale=n,p.key=t,p}const u=i(o,R2(e,n,a,o,r,l));return u.locale=n,u.key=t,u.source=o,u}function D2(e,t,n){return t(n)}function br(...e){const[t,n,o]=e,a=xt();if(!Oe(t)&&!Ut(t)&&!Rn(t)&&!Ta(t))throw go(fo.INVALID_ARGUMENT);const l=Ut(t)?String(t):(Rn(t),t);return Ut(n)?a.plural=n:Oe(n)?a.default=n:Ze(n)&&!ks(n)?a.named=n:Vt(n)&&(a.list=n),Ut(o)?a.plural=o:Oe(o)?a.default=o:Ze(o)&&qt(a,o),[l,a]}function R2(e,t,n,o,a,l){return{locale:t,key:n,warnHtmlMessage:a,onError:i=>{throw l&&l(i),i},onCacheKey:i=>eh(t,n,i)}}function O2(e,t,n,o){const{modifiers:a,pluralRules:l,messageResolver:i,fallbackLocale:r,fallbackWarn:u,missingWarn:p,fallbackContext:d}=e,v={locale:t,modifiers:a,pluralRules:l,messages:(m,y)=>{let S=i(n,m);if(S==null&&(d||y)){const[,,$]=pp(d||e,m,t,r,u,p);S=i($,m)}if(Oe(S)||Ta(S)){let $=!1;const D=fp(e,m,t,S,m,()=>{$=!0});return $?cp:D}else return Rn(S)?S:cp}};return e.processor&&(v.processor=e.processor),o.list&&(v.list=o.list),o.named&&(v.named=o.named),Ut(o.plural)&&(v.pluralIndex=o.plural),v}Ih();/*!
  * vue-i18n v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const N2="11.1.2";function P2(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(na().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(na().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(na().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(na().__INTLIFY_PROD_DEVTOOLS__=!1)}const hn={UNEXPECTED_RETURN_TYPE:t2,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Tn(e,...t){return $s(e,null,void 0)}const wr=Do("__translateVNode"),xr=Do("__datetimeParts"),Sr=Do("__numberParts"),gp=Do("__setPluralRules"),mp=Do("__injectWithOption"),Tr=Do("__dispose");function yl(e){if(!dt(e))return e;for(const t in e)if(Un(e,t))if(!t.includes("."))dt(e[t])&&yl(e[t]);else{const n=t.split("."),o=n.length-1;let a=e,l=!1;for(let i=0;i<o;i++){if(n[i]==="__proto__")throw new Error(`unsafe key: ${n[i]}`);if(n[i]in a||(a[n[i]]=xt()),!dt(a[n[i]])){l=!0;break}a=a[n[i]]}l||(a[n[o]]=e[t],delete e[t]),dt(a[n[o]])&&yl(a[n[o]])}return e}function kr(e,t){const{messages:n,__i18n:o,messageResolver:a,flatJson:l}=t,i=Ze(n)?n:Vt(o)?xt():{[e]:xt()};if(Vt(o)&&o.forEach(r=>{if("locale"in r&&"resource"in r){const{locale:u,resource:p}=r;u?(i[u]=i[u]||xt(),Es(p,i[u])):Es(p,i)}else Oe(r)&&Es(JSON.parse(r),i)}),a==null&&l)for(const r in i)Un(i,r)&&yl(i[r]);return i}function vp(e){return e.type}function hp(e,t,n){let o=dt(t.messages)?t.messages:xt();"__i18nGlobal"in n&&(o=kr(e.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const a=Object.keys(o);a.length&&a.forEach(l=>{e.mergeLocaleMessage(l,o[l])});{if(dt(t.datetimeFormats)){const l=Object.keys(t.datetimeFormats);l.length&&l.forEach(i=>{e.mergeDateTimeFormat(i,t.datetimeFormats[i])})}if(dt(t.numberFormats)){const l=Object.keys(t.numberFormats);l.length&&l.forEach(i=>{e.mergeNumberFormat(i,t.numberFormats[i])})}}}function _p(e){return Ue(sl,null,e,0)}const yp="__INTLIFY_META__",bp=()=>[],F2=()=>!1;let wp=0;function xp(e){return(t,n,o,a)=>e(n,o,ea()||void 0,a)}const B2=()=>{const e=ea();let t=null;return e&&(t=vp(e)[yp])?{[yp]:t}:null};function Cr(e={}){const{__root:t,__injectWithOption:n}=e,o=t===void 0,a=e.flatJson,l=Ts?h:Qm;let i=ut(e.inheritLocale)?e.inheritLocale:!0;const r=l(t&&i?t.locale.value:Oe(e.locale)?e.locale:hl),u=l(t&&i?t.fallbackLocale.value:Oe(e.fallbackLocale)||Vt(e.fallbackLocale)||Ze(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r.value),p=l(kr(r.value,e)),d=l(Ze(e.datetimeFormats)?e.datetimeFormats:{[r.value]:{}}),c=l(Ze(e.numberFormats)?e.numberFormats:{[r.value]:{}});let v=t?t.missingWarn:ut(e.missingWarn)||wa(e.missingWarn)?e.missingWarn:!0,m=t?t.fallbackWarn:ut(e.fallbackWarn)||wa(e.fallbackWarn)?e.fallbackWarn:!0,y=t?t.fallbackRoot:ut(e.fallbackRoot)?e.fallbackRoot:!0,S=!!e.fallbackFormat,$=At(e.missing)?e.missing:null,T=At(e.missing)?xp(e.missing):null,D=At(e.postTranslation)?e.postTranslation:null,J=t?t.warnHtmlMessage:ut(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter;const N=t?t.modifiers:Ze(e.modifiers)?e.modifiers:{};let H=e.pluralRules||t&&t.pluralRules,j;j=(()=>{o&&tp(null);const ee={version:N2,locale:r.value,fallbackLocale:u.value,messages:p.value,modifiers:N,pluralRules:H,missing:T===null?void 0:T,missingWarn:v,fallbackWarn:m,fallbackFormat:S,unresolving:!0,postTranslation:D===null?void 0:D,warnHtmlMessage:J,escapeParameter:x,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ee.datetimeFormats=d.value,ee.numberFormats=c.value,ee.__datetimeFormatters=Ze(j)?j.__datetimeFormatters:void 0,ee.__numberFormatters=Ze(j)?j.__numberFormatters:void 0;const me=w2(ee);return o&&tp(me),me})(),_l(j,r.value,u.value);function X(){return[r.value,u.value,p.value,d.value,c.value]}const _e=vt({get:()=>r.value,set:ee=>{j.locale=ee,r.value=ee}}),le=vt({get:()=>u.value,set:ee=>{j.fallbackLocale=ee,u.value=ee,_l(j,r.value,ee)}}),P=vt(()=>p.value),Z=vt(()=>d.value),te=vt(()=>c.value);function z(){return At(D)?D:null}function ne(ee){D=ee,j.postTranslation=ee}function oe(){return $}function F(ee){ee!==null&&(T=xp(ee)),$=ee,j.missing=T}const U=(ee,me,Re,Pe,He,Xe)=>{X();let at;try{__INTLIFY_PROD_DEVTOOLS__,o||(j.fallbackContext=t?b2():void 0),at=ee(j)}finally{__INTLIFY_PROD_DEVTOOLS__,o||(j.fallbackContext=void 0)}if(Re!=="translate exists"&&Ut(at)&&at===Ms||Re==="translate exists"&&!at){const[bt,Dt]=me();return t&&y?Pe(t):He(bt)}else{if(Xe(at))return at;throw Tn(hn.UNEXPECTED_RETURN_TYPE)}};function ue(...ee){return U(me=>Reflect.apply(dp,null,[me,...ee]),()=>br(...ee),"translate",me=>Reflect.apply(me.t,me,[...ee]),me=>me,me=>Oe(me))}function ke(...ee){const[me,Re,Pe]=ee;if(Pe&&!dt(Pe))throw Tn(hn.INVALID_ARGUMENT);return ue(me,Re,qt({resolvedMessage:!0},Pe||{}))}function ie(...ee){return U(me=>Reflect.apply(op,null,[me,...ee]),()=>_r(...ee),"datetime format",me=>Reflect.apply(me.d,me,[...ee]),()=>Kd,me=>Oe(me))}function ge(...ee){return U(me=>Reflect.apply(sp,null,[me,...ee]),()=>yr(...ee),"number format",me=>Reflect.apply(me.n,me,[...ee]),()=>Kd,me=>Oe(me))}function de(ee){return ee.map(me=>Oe(me)||Ut(me)||ut(me)?_p(String(me)):me)}const G={normalize:de,interpolate:ee=>ee,type:"vnode"};function A(...ee){return U(me=>{let Re;const Pe=me;try{Pe.processor=G,Re=Reflect.apply(dp,null,[Pe,...ee])}finally{Pe.processor=null}return Re},()=>br(...ee),"translate",me=>me[wr](...ee),me=>[_p(me)],me=>Vt(me))}function B(...ee){return U(me=>Reflect.apply(sp,null,[me,...ee]),()=>yr(...ee),"number format",me=>me[Sr](...ee),bp,me=>Oe(me)||Vt(me))}function V(...ee){return U(me=>Reflect.apply(op,null,[me,...ee]),()=>_r(...ee),"datetime format",me=>me[xr](...ee),bp,me=>Oe(me)||Vt(me))}function I(ee){H=ee,j.pluralRules=H}function W(ee,me){return U(()=>{if(!ee)return!1;const Re=Oe(me)?me:r.value,Pe=O(Re),He=j.messageResolver(Pe,ee);return Ta(He)||Rn(He)||Oe(He)},()=>[ee],"translate exists",Re=>Reflect.apply(Re.te,Re,[ee,me]),F2,Re=>ut(Re))}function k(ee){let me=null;const Re=jd(j,u.value,r.value);for(let Pe=0;Pe<Re.length;Pe++){const He=p.value[Re[Pe]]||{},Xe=j.messageResolver(He,ee);if(Xe!=null){me=Xe;break}}return me}function w(ee){const me=k(ee);return me??(t?t.tm(ee)||{}:{})}function O(ee){return p.value[ee]||{}}function Q(ee,me){if(a){const Re={[ee]:me};for(const Pe in Re)Un(Re,Pe)&&yl(Re[Pe]);me=Re[ee]}p.value[ee]=me,j.messages=p.value}function pe(ee,me){p.value[ee]=p.value[ee]||{};const Re={[ee]:me};if(a)for(const Pe in Re)Un(Re,Pe)&&yl(Re[Pe]);me=Re[ee],Es(me,p.value[ee]),j.messages=p.value}function ye(ee){return d.value[ee]||{}}function L(ee,me){d.value[ee]=me,j.datetimeFormats=d.value,lp(j,ee,me)}function _(ee,me){d.value[ee]=qt(d.value[ee]||{},me),j.datetimeFormats=d.value,lp(j,ee,me)}function R(ee){return c.value[ee]||{}}function q(ee,me){c.value[ee]=me,j.numberFormats=c.value,rp(j,ee,me)}function xe(ee,me){c.value[ee]=qt(c.value[ee]||{},me),j.numberFormats=c.value,rp(j,ee,me)}wp++,t&&Ts&&(ot(t.locale,ee=>{i&&(r.value=ee,j.locale=ee,_l(j,r.value,u.value))}),ot(t.fallbackLocale,ee=>{i&&(u.value=ee,j.fallbackLocale=ee,_l(j,r.value,u.value))}));const we={id:wp,locale:_e,fallbackLocale:le,get inheritLocale(){return i},set inheritLocale(ee){i=ee,ee&&t&&(r.value=t.locale.value,u.value=t.fallbackLocale.value,_l(j,r.value,u.value))},get availableLocales(){return Object.keys(p.value).sort()},messages:P,get modifiers(){return N},get pluralRules(){return H||{}},get isGlobal(){return o},get missingWarn(){return v},set missingWarn(ee){v=ee,j.missingWarn=v},get fallbackWarn(){return m},set fallbackWarn(ee){m=ee,j.fallbackWarn=m},get fallbackRoot(){return y},set fallbackRoot(ee){y=ee},get fallbackFormat(){return S},set fallbackFormat(ee){S=ee,j.fallbackFormat=S},get warnHtmlMessage(){return J},set warnHtmlMessage(ee){J=ee,j.warnHtmlMessage=ee},get escapeParameter(){return x},set escapeParameter(ee){x=ee,j.escapeParameter=ee},t:ue,getLocaleMessage:O,setLocaleMessage:Q,mergeLocaleMessage:pe,getPostTranslationHandler:z,setPostTranslationHandler:ne,getMissingHandler:oe,setMissingHandler:F,[gp]:I};return we.datetimeFormats=Z,we.numberFormats=te,we.rt=ke,we.te=W,we.tm=w,we.d=ie,we.n=ge,we.getDateTimeFormat=ye,we.setDateTimeFormat=L,we.mergeDateTimeFormat=_,we.getNumberFormat=R,we.setNumberFormat=q,we.mergeNumberFormat=xe,we[mp]=n,we[wr]=A,we[xr]=V,we[Sr]=B,we}function U2(e){const t=Oe(e.locale)?e.locale:hl,n=Oe(e.fallbackLocale)||Vt(e.fallbackLocale)||Ze(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,o=At(e.missing)?e.missing:void 0,a=ut(e.silentTranslationWarn)||wa(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,l=ut(e.silentFallbackWarn)||wa(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,i=ut(e.fallbackRoot)?e.fallbackRoot:!0,r=!!e.formatFallbackMessages,u=Ze(e.modifiers)?e.modifiers:{},p=e.pluralizationRules,d=At(e.postTranslation)?e.postTranslation:void 0,c=Oe(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,v=!!e.escapeParameterHtml,m=ut(e.sync)?e.sync:!0;let y=e.messages;if(Ze(e.sharedMessages)){const N=e.sharedMessages;y=Object.keys(N).reduce((j,K)=>{const X=j[K]||(j[K]={});return qt(X,N[K]),j},y||{})}const{__i18n:S,__root:$,__injectWithOption:T}=e,D=e.datetimeFormats,J=e.numberFormats,x=e.flatJson;return{locale:t,fallbackLocale:n,messages:y,flatJson:x,datetimeFormats:D,numberFormats:J,missing:o,missingWarn:a,fallbackWarn:l,fallbackRoot:i,fallbackFormat:r,modifiers:u,pluralRules:p,postTranslation:d,warnHtmlMessage:c,escapeParameter:v,messageResolver:e.messageResolver,inheritLocale:m,__i18n:S,__root:$,__injectWithOption:T}}function Er(e={}){const t=Cr(U2(e)),{__extender:n}=e,o={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return ut(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=ut(a)?!a:a},get silentFallbackWarn(){return ut(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=ut(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){return Reflect.apply(t.t,t,[...a])},rt(...a){return Reflect.apply(t.rt,t,[...a])},te(a,l){return t.te(a,l)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,l){t.setLocaleMessage(a,l)},mergeLocaleMessage(a,l){t.mergeLocaleMessage(a,l)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,l){t.setDateTimeFormat(a,l)},mergeDateTimeFormat(a,l){t.mergeDateTimeFormat(a,l)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,l){t.setNumberFormat(a,l)},mergeNumberFormat(a,l){t.mergeNumberFormat(a,l)}};return o.__extender=n,o}function V2(e,t,n){return{beforeCreate(){const o=ea();if(!o)throw Tn(hn.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const l=a.i18n;if(a.__i18n&&(l.__i18n=a.__i18n),l.__root=t,this===this.$root)this.$i18n=Sp(e,l);else{l.__injectWithOption=!0,l.__extender=n.__vueI18nExtend,this.$i18n=Er(l);const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=Sp(e,a);else{this.$i18n=Er({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&hp(t,a,a),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$te=(l,i)=>this.$i18n.te(l,i),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=ea();if(!o)throw Tn(hn.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),n.__deleteInstance(o),delete this.$i18n}}}function Sp(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[gp](t.pluralizationRules||e.pluralizationRules);const n=kr(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(o=>e.mergeLocaleMessage(o,n[o])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o])),t.numberFormats&&Object.keys(t.numberFormats).forEach(o=>e.mergeNumberFormat(o,t.numberFormats[o])),e}const $r={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function W2({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((o,a)=>[...o,...a.type===Ie?a.children:[a]],[]):t.reduce((n,o)=>{const a=e[o];return a&&(n[o]=a()),n},xt())}function Tp(){return Ie}const kp=Hi({name:"i18n-t",props:qt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Ut(e)||!isNaN(e)}},$r),setup(e,t){const{slots:n,attrs:o}=t,a=e.i18n||ht({useScope:e.scope,__useComponent:!0});return()=>{const l=Object.keys(n).filter(c=>c!=="_"),i=xt();e.locale&&(i.locale=e.locale),e.plural!==void 0&&(i.plural=Oe(e.plural)?+e.plural:e.plural);const r=W2(t,l),u=a[wr](e.keypath,r,i),p=qt(xt(),o),d=Oe(e.tag)||dt(e.tag)?e.tag:Tp();return rt(d,p,u)}}});function z2(e){return Vt(e)&&!Oe(e[0])}function Cp(e,t,n,o){const{slots:a,attrs:l}=t;return()=>{const i={part:!0};let r=xt();e.locale&&(i.locale=e.locale),Oe(e.format)?i.key=e.format:dt(e.format)&&(Oe(e.format.key)&&(i.key=e.format.key),r=Object.keys(e.format).reduce((v,m)=>n.includes(m)?qt(xt(),v,{[m]:e.format[m]}):v,xt()));const u=o(e.value,i,r);let p=[i.key];Vt(u)?p=u.map((v,m)=>{const y=a[v.type],S=y?y({[v.type]:v.value,index:m,parts:u}):[v.value];return z2(S)&&(S[0].key=`${v.type}-${m}`),S}):Oe(u)&&(p=[u]);const d=qt(xt(),l),c=Oe(e.tag)||dt(e.tag)?e.tag:Tp();return rt(c,d,p)}}const Ep=Hi({name:"i18n-n",props:qt({value:{type:Number,required:!0},format:{type:[String,Object]}},$r),setup(e,t){const n=e.i18n||ht({useScope:e.scope,__useComponent:!0});return Cp(e,t,ip,(...o)=>n[Sr](...o))}});function H2(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const o=n.__getInstance(t);return o!=null?o.__composer:e.global.__composer}}function j2(e){const t=i=>{const{instance:r,value:u}=i;if(!r||!r.$)throw Tn(hn.UNEXPECTED_ERROR);const p=H2(e,r.$),d=$p(u);return[Reflect.apply(p.t,p,[...Lp(d)]),p]};return{created:(i,r)=>{const[u,p]=t(r);Ts&&e.global===p&&(i.__i18nWatcher=ot(p.locale,()=>{r.instance&&r.instance.$forceUpdate()})),i.__composer=p,i.textContent=u},unmounted:i=>{Ts&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:r})=>{if(i.__composer){const u=i.__composer,p=$p(r);i.textContent=Reflect.apply(u.t,u,[...Lp(p)])}},getSSRProps:i=>{const[r]=t(i);return{textContent:r}}}}function $p(e){if(Oe(e))return{path:e};if(Ze(e)){if(!("path"in e))throw Tn(hn.REQUIRED_VALUE,"path");return e}else throw Tn(hn.INVALID_VALUE)}function Lp(e){const{path:t,locale:n,args:o,choice:a,plural:l}=e,i={},r=o||{};return Oe(n)&&(i.locale=n),Ut(a)&&(i.plural=a),Ut(l)&&(i.plural=l),[t,r,i]}function G2(e,t,...n){const o=Ze(n[0])?n[0]:{};(ut(o.globalInstall)?o.globalInstall:!0)&&([kp.name,"I18nT"].forEach(l=>e.component(l,kp)),[Ep.name,"I18nN"].forEach(l=>e.component(l,Ep)),[Mp.name,"I18nD"].forEach(l=>e.component(l,Mp))),e.directive("t",j2(t))}const q2=Do("global-vue-i18n");function K2(e={}){const t=__VUE_I18N_LEGACY_API__&&ut(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=ut(e.globalInjection)?e.globalInjection:!0,o=new Map,[a,l]=Y2(e,t),i=Do("");function r(c){return o.get(c)||null}function u(c,v){o.set(c,v)}function p(c){o.delete(c)}const d={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(c,...v){if(c.__VUE_I18N_SYMBOL__=i,c.provide(c.__VUE_I18N_SYMBOL__,d),Ze(v[0])){const S=v[0];d.__composerExtend=S.__composerExtend,d.__vueI18nExtend=S.__vueI18nExtend}let m=null;!t&&n&&(m=o_(c,d.global)),__VUE_I18N_FULL_INSTALL__&&G2(c,d,...v),__VUE_I18N_LEGACY_API__&&t&&c.mixin(V2(l,l.__composer,d));const y=c.unmount;c.unmount=()=>{m&&m(),d.dispose(),y()}},get global(){return l},dispose(){a.stop()},__instances:o,__getInstance:r,__setInstance:u,__deleteInstance:p};return d}function ht(e={}){const t=ea();if(t==null)throw Tn(hn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Tn(hn.NOT_INSTALLED);const n=J2(t),o=Q2(n),a=vp(t),l=X2(e,a);if(l==="global")return hp(o,e,a),o;if(l==="parent"){let u=Z2(n,t,e.__useComponent);return u==null&&(u=o),u}const i=n;let r=i.__getInstance(t);if(r==null){const u=qt({},e);"__i18n"in a&&(u.__i18n=a.__i18n),o&&(u.__root=o),r=Cr(u),i.__composerExtend&&(r[Tr]=i.__composerExtend(r)),t_(i,t,r),i.__setInstance(t,r)}return r}function Y2(e,t){const n=ki(),o=__VUE_I18N_LEGACY_API__&&t?n.run(()=>Er(e)):n.run(()=>Cr(e));if(o==null)throw Tn(hn.UNEXPECTED_ERROR);return[n,o]}function J2(e){const t=_a(e.isCE?q2:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Tn(e.isCE?hn.NOT_INSTALLED_WITH_PROVIDE:hn.UNEXPECTED_ERROR);return t}function X2(e,t){return ks(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function Q2(e){return e.mode==="composition"?e.global:e.global.__composer}function Z2(e,t,n=!1){let o=null;const a=t.root;let l=e_(t,n);for(;l!=null;){const i=e;if(e.mode==="composition")o=i.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const r=i.__getInstance(l);r!=null&&(o=r.__composer,n&&o&&!o[mp]&&(o=null))}if(o!=null||a===l)break;l=l.parent}return o}function e_(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function t_(e,t,n){mt(()=>{},t),In(()=>{const o=n;e.__deleteInstance(t);const a=o[Tr];a&&(a(),delete o[Tr])},t)}const n_=["locale","fallbackLocale","availableLocales"],Ap=["t","rt","d","n","tm","te"];function o_(e,t){const n=Object.create(null);return n_.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l)throw Tn(hn.UNEXPECTED_ERROR);const i=Ot(l.value)?{get(){return l.value.value},set(r){l.value.value=r}}:{get(){return l.get&&l.get()}};Object.defineProperty(n,a,i)}),e.config.globalProperties.$i18n=n,Ap.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l||!l.value)throw Tn(hn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,l)}),()=>{delete e.config.globalProperties.$i18n,Ap.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}const Mp=Hi({name:"i18n-d",props:qt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},$r),setup(e,t){const n=e.i18n||ht({useScope:e.scope,__useComponent:!0});return Cp(e,t,ap,(...o)=>n[xr](...o))}});if(P2(),m2(Jh),v2(p2),h2(jd),__INTLIFY_PROD_DEVTOOLS__){const e=na();e.__INTLIFY__=!0,Xh(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const _t=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},a_={class:"weilin_prompt_ui_window-title"},l_=["title"],kn=_t({__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const n=e,{t:o}=ht(),a=t,l=h({x:0,y:0}),i=h({width:600,height:400});ot(()=>n.position,H=>{H&&(l.value={...H},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_position`},"*"))},{immediate:!0,deep:!0}),ot(()=>n.size,H=>{H&&(i.value={...H},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_size`},"*"))},{immediate:!0,deep:!0});const r=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_scroll`},"*")};mt(()=>{var H;if(n.position){const j=window.innerWidth,K=window.innerHeight,X=100;let _e=n.position.x,le=n.position.y;_e=Math.max(X-(((H=n.size)==null?void 0:H.width)||i.value.width),_e),_e=Math.min(_e,j-100),le=Math.max(100,le),le=Math.min(le,K-100),l.value={x:_e,y:le}}n.size&&(i.value={...n.size})});const u=h(!1),p=h({x:0,y:0}),d=H=>{u.value=!0,p.value={x:H.clientX-l.value.x,y:H.clientY-l.value.y},document.addEventListener("mousemove",c),document.addEventListener("mouseup",v)},c=H=>{if(u.value){const j=window.innerWidth,K=window.innerHeight,X=100;let _e=H.clientX-p.value.x,le=H.clientY-p.value.y;_e=Math.max(X-i.value.width,_e),_e=Math.min(_e,j-100),le=Math.max(100,le),le=Math.min(le,K-100);const P={x:_e,y:le};l.value=P,a("update:position",P)}},v=()=>{u.value=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",v)},m=h(!1),y=h({x:0,y:0}),S=h({width:0,height:0}),$=H=>{m.value=!0,y.value={x:H.clientX,y:H.clientY},S.value={...i.value},document.addEventListener("mousemove",T),document.addEventListener("mouseup",D)},T=H=>{if(m.value){const j=H.clientX-y.value.x,K=H.clientY-y.value.y,X={width:Math.max(200,S.value.width+j),height:Math.max(200,S.value.height+K)};i.value=X,a("update:size",X)}},D=()=>{m.value=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",D)},J=()=>{a("active")},x=()=>{a("close")},N=H=>{J(),d(H)};return(H,j)=>(b(),wt(dc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[s("div",{class:"weilin_prompt_ui_draggable-window",style:ct({left:`${l.value.x}px`,top:`${l.value.y}px`,width:`${i.value.width}px`,height:`${i.value.height}px`,zIndex:e.zIndex}),onMousedown:J},[s("div",{class:"weilin_prompt_ui_window-header",onMousedown:Je(N,["stop"])},[s("div",a_,g(e.title),1),s("button",{class:"weilin_prompt_ui_close-btn",onClick:x},"")],32),s("div",{class:"weilin_prompt_ui_window-content",onScroll:r},[ol(H.$slots,"default",{},void 0,!0)],32),s("div",{class:"weilin_prompt_ui_resize-handle",title:f(o)("common.windowSize"),onMousedown:Je($,["stop"])},null,40,l_)],36)]))}},[["__scopeId","data-v-5d02be5b"]]),mo="v0.0.69",s_={promptBox:{placeholder:"...",delete:"",newline:"",tab:"",windowTitle:"WeiLinUI "+mo,windowTitleGlobal:"WeiLinUI "+mo,translate:"",translatePlaceholder:",",weight:"",weightPlaceholder:"",addBracket:"",removeLayer:"",hiddenHint:"",tagTips:"Tag<br>Tag<br>Tag",oneClickRandomTag:"Tag",oneClickCleanAll:"",oneClickClearDisabled:"",clearDisabledSuccess:"",randomTagSettings:"Tag",oneClickTranslate:"Tag",showDeleteButton:"",hideDeleteButton:"",modelWeight:"",textWeight:"",favour:"",lineToken:"",addLineToken:"",settings:{title:"",cancel:"",save:"",translator:"",sourceLanguage:"",targetLanguage:"",chinese_simplified:"",english:"",close:"",auto_detect:"",setting_function_toggles:"",setting_function_toggles_full:"",enableClearAll:"",enableDeleteButton:"",enableRandomTag:"",enableRandomTagSettings:"",enableTranslateTag:"",enableClearDisabled:"",setting_floating_ball:"",setting_prompt_box:"",enablePromptCommaShow:"",floatingBallCount:"",floatingBallCountPlaceholder:"",floatingBallSize:"",floatingBallSizePlaceholder:"",floatingBallHeight:"",floatingBallHeightPlaceholder:"",enableFloatingBall:"",enableCommaConversion:"",enablePeriodConversion:"",enableBracketConversion:"",enableAngleBracketConversion:"",enableUnderscoreToBracket:"",enableBracketEscape:"\\",enableCommaCloseAutocomplete:"",setting_openai_box:"OpenAI",openai_api_key:"API Key",openai_api_key_placeholder:"API Key",openai_api_key_save:"",openaiSettings:"OpenAI",openai_base_url:"Base URL",openai_base_url_placeholder:"Base URL",openai_model:"",openai_model_placeholder:"",not_set:"",edit:"",delete:"",selectedOpenaiConfig:"OpenAI",addNewConfig:"OpenAI",setting_sponsor_me:"",sponsorMe:"",sponsorMeTip:"",sponsorMeLink:" https://afdian.com/a/weilin9999",setting_start_panel:"",startPanel:"",startPanelTip:"",selectTranslater:"",selectOptionNetworkTranslater:"",selectOptionPythonTranslater:"",apply:"",selectOptionNetworkTranslaterTitle:"",selectOptionPythonTranslaterTitle:"",selectOptionNetworkTranslaterInfo:"",selectOptionPythonTranslaterInfo:"translators",install:"",nowTranlaterPackageState:"",tranlaterPackageStateTrue:"",tranlaterPackageStateFlase:"",installed:"...",installTranslaterPackageInfo:"",translaterSetting:"",chooseTranslaterSetting:"",translaterLangSourceSetting:"",translaterLangTargeSetting:"",saveTranslaterSetting:"",testTranslaterTitle:"",inputTestTranslater:"",outPutTestTranslater:"",testingTranslater:"",inputTestTranslaterPlaceholder:"",outPutTestTranslaterPlaceholder:"",errorPrompt:"",setting_auto_complete_limit:"",show_auto_limit:"",showAutoLimitPlaceholder:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:"",skinSetting:"",defaultSkin:"",customSkin:"",uploadSkin:"",bgSetting:"",gradientBg:"",transparentBg:"",gradientColor:"",borderRadius:"",resetToDefault:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:""}},controls:{language:"",settings:"",switchTheme:"",darkMode:"",lightMode:"",tagManager:"",loraStack:"Lora",loraManager:"Lora",history:"",addLora:"Lora",removeLora:"Lora",lookOnLora:"Lora",aiChat:"AI",github:"Github",shareCloudData:"",tutorialVideo:"",sponsor:"",danbooruManager:"Danbooru"},theme:{toggle:""},common:{confirmDelete:"",delete:"",cancel:"",confirm:"",edit:"",save:"",refresh:"",copy:"",copySuccess:"",copyFailed:"",windowSize:"",showMore:"",showLess:""},cloudWindow:{windowTitle:"",back:"",currentPath:"",tagDatabase:"Tag ",danbooruDatabase:"Danbooru ",open:"",installed:"",install:"",installing:"..."},nodeListWindow:{windowTitle:"",openPromptUI:""},lora:{title:"Lora ",rawTitle:"LoraRaw",file:"",hash:"Hash",civitai:"Civitai",viewOnCivitai:" Civitai ",fetchFromCivitai:" Civitai ",modelNotFound:"",modelNotFoundTip:" Civitai ",name:"",nameTip:"",type:"",baseModel:"",trainedWords:"",trainedWordsTip:"",selectedWords:" {count} ",strengthMin:"",strengthMinTip:"",strengthMax:"",strengthMaxTip:"",promptWords:"",promptWordsTip:"",loraWorks:"Lora",strWeight:"",hideLora:"Lora",showLora:"Lora",baseModel:"",skipClip:"",seeLoraRaw:"LoraRaw",addDiyFiled:"",getCivitData:"Civitai",copy:""},tagManager:{deletePrimaryCategoryConfirm:" {name} ",deleteGroupConfirm:" {name} ",deleteTagConfirm:" {name} ",windowTitle:"",categories:"",groups:"",selectCategory:"",selectGroup:"",addPrimaryCategory:"",addGroup:"",editPrimaryCategory:"",editGroup:"",editTag:"",categoryName:"",categoryNamePlaceholder:"",categoryNameRequired:"",groupName:"",groupNamePlaceholder:"",groupNameRequired:"",addTag:"Tag",text:"Tag",textPlaceholder:"Tag",description:"Tag",descriptionPlaceholder:"Tag",textRequired:"TagTag",favourRequired:"TagTag",backgroundColor:"",colorPickerTitle:"",opacity:"",searchPlaceholder:"Tag...",noResults:"",searchInCategory:"",searchInTag:"Tag",save:"",cancel:"",confirm:"",delete:"",addSubCategory:"",editSubCategory:"",subCategoryName:"",subCategoryNamePlaceholder:"",subCategoryNameRequired:"",deleteConfirmTitle:"",deleteConfirmMessage:"{type}",deleteSuccess:"",deleteFailed:"",saveSuccess:"",saveFailed:"",colorPickerAlpha:"",colorPickerHex:"",colorPreview:"",dragToSort:"",searchTags:"",noTagsFound:"",noGroupsFound:"",noCategoriesFound:"",refresh:"",refreshing:"...",refreshSuccess:"",refreshFailed:"",search:"",searching:"...",searchResult:"",searchInPath:": {path}",category:"",group:"",tag:"",resultType:{category:"",group:"",tag:""},hasDeleteAction:"",deleteSelected:"",confirmDeleteSelected:"",cancelDelete:"",moveTag:"",targetTag:"",movePosition:"",moveBefore:"",moveAfter:"",editTag:"",deleteTag:"",editGroupMode:"",exitEditMode:"",autoAddSearchTag:"Tag",importTags:"Tag",share:"",delete:"",edit:"",outputSuccess:"",noTagsSelected:"Tag",shareSelected:"Tag",batchShare:"Tag",cancelShare:"",moveGroup:"",targetGroup:"",moveGroupBefore:"",moveGroupAfter:"",importDanbooru:"",modifyTabSize:"",tabSizeConfig:"",primaryTabConfig:"",groupTabConfig:"",tabWidth:"",tabHeight:"",fontSize:"",fitContent:"",customWidth:"",resetDefault:"",tabSizeConfigSaved:"",tabSizeConfigSaveFailed:""},loraManager:{windowTitle:"Lora",modelWeight:"",textEncoderWeight:"",all:"",root:"",refresh:"",cacheAll:"Lora",searchPlaceholder:"Lora...",prevPage:"",nextPage:"",noResults:"",loadingMore:"...",noMoreData:""},message:{copySuccess:"",copyFailed:"",saveSuccess:"",saveFailed:"",deleteSuccess:"",deleteFailed:"",operationSuccess:"",operationFailed:"",networkError:"",unknownError:"",refreshSuccess:"",refreshFailed:"",loadingData:"...",dataLoaded:"",editSuccess:"",editFailed:"",addSuccess:"",addFailed:"",addFavoriteSuccess:"",addFavoriteIsExist:"",error:"",editNameExist:"",moveSuccess:"",moveFailed:"",setLanguageSuccess:"",setLanguageFailed:"",startPanelSuccess:"",startPanelFailed:"",isLoading:"",loaddingPrc:" {name}%",loaddingSuccess:"",noFinishKuo:"",getTranslaterFail:"",applyTranslaterFail:"",applyToTranslaterFail:"",applyTranslaterSuccess:"",tranlaterPackageInstallFail:"",tranlaterPackageInstallSuccess:"",translaterTestFail:"",installPackageSuccess:"",installPackageFail:"",loadFailed:"",jsonErrorMesg:"JSON",pleaseAddSub:"",pleaseAddMainCeb:"",pleaseSelectGroup:"",isLoadingPleaseWait:"",shareGroupError:"",shareTagError:"Tag"},history:{title:"",search_placeholder:"...",search:"",windowTitle:"",favorites:"",history:"",refresh:"",refresh_history:"",refresh_favorites:"",add_to_favorites:"",delete_history:"",use_item:"",add_new:"",bulk_delete:"",deleteHistoryConfirm:" {name} ",deleteFavoriteConfirm:" {name} ",confirmDeleteSelected:"",cancel_delete:"",sure_delete:"",deleteSelected:"",dialog:{add_tag:"",edit_tag:"",name:"",name_placeholder:"",tag:"",tag_placeholder:"",background_color:"",background_color_placeholder:"",edit_favorite:"",delete_favorite:""},edit_favorite:"",delete_favorite:"",use_favorite:""},floatingBall:{promptBox:"",tagManager:"",loraManager:"Lora",aiWindow:"AI",restoreWindow:"",openNodeListWindow:"",tranToWeb:"",openSetting:""},aiWindow:{windowTitle:"AI",newChat:"",chatName:"",thinking:"...",send:"",inputMessage:"..."},translaterService:{niutrans:"",mymemory:"MyMemory",alibaba:"",baidu:"",modernmt:"ModernMT",volcengine:"",iciba:"",iflytek:"",google:"",bing:"",lingvanex:"Lingvanex",yandex:"Yandex",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos",apertium:"Apertium",reverso:"Reverso",deepl:"DeepL",cloudtranslation:"",qqtransmart:"",translatecom:"Translate.com",sogou:"",tilde:"Tilde",caiyun:"",qqfanyi:"",translateme:"TranslateMe",papago:"Papago",mirai:"",youdao:"",iflyrec:"",hujiang:"",yeekit:"",languagewire:"LanguageWire",elia:"Elia",judic:"Judic",mglip:"",utibet:""},translaterLanguage:{english:"",chinese:"",arabic:"",russian:"",french:"",german:"",spanish:"",portuguese:"",italian:"",japanese:"",korean:"",greek:"",dutch:"",hindi:"",turkish:"",malay:"",thai:"",vietnamese:"",indonesian:"",hebrew:"",polish:"",mongolian:"",czech:"",hungarian:"",estonian:"",bulgarian:"",danish:"",finnish:"",romanian:"",swedish:"",slovenian:"","persian/farsi":"/",bosnian:"",serbian:"",fijian:"",filipino:"",haitiancreole:"",catalan:"",croatian:"",latvian:"",lithuanian:"",urdu:"",ukrainian:"",welsh:"",tahiti:"",tongan:"",swahili:"",samoan:"",slovak:"",afrikaans:"",norwegian:"",bengali:"",malagasy:"",maltese:"","queretaro otomi":"","klingon/tlhingan hol":"",gujarati:"",tamil:"",telugu:"",punjabi:"",amharic:"",azerbaijani:"",bashkir:"",belarusian:"",cebuano:"",chuvash:"",esperanto:"",basque:"",irish:""},utils:{tranToWeb:"HTML",dropOrPasteImage:"",downloadHtml:"HTML",copyHtml:"HTML",copySuccess:"HTML",copyFailed:"HTML",clear:""},importDialog:{title:"Tag",sure:"",cleanAll:"",dumpSQL:"SQL",uploadSQL:"SQL",setMainCeb:"",setSubCeb:"",addTag:"Tag",fromJSONImput:"JSONTag",fromTxtInput:"TXTTag",fromYmalInput:"YAMLTag",selectMainCeb:"",selectSubCeb:"",selectGroup:"",sureSelect:"",pleaseAddGroupName:"",pleaseAddSubGroupName:"",pleaseFullRequest:"",successImport:"",importFail:"",dumpOnlySQL:"TagSQL",settingOutputName:"",sureYes:"",cancel:"",edit:"",delete:"",add:"Tag",pleaseMainCebUuid:"UUID",pleaseSubGroupUuid:"UUID",pleaseSubGroup:"",pleaseMainCeb:"",translater:"",tips1:"",tips1text:"B",tips2:"Tag",tips2text:"GitHub",tips3:"",tips3text:"",selectTitle:"",selectedCategories:"",clearAll:"",primaryCategories:"",subCategories:"",noSelectedCategories:"",selectCategory:"",selectSubcategory:"",sureSelect:""},randomUtils:{title:"Tag",generalSettings:"",totalTags:"Tag",rules:"",addRule:"",rule:"",range:"",tagType:"",category:"Tag",specificTags:"",selectCategory:"",addTagPlaceholder:"",addTag:"",testRandom:"",generatedTags:"",selectTagGroup:"Tag",ruleTemplates:"",saveAsTemplate:"",selectTemplate:"",applyTemplate:"",templateNamePlaceholder:"",templateNameRequired:"",templateSaved:"",templateApplied:"",errorSavingTemplates:"",save:"",cancel:"",editTemplate:"",deleteTemplate:"",confirmDeleteTemplate:"",templateDeleted:"",templateUpdated:"",errorUpdatingTemplate:"",errorLoadingTemplate:"",errorDeletingTemplate:"",errorApplyingTemplate:"",pleaseChooseTemplate:"",errorSavingTemplate:"",newTemplate:"",rulesReminder:"1"},danbooruManager:{title:"Danbooru",controle:"",translatePlaceholder:"",searchPlaceholder:"Danbooru...",pageShow:":",pageLimit:"",hot:"",aliases:"",sureBatchDelete:"",sureBatchDeleteTips1:"",sureBatchDeleteTips2:"",sureDelete:"",import:"Danbooru",importBatchTitle:"Danbooru",importTitle:"Danbooru ",add:"Danbooru",edit:"Danbooru"}},i_={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+mo,windowTitleGlobal:"WeiLin Global Prompt UI Window "+mo,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",oneClickCleanAll:"one Click Clean All",oneClickClearDisabled:"Clear All Disabled",clearDisabledSuccess:"All disabled tags cleared",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",showDeleteButton:"Show Delete Button",hideDeleteButton:"Hide Delete Button",modelWeight:"Model Weight",textWeight:"Text Weight",favour:"Favour",lineToken:"Line Break",addLineToken:"Add Line Break Token",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",setting_function_toggles:"Function Toggle Settings",setting_function_toggles_full:"Function Toggle Settings (Reopen window to take effect)",enableClearDisabled:"Enable Clear Disabled",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",favourRequired:"Tag and Tag description cannot be empty, and a group must be selected",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ip;const Is=e=>Ip=e,Dp=Symbol();function Lr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var bl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(bl||(bl={}));function r_(){const e=ki(!0),t=e.run(()=>h({}));let n=[],o=[];const a=Pi({install(l){Is(a),a._a=l,l.provide(Dp,a),l.config.globalProperties.$pinia=a,o.forEach(i=>n.push(i)),o=[]},use(l){return this._a?n.push(l):o.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return a}const Rp=()=>{};function Op(e,t,n,o=Rp){e.push(t);const a=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),o())};return!n&&Au()&&Mm(a),a}function ka(e,...t){e.slice().forEach(n=>{n(...t)})}const u_=e=>e(),Np=Symbol(),Ar=Symbol();function Mr(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],a=e[n];Lr(a)&&Lr(o)&&e.hasOwnProperty(n)&&!Ot(o)&&!To(o)?e[n]=Mr(a,o):e[n]=o}return e}const c_=Symbol();function d_(e){return!Lr(e)||!e.hasOwnProperty(c_)}const{assign:Po}=Object;function p_(e){return!!(Ot(e)&&e.effect)}function f_(e,t,n,o){const{state:a,actions:l,getters:i}=t,r=n.state.value[e];let u;function p(){r||(n.state.value[e]=a?a():{});const d=t1(n.state.value[e]);return Po(d,l,Object.keys(i||{}).reduce((c,v)=>(c[v]=Pi(vt(()=>{Is(n);const m=n._s.get(e);return i[v].call(m,m)})),c),{}))}return u=Pp(e,p,t,n,o,!0),u}function Pp(e,t,n={},o,a,l){let i;const r=Po({actions:{}},n),u={deep:!0};let p,d,c=[],v=[],m;const y=o.state.value[e];!l&&!y&&(o.state.value[e]={}),h({});let S;function $(K){let X;p=d=!1,typeof K=="function"?(K(o.state.value[e]),X={type:bl.patchFunction,storeId:e,events:m}):(Mr(o.state.value[e],K),X={type:bl.patchObject,payload:K,storeId:e,events:m});const _e=S=Symbol();qe().then(()=>{S===_e&&(p=!0)}),d=!0,ka(c,X,o.state.value[e])}const T=l?function(){const{state:X}=n,_e=X?X():{};this.$patch(le=>{Po(le,_e)})}:Rp;function D(){i.stop(),c=[],v=[],o._s.delete(e)}const J=(K,X="")=>{if(Np in K)return K[Ar]=X,K;const _e=function(){Is(o);const le=Array.from(arguments),P=[],Z=[];function te(oe){P.push(oe)}function z(oe){Z.push(oe)}ka(v,{args:le,name:_e[Ar],store:N,after:te,onError:z});let ne;try{ne=K.apply(this&&this.$id===e?this:N,le)}catch(oe){throw ka(Z,oe),oe}return ne instanceof Promise?ne.then(oe=>(ka(P,oe),oe)).catch(oe=>(ka(Z,oe),Promise.reject(oe))):(ka(P,ne),ne)};return _e[Np]=!0,_e[Ar]=X,_e},x={_p:o,$id:e,$onAction:Op.bind(null,v),$patch:$,$reset:T,$subscribe(K,X={}){const _e=Op(c,K,X.detached,()=>le()),le=i.run(()=>ot(()=>o.state.value[e],P=>{(X.flush==="sync"?d:p)&&K({storeId:e,type:bl.direct,events:m},P)},Po({},u,X)));return _e},$dispose:D},N=ts(x);o._s.set(e,N);const j=(o._a&&o._a.runWithContext||u_)(()=>o._e.run(()=>(i=ki()).run(()=>t({action:J}))));for(const K in j){const X=j[K];if(Ot(X)&&!p_(X)||To(X))l||(y&&d_(X)&&(Ot(X)?X.value=y[K]:Mr(X,y[K])),o.state.value[e][K]=X);else if(typeof X=="function"){const _e=J(X,K);j[K]=_e,r.actions[K]=X}}return Po(N,j),Po(nt(N),j),Object.defineProperty(N,"$state",{get:()=>o.state.value[e],set:K=>{$(X=>{Po(X,K)})}}),o._p.forEach(K=>{Po(N,i.run(()=>K({store:N,app:o._a,pinia:o,options:r})))}),y&&l&&n.hydrate&&n.hydrate(N.$state,y),p=!0,d=!0,N}/*! #__NO_SIDE_EFFECTS__ */function g_(e,t,n){let o;const a=typeof t=="function";o=a?n:t;function l(i,r){const u=B1();return i=i||(u?_a(Dp,null):null),i&&Is(i),i=Ip,i._s.has(e)||(a?Pp(e,t,o,i):f_(e,o,i)),i._s.get(e)}return l.$id=e,l}const Ds=g_("tag",()=>{const e=h([]),t=h({user_lang:"zh_CN"}),n=h(0);return{categories:e,setCategories:i=>{e.value=i},userSetting:t,setUserSetting:i=>{t.value=i},isFirstLoading:n,setisFirstLoading:i=>{n.value=i}}});function Fp(e,t){return function(){return e.apply(t,arguments)}}const{toString:m_}=Object.prototype,{getPrototypeOf:Ir}=Object,Rs=(e=>t=>{const n=m_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=e=>(e=e.toLowerCase(),t=>Rs(t)===e),Os=e=>t=>typeof t===e,{isArray:Ca}=Array,wl=Os("undefined");function v_(e){return e!==null&&!wl(e)&&e.constructor!==null&&!wl(e.constructor)&&Cn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bp=Vn("ArrayBuffer");function h_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bp(e.buffer),t}const __=Os("string"),Cn=Os("function"),Up=Os("number"),Ns=e=>e!==null&&typeof e=="object",y_=e=>e===!0||e===!1,Ps=e=>{if(Rs(e)!=="object")return!1;const t=Ir(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},b_=Vn("Date"),w_=Vn("File"),x_=Vn("Blob"),S_=Vn("FileList"),T_=e=>Ns(e)&&Cn(e.pipe),k_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Cn(e.append)&&((t=Rs(e))==="formdata"||t==="object"&&Cn(e.toString)&&e.toString()==="[object FormData]"))},C_=Vn("URLSearchParams"),[E_,$_,L_,A_]=["ReadableStream","Request","Response","Headers"].map(Vn),M_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,a;if(typeof e!="object"&&(e=[e]),Ca(e))for(o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let r;for(o=0;o<i;o++)r=l[o],t.call(null,e[r],r,e)}}function Vp(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const oa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wp=e=>!wl(e)&&e!==oa;function Dr(){const{caseless:e}=Wp(this)&&this||{},t={},n=(o,a)=>{const l=e&&Vp(t,a)||a;Ps(t[l])&&Ps(o)?t[l]=Dr(t[l],o):Ps(o)?t[l]=Dr({},o):Ca(o)?t[l]=o.slice():t[l]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&xl(arguments[o],n);return t}const I_=(e,t,n,{allOwnKeys:o}={})=>(xl(t,(a,l)=>{n&&Cn(a)?e[l]=Fp(a,n):e[l]=a},{allOwnKeys:o}),e),D_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),R_=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},O_=(e,t,n,o)=>{let a,l,i;const r={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)i=a[l],(!o||o(i,e,t))&&!r[i]&&(t[i]=e[i],r[i]=!0);e=n!==!1&&Ir(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},N_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},P_=e=>{if(!e)return null;if(Ca(e))return e;let t=e.length;if(!Up(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},F_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ir(Uint8Array)),B_=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=o.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},U_=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},V_=Vn("HTMLFormElement"),W_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),zp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),z_=Vn("RegExp"),Hp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};xl(n,(a,l)=>{let i;(i=t(a,l,e))!==!1&&(o[l]=i||a)}),Object.defineProperties(e,o)},H_=e=>{Hp(e,(t,n)=>{if(Cn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(Cn(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},j_=(e,t)=>{const n={},o=a=>{a.forEach(l=>{n[l]=!0})};return Ca(e)?o(e):o(String(e).split(t)),n},G_=()=>{},q_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function K_(e){return!!(e&&Cn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Y_=e=>{const t=new Array(10),n=(o,a)=>{if(Ns(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[a]=o;const l=Ca(o)?[]:{};return xl(o,(i,r)=>{const u=n(i,a+1);!wl(u)&&(l[r]=u)}),t[a]=void 0,l}}return o};return n(e,0)},J_=Vn("AsyncFunction"),X_=e=>e&&(Ns(e)||Cn(e))&&Cn(e.then)&&Cn(e.catch),jp=((e,t)=>e?setImmediate:t?((n,o)=>(oa.addEventListener("message",({source:a,data:l})=>{a===oa&&l===n&&o.length&&o.shift()()},!1),a=>{o.push(a),oa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Cn(oa.postMessage)),Q_=typeof queueMicrotask<"u"?queueMicrotask.bind(oa):typeof process<"u"&&process.nextTick||jp,Te={isArray:Ca,isArrayBuffer:Bp,isBuffer:v_,isFormData:k_,isArrayBufferView:h_,isString:__,isNumber:Up,isBoolean:y_,isObject:Ns,isPlainObject:Ps,isReadableStream:E_,isRequest:$_,isResponse:L_,isHeaders:A_,isUndefined:wl,isDate:b_,isFile:w_,isBlob:x_,isRegExp:z_,isFunction:Cn,isStream:T_,isURLSearchParams:C_,isTypedArray:F_,isFileList:S_,forEach:xl,merge:Dr,extend:I_,trim:M_,stripBOM:D_,inherits:R_,toFlatObject:O_,kindOf:Rs,kindOfTest:Vn,endsWith:N_,toArray:P_,forEachEntry:B_,matchAll:U_,isHTMLForm:V_,hasOwnProperty:zp,hasOwnProp:zp,reduceDescriptors:Hp,freezeMethods:H_,toObjectSet:j_,toCamelCase:W_,noop:G_,toFiniteNumber:q_,findKey:Vp,global:oa,isContextDefined:Wp,isSpecCompliantForm:K_,toJSONObject:Y_,isAsyncFn:J_,isThenable:X_,setImmediate:jp,asap:Q_};function Ye(e,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}Te.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Gp=Ye.prototype,qp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qp[e]={value:e}}),Object.defineProperties(Ye,qp),Object.defineProperty(Gp,"isAxiosError",{value:!0}),Ye.from=(e,t,n,o,a,l)=>{const i=Object.create(Gp);return Te.toFlatObject(e,i,function(u){return u!==Error.prototype},r=>r!=="isAxiosError"),Ye.call(i,e.message,t,n,o,a),i.cause=e,i.name=e.name,l&&Object.assign(i,l),i};const Z_=null;function Rr(e){return Te.isPlainObject(e)||Te.isArray(e)}function Kp(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function Yp(e,t,n){return e?e.concat(t).map(function(a,l){return a=Kp(a),!n&&l?"["+a+"]":a}).join(n?".":""):t}function e0(e){return Te.isArray(e)&&!e.some(Rr)}const t0=Te.toFlatObject(Te,{},null,function(t){return/^is[A-Z]/.test(t)});function Fs(e,t,n){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,$){return!Te.isUndefined($[S])});const o=n.metaTokens,a=n.visitor||d,l=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(a))throw new TypeError("visitor must be a function");function p(y){if(y===null)return"";if(Te.isDate(y))return y.toISOString();if(!u&&Te.isBlob(y))throw new Ye("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(y)||Te.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,S,$){let T=y;if(y&&!$&&typeof y=="object"){if(Te.endsWith(S,"{}"))S=o?S:S.slice(0,-2),y=JSON.stringify(y);else if(Te.isArray(y)&&e0(y)||(Te.isFileList(y)||Te.endsWith(S,"[]"))&&(T=Te.toArray(y)))return S=Kp(S),T.forEach(function(J,x){!(Te.isUndefined(J)||J===null)&&t.append(i===!0?Yp([S],x,l):i===null?S:S+"[]",p(J))}),!1}return Rr(y)?!0:(t.append(Yp($,S,l),p(y)),!1)}const c=[],v=Object.assign(t0,{defaultVisitor:d,convertValue:p,isVisitable:Rr});function m(y,S){if(!Te.isUndefined(y)){if(c.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));c.push(y),Te.forEach(y,function(T,D){(!(Te.isUndefined(T)||T===null)&&a.call(t,T,Te.isString(D)?D.trim():D,S,v))===!0&&m(T,S?S.concat(D):[D])}),c.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Jp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Or(e,t){this._pairs=[],e&&Fs(e,this,t)}const Xp=Or.prototype;Xp.append=function(t,n){this._pairs.push([t,n])},Xp.toString=function(t){const n=t?function(o){return t.call(this,o,Jp)}:Jp;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function n0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qp(e,t,n){if(!t)return e;const o=n&&n.encode||n0;Te.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(t,n):l=Te.isURLSearchParams(t)?t.toString():new Or(t,n).toString(o),l){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Zp{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Te.forEach(this.handlers,function(o){o!==null&&t(o)})}}const ef={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o0={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Or,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Nr=typeof window<"u"&&typeof document<"u",Pr=typeof navigator=="object"&&navigator||void 0,a0=Nr&&(!Pr||["ReactNative","NativeScript","NS"].indexOf(Pr.product)<0),l0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s0=Nr&&window.location.href||"http://localhost",ln={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nr,hasStandardBrowserEnv:a0,hasStandardBrowserWebWorkerEnv:l0,navigator:Pr,origin:s0},Symbol.toStringTag,{value:"Module"})),...o0};function i0(e,t){return Fs(e,new ln.classes.URLSearchParams,Object.assign({visitor:function(n,o,a,l){return ln.isNode&&Te.isBuffer(n)?(this.append(o,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function r0(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u0(e){const t={},n=Object.keys(e);let o;const a=n.length;let l;for(o=0;o<a;o++)l=n[o],t[l]=e[l];return t}function tf(e){function t(n,o,a,l){let i=n[l++];if(i==="__proto__")return!0;const r=Number.isFinite(+i),u=l>=n.length;return i=!i&&Te.isArray(a)?a.length:i,u?(Te.hasOwnProp(a,i)?a[i]=[a[i],o]:a[i]=o,!r):((!a[i]||!Te.isObject(a[i]))&&(a[i]=[]),t(n,o,a[i],l)&&Te.isArray(a[i])&&(a[i]=u0(a[i])),!r)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const n={};return Te.forEachEntry(e,(o,a)=>{t(r0(o),a,n,0)}),n}return null}function c0(e,t,n){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Sl={transitional:ef,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,l=Te.isObject(t);if(l&&Te.isHTMLForm(t)&&(t=new FormData(t)),Te.isFormData(t))return a?JSON.stringify(tf(t)):t;if(Te.isArrayBuffer(t)||Te.isBuffer(t)||Te.isStream(t)||Te.isFile(t)||Te.isBlob(t)||Te.isReadableStream(t))return t;if(Te.isArrayBufferView(t))return t.buffer;if(Te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return i0(t,this.formSerializer).toString();if((r=Te.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Fs(r?{"files[]":t}:t,u&&new u,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),c0(t)):t}],transformResponse:[function(t){const n=this.transitional||Sl.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Te.isResponse(t)||Te.isReadableStream(t))return t;if(t&&Te.isString(t)&&(o&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(r){if(i)throw r.name==="SyntaxError"?Ye.from(r,Ye.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ln.classes.FormData,Blob:ln.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{Sl.headers[e]={}});const d0=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p0=e=>{const t={};let n,o,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),o=i.substring(a+1).trim(),!(!n||t[n]&&d0[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},nf=Symbol("internals");function Tl(e){return e&&String(e).trim().toLowerCase()}function Bs(e){return e===!1||e==null?e:Te.isArray(e)?e.map(Bs):String(e)}function f0(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const g0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fr(e,t,n,o,a){if(Te.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!Te.isString(t)){if(Te.isString(o))return t.indexOf(o)!==-1;if(Te.isRegExp(o))return o.test(t)}}function m0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function v0(e,t){const n=Te.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(a,l,i){return this[o].call(this,t,a,l,i)},configurable:!0})})}let _n=class{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function l(r,u,p){const d=Tl(u);if(!d)throw new Error("header name must be a non-empty string");const c=Te.findKey(a,d);(!c||a[c]===void 0||p===!0||p===void 0&&a[c]!==!1)&&(a[c||u]=Bs(r))}const i=(r,u)=>Te.forEach(r,(p,d)=>l(p,d,u));if(Te.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(Te.isString(t)&&(t=t.trim())&&!g0(t))i(p0(t),n);else if(Te.isHeaders(t))for(const[r,u]of t.entries())l(u,r,o);else t!=null&&l(n,t,o);return this}get(t,n){if(t=Tl(t),t){const o=Te.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return f0(a);if(Te.isFunction(n))return n.call(this,a,o);if(Te.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Tl(t),t){const o=Te.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Fr(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function l(i){if(i=Tl(i),i){const r=Te.findKey(o,i);r&&(!n||Fr(o,o[r],r,n))&&(delete o[r],a=!0)}}return Te.isArray(t)?t.forEach(l):l(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const l=n[o];(!t||Fr(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const n=this,o={};return Te.forEach(this,(a,l)=>{const i=Te.findKey(o,l);if(i){n[i]=Bs(a),delete n[l];return}const r=t?m0(l):String(l).trim();r!==l&&delete n[l],n[r]=Bs(a),o[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Te.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&Te.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[nf]=this[nf]={accessors:{}}).accessors,a=this.prototype;function l(i){const r=Tl(i);o[r]||(v0(a,i),o[r]=!0)}return Te.isArray(t)?t.forEach(l):l(t),this}};_n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Te.reduceDescriptors(_n.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}}),Te.freezeMethods(_n);function Br(e,t){const n=this||Sl,o=t||n,a=_n.from(o.headers);let l=o.data;return Te.forEach(e,function(r){l=r.call(n,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function of(e){return!!(e&&e.__CANCEL__)}function Ea(e,t,n){Ye.call(this,e??"canceled",Ye.ERR_CANCELED,t,n),this.name="CanceledError"}Te.inherits(Ea,Ye,{__CANCEL__:!0});function af(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _0(e,t){e=e||10;const n=new Array(e),o=new Array(e);let a=0,l=0,i;return t=t!==void 0?t:1e3,function(u){const p=Date.now(),d=o[l];i||(i=p),n[a]=u,o[a]=p;let c=l,v=0;for(;c!==a;)v+=n[c++],c=c%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),p-i<t)return;const m=d&&p-d;return m?Math.round(v*1e3/m):void 0}}function y0(e,t){let n=0,o=1e3/t,a,l;const i=(p,d=Date.now())=>{n=d,a=null,l&&(clearTimeout(l),l=null),e.apply(null,p)};return[(...p)=>{const d=Date.now(),c=d-n;c>=o?i(p,d):(a=p,l||(l=setTimeout(()=>{l=null,i(a)},o-c)))},()=>a&&i(a)]}const Us=(e,t,n=3)=>{let o=0;const a=_0(50,250);return y0(l=>{const i=l.loaded,r=l.lengthComputable?l.total:void 0,u=i-o,p=a(u),d=i<=r;o=i;const c={loaded:i,total:r,progress:r?i/r:void 0,bytes:u,rate:p||void 0,estimated:p&&r&&d?(r-i)/p:void 0,event:l,lengthComputable:r!=null,[t?"download":"upload"]:!0};e(c)},n)},lf=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},sf=e=>(...t)=>Te.asap(()=>e(...t)),b0=ln.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ln.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ln.origin),ln.navigator&&/(msie|trident)/i.test(ln.navigator.userAgent)):()=>!0,w0=ln.hasStandardBrowserEnv?{write(e,t,n,o,a,l){const i=[e+"="+encodeURIComponent(t)];Te.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Te.isString(o)&&i.push("path="+o),Te.isString(a)&&i.push("domain="+a),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function S0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rf(e,t,n){let o=!x0(t);return e&&o||n==!1?S0(e,t):t}const uf=e=>e instanceof _n?{...e}:e;function aa(e,t){t=t||{};const n={};function o(p,d,c,v){return Te.isPlainObject(p)&&Te.isPlainObject(d)?Te.merge.call({caseless:v},p,d):Te.isPlainObject(d)?Te.merge({},d):Te.isArray(d)?d.slice():d}function a(p,d,c,v){if(Te.isUndefined(d)){if(!Te.isUndefined(p))return o(void 0,p,c,v)}else return o(p,d,c,v)}function l(p,d){if(!Te.isUndefined(d))return o(void 0,d)}function i(p,d){if(Te.isUndefined(d)){if(!Te.isUndefined(p))return o(void 0,p)}else return o(void 0,d)}function r(p,d,c){if(c in t)return o(p,d);if(c in e)return o(void 0,p)}const u={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:r,headers:(p,d,c)=>a(uf(p),uf(d),c,!0)};return Te.forEach(Object.keys(Object.assign({},e,t)),function(d){const c=u[d]||a,v=c(e[d],t[d],d);Te.isUndefined(v)&&c!==r||(n[d]=v)}),n}const cf=e=>{const t=aa({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:r}=t;t.headers=i=_n.from(i),t.url=Qp(rf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),r&&i.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):"")));let u;if(Te.isFormData(n)){if(ln.hasStandardBrowserEnv||ln.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[p,...d]=u?u.split(";").map(c=>c.trim()).filter(Boolean):[];i.setContentType([p||"multipart/form-data",...d].join("; "))}}if(ln.hasStandardBrowserEnv&&(o&&Te.isFunction(o)&&(o=o(t)),o||o!==!1&&b0(t.url))){const p=a&&l&&w0.read(l);p&&i.set(a,p)}return t},T0=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,o){const a=cf(e);let l=a.data;const i=_n.from(a.headers).normalize();let{responseType:r,onUploadProgress:u,onDownloadProgress:p}=a,d,c,v,m,y;function S(){m&&m(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let $=new XMLHttpRequest;$.open(a.method.toUpperCase(),a.url,!0),$.timeout=a.timeout;function T(){if(!$)return;const J=_n.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),N={data:!r||r==="text"||r==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:J,config:e,request:$};af(function(j){n(j),S()},function(j){o(j),S()},N),$=null}"onloadend"in $?$.onloadend=T:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(T)},$.onabort=function(){$&&(o(new Ye("Request aborted",Ye.ECONNABORTED,e,$)),$=null)},$.onerror=function(){o(new Ye("Network Error",Ye.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let x=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||ef;a.timeoutErrorMessage&&(x=a.timeoutErrorMessage),o(new Ye(x,N.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,e,$)),$=null},l===void 0&&i.setContentType(null),"setRequestHeader"in $&&Te.forEach(i.toJSON(),function(x,N){$.setRequestHeader(N,x)}),Te.isUndefined(a.withCredentials)||($.withCredentials=!!a.withCredentials),r&&r!=="json"&&($.responseType=a.responseType),p&&([v,y]=Us(p,!0),$.addEventListener("progress",v)),u&&$.upload&&([c,m]=Us(u),$.upload.addEventListener("progress",c),$.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(d=J=>{$&&(o(!J||J.type?new Ea(null,e,$):J),$.abort(),$=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const D=h0(a.url);if(D&&ln.protocols.indexOf(D)===-1){o(new Ye("Unsupported protocol "+D+":",Ye.ERR_BAD_REQUEST,e));return}$.send(l||null)})},k0=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,a;const l=function(p){if(!a){a=!0,r();const d=p instanceof Error?p:this.reason;o.abort(d instanceof Ye?d:new Ea(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,l(new Ye(`timeout ${t} of ms exceeded`,Ye.ETIMEDOUT))},t);const r=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),e=null)};e.forEach(p=>p.addEventListener("abort",l));const{signal:u}=o;return u.unsubscribe=()=>Te.asap(r),u}},C0=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,a;for(;o<n;)a=o+t,yield e.slice(o,a),o=a},E0=async function*(e,t){for await(const n of $0(e))yield*C0(n,t)},$0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},df=(e,t,n,o)=>{const a=E0(e,t);let l=0,i,r=u=>{i||(i=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:p,value:d}=await a.next();if(p){r(),u.close();return}let c=d.byteLength;if(n){let v=l+=c;n(v)}u.enqueue(new Uint8Array(d))}catch(p){throw r(p),p}},cancel(u){return r(u),a.return()}},{highWaterMark:2})},Vs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pf=Vs&&typeof ReadableStream=="function",L0=Vs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ff=(e,...t)=>{try{return!!e(...t)}catch{return!1}},A0=pf&&ff(()=>{let e=!1;const t=new Request(ln.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),gf=64*1024,Ur=pf&&ff(()=>Te.isReadableStream(new Response("").body)),Ws={stream:Ur&&(e=>e.body)};Vs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ws[t]&&(Ws[t]=Te.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Ye(`Response type '${t}' is not supported`,Ye.ERR_NOT_SUPPORT,o)})})})(new Response);const M0=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(ln.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await L0(e)).byteLength},I0=async(e,t)=>{const n=Te.toFiniteNumber(e.getContentLength());return n??M0(t)},Vr={http:Z_,xhr:T0,fetch:Vs&&(async e=>{let{url:t,method:n,data:o,signal:a,cancelToken:l,timeout:i,onDownloadProgress:r,onUploadProgress:u,responseType:p,headers:d,withCredentials:c="same-origin",fetchOptions:v}=cf(e);p=p?(p+"").toLowerCase():"text";let m=k0([a,l&&l.toAbortSignal()],i),y;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let $;try{if(u&&A0&&n!=="get"&&n!=="head"&&($=await I0(d,o))!==0){let N=new Request(t,{method:"POST",body:o,duplex:"half"}),H;if(Te.isFormData(o)&&(H=N.headers.get("content-type"))&&d.setContentType(H),N.body){const[j,K]=lf($,Us(sf(u)));o=df(N.body,gf,j,K)}}Te.isString(c)||(c=c?"include":"omit");const T="credentials"in Request.prototype;y=new Request(t,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:T?c:void 0});let D=await fetch(y);const J=Ur&&(p==="stream"||p==="response");if(Ur&&(r||J&&S)){const N={};["status","statusText","headers"].forEach(X=>{N[X]=D[X]});const H=Te.toFiniteNumber(D.headers.get("content-length")),[j,K]=r&&lf(H,Us(sf(r),!0))||[];D=new Response(df(D.body,gf,j,()=>{K&&K(),S&&S()}),N)}p=p||"text";let x=await Ws[Te.findKey(Ws,p)||"text"](D,e);return!J&&S&&S(),await new Promise((N,H)=>{af(N,H,{data:x,headers:_n.from(D.headers),status:D.status,statusText:D.statusText,config:e,request:y})})}catch(T){throw S&&S(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,e,y),{cause:T.cause||T}):Ye.from(T,T&&T.code,e,y)}})};Te.forEach(Vr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mf=e=>`- ${e}`,D0=e=>Te.isFunction(e)||e===null||e===!1,vf={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let n,o;const a={};for(let l=0;l<t;l++){n=e[l];let i;if(o=n,!D0(n)&&(o=Vr[(i=String(n)).toLowerCase()],o===void 0))throw new Ye(`Unknown adapter '${i}'`);if(o)break;a[i||"#"+l]=o}if(!o){const l=Object.entries(a).map(([r,u])=>`adapter ${r} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=t?l.length>1?`since :
`+l.map(mf).join(`
`):" "+mf(l[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o},adapters:Vr};function Wr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ea(null,e)}function hf(e){return Wr(e),e.headers=_n.from(e.headers),e.data=Br.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vf.getAdapter(e.adapter||Sl.adapter)(e).then(function(o){return Wr(e),o.data=Br.call(e,e.transformResponse,o),o.headers=_n.from(o.headers),o},function(o){return of(o)||(Wr(e),o&&o.response&&(o.response.data=Br.call(e,e.transformResponse,o.response),o.response.headers=_n.from(o.response.headers))),Promise.reject(o)})}const _f="1.8.3",zs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zs[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const yf={};zs.transitional=function(t,n,o){function a(l,i){return"[Axios v"+_f+"] Transitional option '"+l+"'"+i+(o?". "+o:"")}return(l,i,r)=>{if(t===!1)throw new Ye(a(i," has been removed"+(n?" in "+n:"")),Ye.ERR_DEPRECATED);return n&&!yf[i]&&(yf[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,i,r):!0}},zs.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function R0(e,t,n){if(typeof e!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let a=o.length;for(;a-- >0;){const l=o[a],i=t[l];if(i){const r=e[l],u=r===void 0||i(r,l,e);if(u!==!0)throw new Ye("option "+l+" must be "+u,Ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ye("Unknown option "+l,Ye.ERR_BAD_OPTION)}}const Hs={assertOptions:R0,validators:zs},Zn=Hs.validators;let la=class{constructor(t){this.defaults=t,this.interceptors={request:new Zp,response:new Zp}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?l&&!String(o.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+l):o.stack=l}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=aa(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:l}=n;o!==void 0&&Hs.assertOptions(o,{silentJSONParsing:Zn.transitional(Zn.boolean),forcedJSONParsing:Zn.transitional(Zn.boolean),clarifyTimeoutError:Zn.transitional(Zn.boolean)},!1),a!=null&&(Te.isFunction(a)?n.paramsSerializer={serialize:a}:Hs.assertOptions(a,{encode:Zn.function,serialize:Zn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Hs.assertOptions(n,{baseUrl:Zn.spelling("baseURL"),withXsrfToken:Zn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=l&&Te.merge(l.common,l[n.method]);l&&Te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete l[y]}),n.headers=_n.concat(i,l);const r=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,r.unshift(S.fulfilled,S.rejected))});const p=[];this.interceptors.response.forEach(function(S){p.push(S.fulfilled,S.rejected)});let d,c=0,v;if(!u){const y=[hf.bind(this),void 0];for(y.unshift.apply(y,r),y.push.apply(y,p),v=y.length,d=Promise.resolve(n);c<v;)d=d.then(y[c++],y[c++]);return d}v=r.length;let m=n;for(c=0;c<v;){const y=r[c++],S=r[c++];try{m=y(m)}catch($){S.call(this,$);break}}try{d=hf.call(this,m)}catch(y){return Promise.reject(y)}for(c=0,v=p.length;c<v;)d=d.then(p[c++],p[c++]);return d}getUri(t){t=aa(this.defaults,t);const n=rf(t.baseURL,t.url,t.allowAbsoluteUrls);return Qp(n,t.params,t.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(t){la.prototype[t]=function(n,o){return this.request(aa(o||{},{method:t,url:n,data:(o||{}).data}))}}),Te.forEach(["post","put","patch"],function(t){function n(o){return function(l,i,r){return this.request(aa(r||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}la.prototype[t]=n(),la.prototype[t+"Form"]=n(!0)});let O0=class _m{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const o=this;this.promise.then(a=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](a);o._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(r=>{o.subscribe(r),l=r}).then(a);return i.cancel=function(){o.unsubscribe(l)},i},t(function(l,i,r){o.reason||(o.reason=new Ea(l,i,r),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new _m(function(a){t=a}),cancel:t}}};function N0(e){return function(n){return e.apply(null,n)}}function P0(e){return Te.isObject(e)&&e.isAxiosError===!0}const zr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zr).forEach(([e,t])=>{zr[t]=e});function bf(e){const t=new la(e),n=Fp(la.prototype.request,t);return Te.extend(n,la.prototype,t,{allOwnKeys:!0}),Te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return bf(aa(e,a))},n}const Nt=bf(Sl);Nt.Axios=la,Nt.CanceledError=Ea,Nt.CancelToken=O0,Nt.isCancel=of,Nt.VERSION=_f,Nt.toFormData=Fs,Nt.AxiosError=Ye,Nt.Cancel=Nt.CanceledError,Nt.all=function(t){return Promise.all(t)},Nt.spread=N0,Nt.isAxiosError=P0,Nt.mergeConfig=aa,Nt.AxiosHeaders=_n,Nt.formToJSON=e=>tf(Te.isHTMLForm(e)?new FormData(e):e),Nt.getAdapter=vf.getAdapter,Nt.HttpStatusCode=zr,Nt.default=Nt;const{Axios:wI,AxiosError:xI,CanceledError:SI,isCancel:TI,CancelToken:kI,VERSION:CI,all:EI,Cancel:$I,isAxiosError:LI,spread:AI,toFormData:MI,AxiosHeaders:II,HttpStatusCode:DI,formToJSON:RI,getAdapter:OI,mergeConfig:NI}=Nt,Me=Nt.create({baseURL:"/weilin/prompt_ui/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Me.interceptors.request.use(e=>e,e=>Promise.reject(e)),Me.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const js={getUserSetting:async()=>await Me({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await Me({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await Me({url:"/panel/start",method:"post"})},wf=()=>Ds(),kl=K2({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN:s_,en_US:i_}}),F0=()=>{const e=wf();js.getUserSetting().then(t=>{var o;e.setUserSetting(t.data);const n=((o=e.userSetting)==null?void 0:o.user_lang)||"zh_CN";kl.global.locale.value=n})},B0=e=>{kl.global.locale.value=e,wf().setUserSetting({user_lang:e})},U0=()=>{F0()},V0={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:""}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=h(!1);return mt(()=>{t.value=!0}),{style:e,visible:t}}},W0={class:"text"};function z0(e,t,n,o,a,l){return ve((b(),C("div",{class:"pop-message",style:ct(o.style[n.type])},[s("i",{class:Le(["icon",[o.style[n.type].icon]])},null,2),s("span",W0,g(n.str),1)],4)),[[fl,o.visible]])}const H0=_t(V0,[["render",z0],["__scopeId","data-v-ccb6bb2b"]]),Hr=document.createElement("div");document.body.appendChild(Hr);let jr=null;const Y=({str:e,type:t,name:n=""})=>{let o=kl.global.t(e);n.length>0&&(o=kl.global.t(e,{name:n}));const a=Ue(H0,{str:o,type:t});Nd(a,Hr),jr&&clearTimeout(jr),jr=setTimeout(()=>{Nd(null,Hr)},2e3)},j0={class:"language-selector-content"},G0=["onClick"],q0={class:"lang-name"},K0=_t({__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(null),l=Ds(),i=vt(()=>l.userSetting.user_lang),r=[{code:"zh_CN",name:""},{code:"en_US",name:"English"}],u=n,p=v=>{d(v),u("close",{})},d=v=>{js.setUserLanguage(v).then(m=>{B0(v),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.setLanguageSuccess"})}).catch(m=>{Y({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:v=>{if(!a.value)return;const m=a.value;m.style.position="fixed",m.style.top=`${v.bottom}px`}}),(v,m)=>(b(),C("div",{class:"language-selector",ref_key:"selectorRef",ref:a},[s("div",j0,[(b(),C(Ie,null,ze(r,(y,S)=>s("div",{style:ct({"margin-top":S===0?"0":"2px"}),key:y.code,class:Le(["language-option",{active:i.value===y.code}]),onClick:$=>p(y.code)},[s("span",q0,g(y.name),1)],14,G0)),64))])],512))}},[["__scopeId","data-v-1a0e3baa"]]),vo="weilin_prompt_ui_",$a=_t({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=()=>{o("update:modelValue",!1)},l=()=>{n.closeOnClickOverlay&&a()};return(i,r)=>(b(),wt(dc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[Ue(ys,{name:`${vo}dialog-fade`},{default:it(()=>[e.modelValue?(b(),C("div",{key:0,class:Le(`${vo}dialog-overlay`),onClick:l},[Ue(ys,{name:`${vo}dialog-slide`},{default:it(()=>[s("div",{style:ct({width:e.width}),class:Le(`${vo}dialog`),onClick:r[0]||(r[0]=Je(()=>{},["stop"]))},[s("div",{class:Le(`${vo}dialog-header`)},[s("h3",{class:Le(`${vo}dialog-title`)},g(e.title),3),s("button",{class:Le(`${vo}dialog-close`),onClick:a},r[1]||(r[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)],2),s("div",{class:Le(`${vo}dialog-content`)},[ol(i.$slots,"default")],2),i.$slots.footer?(b(),C("div",{key:0,class:Le(`${vo}dialog-footer`)},[ol(i.$slots,"footer")],2)):re("",!0)],6)]),_:3},8,["name"])],2)):re("",!0)]),_:3},8,["name"])]))}},[["__scopeId","data-v-d2e9c495"]]),yn={getTranslateLocal:async e=>await Me({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslateSetting:async()=>await Me({url:"/translate/get/setting",method:"post",data:{}}),installTranslatePackage:async()=>await Me({url:"/translate/install/translaterpackage",method:"post",timeout:0,data:{}}),getTranslateBuktSetting:async()=>await Me({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,n)=>await Me({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:n}}),translaterText:async(e,t)=>await Me({url:"/translate/tran/text",method:"post",timeout:0,data:{str_object:e,text:t}}),translaterInputText:async(e,t)=>await Me({url:"/translate/tran/input",method:"post",timeout:0,data:{str_object:e,text:t}})},Gr={getAutocomplete:async e=>await Me({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await Me({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await Me({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},Cl={updateOpenAiSetting:async e=>await Me({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await Me({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await Me({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await Me({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await Me({url:"/prompt/openai/get_settings",method:"get"})},Y0=["alibaba","baidu","bing","deepl","youdao","qqtransmart","sogou","niutrans","mymemory","modernmt","volcengine","iciba","iflytek","google","lingvanex","yandex","itranslate","systran","argos","apertium","reverso","cloudtranslation","translatecom","tilde","caiyun","qqfanyi","translateme","papago","mirai","iflyrec","hujiang","yeekit","languagewire","elia","judic","mglip","utibet"],Gs=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],qr={getAiServerSetting:async e=>await Me({url:"/ai_server/get_settings",method:"post",data:{}}),updateAiServerSetting:async e=>await Me({url:"/ai_server/update_settings",method:"post",data:e}),getAiModels:async()=>await Me({url:"/ai_server/get_ai_models",method:"post",data:{}})},J0={class:"ai-server-setting-panel"},X0={class:"weilin-comfyui-translater-setting-box"},Q0={class:"weilin-comfyui-setting-item"},Z0={class:"weilin-comfyui-setting-item"},ey={class:"weilin-comfyui-setting-item"},ty={style:{display:"flex",gap:"10px"}},ny=["value"],oy={class:"weilin-comfyui-translater-setting-box"},ay={class:"weilin-comfyui-setting-small-titile"},ly={class:"weilin-comfyui-language-selectors"},sy={class:"weilin-comfyui-setting-item"},iy=["index","value"],ry={class:"weilin-comfyui-setting-item"},uy=["index","value"],cy={class:"weilin-comfyui-translater-setting-box"},dy={class:"weilin-comfyui-setting-small-titile"},py={class:"weilin-comfyui-setting-item"},fy=["placeholder"],gy={class:"weilin-comfyui-setting-item"},my=["placeholder"],vy=_t({__name:"ai_server_setting",setup(e){const{t}=ht(),n=h(""),o=h(""),a=h(""),l=h(""),i=h(""),r=h({api_key:"",base_url:"https://api.siliconflow.cn/v1",model:"",temperature:0,top_p:.7,max_tokens:4096}),u=h({object:"list",data:[]}),p=()=>{qr.updateAiServerSetting(r.value).then(S=>{S.info=="ok"?Y({type:"success",str:"message.saveSuccess"}):Y({type:"warn",str:"message.saveFailed"})}).catch(S=>{Y({type:"warn",str:"message.saveFailed"})})},d=()=>{qr.getAiServerSetting().then(S=>{r.value=S.data}).catch(S=>{Y({type:"warn",str:"message.getTranslaterFail"})})},c=()=>{qr.getAiModels().then(S=>{u.value=S.data}).catch(S=>{Y({type:"warn",str:"message.getTranslaterFail"})})},v=()=>{yn.getTranslateBuktSetting().then(S=>{n.value=S.data.translate_service,o.value=S.data.translate_source_lang,a.value=S.data.translate_target_lang}).catch(S=>{Y({type:"warn",str:"message.getTranslaterFail"})})},m=()=>{yn.saveTranslateSetting(n.value,o.value,a.value).then(S=>{S.info=="ok"?Y({type:"success",str:"message.saveSuccess"}):Y({type:"warn",str:"message.saveFailed"})}).catch(S=>{Y({type:"warn",str:"message.saveFailed"})})},y=()=>{l.value="";let S={text:i.value,translate:""};const $=JSON.stringify(S);yn.translaterInputText($,"").then(T=>{if(T&&T.data){const D=JSON.parse(T.data);l.value=D.translate}}).catch(T=>{Y({type:"warn",str:"message.translaterTestFail"})})};return mt(()=>{d(),c(),v()}),(S,$)=>(b(),C("div",J0,[s("div",X0,[s("div",Q0,[$[7]||($[7]=s("label",null,"API Key",-1)),ve(s("input",{type:"text","onUpdate:modelValue":$[0]||($[0]=T=>r.value.api_key=T),placeholder:"API Key",class:"weilin-comfyui-common-select"},null,512),[[Ae,r.value.api_key]])]),s("div",Z0,[$[9]||($[9]=s("label",null,"AI",-1)),ve(s("select",{"onUpdate:modelValue":$[1]||($[1]=T=>r.value.base_url=T),disabled:"",class:"weilin-comfyui-common-select"},$[8]||($[8]=[s("option",{value:"https://api.siliconflow.cn/v1"},"AI",-1)]),512),[[Gt,r.value.base_url]])]),s("div",ey,[$[10]||($[10]=s("label",null,"ModelAPI Key",-1)),s("div",ty,[ve(s("select",{"onUpdate:modelValue":$[2]||($[2]=T=>r.value.model=T),class:"weilin-comfyui-common-select",style:{flex:"1"}},[(b(!0),C(Ie,null,ze(u.value.data,T=>(b(),C("option",{key:T.id,value:T.id},g(T.id),9,ny))),128))],512),[[Gt,r.value.model]]),s("button",{type:"button",class:"weilin-comfyui-install-button",style:{width:"auto","min-width":"120px"},onClick:c},"  ")])]),s("button",{class:"weilin-comfyui-save-button",onClick:p},"AI")]),s("div",oy,[s("div",ay,g(f(t)("promptBox.settings.translaterSetting")),1),s("div",ly,[s("div",sy,[s("label",null,g(f(t)("promptBox.settings.translaterLangSourceSetting")),1),ve(s("select",{"onUpdate:modelValue":$[3]||($[3]=T=>o.value=T)},[(b(!0),C(Ie,null,ze(f(Gs),(T,D)=>(b(),C("option",{index:D,key:"lan-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,iy))),128))],512),[[Gt,o.value]])]),s("div",ry,[s("label",null,g(f(t)("promptBox.settings.translaterLangTargeSetting")),1),ve(s("select",{"onUpdate:modelValue":$[4]||($[4]=T=>a.value=T)},[(b(!0),C(Ie,null,ze(f(Gs),(T,D)=>(b(),C("option",{index:D,key:"lan-mu-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,uy))),128))],512),[[Gt,a.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:m},g(f(t)("promptBox.settings.saveTranslaterSetting")),1)]),s("div",cy,[s("div",dy,g(f(t)("promptBox.settings.testTranslaterTitle")),1),s("div",py,[s("label",null,g(f(t)("promptBox.settings.inputTestTranslater")),1),ve(s("input",{type:"text","onUpdate:modelValue":$[5]||($[5]=T=>i.value=T),placeholder:f(t)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,fy),[[Ae,i.value]])]),s("div",gy,[s("label",null,g(f(t)("promptBox.settings.outPutTestTranslater")),1),ve(s("input",{type:"text","onUpdate:modelValue":$[6]||($[6]=T=>l.value=T),readonly:"",placeholder:f(t)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,my),[[Ae,l.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:y},g(f(t)("promptBox.settings.testingTranslater")),1)])]))}},[["__scopeId","data-v-731441c6"]]),hy={class:"weilin-comfyui-settings-content"},_y={class:"weilin-comfyui-settings-sidebar"},yy={class:"weilin-comfyui-settings-main"},by={key:0},wy={class:"weilin-comfyui-setting-select"},xy={class:"weilin-comfyui-translator-settings"},Sy={key:0,class:"weilin-comfyui-group-box"},Ty={key:1,class:"weilin-comfyui-group-box"},ky={class:"weilin-comfyui-group-title"},Cy={class:"weilin-comfyui-note-top"},Ey={class:"weilin-comfyui-setting-item"},$y={value:"auto"},Ly={value:"chinese_simplified"},Ay={value:"english"},My={class:"weilin-comfyui-setting-item"},Iy={value:"chinese_simplified"},Dy={value:"english"},Ry={key:2,class:"weilin-comfyui-group-box"},Oy={class:"weilin-comfyui-group-title"},Ny={class:"weilin-comfyui-note-top"},Py={class:"weilin-comfyui-translater-innstall-status"},Fy={class:"weilin-comfyui-translater-install-label"},By={key:0,class:"weilin-comfyui-translater-install-label"},Uy={key:1,class:"weilin-comfyui-translater-install-control"},Vy=["disabled"],Wy={key:0,class:"weilin-comfyui-translater-setting-box"},zy={class:"weilin-comfyui-setting-small-titile"},Hy={class:"weilin-comfyui-setting-item"},jy=["index","value"],Gy={class:"weilin-comfyui-language-selectors"},qy={class:"weilin-comfyui-setting-item"},Ky=["index","value"],Yy={class:"weilin-comfyui-setting-item"},Jy=["index","value"],Xy={key:1,class:"weilin-comfyui-tranlater-text-box"},Qy={class:"weilin-comfyui-setting-small-titile"},Zy={class:"weilin-comfyui-setting-item"},eb=["placeholder"],tb={class:"weilin-comfyui-setting-item"},nb=["placeholder"],ob={key:1},ab={class:"weilin-comfyui-floating-ball-settings"},lb={class:"weilin-comfyui-setting-item"},sb=["placeholder"],ib={class:"weilin-comfyui-setting-item"},rb=["placeholder"],ub={class:"weilin-comfyui-setting-item"},cb=["placeholder"],db={key:2},pb={class:"weilin-comfyui-floating-ball-settings"},fb={class:"weilin-comfyui-setting-item"},gb={class:"weilin-comfyui-setting-item"},mb={class:"weilin-comfyui-setting-item"},vb={class:"weilin-comfyui-setting-item"},hb={class:"weilin-comfyui-setting-item"},_b={class:"weilin-comfyui-setting-item"},yb={key:3},bb={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},wb={class:"weilin-comfyui-settings-column"},xb={class:"weilin-comfyui-setting-item"},Sb={class:"weilin-comfyui-setting-item"},Tb=["placeholder"],kb={class:"weilin-comfyui-setting-item"},Cb=["placeholder"],Eb={class:"weilin-comfyui-setting-item"},$b=["placeholder"],Lb={class:"weilin-comfyui-settings-column"},Ab={class:"weilin-comfyui-setting-item"},Mb={value:"default"},Ib={value:"custom"},Db={key:0,class:"weilin-comfyui-setting-item"},Rb={key:0,class:"weilin-comfyui-skin-preview"},Ob=["src"],Nb={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Pb={value:"gradient"},Fb={value:"transparent"},Bb={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Ub={style:{display:"flex",gap:"10px","align-items":"center"}},Vb={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Wb={key:4},zb={class:"weilin-comfyui-floating-ball-settings"},Hb={class:"weilin-comfyui-setting-item"},jb={class:"weilin-comfyui-setting-item"},Gb={class:"weilin-comfyui-setting-item"},qb={class:"weilin-comfyui-setting-item"},Kb={class:"weilin-comfyui-setting-item"},Yb={class:"weilin-comfyui-setting-item"},Jb={class:"weilin-comfyui-setting-item"},Xb={key:5},Qb={class:"weilin-comfyui-openai-settings"},Zb={class:"weilin-comfyui-setting-item"},e4=["value"],t4={class:"weilin-comfyui-config-list"},n4={class:"weilin-comfyui-config-header"},o4={class:"weilin-comfyui-config-actions"},a4=["onClick"],l4=["onClick"],s4={key:0,class:"weilin-comfyui-config-form"},i4={class:"weilin-comfyui-form-group"},r4=["placeholder"],u4={class:"weilin-comfyui-form-group"},c4=["placeholder"],d4={class:"weilin-comfyui-form-group"},p4=["placeholder"],f4={class:"weilin-comfyui-form-actions"},g4=["onClick"],m4={key:1,class:"weilin-comfyui-config-details"},v4={key:0,class:"weilin-comfyui-config-form"},h4={class:"weilin-comfyui-form-group"},_4=["placeholder"],y4={class:"weilin-comfyui-form-group"},b4=["placeholder"],w4={class:"weilin-comfyui-form-group"},x4=["placeholder"],S4={class:"weilin-comfyui-form-actions"},T4={key:6},k4={class:"weilin-comfyui-sponsor-me-settings"},C4={key:7},E4={class:"weilin-comfyui-start-panel-settings"},xf=_t({__name:"setting_dialog",emits:["functionTogglesUpdated"],setup(e,{expose:t,emit:n}){const o=n,{t:a}=ht(),l=h(!1),i=h("translator"),r=h("baidu"),u=h(""),p=h(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),d=h(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),c=h(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),v=h(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),m=h(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||v.value),y=h(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),S=h(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),$=h(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),T=h(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),D=h(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),J=h(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),x=h(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),N=h(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),H=h(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),j=h(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),K=h(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),X=h(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),_e=h(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),le=h(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),P=h(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),Z=h(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),te=h(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),z=h(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),ne=h(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),oe=h(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false"),F=h(""),U=h(""),ue=h(""),ke=h(0),ie=h([]),ge=h(!1),de=h({api_key:"",base_url:"https://api.openai.com/v1",model:""}),ae=h(!1),G=h(-1),A=h(""),B=h(!1),V=h(!1),I=h(""),W=h(""),k=h(25),w=h(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),O=h(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),Q=Ve=>{i.value=Ve,Ve=="setting_auto_complete_limit"&&Rl()},pe=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",p.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",d.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),Y({type:"success",str:"message.saveSuccess"})},ye=()=>{localStorage.setItem("weilin_function_toggles_clearAll",P.value),localStorage.setItem("weilin_function_toggles_deleteButton",Z.value),localStorage.setItem("weilin_function_toggles_randomTag",te.value),localStorage.setItem("weilin_function_toggles_randomTagSettings",z.value),localStorage.setItem("weilin_function_toggles_translateTag",ne.value),localStorage.setItem("weilin_function_toggles_clearDisabled",oe.value),o("functionTogglesUpdated",{clearAll:P.value,deleteButton:Z.value,randomTag:te.value,randomTagSettings:z.value,translateTag:ne.value,clearDisabled:oe.value}),Y({type:"success",str:"message.saveSuccess"})},L=Ve=>{const Ce=Ve.target.files[0];if(Ce){const Ee=new FileReader;Ee.onload=Lt=>{$.value=Lt.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",Lt.target.result)},Ee.readAsDataURL(Ce)}},_=()=>{D.value="#6a11cb",J.value="#2575fc"},R=()=>{if(c.value<1||v.value<5||m.value<5){Y({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",y.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",c.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",v.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",S.value),localStorage.setItem("weilin_prompt_ui_bgType",T.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",D.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",J.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",x.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),Y({type:"success",str:"message.saveSuccess"})},q=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",N.value),localStorage.setItem("weilin_prompt_ui_period_conversion",H.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",j.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",K.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",X.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",_e.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",le.value),Y({type:"success",str:"message.saveSuccess"})},xe=()=>{js.getUserSetting().then(Ve=>{ie.value=Ve.data.openai_settings,ke.value=Ve.data.select_openai})},we=()=>{de.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},ae.value=!1,ge.value=!0},ee=Ve=>{Cl.deleteOpenAiSetting({index:Ve}).then(Ce=>{xe(),Y({type:"success",str:"message.deleteSuccess"})}).catch(Ce=>{Y({type:"warn",str:"message.networkError"})})},me=Ve=>{G.value===Ve?G.value=-1:(de.value={...ie.value[Ve]},G.value=Ve)},Re=Ve=>{Cl.updateOpenAiSetting({index:Ve,...de.value}).then(Ce=>{xe(),G.value=-1,Y({type:"success",str:"message.saveSuccess"})}).catch(Ce=>{Y({type:"warn",str:"message.networkError"})})},Pe=()=>{Cl.addOpenAiSetting({...de.value}).then(Ve=>{xe(),ge.value=!1,G.value=-1,Y({type:"success",str:"message.saveSuccess"})}).catch(Ve=>{Y({type:"warn",str:"message.networkError"})})},He=()=>{ge.value=!1,G.value=-1},Xe=()=>{Cl.setOpenAiSelect({index:ke.value}).then(Ve=>{Y({type:"success",str:"message.saveSuccess"})}).catch(Ve=>{Y({type:"warn",str:"message.networkError"})})},at=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},bt=()=>{js.startPanel().then(Ve=>{Y({type:"success",str:"message.startPanelSuccess"})}).catch(Ve=>{Y({type:"warn",str:"message.startPanelFailed"})})},Dt=()=>{yn.getTranslateSetting().then(Ve=>{localStorage.setItem("weilin_prompt_ui_translater_setting",Ve.data),A.value=Ve.data}).catch(Ve=>{Y({type:"warn",str:"message.getTranslaterFail"})})},zn=()=>{yn.applyTranslateSetting(A.value).then(Ve=>{Ve.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",A.value),Y({type:"success",str:"message.applyTranslaterSuccess"})):Y({type:"warn",str:"message.applyToTranslaterFail"})}).catch(Ve=>{Y({type:"warn",str:"message.applyTranslaterFail"})})},Wo=()=>{yn.getTranslateBuktSetting().then(Ve=>{F.value=Ve.data.translate_service,U.value=Ve.data.translate_source_lang,ue.value=Ve.data.translate_target_lang}).catch(Ve=>{Y({type:"warn",str:"message.getTranslaterFail"})})},Yt=()=>{yn.saveTranslateSetting(F.value,U.value,ue.value).then(Ve=>{Ve.info=="ok"?Y({type:"success",str:"message.saveSuccess"}):Y({type:"warn",str:"message.saveFailed"})}).catch(Ve=>{Y({type:"warn",str:"message.saveFailed"})})},Zt=()=>{yn.translaterInputText(I.value).then(Ve=>{W.value=Ve.text}).catch(Ve=>{Y({type:"warn",str:"message.translaterTestFail"})})},$n=h(null),Dl=()=>{B.value=!0,yn.installTranslatePackage().then(Ve=>{B.value=!1,V.value=!0,Y({type:"success",str:"message.tranlaterPackageInstallSuccess"})}).catch(Ve=>{B.value=!1,Y({type:"warn",str:"message.tranlaterPackageInstallFail"})})},Rl=async()=>{await Gr.getAutocompleteLimit().then(Ve=>{k.value=Ve.data}).catch(Ve=>{console.error(Ve),Y({type:"warn",str:"message.networkError"})})},Pt=async()=>{await Gr.updateAutocompleteLimit(k.value).then(Ve=>{Y({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",w.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",O.value)}).catch(Ve=>{console.error(Ve),Y({type:"warn",str:"message.networkError"})})};return mt(()=>{Wo(),Dt(),xe()}),In(()=>{$n.value&&clearInterval($n.value)}),t({open:()=>{i.value="translator",r.value="baidu",u.value="",p.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",d.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",c.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,v.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,y.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",N.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",H.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",j.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",K.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",X.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",_e.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",l.value=!0}}),(Ve,Ce)=>(b(),wt($a,{modelValue:l.value,"onUpdate:modelValue":Ce[48]||(Ce[48]=Ee=>l.value=Ee),title:f(a)("promptBox.settings.title")},{footer:it(()=>[s("button",{onClick:Ce[47]||(Ce[47]=Ee=>l.value=!1)},g(f(a)("promptBox.settings.close")),1)]),default:it(()=>[s("div",hy,[s("div",_y,[s("ul",null,[s("li",{class:Le({"weilin-comfyui-active":i.value==="translator"}),onClick:Ce[0]||(Ce[0]=Ee=>Q("translator"))},g(f(a)("promptBox.settings.translator")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_function_toggles"}),onClick:Ce[1]||(Ce[1]=Ee=>Q("setting_function_toggles"))},g(f(a)("promptBox.settings.setting_function_toggles")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_auto_complete_limit"}),onClick:Ce[2]||(Ce[2]=Ee=>Q("setting_auto_complete_limit"))},g(f(a)("promptBox.settings.setting_auto_complete_limit")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_floating_ball"}),onClick:Ce[3]||(Ce[3]=Ee=>Q("setting_floating_ball"))},g(f(a)("promptBox.settings.setting_floating_ball")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_prompt_box"}),onClick:Ce[4]||(Ce[4]=Ee=>Q("setting_prompt_box"))},g(f(a)("promptBox.settings.setting_prompt_box")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_openai_box"}),onClick:Ce[5]||(Ce[5]=Ee=>Q("setting_openai_box"))},g(f(a)("promptBox.settings.setting_openai_box")),3),s("li",{class:Le({"weilin-comfyui-active":i.value==="setting_sponsor_me"}),onClick:Ce[6]||(Ce[6]=Ee=>Q("setting_sponsor_me"))},g(f(a)("promptBox.settings.setting_sponsor_me")),3)])]),s("div",yy,[i.value==="translator"?(b(),C("div",by,[s("h3",null,g(f(a)("promptBox.settings.translator")),1),s("div",wy,[s("label",null,g(f(a)("promptBox.settings.selectTranslater")),1),ve(s("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":Ce[7]||(Ce[7]=Ee=>A.value=Ee),class:"weilin-comfyui-common-select"},Ce[49]||(Ce[49]=[s("option",{value:"other_ai_plate"},"AI",-1),s("option",{value:"openai"},"OpenAI API ",-1)]),512),[[Gt,A.value]]),s("button",{class:"weilin-comfyui-install-button",onClick:zn},g(f(a)("promptBox.settings.apply")),1)]),s("div",xy,[A.value=="other_ai_plate"?(b(),C("div",Sy,[Ue(vy)])):re("",!0),A.value=="network"?(b(),C("div",Ty,[s("div",ky,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),s("div",Cy,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"https://github.com/xnx3/translate",1),s("div",Ey,[s("label",null,g(f(a)("promptBox.settings.sourceLanguage")),1),ve(s("select",{"onUpdate:modelValue":Ce[8]||(Ce[8]=Ee=>p.value=Ee),class:"weilin-comfyui-common-select"},[s("option",$y,g(f(a)("promptBox.settings.auto_detect")),1),s("option",Ly,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",Ay,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,p.value]])]),s("div",My,[s("label",null,g(f(a)("promptBox.settings.targetLanguage")),1),ve(s("select",{"onUpdate:modelValue":Ce[9]||(Ce[9]=Ee=>d.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Iy,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",Dy,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,d.value]])]),s("button",{class:"weilin-comfyui-save-button",onClick:pe},g(f(a)("promptBox.settings.save")),1)])):re("",!0),A.value=="translater"?(b(),C("div",Ry,[s("div",Oy,g(f(a)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),s("div",Ny,g(f(a)("promptBox.settings.selectOptionPythonTranslaterInfo"))+"https://github.com/UlionTse/translators",1),s("div",Py,[s("div",Fy,g(f(a)("promptBox.settings.nowTranlaterPackageState"))+" "+g(V.value?f(a)("promptBox.settings.tranlaterPackageStateTrue"):f(a)("promptBox.settings.tranlaterPackageStateFlase")),1),B.value?(b(),C("div",By,g(f(a)("promptBox.settings.installTranslaterPackageInfo")),1)):re("",!0),V.value?re("",!0):(b(),C("div",Uy,[s("button",{disabled:B.value,class:"weilin-comfyui-install-button",onClick:Dl},g(B.value?f(a)("promptBox.settings.installed"):f(a)("promptBox.settings.install")),9,Vy)]))]),V.value?(b(),C("div",Wy,[s("div",zy,g(f(a)("promptBox.settings.translaterSetting")),1),s("div",Hy,[s("label",null,g(f(a)("promptBox.settings.chooseTranslaterSetting")),1),ve(s("select",{"onUpdate:modelValue":Ce[10]||(Ce[10]=Ee=>F.value=Ee)},[(b(!0),C(Ie,null,ze(f(Y0),(Ee,Lt)=>(b(),C("option",{index:Lt,key:"tran-item_"+Lt,value:Ee},g(f(a)("translaterService."+Ee)),9,jy))),128))],512),[[Gt,F.value]])]),s("div",Gy,[s("div",qy,[s("label",null,g(f(a)("promptBox.settings.translaterLangSourceSetting")),1),ve(s("select",{"onUpdate:modelValue":Ce[11]||(Ce[11]=Ee=>U.value=Ee)},[(b(!0),C(Ie,null,ze(f(Gs),(Ee,Lt)=>(b(),C("option",{index:Lt,key:"lan-item_"+Lt,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,Ky))),128))],512),[[Gt,U.value]])]),s("div",Yy,[s("label",null,g(f(a)("promptBox.settings.translaterLangTargeSetting")),1),ve(s("select",{"onUpdate:modelValue":Ce[12]||(Ce[12]=Ee=>ue.value=Ee)},[(b(!0),C(Ie,null,ze(f(Gs),(Ee,Lt)=>(b(),C("option",{index:Lt,key:"lan-mu-item_"+Lt,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,Jy))),128))],512),[[Gt,ue.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:Yt},g(f(a)("promptBox.settings.saveTranslaterSetting")),1)])):re("",!0),V.value?(b(),C("div",Xy,[s("div",Qy,g(f(a)("promptBox.settings.testTranslaterTitle")),1),s("div",Zy,[s("label",null,g(f(a)("promptBox.settings.inputTestTranslater")),1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[13]||(Ce[13]=Ee=>I.value=Ee),placeholder:f(a)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,eb),[[Ae,I.value]])]),s("div",tb,[s("label",null,g(f(a)("promptBox.settings.outPutTestTranslater")),1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[14]||(Ce[14]=Ee=>W.value=Ee),readonly:"",placeholder:f(a)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,nb),[[Ae,W.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:Zt},g(f(a)("promptBox.settings.testingTranslater")),1)])):re("",!0)])):re("",!0)])])):re("",!0),i.value==="setting_auto_complete_limit"?(b(),C("div",ob,[s("h3",null,g(f(a)("promptBox.settings.setting_auto_complete_limit")),1),s("div",ab,[s("div",lb,[s("label",null,g(f(a)("promptBox.settings.show_auto_limit")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[15]||(Ce[15]=Ee=>k.value=Ee),min:"1",max:"99999999",style:{width:"100px"},placeholder:f(a)("promptBox.settings.showAutoLimitPlaceholder")},null,8,sb),[[Ae,k.value,void 0,{number:!0}]])]),s("div",ib,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteWidth")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[16]||(Ce[16]=Ee=>w.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,rb),[[Ae,w.value,void 0,{number:!0}]])]),s("div",ub,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteHeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[17]||(Ce[17]=Ee=>O.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,cb),[[Ae,O.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",onClick:Pt},g(f(a)("promptBox.settings.save")),1)])])):re("",!0),i.value==="setting_function_toggles"?(b(),C("div",db,[s("h3",null,g(f(a)("promptBox.settings.setting_function_toggles_full")),1),s("div",pb,[s("div",fb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[18]||(Ce[18]=Ee=>P.value=Ee)},null,512),[[$t,P.value]]),je(" "+g(f(a)("promptBox.settings.enableClearAll")),1)])]),s("div",gb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[19]||(Ce[19]=Ee=>Z.value=Ee)},null,512),[[$t,Z.value]]),je(" "+g(f(a)("promptBox.settings.enableDeleteButton")),1)])]),s("div",mb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[20]||(Ce[20]=Ee=>te.value=Ee)},null,512),[[$t,te.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTag")),1)])]),s("div",vb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[21]||(Ce[21]=Ee=>z.value=Ee)},null,512),[[$t,z.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTagSettings")),1)])]),s("div",hb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[22]||(Ce[22]=Ee=>ne.value=Ee)},null,512),[[$t,ne.value]]),je(" "+g(f(a)("promptBox.settings.enableTranslateTag")),1)])]),s("div",_b,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[23]||(Ce[23]=Ee=>oe.value=Ee)},null,512),[[$t,oe.value]]),je(" "+g(f(a)("promptBox.settings.enableClearDisabled")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:ye},g(f(a)("promptBox.settings.save")),1)])])):re("",!0),i.value==="setting_floating_ball"?(b(),C("div",yb,[s("h3",null,g(f(a)("promptBox.settings.setting_floating_ball")),1),s("div",bb,[s("div",wb,[s("div",xb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[24]||(Ce[24]=Ee=>y.value=Ee)},null,512),[[$t,y.value]]),je(" "+g(f(a)("promptBox.settings.enableFloatingBall")),1)])]),s("div",Sb,[s("label",null,g(f(a)("promptBox.settings.floatingBallCount")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[25]||(Ce[25]=Ee=>c.value=Ee),min:"1",max:"100",placeholder:f(a)("promptBox.settings.floatingBallCountPlaceholder")},null,8,Tb),[[Ae,c.value,void 0,{number:!0}]])]),s("div",kb,[s("label",null,g(f(a)("promptBox.settings.floatingBallSize")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[26]||(Ce[26]=Ee=>v.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallSizePlaceholder")},null,8,Cb),[[Ae,v.value,void 0,{number:!0}]])]),s("div",Eb,[s("label",null,g(f(a)("promptBox.settings.floatingBallHeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[27]||(Ce[27]=Ee=>m.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,$b),[[Ae,m.value,void 0,{number:!0}]])])]),s("div",Lb,[s("div",Ab,[s("label",null,g(f(a)("promptBox.settings.skinSetting")),1),ve(s("select",{"onUpdate:modelValue":Ce[28]||(Ce[28]=Ee=>S.value=Ee)},[s("option",Mb,g(f(a)("promptBox.settings.defaultSkin")),1),s("option",Ib,g(f(a)("promptBox.settings.customSkin")),1)],512),[[Gt,S.value]])]),S.value==="custom"?(b(),C("div",Db,[s("label",null,g(f(a)("promptBox.settings.uploadSkin")),1),s("input",{type:"file",accept:"image/*",onChange:L,ref:"skinUploader"},null,544),$.value?(b(),C("div",Rb,[s("img",{src:$.value,alt:"Custom Skin Preview"},null,8,Ob)])):re("",!0)])):re("",!0)]),s("div",Nb,[s("label",null,g(f(a)("promptBox.settings.bgSetting")),1),ve(s("select",{"onUpdate:modelValue":Ce[29]||(Ce[29]=Ee=>T.value=Ee)},[s("option",Pb,g(f(a)("promptBox.settings.gradientBg")),1),s("option",Fb,g(f(a)("promptBox.settings.transparentBg")),1)],512),[[Gt,T.value]])]),T.value==="gradient"?(b(),C("div",Bb,[s("label",null,g(f(a)("promptBox.settings.gradientColor")),1),s("div",Ub,[ve(s("input",{type:"color","onUpdate:modelValue":Ce[30]||(Ce[30]=Ee=>D.value=Ee)},null,512),[[Ae,D.value]]),ve(s("input",{type:"color","onUpdate:modelValue":Ce[31]||(Ce[31]=Ee=>J.value=Ee)},null,512),[[Ae,J.value]]),s("button",{onClick:_,style:{"margin-left":"10px",width:"200px"}},g(f(a)("promptBox.settings.resetToDefault")),1)])])):re("",!0),s("div",Vb,[s("label",null,g(f(a)("promptBox.settings.borderRadius")),1),ve(s("input",{type:"number","onUpdate:modelValue":Ce[32]||(Ce[32]=Ee=>x.value=Ee),min:"0",max:"50"},null,512),[[Ae,x.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:R},g(f(a)("promptBox.settings.save")),1)])])):re("",!0),i.value==="setting_prompt_box"?(b(),C("div",Wb,[s("h3",null,g(f(a)("promptBox.settings.setting_prompt_box")),1),s("div",zb,[s("div",Hb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[33]||(Ce[33]=Ee=>N.value=Ee)},null,512),[[$t,N.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaConversion")),1)])]),s("div",jb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[34]||(Ce[34]=Ee=>H.value=Ee)},null,512),[[$t,H.value]]),je(" "+g(f(a)("promptBox.settings.enablePeriodConversion")),1)])]),s("div",Gb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[35]||(Ce[35]=Ee=>j.value=Ee)},null,512),[[$t,j.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketConversion")),1)])]),s("div",qb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[36]||(Ce[36]=Ee=>K.value=Ee)},null,512),[[$t,K.value]]),je(" "+g(f(a)("promptBox.settings.enableAngleBracketConversion")),1)])]),s("div",Kb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[37]||(Ce[37]=Ee=>X.value=Ee)},null,512),[[$t,X.value]]),je(" "+g(f(a)("promptBox.settings.enableUnderscoreToBracket")),1)])]),s("div",Yb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[38]||(Ce[38]=Ee=>_e.value=Ee)},null,512),[[$t,_e.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),s("div",Jb,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":Ce[39]||(Ce[39]=Ee=>le.value=Ee)},null,512),[[$t,le.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketEscape")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:q},g(f(a)("promptBox.settings.save")),1)])])):re("",!0),i.value==="setting_openai_box"?(b(),C("div",Xb,[s("h3",null,g(f(a)("promptBox.settings.openaiSettings")),1),s("div",Qb,[s("div",Zb,[s("label",null,g(f(a)("promptBox.settings.selectedOpenaiConfig")),1),ve(s("select",{"onUpdate:modelValue":Ce[40]||(Ce[40]=Ee=>ke.value=Ee),onChange:Xe},[(b(!0),C(Ie,null,ze(ie.value,(Ee,Lt)=>(b(),C("option",{key:Lt,value:Lt},g(Ee.model)+" ("+g(Ee.base_url)+") ",9,e4))),128))],544),[[Gt,ke.value]])]),s("div",t4,[(b(!0),C(Ie,null,ze(ie.value,(Ee,Lt)=>(b(),C("div",{key:Lt,class:"weilin-comfyui-config-item"},[s("div",n4,[s("span",null,g(Ee.model),1),s("div",o4,[s("button",{onClick:xn=>me(Lt)},g(G.value===Lt?f(a)("promptBox.settings.cancel"):f(a)("promptBox.settings.edit")),9,a4),s("button",{onClick:xn=>ee(Lt)},g(f(a)("promptBox.settings.delete")),9,l4)])]),G.value===Lt?(b(),C("div",s4,[s("div",i4,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[41]||(Ce[41]=xn=>de.value.api_key=xn),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,r4),[[Ae,de.value.api_key]])]),s("div",u4,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[42]||(Ce[42]=xn=>de.value.base_url=xn),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,c4),[[Ae,de.value.base_url]])]),s("div",d4,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[43]||(Ce[43]=xn=>de.value.model=xn),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,p4),[[Ae,de.value.model]])]),s("div",f4,[s("button",{onClick:xn=>Re(Lt)},g(f(a)("promptBox.settings.save")),9,g4)])])):(b(),C("div",m4,[s("div",null,g(f(a)("promptBox.settings.openai_api_key"))+": "+g(Ee.api_key?"******":f(a)("promptBox.settings.not_set")),1),s("div",null,g(f(a)("promptBox.settings.openai_base_url"))+": "+g(Ee.base_url),1)]))]))),128))]),ge.value?(b(),C("div",v4,[s("div",h4,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[44]||(Ce[44]=Ee=>de.value.api_key=Ee),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,_4),[[Ae,de.value.api_key]])]),s("div",y4,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[45]||(Ce[45]=Ee=>de.value.base_url=Ee),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,b4),[[Ae,de.value.base_url]])]),s("div",w4,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),ve(s("input",{type:"text","onUpdate:modelValue":Ce[46]||(Ce[46]=Ee=>de.value.model=Ee),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,x4),[[Ae,de.value.model]])]),s("div",S4,[s("button",{onClick:He},g(f(a)("promptBox.settings.cancel")),1),s("button",{onClick:Pe},g(f(a)("promptBox.settings.save")),1)])])):re("",!0),ge.value?re("",!0):(b(),C("button",{key:1,class:"weilin-comfyui-add-button",onClick:we},g(f(a)("promptBox.settings.addNewConfig")),1))])])):re("",!0),i.value==="setting_sponsor_me"?(b(),C("div",T4,[s("h3",null,g(f(a)("promptBox.settings.setting_sponsor_me")),1),s("div",k4,[s("h1",null,g(f(a)("promptBox.settings.sponsorMeTip")),1),s("h2",null,g(f(a)("promptBox.settings.sponsorMeLink")),1),s("button",{class:"weilin-comfyui-sponsor-me-button",onClick:at},g(f(a)("promptBox.settings.sponsorMe")),1)])])):re("",!0),i.value==="setting_start_panel"?(b(),C("div",C4,[s("h3",null,g(f(a)("promptBox.settings.setting_start_panel")),1),s("div",E4,[s("h4",null,g(f(a)("promptBox.settings.startPanelTip")),1),s("button",{class:"weilin-comfyui-start-panel-button",onClick:bt},g(f(a)("promptBox.settings.startPanel")),1)])])):re("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-3eeafc70"]]),$4=["title"],L4={class:"switch-icon"},A4={key:0,class:"moon",viewBox:"0 0 24 24"},M4={key:1,class:"sun",viewBox:"0 0 24 24"},I4="weilin_tools_",D4=_t({__name:"ThemeSwitch",setup(e){const{t}=ht(),n=`${I4}theme`,o=h(localStorage.getItem(n)==="dark"),a=()=>{o.value=!o.value;const l=document.getElementById("weilin_comfyui_tools_prompt_ui_div");l&&l.setAttribute("data-theme",o.value?"dark":"light"),localStorage.setItem(n,o.value?"dark":"light")};return(l,i)=>(b(),C("button",{class:"theme-switch",onClick:a,title:f(t)("theme.toggle")},[s("div",L4,[o.value?(b(),C("svg",A4,i[0]||(i[0]=[s("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)]))):(b(),C("svg",M4,i[1]||(i[1]=[s("circle",{cx:"12",cy:"12",r:"5"},null,-1),s("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])))]),ol(l.$slots,"default",{isDark:o.value},void 0,!0)],8,$4))}},[["__scopeId","data-v-43d9cf91"]]),bn="weilin_tools_",It={getTagsList:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await Me({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await Me({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await Me({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await Me({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await Me({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await Me({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const qs="0123456789abcdef";class sa{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new sa(t)}static fromFieldsV7(t,n,o,a){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(o)||!Number.isInteger(a)||t<0||n<0||o<0||a<0||t>0xffffffffffff||n>4095||o>1073741823||a>4294967295)throw new RangeError("invalid field value");const l=new Uint8Array(16);return l[0]=t/2**40,l[1]=t/2**32,l[2]=t/2**24,l[3]=t/2**16,l[4]=t/2**8,l[5]=t,l[6]=112|n>>>8,l[7]=n,l[8]=128|o>>>24,l[9]=o>>>16,l[10]=o>>>8,l[11]=o,l[12]=a>>>24,l[13]=a>>>16,l[14]=a>>>8,l[15]=a,new sa(l)}static parse(t){var n,o,a,l;let i;switch(t.length){case 32:i=(n=/^[0-9a-f]{32}$/i.exec(t))===null||n===void 0?void 0:n[0];break;case 36:i=(o=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||o===void 0?void 0:o.slice(1,6).join("");break;case 38:i=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:i=(l=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||l===void 0?void 0:l.slice(1,6).join("");break}if(i){const r=new Uint8Array(16);for(let u=0;u<16;u+=4){const p=parseInt(i.substring(2*u,2*u+8),16);r[u+0]=p>>>24,r[u+1]=p>>>16,r[u+2]=p>>>8,r[u+3]=p}return new sa(r)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let n=0;n<this.bytes.length;n++)t+=qs.charAt(this.bytes[n]>>>4),t+=qs.charAt(this.bytes[n]&15),(n===3||n===5||n===7||n===9)&&(t+="-");return t}toHex(){let t="";for(let n=0;n<this.bytes.length;n++)t+=qs.charAt(this.bytes[n]>>>4),t+=qs.charAt(this.bytes[n]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(n=>n===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(n=>n===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new sa(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let n=0;n<16;n++){const o=this.bytes[n]-t.bytes[n];if(o!==0)return Math.sign(o)}return 0}}class R4{constructor(t){this.timestamp=0,this.counter=0,this.random=t??O4()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,n){let o=this.generateOrAbortCore(t,n);return o===void 0&&(this.timestamp=0,o=this.generateOrAbortCore(t,n)),o}generateOrAbortCore(t,n){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(n<0||n>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+n>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return sa.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,sa.ofInner(t)}}const O4=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new N4;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class N4{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Sf;const Fo=()=>P4().toString(),P4=()=>(Sf||(Sf=new R4)).generate(),F4={class:"tag-manager"},B4={class:"category-tabs"},U4={class:"tabs-wrapper primary-tabs"},V4={class:"tabs-scroll"},W4=["onClick"],z4={class:"tab-text"},H4={key:0,class:"tabs-wrapper group-tabs"},j4={class:"tabs-scroll"},G4=["onClick"],q4={class:"tab-text"},Tf=_t({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=n,l=h([]),i=h(null),r=h(null),u=h([]),p=h(!1),d=h(!1),c=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},v=async()=>{try{const D=await It.getTagsGroupList();if(l.value=D.info,r.value){const J=l.value.flatMap(x=>x.groups).find(x=>x.p_uuid===r.value.p_uuid);J?r.value=J:r.value=null}if(i.value){const J=l.value.find(x=>x.p_uuid===i.value.p_uuid);J?i.value=J:i.value=null}}catch(D){console.error(":",D)}},m=D=>{if(!D||D==="transparent")return"var(--primary-text)";let J,x,N,H=1;if(D.startsWith("rgba")){const K=D.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);K&&([,J,x,N,H]=K.map(Number))}else if(D.startsWith("rgb")){const K=D.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);K&&([,J,x,N]=K.map(Number))}return H<.5?"var(--primary-text)":(J*299+x*587+N*114)/1e3>128?"#000000":"#ffffff"};mt(()=>{window.addEventListener("message",$)}),Eo(()=>{window.removeEventListener("message",$)});const y=D=>{i.value=D,r.value=null,p.value=!1,u.value=[]},S=D=>{r.value=D,p.value=!1,u.value=[]},$=D=>{D.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&v()},T=()=>{if(r.value==null||i.value==null){Y({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{group:i.value,sub:r.value}),d.value=!1};return t({open:()=>{c(),d.value=!0}}),(D,J)=>(b(),wt($a,{modelValue:d.value,"onUpdate:modelValue":J[1]||(J[1]=x=>d.value=x),title:f(o)("importDialog.selectTitle")},{footer:it(()=>[s("button",{onClick:J[0]||(J[0]=x=>d.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:T},g(f(o)("importDialog.sureSelect")),1)]),default:it(()=>[s("div",F4,[s("div",B4,[s("div",U4,[s("div",V4,[(b(!0),C(Ie,null,ze(l.value,(x,N)=>{var H,j,K;return b(),C("div",{key:"Tabss-"+N,class:Le(["tab-item",{active:((H=i.value)==null?void 0:H.name)===x.name}]),style:ct({backgroundColor:((j=i.value)==null?void 0:j.name)===x.name?"var(--primary-color)":x.color,color:((K=i.value)==null?void 0:K.name)===x.name?"#ffffff":m(x.color)}),onClick:X=>y(x)},[s("span",z4,g(x.name),1)],14,W4)}),128))])]),i.value?(b(),C("div",H4,[s("div",j4,[(b(!0),C(Ie,null,ze(i.value.groups,(x,N)=>{var H,j,K;return b(),C("div",{key:"TabsSw-"+N,class:Le(["tab-item",{active:((H=r.value)==null?void 0:H.name)===x.name}]),style:ct({backgroundColor:((j=r.value)==null?void 0:j.name)===x.name?"var(--primary-color)":x.color,color:((K=r.value)==null?void 0:K.name)===x.name?"#ffffff":m(x.color)}),onClick:X=>S(x)},[s("span",q4,g(x.name),1)],14,G4)}),128))])])):re("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-f6c0f177"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function kf(e){return typeof e>"u"||e===null}function K4(e){return typeof e=="object"&&e!==null}function Y4(e){return Array.isArray(e)?e:kf(e)?[]:[e]}function J4(e,t){var n,o,a,l;if(t)for(l=Object.keys(t),n=0,o=l.length;n<o;n+=1)a=l[n],e[a]=t[a];return e}function X4(e,t){var n="",o;for(o=0;o<t;o+=1)n+=e;return n}function Q4(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Z4=kf,e3=K4,t3=Y4,n3=X4,o3=Q4,a3=J4,Kt={isNothing:Z4,isObject:e3,toArray:t3,repeat:n3,isNegativeZero:o3,extend:a3};function Cf(e,t){var n="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),o+" "+n):o}function El(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Cf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}El.prototype=Object.create(Error.prototype),El.prototype.constructor=El,El.prototype.toString=function(t){return this.name+": "+Cf(this,t)};var mn=El;function Kr(e,t,n,o,a){var l="",i="",r=Math.floor(a/2)-1;return o-t>r&&(l=" ... ",t=o-r+l.length),n-o>r&&(i=" ...",n=o+r-i.length),{str:l+e.slice(t,n).replace(/\t/g,"")+i,pos:o-t+l.length}}function Yr(e,t){return Kt.repeat(" ",t-e.length)+e}function l3(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,o=[0],a=[],l,i=-1;l=n.exec(e.buffer);)a.push(l.index),o.push(l.index+l[0].length),e.position<=l.index&&i<0&&(i=o.length-2);i<0&&(i=o.length-1);var r="",u,p,d=Math.min(e.line+t.linesAfter,a.length).toString().length,c=t.maxLength-(t.indent+d+3);for(u=1;u<=t.linesBefore&&!(i-u<0);u++)p=Kr(e.buffer,o[i-u],a[i-u],e.position-(o[i]-o[i-u]),c),r=Kt.repeat(" ",t.indent)+Yr((e.line-u+1).toString(),d)+" | "+p.str+`
`+r;for(p=Kr(e.buffer,o[i],a[i],e.position,c),r+=Kt.repeat(" ",t.indent)+Yr((e.line+1).toString(),d)+" | "+p.str+`
`,r+=Kt.repeat("-",t.indent+d+3+p.pos)+`^
`,u=1;u<=t.linesAfter&&!(i+u>=a.length);u++)p=Kr(e.buffer,o[i+u],a[i+u],e.position-(o[i]-o[i+u]),c),r+=Kt.repeat(" ",t.indent)+Yr((e.line+u+1).toString(),d)+" | "+p.str+`
`;return r.replace(/\n$/,"")}var s3=l3,i3=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],r3=["scalar","sequence","mapping"];function u3(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(o){t[String(o)]=n})}),t}function c3(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(i3.indexOf(n)===-1)throw new mn('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=u3(t.styleAliases||null),r3.indexOf(this.kind)===-1)throw new mn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var tn=c3;function Ef(e,t){var n=[];return e[t].forEach(function(o){var a=n.length;n.forEach(function(l,i){l.tag===o.tag&&l.kind===o.kind&&l.multi===o.multi&&(a=i)}),n[a]=o}),n}function d3(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function o(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(o);return e}function Jr(e){return this.extend(e)}Jr.prototype.extend=function(t){var n=[],o=[];if(t instanceof tn)o.push(t);else if(Array.isArray(t))o=o.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(o=o.concat(t.explicit));else throw new mn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof tn))throw new mn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new mn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new mn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(l){if(!(l instanceof tn))throw new mn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Jr.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(o),a.compiledImplicit=Ef(a,"implicit"),a.compiledExplicit=Ef(a,"explicit"),a.compiledTypeMap=d3(a.compiledImplicit,a.compiledExplicit),a};var $f=Jr,Lf=new tn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Af=new tn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Mf=new tn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),If=new $f({explicit:[Lf,Af,Mf]});function p3(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function f3(){return null}function g3(e){return e===null}var Df=new tn("tag:yaml.org,2002:null",{kind:"scalar",resolve:p3,construct:f3,predicate:g3,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function m3(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function v3(e){return e==="true"||e==="True"||e==="TRUE"}function h3(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Rf=new tn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:m3,construct:v3,predicate:h3,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function _3(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function y3(e){return 48<=e&&e<=55}function b3(e){return 48<=e&&e<=57}function w3(e){if(e===null)return!1;var t=e.length,n=0,o=!1,a;if(!t)return!1;if(a=e[n],(a==="-"||a==="+")&&(a=e[++n]),a==="0"){if(n+1===t)return!0;if(a=e[++n],a==="b"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;o=!0}return o&&a!=="_"}if(a==="x"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!_3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}if(a==="o"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!y3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}}if(a==="_")return!1;for(;n<t;n++)if(a=e[n],a!=="_"){if(!b3(e.charCodeAt(n)))return!1;o=!0}return!(!o||a==="_")}function x3(e){var t=e,n=1,o;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),o=t[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),t=t.slice(1),o=t[0]),t==="0")return 0;if(o==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function S3(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Kt.isNegativeZero(e)}var Of=new tn("tag:yaml.org,2002:int",{kind:"scalar",resolve:w3,construct:x3,predicate:S3,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),T3=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function k3(e){return!(e===null||!T3.test(e)||e[e.length-1]==="_")}function C3(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var E3=/^[-+]?[0-9]+e/;function $3(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kt.isNegativeZero(e))return"-0.0";return n=e.toString(10),E3.test(n)?n.replace("e",".e"):n}function L3(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kt.isNegativeZero(e))}var Nf=new tn("tag:yaml.org,2002:float",{kind:"scalar",resolve:k3,construct:C3,predicate:L3,represent:$3,defaultStyle:"lowercase"}),Pf=If.extend({implicit:[Df,Rf,Of,Nf]}),Ff=Pf,Bf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Uf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function A3(e){return e===null?!1:Bf.exec(e)!==null||Uf.exec(e)!==null}function M3(e){var t,n,o,a,l,i,r,u=0,p=null,d,c,v;if(t=Bf.exec(e),t===null&&(t=Uf.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],o=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,o,a));if(l=+t[4],i=+t[5],r=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(d=+t[10],c=+(t[11]||0),p=(d*60+c)*6e4,t[9]==="-"&&(p=-p)),v=new Date(Date.UTC(n,o,a,l,i,r,u)),p&&v.setTime(v.getTime()-p),v}function I3(e){return e.toISOString()}var Vf=new tn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:A3,construct:M3,instanceOf:Date,represent:I3});function D3(e){return e==="<<"||e===null}var Wf=new tn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:D3}),Xr=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function R3(e){if(e===null)return!1;var t,n,o=0,a=e.length,l=Xr;for(n=0;n<a;n++)if(t=l.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;o+=6}return o%8===0}function O3(e){var t,n,o=e.replace(/[\r\n=]/g,""),a=o.length,l=Xr,i=0,r=[];for(t=0;t<a;t++)t%4===0&&t&&(r.push(i>>16&255),r.push(i>>8&255),r.push(i&255)),i=i<<6|l.indexOf(o.charAt(t));return n=a%4*6,n===0?(r.push(i>>16&255),r.push(i>>8&255),r.push(i&255)):n===18?(r.push(i>>10&255),r.push(i>>2&255)):n===12&&r.push(i>>4&255),new Uint8Array(r)}function N3(e){var t="",n=0,o,a,l=e.length,i=Xr;for(o=0;o<l;o++)o%3===0&&o&&(t+=i[n>>18&63],t+=i[n>>12&63],t+=i[n>>6&63],t+=i[n&63]),n=(n<<8)+e[o];return a=l%3,a===0?(t+=i[n>>18&63],t+=i[n>>12&63],t+=i[n>>6&63],t+=i[n&63]):a===2?(t+=i[n>>10&63],t+=i[n>>4&63],t+=i[n<<2&63],t+=i[64]):a===1&&(t+=i[n>>2&63],t+=i[n<<4&63],t+=i[64],t+=i[64]),t}function P3(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var zf=new tn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:R3,construct:O3,predicate:P3,represent:N3}),F3=Object.prototype.hasOwnProperty,B3=Object.prototype.toString;function U3(e){if(e===null)return!0;var t=[],n,o,a,l,i,r=e;for(n=0,o=r.length;n<o;n+=1){if(a=r[n],i=!1,B3.call(a)!=="[object Object]")return!1;for(l in a)if(F3.call(a,l))if(!i)i=!0;else return!1;if(!i)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function V3(e){return e!==null?e:[]}var Hf=new tn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:U3,construct:V3}),W3=Object.prototype.toString;function z3(e){if(e===null)return!0;var t,n,o,a,l,i=e;for(l=new Array(i.length),t=0,n=i.length;t<n;t+=1){if(o=i[t],W3.call(o)!=="[object Object]"||(a=Object.keys(o),a.length!==1))return!1;l[t]=[a[0],o[a[0]]]}return!0}function H3(e){if(e===null)return[];var t,n,o,a,l,i=e;for(l=new Array(i.length),t=0,n=i.length;t<n;t+=1)o=i[t],a=Object.keys(o),l[t]=[a[0],o[a[0]]];return l}var jf=new tn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:z3,construct:H3}),j3=Object.prototype.hasOwnProperty;function G3(e){if(e===null)return!0;var t,n=e;for(t in n)if(j3.call(n,t)&&n[t]!==null)return!1;return!0}function q3(e){return e!==null?e:{}}var Gf=new tn("tag:yaml.org,2002:set",{kind:"mapping",resolve:G3,construct:q3}),Qr=Ff.extend({implicit:[Vf,Wf],explicit:[zf,Hf,jf,Gf]}),Bo=Object.prototype.hasOwnProperty,Ks=1,qf=2,Kf=3,Ys=4,Zr=1,K3=2,Yf=3,Y3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,J3=/[\x85\u2028\u2029]/,X3=/[,\[\]\{\}]/,Jf=/^(?:!|!!|![a-z\-]+!)$/i,Xf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Qf(e){return Object.prototype.toString.call(e)}function eo(e){return e===10||e===13}function ia(e){return e===9||e===32}function wn(e){return e===9||e===32||e===10||e===13}function La(e){return e===44||e===91||e===93||e===123||e===125}function Q3(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Z3(e){return e===120?2:e===117?4:e===85?8:0}function ew(e){return 48<=e&&e<=57?e-48:-1}function Zf(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function tw(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var eg=new Array(256),tg=new Array(256),Aa=0;Aa<256;Aa++)eg[Aa]=Zf(Aa)?1:0,tg[Aa]=Zf(Aa);function nw(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Qr,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ng(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=s3(n),new mn(t,n)}function Fe(e,t){throw ng(e,t)}function Js(e,t){e.onWarning&&e.onWarning.call(null,ng(e,t))}var og={YAML:function(t,n,o){var a,l,i;t.version!==null&&Fe(t,"duplication of %YAML directive"),o.length!==1&&Fe(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(o[0]),a===null&&Fe(t,"ill-formed argument of the YAML directive"),l=parseInt(a[1],10),i=parseInt(a[2],10),l!==1&&Fe(t,"unacceptable YAML version of the document"),t.version=o[0],t.checkLineBreaks=i<2,i!==1&&i!==2&&Js(t,"unsupported YAML version of the document")},TAG:function(t,n,o){var a,l;o.length!==2&&Fe(t,"TAG directive accepts exactly two arguments"),a=o[0],l=o[1],Jf.test(a)||Fe(t,"ill-formed tag handle (first argument) of the TAG directive"),Bo.call(t.tagMap,a)&&Fe(t,'there is a previously declared suffix for "'+a+'" tag handle'),Xf.test(l)||Fe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{Fe(t,"tag prefix is malformed: "+l)}t.tagMap[a]=l}};function Uo(e,t,n,o){var a,l,i,r;if(t<n){if(r=e.input.slice(t,n),o)for(a=0,l=r.length;a<l;a+=1)i=r.charCodeAt(a),i===9||32<=i&&i<=1114111||Fe(e,"expected valid JSON character");else Y3.test(r)&&Fe(e,"the stream contains non-printable characters");e.result+=r}}function ag(e,t,n,o){var a,l,i,r;for(Kt.isObject(n)||Fe(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n),i=0,r=a.length;i<r;i+=1)l=a[i],Bo.call(t,l)||(t[l]=n[l],o[l]=!0)}function Ma(e,t,n,o,a,l,i,r,u){var p,d;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),p=0,d=a.length;p<d;p+=1)Array.isArray(a[p])&&Fe(e,"nested arrays are not supported inside keys"),typeof a=="object"&&Qf(a[p])==="[object Object]"&&(a[p]="[object Object]");if(typeof a=="object"&&Qf(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(p=0,d=l.length;p<d;p+=1)ag(e,t,l[p],n);else ag(e,t,l,n);else!e.json&&!Bo.call(n,a)&&Bo.call(t,a)&&(e.line=i||e.line,e.lineStart=r||e.lineStart,e.position=u||e.position,Fe(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:l}):t[a]=l,delete n[a];return t}function eu(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Fe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Wt(e,t,n){for(var o=0,a=e.input.charCodeAt(e.position);a!==0;){for(;ia(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(eo(a))for(eu(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return n!==-1&&o!==0&&e.lineIndent<n&&Js(e,"deficient indentation"),o}function Xs(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||wn(n)))}function tu(e,t){t===1?e.result+=" ":t>1&&(e.result+=Kt.repeat(`
`,t-1))}function ow(e,t,n){var o,a,l,i,r,u,p,d,c=e.kind,v=e.result,m;if(m=e.input.charCodeAt(e.position),wn(m)||La(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(a=e.input.charCodeAt(e.position+1),wn(a)||n&&La(a)))return!1;for(e.kind="scalar",e.result="",l=i=e.position,r=!1;m!==0;){if(m===58){if(a=e.input.charCodeAt(e.position+1),wn(a)||n&&La(a))break}else if(m===35){if(o=e.input.charCodeAt(e.position-1),wn(o))break}else{if(e.position===e.lineStart&&Xs(e)||n&&La(m))break;if(eo(m))if(u=e.line,p=e.lineStart,d=e.lineIndent,Wt(e,!1,-1),e.lineIndent>=t){r=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=i,e.line=u,e.lineStart=p,e.lineIndent=d;break}}r&&(Uo(e,l,i,!1),tu(e,e.line-u),l=i=e.position,r=!1),ia(m)||(i=e.position+1),m=e.input.charCodeAt(++e.position)}return Uo(e,l,i,!1),e.result?!0:(e.kind=c,e.result=v,!1)}function aw(e,t){var n,o,a;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,o=a=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Uo(e,o,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)o=e.position,e.position++,a=e.position;else return!0;else eo(n)?(Uo(e,o,a,!0),tu(e,Wt(e,!1,t)),o=a=e.position):e.position===e.lineStart&&Xs(e)?Fe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Fe(e,"unexpected end of the stream within a single quoted scalar")}function lw(e,t){var n,o,a,l,i,r;if(r=e.input.charCodeAt(e.position),r!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(r=e.input.charCodeAt(e.position))!==0;){if(r===34)return Uo(e,n,e.position,!0),e.position++,!0;if(r===92){if(Uo(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),eo(r))Wt(e,!1,t);else if(r<256&&eg[r])e.result+=tg[r],e.position++;else if((i=Z3(r))>0){for(a=i,l=0;a>0;a--)r=e.input.charCodeAt(++e.position),(i=Q3(r))>=0?l=(l<<4)+i:Fe(e,"expected hexadecimal character");e.result+=tw(l),e.position++}else Fe(e,"unknown escape sequence");n=o=e.position}else eo(r)?(Uo(e,n,o,!0),tu(e,Wt(e,!1,t)),n=o=e.position):e.position===e.lineStart&&Xs(e)?Fe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}Fe(e,"unexpected end of the stream within a double quoted scalar")}function sw(e,t){var n=!0,o,a,l,i=e.tag,r,u=e.anchor,p,d,c,v,m,y=Object.create(null),S,$,T,D;if(D=e.input.charCodeAt(e.position),D===91)d=93,m=!1,r=[];else if(D===123)d=125,m=!0,r={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),D=e.input.charCodeAt(++e.position);D!==0;){if(Wt(e,!0,t),D=e.input.charCodeAt(e.position),D===d)return e.position++,e.tag=i,e.anchor=u,e.kind=m?"mapping":"sequence",e.result=r,!0;n?D===44&&Fe(e,"expected the node content, but found ','"):Fe(e,"missed comma between flow collection entries"),$=S=T=null,c=v=!1,D===63&&(p=e.input.charCodeAt(e.position+1),wn(p)&&(c=v=!0,e.position++,Wt(e,!0,t))),o=e.line,a=e.lineStart,l=e.position,Ia(e,t,Ks,!1,!0),$=e.tag,S=e.result,Wt(e,!0,t),D=e.input.charCodeAt(e.position),(v||e.line===o)&&D===58&&(c=!0,D=e.input.charCodeAt(++e.position),Wt(e,!0,t),Ia(e,t,Ks,!1,!0),T=e.result),m?Ma(e,r,y,$,S,T,o,a,l):c?r.push(Ma(e,null,y,$,S,T,o,a,l)):r.push(S),Wt(e,!0,t),D=e.input.charCodeAt(e.position),D===44?(n=!0,D=e.input.charCodeAt(++e.position)):n=!1}Fe(e,"unexpected end of the stream within a flow collection")}function iw(e,t){var n,o,a=Zr,l=!1,i=!1,r=t,u=0,p=!1,d,c;if(c=e.input.charCodeAt(e.position),c===124)o=!1;else if(c===62)o=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)Zr===a?a=c===43?Yf:K3:Fe(e,"repeat of a chomping mode identifier");else if((d=ew(c))>=0)d===0?Fe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?Fe(e,"repeat of an indentation width identifier"):(r=t+d-1,i=!0);else break;if(ia(c)){do c=e.input.charCodeAt(++e.position);while(ia(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!eo(c)&&c!==0)}for(;c!==0;){for(eu(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!i||e.lineIndent<r)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>r&&(r=e.lineIndent),eo(c)){u++;continue}if(e.lineIndent<r){a===Yf?e.result+=Kt.repeat(`
`,l?1+u:u):a===Zr&&l&&(e.result+=`
`);break}for(o?ia(c)?(p=!0,e.result+=Kt.repeat(`
`,l?1+u:u)):p?(p=!1,e.result+=Kt.repeat(`
`,u+1)):u===0?l&&(e.result+=" "):e.result+=Kt.repeat(`
`,u):e.result+=Kt.repeat(`
`,l?1+u:u),l=!0,i=!0,u=0,n=e.position;!eo(c)&&c!==0;)c=e.input.charCodeAt(++e.position);Uo(e,n,e.position,!1)}return!0}function lg(e,t){var n,o=e.tag,a=e.anchor,l=[],i,r=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),!(u!==45||(i=e.input.charCodeAt(e.position+1),!wn(i))));){if(r=!0,e.position++,Wt(e,!0,-1)&&e.lineIndent<=t){l.push(null),u=e.input.charCodeAt(e.position);continue}if(n=e.line,Ia(e,t,Kf,!1,!0),l.push(e.result),Wt(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&u!==0)Fe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return r?(e.tag=o,e.anchor=a,e.kind="sequence",e.result=l,!0):!1}function rw(e,t,n){var o,a,l,i,r,u,p=e.tag,d=e.anchor,c={},v=Object.create(null),m=null,y=null,S=null,$=!1,T=!1,D;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),D=e.input.charCodeAt(e.position);D!==0;){if(!$&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),l=e.line,(D===63||D===58)&&wn(o))D===63?($&&(Ma(e,c,v,m,y,null,i,r,u),m=y=S=null),T=!0,$=!0,a=!0):$?($=!1,a=!0):Fe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,D=o;else{if(i=e.line,r=e.lineStart,u=e.position,!Ia(e,n,qf,!1,!0))break;if(e.line===l){for(D=e.input.charCodeAt(e.position);ia(D);)D=e.input.charCodeAt(++e.position);if(D===58)D=e.input.charCodeAt(++e.position),wn(D)||Fe(e,"a whitespace character is expected after the key-value separator within a block mapping"),$&&(Ma(e,c,v,m,y,null,i,r,u),m=y=S=null),T=!0,$=!1,a=!1,m=e.tag,y=e.result;else if(T)Fe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=d,!0}else if(T)Fe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=d,!0}if((e.line===l||e.lineIndent>t)&&($&&(i=e.line,r=e.lineStart,u=e.position),Ia(e,t,Ys,!0,a)&&($?y=e.result:S=e.result),$||(Ma(e,c,v,m,y,S,i,r,u),m=y=S=null),Wt(e,!0,-1),D=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&D!==0)Fe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return $&&Ma(e,c,v,m,y,null,i,r,u),T&&(e.tag=p,e.anchor=d,e.kind="mapping",e.result=c),T}function uw(e){var t,n=!1,o=!1,a,l,i;if(i=e.input.charCodeAt(e.position),i!==33)return!1;if(e.tag!==null&&Fe(e,"duplication of a tag property"),i=e.input.charCodeAt(++e.position),i===60?(n=!0,i=e.input.charCodeAt(++e.position)):i===33?(o=!0,a="!!",i=e.input.charCodeAt(++e.position)):a="!",t=e.position,n){do i=e.input.charCodeAt(++e.position);while(i!==0&&i!==62);e.position<e.length?(l=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):Fe(e,"unexpected end of the stream within a verbatim tag")}else{for(;i!==0&&!wn(i);)i===33&&(o?Fe(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),Jf.test(a)||Fe(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),X3.test(l)&&Fe(e,"tag suffix cannot contain flow indicator characters")}l&&!Xf.test(l)&&Fe(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{Fe(e,"tag name is malformed: "+l)}return n?e.tag=l:Bo.call(e.tagMap,a)?e.tag=e.tagMap[a]+l:a==="!"?e.tag="!"+l:a==="!!"?e.tag="tag:yaml.org,2002:"+l:Fe(e,'undeclared tag handle "'+a+'"'),!0}function cw(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Fe(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!wn(n)&&!La(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function dw(e){var t,n,o;if(o=e.input.charCodeAt(e.position),o!==42)return!1;for(o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!wn(o)&&!La(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Bo.call(e.anchorMap,n)||Fe(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Wt(e,!0,-1),!0}function Ia(e,t,n,o,a){var l,i,r,u=1,p=!1,d=!1,c,v,m,y,S,$;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=i=r=Ys===n||Kf===n,o&&Wt(e,!0,-1)&&(p=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;uw(e)||cw(e);)Wt(e,!0,-1)?(p=!0,r=l,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):r=!1;if(r&&(r=p||a),(u===1||Ys===n)&&(Ks===n||qf===n?S=t:S=t+1,$=e.position-e.lineStart,u===1?r&&(lg(e,$)||rw(e,$,S))||sw(e,S)?d=!0:(i&&iw(e,S)||aw(e,S)||lw(e,S)?d=!0:dw(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&Fe(e,"alias node should not have any properties")):ow(e,S,Ks===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(d=r&&lg(e,$))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Fe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,v=e.implicitTypes.length;c<v;c+=1)if(y=e.implicitTypes[c],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Bo.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,m=e.typeMap.multi[e.kind||"fallback"],c=0,v=m.length;c<v;c+=1)if(e.tag.slice(0,m[c].tag.length)===m[c].tag){y=m[c];break}y||Fe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&Fe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Fe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function pw(e){var t=e.position,n,o,a,l=!1,i;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(i=e.input.charCodeAt(e.position))!==0&&(Wt(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||i!==37));){for(l=!0,i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!wn(i);)i=e.input.charCodeAt(++e.position);for(o=e.input.slice(n,e.position),a=[],o.length<1&&Fe(e,"directive name must not be less than one character in length");i!==0;){for(;ia(i);)i=e.input.charCodeAt(++e.position);if(i===35){do i=e.input.charCodeAt(++e.position);while(i!==0&&!eo(i));break}if(eo(i))break;for(n=e.position;i!==0&&!wn(i);)i=e.input.charCodeAt(++e.position);a.push(e.input.slice(n,e.position))}i!==0&&eu(e),Bo.call(og,o)?og[o](e,o,a):Js(e,'unknown document directive "'+o+'"')}if(Wt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Wt(e,!0,-1)):l&&Fe(e,"directives end mark is expected"),Ia(e,e.lineIndent-1,Ys,!1,!0),Wt(e,!0,-1),e.checkLineBreaks&&J3.test(e.input.slice(t,e.position))&&Js(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xs(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Wt(e,!0,-1));return}if(e.position<e.length-1)Fe(e,"end of the stream or a document separator is expected");else return}function sg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new nw(e,t),o=e.indexOf("\0");for(o!==-1&&(n.position=o,Fe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)pw(n);return n.documents}function fw(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var o=sg(e,n);if(typeof t!="function")return o;for(var a=0,l=o.length;a<l;a+=1)t(o[a])}function gw(e,t){var n=sg(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new mn("expected a single document in the stream, but found more")}}var mw=fw,vw=gw,ig={loadAll:mw,load:vw},rg=Object.prototype.toString,ug=Object.prototype.hasOwnProperty,nu=65279,hw=9,$l=10,_w=13,yw=32,bw=33,ww=34,ou=35,xw=37,Sw=38,Tw=39,kw=42,cg=44,Cw=45,Qs=58,Ew=61,$w=62,Lw=63,Aw=64,dg=91,pg=93,Mw=96,fg=123,Iw=124,gg=125,sn={};sn[0]="\\0",sn[7]="\\a",sn[8]="\\b",sn[9]="\\t",sn[10]="\\n",sn[11]="\\v",sn[12]="\\f",sn[13]="\\r",sn[27]="\\e",sn[34]='\\"',sn[92]="\\\\",sn[133]="\\N",sn[160]="\\_",sn[8232]="\\L",sn[8233]="\\P";var Dw=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Rw=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ow(e,t){var n,o,a,l,i,r,u;if(t===null)return{};for(n={},o=Object.keys(t),a=0,l=o.length;a<l;a+=1)i=o[a],r=String(t[i]),i.slice(0,2)==="!!"&&(i="tag:yaml.org,2002:"+i.slice(2)),u=e.compiledTypeMap.fallback[i],u&&ug.call(u.styleAliases,r)&&(r=u.styleAliases[r]),n[i]=r;return n}function Nw(e){var t,n,o;if(t=e.toString(16).toUpperCase(),e<=255)n="x",o=2;else if(e<=65535)n="u",o=4;else if(e<=4294967295)n="U",o=8;else throw new mn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Kt.repeat("0",o-t.length)+t}var Pw=1,Ll=2;function Fw(e){this.schema=e.schema||Qr,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Kt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Ow(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ll:Pw,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mg(e,t){for(var n=Kt.repeat(" ",t),o=0,a=-1,l="",i,r=e.length;o<r;)a=e.indexOf(`
`,o),a===-1?(i=e.slice(o),o=r):(i=e.slice(o,a+1),o=a+1),i.length&&i!==`
`&&(l+=n),l+=i;return l}function au(e,t){return`
`+Kt.repeat(" ",e.indent*t)}function Bw(e,t){var n,o,a;for(n=0,o=e.implicitTypes.length;n<o;n+=1)if(a=e.implicitTypes[n],a.resolve(t))return!0;return!1}function Zs(e){return e===yw||e===hw}function Al(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==nu||65536<=e&&e<=1114111}function vg(e){return Al(e)&&e!==nu&&e!==_w&&e!==$l}function hg(e,t,n){var o=vg(e),a=o&&!Zs(e);return(n?o:o&&e!==cg&&e!==dg&&e!==pg&&e!==fg&&e!==gg)&&e!==ou&&!(t===Qs&&!a)||vg(t)&&!Zs(t)&&e===ou||t===Qs&&a}function Uw(e){return Al(e)&&e!==nu&&!Zs(e)&&e!==Cw&&e!==Lw&&e!==Qs&&e!==cg&&e!==dg&&e!==pg&&e!==fg&&e!==gg&&e!==ou&&e!==Sw&&e!==kw&&e!==bw&&e!==Iw&&e!==Ew&&e!==$w&&e!==Tw&&e!==ww&&e!==xw&&e!==Aw&&e!==Mw}function Vw(e){return!Zs(e)&&e!==Qs}function Ml(e,t){var n=e.charCodeAt(t),o;return n>=55296&&n<=56319&&t+1<e.length&&(o=e.charCodeAt(t+1),o>=56320&&o<=57343)?(n-55296)*1024+o-56320+65536:n}function _g(e){var t=/^\n* /;return t.test(e)}var yg=1,lu=2,bg=3,wg=4,Da=5;function Ww(e,t,n,o,a,l,i,r){var u,p=0,d=null,c=!1,v=!1,m=o!==-1,y=-1,S=Uw(Ml(e,0))&&Vw(Ml(e,e.length-1));if(t||i)for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Ml(e,u),!Al(p))return Da;S=S&&hg(p,d,r),d=p}else{for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Ml(e,u),p===$l)c=!0,m&&(v=v||u-y-1>o&&e[y+1]!==" ",y=u);else if(!Al(p))return Da;S=S&&hg(p,d,r),d=p}v=v||m&&u-y-1>o&&e[y+1]!==" "}return!c&&!v?S&&!i&&!a(e)?yg:l===Ll?Da:lu:n>9&&_g(e)?Da:i?l===Ll?Da:lu:v?wg:bg}function zw(e,t,n,o,a){e.dump=function(){if(t.length===0)return e.quotingType===Ll?'""':"''";if(!e.noCompatMode&&(Dw.indexOf(t)!==-1||Rw.test(t)))return e.quotingType===Ll?'"'+t+'"':"'"+t+"'";var l=e.indent*Math.max(1,n),i=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),r=o||e.flowLevel>-1&&n>=e.flowLevel;function u(p){return Bw(e,p)}switch(Ww(t,r,e.indent,i,u,e.quotingType,e.forceQuotes&&!o,a)){case yg:return t;case lu:return"'"+t.replace(/'/g,"''")+"'";case bg:return"|"+xg(t,e.indent)+Sg(mg(t,l));case wg:return">"+xg(t,e.indent)+Sg(mg(Hw(t,i),l));case Da:return'"'+jw(t)+'"';default:throw new mn("impossible error: invalid scalar style")}}()}function xg(e,t){var n=_g(e)?String(t):"",o=e[e.length-1]===`
`,a=o&&(e[e.length-2]===`
`||e===`
`),l=a?"+":o?"":"-";return n+l+`
`}function Sg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Hw(e,t){for(var n=/(\n+)([^\n]*)/g,o=function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,n.lastIndex=p,Tg(e.slice(0,p),t)}(),a=e[0]===`
`||e[0]===" ",l,i;i=n.exec(e);){var r=i[1],u=i[2];l=u[0]===" ",o+=r+(!a&&!l&&u!==""?`
`:"")+Tg(u,t),a=l}return o}function Tg(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,o,a=0,l,i=0,r=0,u="";o=n.exec(e);)r=o.index,r-a>t&&(l=i>a?i:r,u+=`
`+e.slice(a,l),a=l+1),i=r;return u+=`
`,e.length-a>t&&i>a?u+=e.slice(a,i)+`
`+e.slice(i+1):u+=e.slice(a),u.slice(1)}function jw(e){for(var t="",n=0,o,a=0;a<e.length;n>=65536?a+=2:a++)n=Ml(e,a),o=sn[n],!o&&Al(n)?(t+=e[a],n>=65536&&(t+=e[a+1])):t+=o||Nw(n);return t}function Gw(e,t,n){var o="",a=e.tag,l,i,r;for(l=0,i=n.length;l<i;l+=1)r=n[l],e.replacer&&(r=e.replacer.call(n,String(l),r)),(ho(e,t,r,!1,!1)||typeof r>"u"&&ho(e,t,null,!1,!1))&&(o!==""&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function kg(e,t,n,o){var a="",l=e.tag,i,r,u;for(i=0,r=n.length;i<r;i+=1)u=n[i],e.replacer&&(u=e.replacer.call(n,String(i),u)),(ho(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&ho(e,t+1,null,!0,!0,!1,!0))&&((!o||a!=="")&&(a+=au(e,t)),e.dump&&$l===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function qw(e,t,n){var o="",a=e.tag,l=Object.keys(n),i,r,u,p,d;for(i=0,r=l.length;i<r;i+=1)d="",o!==""&&(d+=", "),e.condenseFlow&&(d+='"'),u=l[i],p=n[u],e.replacer&&(p=e.replacer.call(n,u,p)),ho(e,t,u,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ho(e,t,p,!1,!1)&&(d+=e.dump,o+=d));e.tag=a,e.dump="{"+o+"}"}function Kw(e,t,n,o){var a="",l=e.tag,i=Object.keys(n),r,u,p,d,c,v;if(e.sortKeys===!0)i.sort();else if(typeof e.sortKeys=="function")i.sort(e.sortKeys);else if(e.sortKeys)throw new mn("sortKeys must be a boolean or a function");for(r=0,u=i.length;r<u;r+=1)v="",(!o||a!=="")&&(v+=au(e,t)),p=i[r],d=n[p],e.replacer&&(d=e.replacer.call(n,p,d)),ho(e,t+1,p,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&$l===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,c&&(v+=au(e,t)),ho(e,t+1,d,!0,c)&&(e.dump&&$l===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,a+=v));e.tag=l,e.dump=a||"{}"}function Cg(e,t,n){var o,a,l,i,r,u;for(a=n?e.explicitTypes:e.implicitTypes,l=0,i=a.length;l<i;l+=1)if(r=a[l],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(n?r.multi&&r.representName?e.tag=r.representName(t):e.tag=r.tag:e.tag="?",r.represent){if(u=e.styleMap[r.tag]||r.defaultStyle,rg.call(r.represent)==="[object Function]")o=r.represent(t,u);else if(ug.call(r.represent,u))o=r.represent[u](t,u);else throw new mn("!<"+r.tag+'> tag resolver accepts not "'+u+'" style');e.dump=o}return!0}return!1}function ho(e,t,n,o,a,l,i){e.tag=null,e.dump=n,Cg(e,n,!1)||Cg(e,n,!0);var r=rg.call(e.dump),u=o,p;o&&(o=e.flowLevel<0||e.flowLevel>t);var d=r==="[object Object]"||r==="[object Array]",c,v;if(d&&(c=e.duplicates.indexOf(n),v=c!==-1),(e.tag!==null&&e.tag!=="?"||v||e.indent!==2&&t>0)&&(a=!1),v&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(d&&v&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),r==="[object Object]")o&&Object.keys(e.dump).length!==0?(Kw(e,t,e.dump,a),v&&(e.dump="&ref_"+c+e.dump)):(qw(e,t,e.dump),v&&(e.dump="&ref_"+c+" "+e.dump));else if(r==="[object Array]")o&&e.dump.length!==0?(e.noArrayIndent&&!i&&t>0?kg(e,t-1,e.dump,a):kg(e,t,e.dump,a),v&&(e.dump="&ref_"+c+e.dump)):(Gw(e,t,e.dump),v&&(e.dump="&ref_"+c+" "+e.dump));else if(r==="[object String]")e.tag!=="?"&&zw(e,e.dump,t,l,u);else{if(r==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new mn("unacceptable kind of an object to dump "+r)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function Yw(e,t){var n=[],o=[],a,l;for(su(e,n,o),a=0,l=o.length;a<l;a+=1)t.duplicates.push(n[o[a]]);t.usedDuplicates=new Array(l)}function su(e,t,n){var o,a,l;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)n.indexOf(a)===-1&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,l=e.length;a<l;a+=1)su(e[a],t,n);else for(o=Object.keys(e),a=0,l=o.length;a<l;a+=1)su(e[o[a]],t,n)}function Jw(e,t){t=t||{};var n=new Fw(t);n.noRefs||Yw(e,n);var o=e;return n.replacer&&(o=n.replacer.call({"":o},"",o)),ho(n,0,o,!0,!0)?n.dump+`
`:""}var Xw=Jw,Qw={dump:Xw};function iu(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Zw=tn,e5=$f,t5=If,n5=Pf,o5=Ff,a5=Qr,l5=ig.load,s5=ig.loadAll,i5=Qw.dump,r5=mn,u5={binary:zf,float:Nf,map:Mf,null:Df,pairs:jf,set:Gf,timestamp:Vf,bool:Rf,int:Of,merge:Wf,omap:Hf,seq:Af,str:Lf},c5=iu("safeLoad","load"),d5=iu("safeLoadAll","loadAll"),p5=iu("safeDump","dump"),Eg={Type:Zw,Schema:e5,FAILSAFE_SCHEMA:t5,JSON_SCHEMA:n5,CORE_SCHEMA:o5,DEFAULT_SCHEMA:a5,load:l5,loadAll:s5,dump:i5,YAMLException:r5,types:u5,safeLoad:c5,safeLoadAll:d5,safeDump:p5};const f5={key:0,class:"loading-overlay"},g5={class:"settings-content"},m5={class:"info-links"},v5={class:"info-link-item"},h5={class:"info-link-label"},_5={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},y5={class:"info-link-item"},b5={class:"info-link-label"},w5={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},x5={class:"info-link-item"},S5={class:"info-link-label"},T5={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},k5={style:{"margin-bottom":"16px"}},C5=["placeholder"],E5={style:{"margin-bottom":"16px"}},$5=["placeholder"],L5=["placeholder"],A5={style:{"margin-bottom":"16px"}},M5=["placeholder"],I5=["placeholder"],D5={style:{"margin-bottom":"16px"}},R5=["placeholder"],O5={class:"data-container"},N5={key:0},P5={key:0},F5={class:"tag-group-container"},B5={style:{display:"flex","align-items":"center"}},U5={key:0},V5=["placeholder"],W5=["onClick"],z5=["onClick"],H5=["onClick"],j5=_t({__name:"import_tag",setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(""),l=h(""),i=h(""),r=h(""),u=h(""),p=h(""),d=h(""),c=h(""),v=h(""),m=h([]),y=h(-1),S=h(""),$=h(""),T=h(null),D=h(null),J=h(null),x=h(!1),N=h(""),H=h(null);function j(){if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}H.value.click()}function K(){a.value="",l.value="",i.value="",r.value="",u.value="",p.value="",d.value="",c.value="",v.value="",m.value=[],y.value=-1,S.value="",$.value="",x.value=!1}function X(w){const O=w.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{const L=pe.target.result.split(`
`).filter(R=>R.trim());let _=0;L.forEach(R=>{const[q,xe]=R.split(",");if(q&&xe){const we=q.trim().replace(/'/g,"''"),ee=xe.trim().replace(/'/g,"''"),me=Fo();_=_+1;const Re=parseInt(new Date().getTime()/1e3)+_,Pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${we}', '${ee}', 'rgba(255, 123, 2, .4)', ${Re}, '${v.value}', '${me}');`;m.value.push(Pe)}})},Q.readAsText(O)}w.target.value=""}function _e(w){const O=w.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{try{const ye=JSON.parse(pe.target.result);let L=0;Object.entries(ye).forEach(([_,R])=>{const q=_.replace(/'/g,"''"),xe=R.replace(/'/g,"''"),we=Fo();L=L+1;const ee=parseInt(new Date().getTime()/1e3)+L,me=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${q}', '${xe}', 'rgba(255, 123, 2, .4)', ${ee}, '${v.value}', '${we}');`;m.value.push(me)})}catch{Y({type:"warn",str:"message.jsonErrorMesg"})}},Q.readAsText(O)}w.target.value=""}function le(w){const O=w.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{try{const ye=Eg.load(pe.target.result);let L=0;Object.entries(ye).forEach(([_,R])=>{const q=_.replace(/'/g,"''"),xe=String(R).replace(/'/g,"''"),we=Fo();L=L+1;const ee=parseInt(new Date().getTime()/1e3)+L,me=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${q}', '${xe}', 'rgba(255, 123, 2, .4)', ${ee}, '${v.value}', '${we}');`;m.value.push(me)})}catch{Y({type:"warn",str:"message.yamlErrorMesg"})}},Q.readAsText(O)}w.target.value=""}function P(w){K();const O=w.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{pe.target.result.split(";").filter(_=>_.trim()).forEach(_=>{if((_.includes("tag_groups")||_.includes("tag_subgroups"))&&_.includes("p_uuid"))if(_.includes("g_uuid")){u.value=_+";";const q=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);q&&(v.value=q[1]);const xe=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);xe&&(d.value=xe[1].replace(/''/g,"'"))}else{r.value=_+";";const q=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);q&&(c.value=q[1]);const xe=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);xe&&(p.value=xe[1].replace(/''/g,"'"))}else _.includes("tag_tags")&&m.value.push(_+";")})},Q.readAsText(O)}w.target.value=""}function Z(){if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}J.value.click()}function te(){if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}D.value.click()}function z(){T.value.click()}function ne(){const w=[r.value,u.value,...m.value].join(`
`),O=new Blob([w],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(O),N.value.length<=0){const pe=parseInt(new Date().getTime()/1e3);Q.download="export_"+pe+".sql"}else Q.download=N.value+".sql";Q.click()}const oe=()=>{const w=[...m.value].join(`
`),O=new Blob([w],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(O),N.value.length<=0){const pe=parseInt(new Date().getTime()/1e3);Q.download="export_tags_"+pe+".sql"}else Q.download=N.value+".sql";Q.click()};function F(w){const O=w.match(/VALUES\s*\([^']*'([^']+)'/),Q=w.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:O?O[1].replace(/''/g,"'"):"",desc:Q?Q[1].replace(/''/g,"'"):""}}function U(w){m.value.splice(w,1)}function ue(w){const O=m.value[w],Q=F(O);S.value=Q.text,$.value=Q.desc,y.value=w}function ke(w){const O=S.value.replace(/'/g,"''"),Q=$.value.replace(/'/g,"''");m.value[w]=m.value[w].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${O}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${Q}'`),y.value=-1}function ie(){y.value=-1}function ge(){if(!v.value){Y({type:"warn",str:"message.pleaseAddSub"});return}const w=a.value.replace(/'/g,"''"),O=l.value.replace(/'/g,"''"),Q=Fo(),pe=parseInt(new Date().getTime()/1e3);i.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${w}', '${O}', 'rgba(255, 123, 2, .4)', ${pe}, '${v.value}', '${Q}');`,m.value.push(i.value)}function de(){if(p.value.length<=0){Y({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const w=p.value.replace(/'/g,"''");c.value.length<=0&&(c.value=Fo());const O=parseInt(new Date().getTime()/1e3);r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${w}', 'rgba(255, 123, 2, .4)', ${O}, '${c.value}');`}function ae(){if(d.value.length<=0){Y({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!c.value){Y({type:"warn",str:"message.pleaseAddMainCeb"});return}const w=d.value.replace(/'/g,"''");v.value.length<=0&&(v.value=Fo());const O=parseInt(new Date().getTime()/1e3);u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${w}', 'rgba(255, 123, 2, .4)', ${O}, '${c.value}', '${v.value}');`}const G=h(null),A=()=>{G.value.open()},B=w=>{x.value=!0,p.value=w.group.name,d.value=w.sub.name,c.value=w.group.p_uuid,v.value=w.sub.g_uuid;const O=w.group.name.replace(/'/g,"''"),Q=w.sub.name.replace(/'/g,"''");r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${O}', '${w.group.color}', ${w.group.create_time}, '${w.group.p_uuid}');`,u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${Q}', '${w.sub.color}', ${w.sub.create_time}, '${w.group.p_uuid}', '${w.sub.g_uuid}');`},V=h(!1),I=async w=>{V.value=!0;try{await It.runSQLToServer(w).then(O=>{if(O.code!=200){Y({type:"warn",str:O.message});return}else W(),Y({type:"success",str:"importDialog.successImport"})}).catch(O=>{console.error(O),Y({type:"warn",str:"importDialog.importFail"})})}catch(O){console.error(O),Y({type:"warn",str:"importDialog.importFail"})}finally{V.value=!1}},W=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},k=async()=>{if(x.value){if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}const w=[...m.value];await I(w)}else{if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}const w=[r.value,u.value,...m.value];await I(w)}};return ot(r,(w,O)=>{var ye,L;if(!w||w===O)return;const Q=(ye=w.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ye[1],pe=(L=O==null?void 0:O.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:L[1];Q&&pe&&u.value&&(u.value=u.value.replace(new RegExp(`'${pe}'`,"g"),`'${Q}'`))}),ot(u,(w,O)=>{var ye,L;if(!w||w===O)return;const Q=(ye=w.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ye[1],pe=(L=O==null?void 0:O.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:L[1];Q&&pe&&m.value.length>0&&(m.value=m.value.map(_=>_.replace(new RegExp(`'${pe}'`,"g"),`'${Q}'`)))}),t({open:()=>{o.value=!0}}),(w,O)=>(b(),C(Ie,null,[V.value?(b(),C("div",f5,O[11]||(O[11]=[s("div",{class:"loading-spinner"},null,-1)]))):re("",!0),Ue($a,{modelValue:o.value,"onUpdate:modelValue":O[10]||(O[10]=Q=>o.value=Q),title:f(n)("importDialog.title")},{footer:it(()=>[s("button",{onClick:O[9]||(O[9]=Q=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:k},g(f(n)("importDialog.sure")),1)]),default:it(()=>[s("div",g5,[s("div",m5,[s("div",v5,[s("span",h5,g(f(n)("importDialog.tips1")),1),s("a",_5,g(f(n)("importDialog.tips1text")),1)]),s("div",y5,[s("span",b5,g(f(n)("importDialog.tips2")),1),s("a",w5,g(f(n)("importDialog.tips2text")),1)]),s("div",x5,[s("span",S5,g(f(n)("importDialog.tips3")),1),s("a",T5,g(f(n)("importDialog.tips3text")),1)])]),s("div",k5,[s("button",{onClick:K,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:z,class:"upload-btn"},g(f(n)("importDialog.uploadSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:A},g(f(n)("importDialog.selectGroup")),1),s("button",{style:{"margin-left":"10px"},onClick:ne},g(f(n)("importDialog.dumpSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:oe},g(f(n)("importDialog.dumpOnlySQL")),1),ve(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[0]||(O[0]=Q=>N.value=Q),placeholder:f(n)("importDialog.settingOutputName")},null,8,C5),[[Ae,N.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:P,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"jsonFileInput",ref:D,onChange:_e,accept:".json",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"txtFileInput",ref:J,onChange:X,accept:".txt",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"yamlFileInput",ref:H,onChange:le,accept:".yaml,.yml",style:{display:"none"}},null,544)]),s("div",E5,[ve(s("input",{"onUpdate:modelValue":O[1]||(O[1]=Q=>p.value=Q),placeholder:f(n)("importDialog.pleaseMainCeb")},null,8,$5),[[Ae,p.value]]),s("button",{onClick:de},g(f(n)("importDialog.setMainCeb")),1),ve(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[2]||(O[2]=Q=>c.value=Q),placeholder:f(n)("importDialog.pleaseMainCebUuid")},null,8,L5),[[Ae,c.value]])]),s("div",A5,[ve(s("input",{"onUpdate:modelValue":O[3]||(O[3]=Q=>d.value=Q),placeholder:f(n)("importDialog.pleaseSubGroup")},null,8,M5),[[Ae,d.value]]),s("button",{onClick:ae},g(f(n)("importDialog.setSubCeb")),1),ve(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[4]||(O[4]=Q=>v.value=Q),placeholder:f(n)("importDialog.pleaseSubGroupUuid")},null,8,I5),[[Ae,v.value]])]),s("div",D5,[ve(s("input",{"onUpdate:modelValue":O[5]||(O[5]=Q=>a.value=Q),placeholder:"Tag"},null,512),[[Ae,a.value]]),ve(s("input",{"onUpdate:modelValue":O[6]||(O[6]=Q=>l.value=Q),placeholder:f(n)("importDialog.translater")},null,8,R5),[[Ae,l.value]]),s("button",{onClick:ge},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:te,class:"upload-btn"},g(f(n)("importDialog.fromJSONImput")),1),s("button",{style:{"margin-left":"10px"},onClick:Z,class:"upload-btn"},g(f(n)("importDialog.fromTxtInput")),1),s("button",{style:{"margin-left":"10px"},onClick:j,class:"upload-btn"},g(f(n)("importDialog.fromYmalInput")),1)]),s("div",O5,[r.value?(b(),C("div",N5,[s("h3",null,g(F(r.value).text),1),u.value?(b(),C("div",P5,[s("h4",null,g(F(u.value).text),1),s("div",F5,[(b(!0),C(Ie,null,ze(m.value,(Q,pe)=>(b(),C("div",{key:pe,style:{display:"flex","flex-direction":"column","align-items":"center"}},[s("p",null,g(F(Q).text)+" - "+g(F(Q).desc),1),s("div",B5,[y.value===pe?(b(),C("div",U5,[ve(s("input",{"onUpdate:modelValue":O[7]||(O[7]=ye=>S.value=ye),placeholder:"Tag"},null,512),[[Ae,S.value]]),ve(s("input",{"onUpdate:modelValue":O[8]||(O[8]=ye=>$.value=ye),placeholder:f(n)("importDialog.translater")},null,8,V5),[[Ae,$.value]]),s("button",{onClick:ye=>ke(pe)},g(f(n)("importDialog.sureYes")),9,W5),s("button",{style:{"margin-left":"10px"},onClick:ie},g(f(n)("importDialog.cancel")),1)])):(b(),C("button",{key:1,onClick:ye=>ue(pe)},g(f(n)("importDialog.edit")),9,z5)),s("button",{style:{"margin-left":"10px"},onClick:ye=>U(pe)},g(f(n)("importDialog.delete")),9,H5)])]))),128))])])):re("",!0)])):re("",!0)])])]),_:1},8,["modelValue","title"]),Ue(Tf,{ref_key:"tagGroupSelectDialogItem",ref:G,onSureSelect:B},null,512)],64))}},[["__scopeId","data-v-1971f07a"]]),G5={class:"tag-manager"},q5={class:"toolbar"},K5={class:"toolbar-top"},Y5={class:"search-container"},J5=["placeholder"],X5={key:0,class:"no-results"},Q5=["onClick"],Z5={class:"result-content"},e6={class:"result-text"},t6={class:"result-path"},n6={class:"toolbar-bottom"},o6={class:"group-edit-mode"},a6={class:"category-tabs"},l6={class:"tabs-wrapper primary-tabs"},s6={class:"tabs-scroll"},i6=["onClick","onMouseenter","onMouseleave"],r6={class:"tab-text"},u6={key:0,class:"tab-actions"},c6=["onClick","title"],d6=["onClick","title"],p6=["onClick","title"],f6=["onClick","title"],g6={class:"group-edit-mode"},m6={key:0,class:"tabs-wrapper group-tabs"},v6={class:"tabs-scroll"},h6=["onClick","onMouseenter","onMouseleave"],_6={class:"tab-text"},y6={key:0,class:"tab-actions"},b6=["onClick","title"],w6=["onClick","title"],x6=["onClick","title"],S6=["onClick","title"],T6={class:"group-edit-mode"},k6={class:"tags-content"},C6={class:"tags-header"},E6={class:"tags-title"},$6={class:"tags-actions"},L6=["disabled"],A6=["disabled"],M6=["disabled"],I6=["disabled"],D6=["disabled"],R6={key:0,class:"tags-grid"},O6=["onClick"],N6={class:"tag-actions"},P6=["onClick","title"],F6=["onClick","title"],B6=["onClick","title"],U6={class:"tag-desc"},V6=["value"],W6={key:0,class:"weilin-tools-dialog-overlay"},z6={class:"weilin-tools-dialog-header"},H6={class:"weilin-tools-dialog-body"},j6={key:0,class:"form-group"},G6=["placeholder"],q6={key:1,class:"form-group"},K6=["placeholder"],Y6={class:"form-group"},J6={class:"color-picker"},X6={class:"color-controls"},Q6={class:"alpha-control"},Z6={class:"alpha-value"},e8={class:"weilin-tools-dialog-footer"},t8={key:1,class:"weilin-tools-dialog-overlay"},n8={class:"weilin-tools-dialog-header"},o8={class:"weilin-tools-dialog-body"},a8={class:"form-group"},l8=["placeholder"],s8={class:"form-group"},i8=["placeholder"],r8={class:"form-group"},u8={class:"color-picker"},c8={class:"color-controls"},d8={class:"alpha-control"},p8={class:"alpha-value"},f8={class:"weilin-tools-dialog-footer"},g8={key:2,class:"weilin-tools-dialog-overlay"},m8={class:"weilin-tools-dialog-header"},v8={class:"weilin-tools-dialog-body"},h8={class:"confirm-message"},_8={class:"weilin-tools-dialog-footer"},y8={key:3,class:"weilin-tools-dialog-overlay"},b8={class:"weilin-tools-dialog-content"},w8={class:"weilin-tools-dialog-header"},x8={class:"weilin-tools-dialog-body"},S8={class:"form-group"},T8=["value"],k8={class:"form-group"},C8={class:"radio-group"},E8={class:"weilin-tools-dialog-footer"},$8={key:4,class:"weilin-tools-dialog-overlay"},L8={class:"weilin-tools-dialog-content"},A8={class:"weilin-tools-dialog-header"},M8={class:"weilin-tools-dialog-body"},I8={class:"form-group"},D8=["value"],R8={class:"form-group"},O8={class:"radio-group"},N8={class:"weilin-tools-dialog-footer"},P8={key:5,class:"weilin-tools-dialog-overlay"},F8={class:"weilin-tools-dialog-header"},B8={class:"weilin-tools-dialog-body"},U8={class:"config-section"},V8={class:"form-group"},W8={class:"width-control"},z8={class:"radio-label"},H8={class:"radio-label"},j8={class:"form-group"},G8={class:"form-group"},q8={class:"config-section"},K8={class:"form-group"},Y8={class:"width-control"},J8={class:"radio-label"},X8={class:"radio-label"},Q8={class:"form-group"},Z8={class:"form-group"},e7={class:"weilin-tools-dialog-footer"},$g=_t({__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){Ds();const{t}=ht(),n=h([]),o=h(null),a=h([]),l=h([]),i=h(null),r=h(!1),u=h(!1),p=h(!1),d=h(!1),c=h("primary"),v=h([]),m=h(!1),y=h(!1),S=h("None"),$=h("None"),T=h(0),D=h(0),J=h(null),x=h(0),N=h(!1),H=h(null),j=h("before"),K=h(null),X=h("before"),_e=h(null),le=h(null),P=h(!1),Z=h(!1),te=h(!1),z=h({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),ne={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},oe=e,F=h({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),U=h({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),ue=h({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),ke=fe=>{const ce=fe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(ce){const[,Se,Ke,Ft,Xt]=ce,st=`#${((1<<24)+(parseInt(Se)<<16)+(parseInt(Ke)<<8)+parseInt(Ft)).toString(16).slice(1)}`,Bt=Xt?Math.round(parseFloat(Xt)*100):100;return{hex:st,alpha:Bt}}return{hex:"#FFFFFF",alpha:100}},ie=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ge=async()=>{try{await It.getTagMainGroup().then(fe=>{n.value=fe}).catch(fe=>{console.error(fe),Y({type:"warn",str:"message.networkError"})}),o.value&&await de(o.value.p_uuid),i.value&&await ae(i.value.g_uuid)}catch(fe){console.error("Tag:",fe)}},de=async fe=>{try{await It.getTagSubGroup(fe).then(ce=>{a.value=ce}).catch(ce=>{console.error(ce),Y({type:"warn",str:"message.networkError"})})}catch(ce){console.error(":",ce)}},ae=async fe=>{try{await It.getTagList(fe).then(ce=>{l.value=ce}).catch(ce=>{console.error(ce),Y({type:"warn",str:"message.networkError"})})}catch(ce){console.error("Tag:",ce)}};mt(()=>{Jt(),window.addEventListener("click",Pl),window.addEventListener("resize",Jt),window.addEventListener("message",ri),window.addEventListener("keydown",bo),Bl(),ie()}),Eo(()=>{window.removeEventListener("click",Pl),window.removeEventListener("resize",Jt),window.removeEventListener("message",ri),window.removeEventListener("keydown",bo)});const G=async fe=>{o.value=fe,i.value=null,m.value=!1,v.value=[],await de(fe.p_uuid)},A=async fe=>{i.value=fe,m.value=!1,v.value=[],await ae(fe.g_uuid)},B=fe=>{c.value=fe,p.value=!1,L.value=ke("rgba(255, 123, 2, .4)"),fe==="primary"?F.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:U.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},r.value=!0},V=fe=>{p.value=!0,c.value="primary",F.value={...fe},L.value=ke(fe.color),r.value=!0},I=fe=>{p.value=!0,c.value="group",U.value={...fe},L.value=ke(fe.color),r.value=!0},W=()=>{if(c.value==="primary"){if(!F.value.name){Y({type:"warn",str:"tagManager.categoryNameRequired"});return}p.value?n.value.findIndex(ce=>ce.id_index===F.value.id_index)!==-1&&It.editPrimaryCategory({id_index:F.value.id_index,name:F.value.name,color:F.value.color}).then(ce=>{ce.code===200?(ie(),Y({type:"success",str:"message.editSuccess"})):ce.code===201?Y({type:"error",str:"message.editNameExist"}):Y({type:"error",str:"message.editFailed"})}).catch(ce=>{Y({type:"warn",str:"message.networkError"})}):It.addPrimaryCategory({name:F.value.name,color:F.value.color}).then(fe=>{fe.code===200?(ie(),Y({type:"success",str:"message.addSuccess"})):fe.code===201?Y({type:"error",str:"message.editNameExist"}):Y({type:"error",str:"message.addFailed"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})})}else{if(!U.value.name){Y({type:"warn",str:"tagManager.groupNameRequired"});return}p.value?It.editSubCategory({id_index:U.value.id_index,name:U.value.name,color:U.value.color}).then(fe=>{fe.code===200?(ie(),Y({type:"success",str:"message.editSuccess"})):fe.code===201?Y({type:"error",str:"message.editNameExist"}):Y({type:"error",str:"message.editFailed"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})}):It.addSubCategory({name:U.value.name,color:U.value.color,key:o.value.id_index,p_uuid:o.value.p_uuid}).then(fe=>{fe.code===200?(ie(),Y({type:"success",str:"message.addSuccess"})):fe.code===201?Y({type:"error",str:"message.editNameExist"}):Y({type:"error",str:"message.editFailed"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})})}w()},k=()=>p.value?c.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):c.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),w=()=>{r.value=!1,F.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},L.value={hex:"#FFFFFF",alpha:0}},O=()=>{i.value&&(d.value=!1,ue.value={id:"",text:"",desc:"",categoryId:i.value.id,g_uuid:i.value.g_uuid,backgroundColor:U.value.color},L.value=ke(U.value.color),u.value=!0)},Q=fe=>{d.value=!0,ue.value={...fe},L.value=ke(fe.color),u.value=!0},pe=()=>{if(!ue.value.text||!ue.value.desc){Y({type:"warn",str:"tagManager.textRequired"});return}d.value&&i.value?It.editTags({id_index:ue.value.id_index,text:ue.value.text,desc:ue.value.desc,color:ue.value.color}).then(fe=>{ie(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.editSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})}):i.value&&It.addNewTags({id_index:i.value.id_index,g_uuid:i.value.g_uuid,text:ue.value.text,desc:ue.value.desc,color:ue.value.color?ue.value.color:"rgba(255, 123, 2, .4)"}).then(fe=>{ie(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.addSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})}),ye()},ye=()=>{u.value=!1,ue.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},d.value=!1},L=h({hex:"#FFFFFF",alpha:100}),_=vt(()=>q(L.value.hex,L.value.alpha)),R=()=>{const fe=q(L.value.hex,L.value.alpha);r.value?c.value==="primary"?F.value.color=fe:U.value.color=fe:u.value&&(ue.value.color=fe)},q=(fe,ce)=>{const Se=parseInt(fe.slice(1,3),16),Ke=parseInt(fe.slice(3,5),16),Ft=parseInt(fe.slice(5,7),16);return`rgba(${Se}, ${Ke}, ${Ft}, ${ce/100})`},xe=h(""),we=h([]),ee=h(!1),me=async()=>{ee.value=xe.value.trim().length>0;const fe=xe.value.trim().toLowerCase();if(!fe){we.value=[];return}we.value=[],await It.searchTag(fe).then(ce=>{we.value=ce}).catch(ce=>{Y({type:"warn",str:"message.networkError"})})};ot(xe,()=>{me()});const Re=async fe=>{const ce=n.value.find(Se=>Se.p_uuid===fe.p_uuid);ce&&await G(ce).then(async()=>{await qe(async()=>{const Se=a.value.find(Ke=>Ke.g_uuid===fe.g_uuid);Se&&await A(Se).then(async()=>{await qe(()=>{x.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:fe.text},"*"),J.value=fe.id_index,setTimeout(()=>{const Ke=document.querySelector(".tag-wrapper.highlight");Ke&&Ke.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{J.value=null},5e3)})})})}),xe.value=""},Pe=fe=>{if(!fe||fe==="transparent")return"var(--primary-text)";let ce,Se,Ke,Ft=1;if(fe.startsWith("rgba")){const st=fe.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);st&&([,ce,Se,Ke,Ft]=st.map(Number))}else if(fe.startsWith("rgb")){const st=fe.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);st&&([,ce,Se,Ke]=st.map(Number))}return Ft<.5?"var(--primary-text)":(ce*299+Se*587+Ke*114)/1e3>128?"#000000":"#ffffff"},He=fe=>{oe.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:fe.text},"*")},Xe=h(!1),at=h(""),bt=h(null),Dt=vt(()=>{if(!bt.value)return"";switch(at.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:bt.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:bt.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:bt.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),zn=fe=>{at.value="category",bt.value=fe,Xe.value=!0},Wo=fe=>{at.value="group",bt.value=fe,Xe.value=!0},Yt=fe=>{at.value="tag",bt.value=fe,Xe.value=!0},Zt=async()=>{try{switch(at.value){case"category":It.deletePrimaryCategory({p_uuid:bt.value.p_uuid}).then(fe=>{ie(),Y({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})});break;case"group":It.deleteSubCategory({g_uuid:bt.value.g_uuid}).then(fe=>{ie(),Y({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})});break;case"tag":It.deleteTags({id_index:bt.value.id_index}).then(fe=>{ie(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})});break;case"deleteSelected":It.batchDeleteTags({id_indexs:v.value}).then(fe=>{ie(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{Y({type:"warn",str:"message.networkError"})});break}Ba()}catch(fe){console.error(":",fe)}},$n=async fe=>{const ce=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${fe.name.replace(/'/g,"''")}', '${fe.color}', ${fe.create_time}, '${fe.p_uuid}');`;try{const Se=await It.getTagSubGroup(fe.p_uuid);let Ke=[];Ke.push(ce);for(const st of Se){const Bt=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${st.name.replace(/'/g,"''")}', '${st.color}', ${st.create_time}, '${st.p_uuid}', '${st.g_uuid}');`;Ke.push(Bt);try{(await It.getTagList(st.g_uuid)).forEach(Hn=>{const Wa=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${Hn.text!=null&&Hn.text.length>0?Hn.text.replace(/'/g,"''"):""}', '${Hn.desc!=null&&Hn.desc.length>0?Hn.desc.replace(/'/g,"''"):""}', '${Hn.color}', ${Hn.create_time}, '${Hn.g_uuid}', '${Fo()}');`;Ke.push(Wa)})}catch(pi){console.error("Tag:",pi),Y({type:"warn",str:"message.shareTagError"})}}const Ft=new Blob([Ke.join(`
`)],{type:"text/sql"}),Xt=document.createElement("a");Xt.href=URL.createObjectURL(Ft),Xt.download=`${fe.name}_export_${Date.now()}.sql`,Xt.click(),Y({type:"success",str:"tagManager.outputSuccess"})}catch(Se){console.error(":",Se),Y({type:"warn",str:"message.shareGroupError"})}},Dl=async fe=>{try{let ce=[];const Se=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${fe.name.replace(/'/g,"''")}', '${fe.color}', ${fe.create_time}, '${fe.p_uuid}', '${fe.g_uuid}');`;ce.push(Se);try{(await It.getTagList(fe.g_uuid)).forEach(st=>{const Bt=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${st.text!=null&&st.text.length>0?st.text.replace(/'/g,"''"):""}', '${st.desc!=null&&st.desc.length>0?st.desc.replace(/'/g,"''"):""}', '${st.color}', ${st.create_time}, '${st.g_uuid}', '${Fo()}');`;ce.push(Bt)})}catch(Xt){console.error("Tag:",Xt),Y({type:"warn",str:"message.shareTagError"})}const Ke=new Blob([ce.join(`
`)],{type:"text/sql"}),Ft=document.createElement("a");Ft.href=URL.createObjectURL(Ke),Ft.download=`${fe.name}_export_${Date.now()}.sql`,Ft.click(),Y({type:"success",str:"tagManager.outputSuccess"})}catch(ce){console.error(":",ce),Y({type:"warn",str:"message.shareGroupError"})}},Rl=fe=>{K.value=fe.id_index,N.value=!0},Pt=async()=>{try{It.moveTag({id_index:K.value,reference_id_index:H.value,position:j.value}).then(fe=>{ie(),N.value=!1,Y({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{Y({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),Y({type:"error",str:t("message.moveFailed")})}},Ve=h([]),Ce=h(1),Ee=(fe,ce)=>{Ce.value=ce,ce===1?(Ve.value=n.value,_e.value=fe.id_index,y.value=!0):(Ve.value=a.value,_e.value=fe.id_index,y.value=!0)},Lt=async()=>{if(Ce.value===1)try{It.moveMainGroup({id_index:_e.value,reference_id_index:le.value,position:X.value}).then(fe=>{ie(),y.value=!1,Y({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{Y({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),Y({type:"error",str:t("message.moveFailed")})}else try{It.moveSubGroup({id_index:_e.value,reference_id_index:le.value,position:X.value}).then(fe=>{ie(),y.value=!1,Y({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{Y({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),Y({type:"error",str:t("message.moveFailed")})}},xn=()=>{m.value=!0,P.value=!0},Ol=()=>{m.value=!1,P.value=!1,v.value=[]},gu=()=>{v.value.length!==0&&(at.value="deleteSelected",bt.value={},Xe.value=!0)},mu=()=>{m.value=!0,Z.value=!0},Nl=()=>{m.value=!1,Z.value=!1,v.value=[]},Fa=()=>{if(v.value.length===0){Y({type:"warn",str:"tagManager.noTagsSelected"});return}const fe={};v.value.forEach(Ke=>{fe[Ke.text]=Ke.desc});const ce=new Blob([Eg.dump(fe)],{type:"text/yaml"}),Se=document.createElement("a");Se.href=URL.createObjectURL(ce),Se.download=`selected_tags_export_${Date.now()}.yaml`,Se.click(),Y({type:"success",str:"tagManager.outputSuccess"}),Nl()},Ba=()=>{Xe.value=!1,at.value="",bt.value=null},ii=async()=>{try{await ie()}catch(fe){console.error(":",fe)}},yo=h(),Ua=h({}),Jt=()=>{if(yo.value){const fe=yo.value.getBoundingClientRect();Ua.value={position:"fixed",top:`${fe.bottom}px`,left:`${fe.left}px`,width:`${fe.width}px`,zIndex:1e3}}},ri=fe=>{fe.data.type==="weilin_prompt_ui_window_change_tagManager_position"||fe.data.type==="weilin_prompt_ui_window_change_tagManager_size"||fe.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_position"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_size"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?Jt():fe.data.type==="weilin_prompt_ui_window_change_click_outside"||fe.data.type==="weilin_prompt_ui_tag_manager_refresh"&&ge()},Pl=fe=>{ee.value&&!yo.value.contains(fe.target)&&(ee.value=!1)},bo=fe=>{fe.key==="Escape"&&(ee.value=!1)},On=fe=>{D.value==1&&(S.value="TabID-"+fe)},ra=fe=>{S.value="None"},Fl=fe=>{T.value==1&&($.value="TabID-"+fe)},ui=fe=>{$.value="None"},to=h(),Va=()=>{to.value.open()},Bl=()=>{const fe=JSON.parse(JSON.stringify(ne));try{const ce=localStorage.getItem("weilin_tag_manager_tab_size_config");if(ce){const Se=JSON.parse(ce);z.value={...fe,...Se}}else z.value={...fe}}catch(ce){console.error(":",ce),z.value={...fe}}},vu=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(z.value)),Y({type:"success",str:"tagManager.tabSizeConfigSaved"}),te.value=!1}catch(fe){console.error(":",fe),Y({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},hu=()=>{te.value=!0},ci=()=>{te.value=!1,Bl()},di=()=>{const fe=JSON.parse(JSON.stringify(ne));z.value={...fe}};return(fe,ce)=>(b(),C("div",G5,[s("div",q5,[s("div",K5,[s("button",{class:"refresh-btn",onClick:ii},ce[40]||(ce[40]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),s("div",Y5,[ve(s("input",{type:"text","onUpdate:modelValue":ce[0]||(ce[0]=Se=>xe.value=Se),placeholder:f(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:yo,onInput:ce[1]||(ce[1]=Se=>ee.value=xe.value.trim().length>0)},null,40,J5),[[Ae,xe.value]]),ee.value?(b(),C("div",{key:0,class:"search-results",style:ct(Ua.value)},[we.value.length===0?(b(),C("div",X5,g(f(t)("tagManager.noResults")),1)):(b(!0),C(Ie,{key:1},ze(we.value,(Se,Ke)=>(b(),C("div",{key:`${Ke}-search_item`,class:"search-result-item",onClick:Ft=>Re(Se)},[s("div",Z5,[s("span",e6,g(Se.name||Se.text),1),s("span",t6,g(Se.where),1)])],8,Q5))),128))],4)):re("",!0)]),s("button",{class:"import-btn",onClick:Va},g(f(t)("tagManager.importTags")),1)]),s("div",n6,[s("div",o6,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":ce[2]||(ce[2]=Se=>x.value=Se),"true-value":1,"false-value":0},null,512),[[$t,x.value]]),je(" "+g(f(t)("tagManager.autoAddSearchTag")),1)])]),s("button",{class:"tab-size-btn",onClick:hu},g(f(t)("tagManager.modifyTabSize")),1)])]),s("div",a6,[s("div",l6,[s("div",s6,[(b(!0),C(Ie,null,ze(n.value,(Se,Ke)=>{var Ft,Xt,st;return b(),C("div",{key:"Tabss-"+Ke,class:Le(["tab-item",{active:((Ft=o.value)==null?void 0:Ft.name)===Se.name}]),style:ct({backgroundColor:((Xt=o.value)==null?void 0:Xt.name)===Se.name?"var(--primary-color)":Se.color,color:((st=o.value)==null?void 0:st.name)===Se.name?"#ffffff":Pe(Se.color),width:z.value.primaryTab.width==="fit-content"?"fit-content":z.value.primaryTab.width+"px",height:z.value.primaryTab.height+"px",fontSize:z.value.primaryTab.fontSize+"px"}),onClick:Bt=>G(Se),onMouseenter:Bt=>On(Ke),onMouseleave:Bt=>ra()},[s("span",r6,g(Se.name),1),S.value=="TabID-"+Ke?(b(),C("div",u6,[s("button",{class:"action-btn move",onClick:Je(Bt=>Ee(Se,1),["stop"]),title:f(t)("tagManager.moveGroup")},ce[41]||(ce[41]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,c6),s("button",{class:"action-btn edit",onClick:Je(Bt=>V(Se),["stop"]),title:f(t)("tagManager.edit")},ce[42]||(ce[42]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,d6),s("button",{class:"action-btn share",onClick:Je(Bt=>$n(Se),["stop"]),title:f(t)("tagManager.share")},ce[43]||(ce[43]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,p6),s("button",{class:"action-btn delete",onClick:Je(Bt=>zn(Se),["stop"]),title:f(t)("tagManager.delete")},ce[44]||(ce[44]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,f6)])):re("",!0)],46,i6)}),128)),s("button",{class:"add-tab",onClick:ce[3]||(ce[3]=Se=>B("primary"))},[ce[45]||(ce[45]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addPrimaryCategory")),1)]),s("div",g6,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":ce[4]||(ce[4]=Se=>D.value=Se),"true-value":1,"false-value":0},null,512),[[$t,D.value]]),je(" "+g(D.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])]),o.value?(b(),C("div",m6,[s("div",v6,[(b(!0),C(Ie,null,ze(a.value,(Se,Ke)=>{var Ft,Xt,st;return b(),C("div",{key:"TabsSw-"+Ke,class:Le(["tab-item",{active:((Ft=i.value)==null?void 0:Ft.name)===Se.name}]),style:ct({backgroundColor:((Xt=i.value)==null?void 0:Xt.name)===Se.name?"var(--primary-color)":Se.color,color:((st=i.value)==null?void 0:st.name)===Se.name?"#ffffff":Pe(Se.color),width:z.value.groupTab.width==="fit-content"?"fit-content":z.value.groupTab.width+"px",height:z.value.groupTab.height+"px",fontSize:z.value.groupTab.fontSize+"px"}),onClick:Bt=>A(Se),onMouseenter:Bt=>Fl(Ke),onMouseleave:Bt=>ui()},[s("span",_6,g(Se.name),1),$.value=="TabID-"+Ke?(b(),C("div",y6,[s("button",{class:"action-btn move",onClick:Je(Bt=>Ee(Se,2),["stop"]),title:f(t)("tagManager.moveGroup")},ce[46]||(ce[46]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,b6),s("button",{class:"action-btn edit",onClick:Je(Bt=>I(Se),["stop"]),title:f(t)("tagManager.edit")},ce[47]||(ce[47]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,w6),s("button",{class:"action-btn delete",onClick:Je(Bt=>Wo(Se),["stop"]),title:f(t)("tagManager.delete")},ce[48]||(ce[48]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,x6),s("button",{class:"action-btn share",onClick:Je(Bt=>Dl(Se),["stop"]),title:f(t)("tagManager.share")},ce[49]||(ce[49]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,S6)])):re("",!0)],46,h6)}),128)),o.value?(b(),C("button",{key:0,class:"add-tab",onClick:ce[5]||(ce[5]=Se=>B("group"))},[ce[50]||(ce[50]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addGroup")),1)])):re("",!0),s("div",T6,[s("label",null,[ve(s("input",{type:"checkbox","onUpdate:modelValue":ce[6]||(ce[6]=Se=>T.value=Se),"true-value":1,"false-value":0},null,512),[[$t,T.value]]),je(" "+g(T.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])])):re("",!0)]),s("div",k6,[s("div",C6,[s("div",E6,g(i.value?i.value.name:f(t)("tagManager.selectCategory")),1),s("div",$6,[s("button",{class:"add-btn",onClick:O,disabled:!i.value},[ce[51]||(ce[51]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addTag")),1)],8,L6),Z.value?(b(),C("button",{key:0,class:"share-selected-btn",onClick:Fa,disabled:!v.value.length},g(f(t)("tagManager.shareSelected")),9,A6)):(b(),C("button",{key:1,class:"share-btn",onClick:mu,disabled:!i.value},g(f(t)("tagManager.batchShare")),9,M6)),Z.value?(b(),C("button",{key:2,class:"cancel-delete-btn",onClick:Nl},g(f(t)("tagManager.cancelShare")),1)):re("",!0),P.value?(b(),C("button",{key:3,class:"delete-btn",onClick:gu,disabled:!v.value.length},g(f(t)("tagManager.deleteSelected")),9,I6)):(b(),C("button",{key:4,class:"delete-action-btn",onClick:xn,disabled:!i.value},g(f(t)("tagManager.hasDeleteAction")),9,D6)),P.value?(b(),C("button",{key:5,class:"cancel-delete-btn",onClick:Ol},g(f(t)("tagManager.cancelDelete")),1)):re("",!0)])]),i.value?(b(),C("div",R6,[(b(!0),C(Ie,null,ze(l.value,Se=>(b(),C("div",{key:"tag-grid-"+Se.id_index,class:Le(J.value===Se.id_index?"tag-wrapper highlight":"tag-wrapper")},[s("div",{class:"tag-content",onClick:Ke=>He(Se)},[s("div",{class:"tag-main",style:ct({backgroundColor:Se.color||"transparent"})},[je(g(Se.desc)+" ",1),s("div",N6,[s("button",{class:"action-btn move",onClick:Je(Ke=>Rl(Se),["stop"]),title:f(t)("tagManager.moveTag")},ce[52]||(ce[52]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,P6),s("button",{class:"action-btn edit",onClick:Je(Ke=>Q(Se),["stop"]),title:f(t)("tagManager.editTag")},ce[53]||(ce[53]=[s("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,F6),s("button",{class:"action-btn delete",onClick:Je(Ke=>Yt(Se),["stop"]),title:f(t)("tagManager.deleteTag")},ce[54]||(ce[54]=[s("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,B6)])],4),s("div",U6,g(Se.text),1)],8,O6),m.value?ve((b(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":ce[7]||(ce[7]=Ke=>v.value=Ke),value:Se,class:"tag-checkbox"},null,8,V6)),[[$t,v.value]]):re("",!0)],2))),128))])):re("",!0)]),r.value?(b(),C("div",W6,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ce[12]||(ce[12]=Je(()=>{},["stop"]))},[s("div",z6,[s("h2",null,g(k()),1),s("button",{class:"close-btn",onClick:w},"")]),s("div",H6,[c.value=="primary"?(b(),C("div",j6,[s("label",null,g(f(t)("tagManager.categoryName")),1),ve(s("input",{type:"text","onUpdate:modelValue":ce[8]||(ce[8]=Se=>F.value.name=Se),placeholder:f(t)("tagManager.categoryNamePlaceholder"),onKeyup:an(W,["enter"])},null,40,G6),[[Ae,F.value.name]])])):re("",!0),c.value=="group"?(b(),C("div",q6,[s("label",null,g(f(t)("tagManager.groupName")),1),ve(s("input",{type:"text","onUpdate:modelValue":ce[9]||(ce[9]=Se=>U.value.name=Se),placeholder:f(t)("tagManager.groupNamePlaceholder"),onKeyup:an(W,["enter"])},null,40,K6),[[Ae,U.value.name]])])):re("",!0),s("div",Y6,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",J6,[s("div",{class:"color-preview",style:ct({backgroundColor:_.value})},null,4),s("div",X6,[ve(s("input",{type:"color","onUpdate:modelValue":ce[10]||(ce[10]=Se=>L.value.hex=Se),onInput:R,class:"color-input"},null,544),[[Ae,L.value.hex]]),s("div",Q6,[ve(s("input",{type:"range","onUpdate:modelValue":ce[11]||(ce[11]=Se=>L.value.alpha=Se),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,L.value.alpha,void 0,{number:!0}]]),s("span",Z6,g(L.value.alpha)+"%",1)])])])])]),s("div",e8,[s("button",{class:"cancel-btn",onClick:w},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:W},g(f(t)("common.confirm")),1)])],32)])):re("",!0),u.value?(b(),C("div",t8,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ce[17]||(ce[17]=Je(()=>{},["stop"]))},[s("div",n8,[s("h2",null,g(d.value?f(t)("tagManager.editTag"):f(t)("tagManager.addTag")),1),s("button",{class:"close-btn",onClick:ye},"")]),s("div",o8,[s("div",a8,[s("label",null,g(f(t)("tagManager.text")),1),ve(s("input",{type:"text","onUpdate:modelValue":ce[13]||(ce[13]=Se=>ue.value.desc=Se),placeholder:f(t)("tagManager.textPlaceholder")},null,8,l8),[[Ae,ue.value.desc]])]),s("div",s8,[s("label",null,g(f(t)("tagManager.description")),1),ve(s("textarea",{"onUpdate:modelValue":ce[14]||(ce[14]=Se=>ue.value.text=Se),placeholder:f(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,i8),[[Ae,ue.value.text]])]),s("div",r8,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",u8,[s("div",{class:"color-preview",style:ct({backgroundColor:_.value})},null,4),s("div",c8,[ve(s("input",{type:"color","onUpdate:modelValue":ce[15]||(ce[15]=Se=>L.value.hex=Se),onInput:R,class:"color-input"},null,544),[[Ae,L.value.hex]]),s("div",d8,[ve(s("input",{type:"range","onUpdate:modelValue":ce[16]||(ce[16]=Se=>L.value.alpha=Se),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,L.value.alpha,void 0,{number:!0}]]),s("span",p8,g(L.value.alpha)+"%",1)])])])])]),s("div",f8,[s("button",{class:"cancel-btn",onClick:ye},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:pe},g(f(t)("common.confirm")),1)])],32)])):re("",!0),Xe.value?(b(),C("div",g8,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:ce[18]||(ce[18]=Je(()=>{},["stop"]))},[s("div",m8,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:Ba},"")]),s("div",v8,[s("p",h8,g(Dt.value),1)]),s("div",_8,[s("button",{class:"cancel-btn",onClick:Ba},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:Zt},g(f(t)("common.delete")),1)])],32)])):re("",!0),N.value?(b(),C("div",y8,[s("div",b8,[s("div",w8,[s("h2",null,g(f(t)("tagManager.moveTag")),1),s("button",{class:"close-btn",onClick:ce[19]||(ce[19]=Se=>N.value=!1)},"")]),s("div",x8,[s("div",S8,[s("label",null,g(f(t)("tagManager.targetTag")),1),ve(s("select",{"onUpdate:modelValue":ce[20]||(ce[20]=Se=>H.value=Se),class:"form-select"},[(b(!0),C(Ie,null,ze(l.value,Se=>(b(),C("option",{key:Se.id_index,value:Se.id_index},g(Se.desc+" --> "+Se.text),9,T8))),128))],512),[[Gt,H.value]])]),s("div",k8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",C8,[s("label",null,[ve(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[21]||(ce[21]=Se=>j.value=Se),value:"before"},null,512),[[co,j.value]]),je(" "+g(f(t)("tagManager.moveBefore")),1)]),s("label",null,[ve(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[22]||(ce[22]=Se=>j.value=Se),value:"after"},null,512),[[co,j.value]]),je(" "+g(f(t)("tagManager.moveAfter")),1)])])])]),s("div",E8,[s("button",{class:"cancel-btn",onClick:ce[23]||(ce[23]=Se=>N.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:Pt},g(f(t)("common.confirm")),1)])])])):re("",!0),y.value?(b(),C("div",$8,[s("div",L8,[s("div",A8,[s("h2",null,g(f(t)("tagManager.moveGroup")),1),s("button",{class:"close-btn",onClick:ce[24]||(ce[24]=Se=>y.value=!1)},"")]),s("div",M8,[s("div",I8,[s("label",null,g(f(t)("tagManager.targetGroup")),1),ve(s("select",{"onUpdate:modelValue":ce[25]||(ce[25]=Se=>le.value=Se),class:"form-select"},[(b(!0),C(Ie,null,ze(Ve.value,(Se,Ke)=>(b(),C("option",{key:"group_move_id"+Ke,value:Se.id_index},g(Se.name),9,D8))),128))],512),[[Gt,le.value]])]),s("div",R8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",O8,[s("label",null,[ve(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[26]||(ce[26]=Se=>X.value=Se),value:"before"},null,512),[[co,X.value]]),je(" "+g(f(t)("tagManager.moveGroupBefore")),1)]),s("label",null,[ve(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[27]||(ce[27]=Se=>X.value=Se),value:"after"},null,512),[[co,X.value]]),je(" "+g(f(t)("tagManager.moveGroupAfter")),1)])])])]),s("div",N8,[s("button",{class:"cancel-btn",onClick:ce[28]||(ce[28]=Se=>y.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:Lt},g(f(t)("common.confirm")),1)])])])):re("",!0),te.value?(b(),C("div",P8,[s("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:ce[39]||(ce[39]=Je(()=>{},["stop"]))},[s("div",F8,[s("h2",null,g(f(t)("tagManager.tabSizeConfig")),1),s("button",{class:"close-btn",onClick:ci},"")]),s("div",B8,[s("div",U8,[s("h3",null,g(f(t)("tagManager.primaryTabConfig")),1),s("div",V8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",W8,[s("label",z8,[ve(s("input",{type:"radio","onUpdate:modelValue":ce[29]||(ce[29]=Se=>z.value.primaryTab.width=Se),value:"fit-content"},null,512),[[co,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",H8,[ve(s("input",{type:"radio","onUpdate:modelValue":ce[30]||(ce[30]=Se=>z.value.primaryTab.width=Se),value:"custom"},null,512),[[co,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.primaryTab.width!=="fit-content"?ve((b(),C("input",{key:0,type:"number","onUpdate:modelValue":ce[31]||(ce[31]=Se=>z.value.primaryTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.primaryTab.width,void 0,{number:!0}]]):re("",!0)])]),s("div",j8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.primaryTab.height)+"px)",1),ve(s("input",{type:"range","onUpdate:modelValue":ce[32]||(ce[32]=Se=>z.value.primaryTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.primaryTab.height,void 0,{number:!0}]])]),s("div",G8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.primaryTab.fontSize)+"px)",1),ve(s("input",{type:"range","onUpdate:modelValue":ce[33]||(ce[33]=Se=>z.value.primaryTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.primaryTab.fontSize,void 0,{number:!0}]])])]),s("div",q8,[s("h3",null,g(f(t)("tagManager.groupTabConfig")),1),s("div",K8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",Y8,[s("label",J8,[ve(s("input",{type:"radio","onUpdate:modelValue":ce[34]||(ce[34]=Se=>z.value.groupTab.width=Se),value:"fit-content"},null,512),[[co,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",X8,[ve(s("input",{type:"radio","onUpdate:modelValue":ce[35]||(ce[35]=Se=>z.value.groupTab.width=Se),value:"custom"},null,512),[[co,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.groupTab.width!=="fit-content"?ve((b(),C("input",{key:0,type:"number","onUpdate:modelValue":ce[36]||(ce[36]=Se=>z.value.groupTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.groupTab.width,void 0,{number:!0}]]):re("",!0)])]),s("div",Q8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.groupTab.height)+"px)",1),ve(s("input",{type:"range","onUpdate:modelValue":ce[37]||(ce[37]=Se=>z.value.groupTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.groupTab.height,void 0,{number:!0}]])]),s("div",Z8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.groupTab.fontSize)+"px)",1),ve(s("input",{type:"range","onUpdate:modelValue":ce[38]||(ce[38]=Se=>z.value.groupTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.groupTab.fontSize,void 0,{number:!0}]])])])]),s("div",e7,[s("button",{class:"reset-btn",onClick:di},g(f(t)("tagManager.resetDefault")),1),s("button",{class:"cancel-btn",onClick:ci},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:vu},g(f(t)("common.confirm")),1)])],32)])):re("",!0),Ue(j5,{ref_key:"importTagDialogItem",ref:to},null,512)]))}},[["__scopeId","data-v-c9c6726d"]]),ei=100,Lg=h(""),_o=h({}),Be={setActiveWindow(e){Lg.value!==e&&(Lg.value=e,Object.keys(_o.value).forEach(t=>{_o.value[t]=ei}),_o.value[e]=ei+10)},getZIndex(e){return _o.value[e]||(_o.value[e]=ei),_o.value[e]},registerWindow(e){_o.value[e]||(_o.value[e]=ei)},unregisterWindow(e){delete _o.value[e]}},En={getLoraList:async e=>await Me({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await Me({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await Me({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await Me({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await Me({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,n)=>{const o=new FormData;return o.append("image",e),o.append("path",t),o.append("fileName",n),await Me({url:"/lorainfo/api/loras/set/img",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const n=new FormData;return n.append("json",JSON.stringify(t)),await Me({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await Me({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await Me({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await Me({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await Me({url:"/get_lora_list_by_search",method:"post",data:{search:e}})};function ti(e){"@babel/helpers - typeof";return ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(e)}var t7=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Ag={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,n=t7.test(t),o;return this.expand?(o={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},n?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),o.innerHTML='"'.concat(t.toString(),'"')):o.innerText='"'.concat(t.toString(),'"')):o={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},rt("span",{},[this.canExtend&&rt("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),rt("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),rt("span",o)])}};Ag.__file="src/Components/types/json-string.vue";var Mg={name:"JsonUndefined",functional:!0,props:{jsonValue:{type:Object,default:null}},render:function(){return rt("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:this.jsonValue===null?"null":"undefined"})}};Mg.__file="src/Components/types/json-undefined.vue";var Ig={name:"JsonNumber",functional:!0,props:{jsonValue:{type:Number,required:!0}},render:function(){var t=Number.isInteger(this.jsonValue);return rt("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:this.jsonValue.toString()})}};Ig.__file="src/Components/types/json-number.vue";var Dg={name:"JsonBoolean",functional:!0,props:{jsonValue:Boolean},render:function(){return rt("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:this.jsonValue.toString()})}};Dg.__file="src/Components/types/json-boolean.vue";var Rg={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},data:function(){return{value:{}}},computed:{ordered:function(){var t=this;if(!this.sort)return this.value;var n={};return Object.keys(this.value).sort().forEach(function(o){n[o]=t.value[o]}),n}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var n=this;setTimeout(function(){n.value=t},0)},toggle:function(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent:function(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=[];if(!this.previewMode&&!this.keyName&&t.push(rt("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),t.push(rt("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand){for(var n in this.ordered)if(this.ordered.hasOwnProperty(n)){var o=this.ordered[n];t.push(rt(ni,{key:n,style:{display:this.expand?void 0:"none"},sort:this.sort,keyName:n,depth:this.depth+1,value:o,previewMode:this.previewMode}))}}return!this.expand&&Object.keys(this.value).length&&t.push(rt("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal object content (keys: ".concat(Object.keys(this.ordered).join(", "),")"),innerText:"..."})),t.push(rt("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),rt("span",t)}};Rg.__file="src/Components/types/json-object.vue";var Og={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},data:function(){return{value:[]}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;o===0&&(this.value=[]),setTimeout(function(){t.length>o&&(n.value.push(t[o]),n.setValue(t,o+1))},0)},toggle:function(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,n=[];return!this.previewMode&&!this.keyName&&n.push(rt("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),n.push(rt("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach(function(o,a){n.push(rt(ni,{key:a,style:{display:t.expand?void 0:"none"},sort:t.sort,depth:t.depth+1,value:o,previewMode:t.previewMode}))}),!this.expand&&this.value.length&&n.push(rt("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal ".concat(this.value.length," hidden items"),innerText:"..."})),n.push(rt("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),rt("span",n)}};Og.__file="src/Components/types/json-array.vue";var Ng={name:"JsonFunction",functional:!0,props:{jsonValue:{type:Function,required:!0}},render:function(){return rt("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:this.jsonValue.toString()},innerHTML:"&lt;function&gt;"})}};Ng.__file="src/Components/types/json-function.vue";var Pg={name:"JsonDate",inject:["timeformat"],functional:!0,props:{jsonValue:{type:Date,required:!0}},render:function(){var t=this.jsonValue,n=this.timeformat;return rt("span",{class:{"jv-item":!0,"jv-string":!0},innerText:'"'.concat(n(t),'"')})}};Pg.__file="src/Components/types/json-date.vue";var n7=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Fg={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,n=n7.test(t),o;return this.expand?(o={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},n?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),o.innerHTML="".concat(t.toString())):o.innerText="".concat(t.toString())):o={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},rt("span",{},[this.canExtend&&rt("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),rt("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),rt("span",o)])}};Fg.__file="src/Components/types/json-regexp.vue";var ni={name:"JsonBox",inject:["expandDepth","keyClick"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},data:function(){return{expand:!0}},mounted:function(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)},methods:{toggle:function(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,n=[],o;this.value===null||this.value===void 0?o=Mg:Array.isArray(this.value)?o=Og:Object.prototype.toString.call(this.value)==="[object Date]"?o=Pg:ti(this.value)==="object"?o=Rg:typeof this.value=="number"?o=Ig:typeof this.value=="string"?o=Ag:typeof this.value=="boolean"?o=Dg:typeof this.value=="function"&&(o=Ng),this.value.constructor===RegExp&&(o=Fg);var a=this.keyName&&this.value&&(Array.isArray(this.value)||ti(this.value)==="object"&&Object.prototype.toString.call(this.value)!=="[object Date]");return!this.previewMode&&a&&n.push(rt("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),this.keyName&&n.push(rt("span",{class:{"jv-key":!0},onClick:function(){t.keyClick(t.keyName)},innerText:"".concat(this.keyName,":")})),n.push(rt(o,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,"onUpdate:expand":function(i){t.expand=i}})),rt("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!a,toggle:!this.previewMode&&a}},n)}};ni.__file="src/Components/json-box.vue";var o7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bg={exports:{}};(function(e,t){(function(o,a){e.exports=a()})(o7,function(){return function(){var n={686:function(l,i,r){r.d(i,{default:function(){return ke}});var u=r(279),p=r.n(u),d=r(370),c=r.n(d),v=r(817),m=r.n(v);function y(ie){try{return document.execCommand(ie)}catch{return!1}}var S=function(ge){var de=m()(ge);return y("cut"),de},$=S;function T(ie){var ge=document.documentElement.getAttribute("dir")==="rtl",de=document.createElement("textarea");de.style.fontSize="12pt",de.style.border="0",de.style.padding="0",de.style.margin="0",de.style.position="absolute",de.style[ge?"right":"left"]="-9999px";var ae=window.pageYOffset||document.documentElement.scrollTop;return de.style.top="".concat(ae,"px"),de.setAttribute("readonly",""),de.value=ie,de}var D=function(ge,de){var ae=T(ge);de.container.appendChild(ae);var G=m()(ae);return y("copy"),ae.remove(),G},J=function(ge){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ae="";return typeof ge=="string"?ae=D(ge,de):ge instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ge==null?void 0:ge.type)?ae=D(ge.value,de):(ae=m()(ge),y("copy")),ae},x=J;function N(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(de){return typeof de}:N=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},N(ie)}var H=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=ge.action,ae=de===void 0?"copy":de,G=ge.container,A=ge.target,B=ge.text;if(ae!=="copy"&&ae!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(A!==void 0)if(A&&N(A)==="object"&&A.nodeType===1){if(ae==="copy"&&A.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ae==="cut"&&(A.hasAttribute("readonly")||A.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(B)return x(B,{container:G});if(A)return ae==="cut"?$(A):x(A,{container:G})},j=H;function K(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K=function(de){return typeof de}:K=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},K(ie)}function X(ie,ge){if(!(ie instanceof ge))throw new TypeError("Cannot call a class as a function")}function _e(ie,ge){for(var de=0;de<ge.length;de++){var ae=ge[de];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ie,ae.key,ae)}}function le(ie,ge,de){return ge&&_e(ie.prototype,ge),de&&_e(ie,de),ie}function P(ie,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),ge&&Z(ie,ge)}function Z(ie,ge){return Z=Object.setPrototypeOf||function(ae,G){return ae.__proto__=G,ae},Z(ie,ge)}function te(ie){var ge=oe();return function(){var ae=F(ie),G;if(ge){var A=F(this).constructor;G=Reflect.construct(ae,arguments,A)}else G=ae.apply(this,arguments);return z(this,G)}}function z(ie,ge){return ge&&(K(ge)==="object"||typeof ge=="function")?ge:ne(ie)}function ne(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(ie){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},F(ie)}function U(ie,ge){var de="data-clipboard-".concat(ie);if(ge.hasAttribute(de))return ge.getAttribute(de)}var ue=function(ie){P(de,ie);var ge=te(de);function de(ae,G){var A;return X(this,de),A=ge.call(this),A.resolveOptions(G),A.listenClick(ae),A}return le(de,[{key:"resolveOptions",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof G.action=="function"?G.action:this.defaultAction,this.target=typeof G.target=="function"?G.target:this.defaultTarget,this.text=typeof G.text=="function"?G.text:this.defaultText,this.container=K(G.container)==="object"?G.container:document.body}},{key:"listenClick",value:function(G){var A=this;this.listener=c()(G,"click",function(B){return A.onClick(B)})}},{key:"onClick",value:function(G){var A=G.delegateTarget||G.currentTarget,B=this.action(A)||"copy",V=j({action:B,container:this.container,target:this.target(A),text:this.text(A)});this.emit(V?"success":"error",{action:B,text:V,trigger:A,clearSelection:function(){A&&A.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(G){return U("action",G)}},{key:"defaultTarget",value:function(G){var A=U("target",G);if(A)return document.querySelector(A)}},{key:"defaultText",value:function(G){return U("text",G)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(G){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(G,A)}},{key:"cut",value:function(G){return $(G)}},{key:"isSupported",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],A=typeof G=="string"?[G]:G,B=!!document.queryCommandSupported;return A.forEach(function(V){B=B&&!!document.queryCommandSupported(V)}),B}}]),de}(p()),ke=ue},828:function(l){var i=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(p,d){for(;p&&p.nodeType!==i;){if(typeof p.matches=="function"&&p.matches(d))return p;p=p.parentNode}}l.exports=u},438:function(l,i,r){var u=r(828);function p(v,m,y,S,$){var T=c.apply(this,arguments);return v.addEventListener(y,T,$),{destroy:function(){v.removeEventListener(y,T,$)}}}function d(v,m,y,S,$){return typeof v.addEventListener=="function"?p.apply(null,arguments):typeof y=="function"?p.bind(null,document).apply(null,arguments):(typeof v=="string"&&(v=document.querySelectorAll(v)),Array.prototype.map.call(v,function(T){return p(T,m,y,S,$)}))}function c(v,m,y,S){return function($){$.delegateTarget=u($.target,m),$.delegateTarget&&S.call(v,$)}}l.exports=d},879:function(l,i){i.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},i.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||i.node(r[0]))},i.string=function(r){return typeof r=="string"||r instanceof String},i.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}},370:function(l,i,r){var u=r(879),p=r(438);function d(y,S,$){if(!y&&!S&&!$)throw new Error("Missing required arguments");if(!u.string(S))throw new TypeError("Second argument must be a String");if(!u.fn($))throw new TypeError("Third argument must be a Function");if(u.node(y))return c(y,S,$);if(u.nodeList(y))return v(y,S,$);if(u.string(y))return m(y,S,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(y,S,$){return y.addEventListener(S,$),{destroy:function(){y.removeEventListener(S,$)}}}function v(y,S,$){return Array.prototype.forEach.call(y,function(T){T.addEventListener(S,$)}),{destroy:function(){Array.prototype.forEach.call(y,function(T){T.removeEventListener(S,$)})}}}function m(y,S,$){return p(document.body,y,S,$)}l.exports=d},817:function(l){function i(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var p=r.hasAttribute("readonly");p||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),p||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var d=window.getSelection(),c=document.createRange();c.selectNodeContents(r),d.removeAllRanges(),d.addRange(c),u=d.toString()}return u}l.exports=i},279:function(l){function i(){}i.prototype={on:function(r,u,p){var d=this.e||(this.e={});return(d[r]||(d[r]=[])).push({fn:u,ctx:p}),this},once:function(r,u,p){var d=this;function c(){d.off(r,c),u.apply(p,arguments)}return c._=u,this.on(r,c,p)},emit:function(r){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[r]||[]).slice(),d=0,c=p.length;for(d;d<c;d++)p[d].fn.apply(p[d].ctx,u);return this},off:function(r,u){var p=this.e||(this.e={}),d=p[r],c=[];if(d&&u)for(var v=0,m=d.length;v<m;v++)d[v].fn!==u&&d[v].fn._!==u&&c.push(d[v]);return c.length?p[r]=c:delete p[r],this}},l.exports=i,l.exports.TinyEmitter=i}},o={};function a(l){if(o[l])return o[l].exports;var i=o[l]={exports:{}};return n[l](i,i.exports,a),i.exports}return function(){a.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(i,{a:i}),i}}(),function(){a.d=function(l,i){for(var r in i)a.o(i,r)&&!a.o(l,r)&&Object.defineProperty(l,r,{enumerable:!0,get:i[r]})}}(),function(){a.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)}}(),a(686)}().default})})(Bg);var l7=a7(Bg.exports),s7=function(t,n){var o=Date.now(),a;return function(){for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];Date.now()-o<n&&a&&clearTimeout(a),a=setTimeout(function(){t.apply(void 0,i)},n),o=Date.now()}},ru={name:"JsonViewer",components:{JsonBox:ni},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:function(t){return t.toLocaleString()}},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},provide:function(){return{expandDepth:this.expandDepth,timeformat:this.timeformat,keyClick:this.keyClick}},data:function(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},emits:["onKeyClick"],computed:{jvClass:function(){return"jv-container jv-"+this.theme+(this.boxed?" boxed":"")},copyText:function(){var t=this.copyable,n=t.copyText,o=t.copiedText,a=t.timeout,l=t.align;return{copyText:n||"copy",copiedText:o||"copied!",timeout:a||2e3,align:l}},parseValue:function(){if(!this.parse||typeof this.value!="string")return this.value;try{return JSON.parse(this.value)}catch{return this.value}}},watch:{value:function(){this.onResized()}},mounted:function(){var t=this;if(this.debounceResized=s7(this.debResized.bind(this),200),this.boxed&&this.$refs.jsonBox&&(this.onResized(),this.$refs.jsonBox.$el.addEventListener("resized",this.onResized,!0)),this.copyable){var n=new l7(this.$refs.clip,{text:function(){return JSON.stringify(t.value,null,2)}});n.on("success",function(o){t.onCopied(o)})}},methods:{onResized:function(){this.debounceResized()},debResized:function(){var t=this;this.$nextTick(function(){t.$refs.jsonBox&&(t.$refs.jsonBox.$el.clientHeight>=250?t.expandableCode=!0:t.expandableCode=!1)})},keyClick:function(t){this.$emit("onKeyClick",t)},onCopied:function(t){var n=this;this.copied||(this.copied=!0,setTimeout(function(){n.copied=!1},this.copyText.timeout),this.$emit("copied",t))},toggleExpandCode:function(){this.expandCode=!this.expandCode}}};function i7(e,t,n,o,a,l){var i=E1("json-box");return b(),C("div",{class:Le(l.jvClass)},[n.copyable?(b(),C("div",{key:0,class:Le("jv-tooltip ".concat(l.copyText.align||"right"))},[s("span",{ref:"clip",class:Le(["jv-button",{copied:a.copied}])},[ol(e.$slots,"copy",{copied:a.copied},function(){return[je(g(a.copied?l.copyText.copiedText:l.copyText.copyText),1)]})],2)],2)):re("v-if",!0),s("div",{class:Le(["jv-code",{open:a.expandCode,boxed:n.boxed}])},[Ue(i,{ref:"jsonBox",value:l.parseValue,sort:n.sort,"preview-mode":n.previewMode},null,8,["value","sort","preview-mode"])],2),a.expandableCode&&n.boxed?(b(),C("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=function(){return l.toggleExpandCode&&l.toggleExpandCode.apply(l,arguments)})},[s("span",{class:Le(["jv-toggle",{open:!!a.expandCode}])},null,2)])):re("v-if",!0)],2)}ru.render=i7,ru.__file="src/Components/json-viewer.vue";const r7={class:"lora-raw__content"},Ug="weilin_tools_",u7=_t({__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h({}),l=h(!1),i={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u=h((()=>{try{const m=localStorage.getItem(`${Ug}loraRawState`);if(m){const y=JSON.parse(m),S={...i};return y.loraRaw&&(S.loraRaw={...i.loraRaw,...y.loraRaw}),S}}catch(m){console.error("Error loading window states:",m)}return{...i}})());ot(u,m=>{try{localStorage.setItem(`${Ug}loraRawState`,JSON.stringify(m))}catch(y){console.error("Error saving window states:",y)}},{deep:!0}),mt(()=>{Be.registerWindow("loraRaw")}),In(()=>{Be.unregisterWindow("loraRaw")});const p=m=>{l.value=!1},d=(m,y)=>{u.value[m]&&(u.value[m].position={...y})},c=(m,y)=>{u.value[m]&&(u.value[m].size={...y})};return t({open:m=>{l.value=!0,Be.setActiveWindow("loraRaw"),a.value=m}}),(m,y)=>l.value?(b(),wt(kn,{key:0,title:f(o)("lora.rawTitle"),position:u.value.loraRaw.position,size:u.value.loraRaw.size,"z-index":f(Be).getZIndex("loraRaw"),"onUpdate:position":y[0]||(y[0]=S=>d("loraRaw",S)),"onUpdate:size":y[1]||(y[1]=S=>c("loraRaw",S)),onActive:y[2]||(y[2]=S=>f(Be).setActiveWindow("loraRaw")),onClose:y[3]||(y[3]=S=>p())},{default:it(()=>[s("div",r7,[Ue(f(ru),{value:a.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):re("",!0)}},[["__scopeId","data-v-378f8ede"]]),c7={key:0,class:"lora-detail__loading"},d7={class:"lora-detail__body"},p7={class:"lora-detail__tags"},f7=["title"],g7=["title"],m7={class:"lora-detail__table"},v7={class:"label"},h7={colspan:"2"},_7={colspan:"3"},y7={class:"label"},b7={colspan:"2",class:"hash"},w7={class:"label"},x7={colspan:"2"},S7=["href"],T7={key:1,class:"not-found"},k7=["title"],C7={class:"label"},E7=["title"],$7={key:1,class:"text"},L7={class:"actions"},A7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},M7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},I7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},D7={class:"label"},R7={colspan:"2"},O7={class:"label"},N7={colspan:"2"},P7={class:"label"},F7=["title"],B7=["onUpdate:modelValue","type","onKeyup"],U7={key:1,class:"text"},V7={class:"actions"},W7=["onClick","title"],z7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},H7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},j7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},G7={class:"label"},q7=["onUpdate:modelValue"],K7={key:1},Y7=["onUpdate:modelValue","type","onKeyup"],J7={key:1,class:"text"},X7={class:"actions"},Q7=["onClick","title"],Z7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},e9={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},t9={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},n9=["onClick","title"],o9={class:"field-management"},a9=["title"],l9={key:0},s9={class:"label"},i9=["title"],r9={key:0,class:"word-selection"},u9={colspan:"2"},c9={class:"word-list"},d9=["onClick"],p9={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},f9={key:1},g9={key:0,class:"lora-detail__images"},m9={class:"image-wrapper"},v9=["onClick"],h9=["src"],_9={class:"image-info"},y9={key:0,class:"info-item"},b9=["href"],w9={key:1,class:"info-item"},x9={key:2,class:"info-item"},S9={key:3,class:"info-item"},T9={key:4,class:"info-item"},k9={key:5,class:"info-item"},C9={key:6,class:"info-item"},E9={key:7,class:"info-item"},Vg="weilin_tools_",oi=_t({__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h({}),i=h(!1),r=h(),u=h({}),p={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c=h((()=>{try{const A=localStorage.getItem(`${Vg}loraDetailState`);if(A){const B=JSON.parse(A),V={...p};return B.loraDetail&&(V.loraDetail={...p.loraDetail,...B.loraDetail}),V}}catch(A){console.error("Error loading window states:",A)}return{...p}})());ot(c,A=>{try{localStorage.setItem(`${Vg}loraDetailState`,JSON.stringify(A))}catch(B){console.error("Error saving window states:",B)}},{deep:!0}),mt(()=>{Be.registerWindow("loraDetail")}),In(()=>{Be.unregisterWindow("loraDetail")});const v=A=>{i.value=!1},m=(A,B)=>{c.value[A]&&(c.value[A].position={...B})},y=(A,B)=>{c.value[A]&&(c.value[A].size={...B})};t({open:A=>{i.value=!0,Be.setActiveWindow("loraDetail"),a.value=!0,l.value=A,qe(()=>{X()})}});const $=h(""),T=h(),D=A=>{T.value.open(A)},J=h({}),x=h({}),N=h([]),H=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}],j=()=>{const A=`custom_${Date.now()}`;l.value.user_diy_fileds||(l.value.user_diy_fileds={}),u.value[A]={label:"",type:"text"},l.value.user_diy_fileds[A]={label:"",value:""},x.value[A]="",F(A)},K=async A=>{var B,V;delete u.value[A],delete x.value[A],(V=(B=l.value)==null?void 0:B.user_diy_fileds)!=null&&V[A]&&delete l.value.user_diy_fileds[A],await qe(async()=>{await ke(A)})},X=()=>{$.value=l.value.name,l.value={},N.value=[],x.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},En.getLoraDetail({file:$.value,refresh:!1,light:!1}).then(A=>{l.value=A.data,qe(function(){var B,V,I,W,k,w;l.value.name=l.value.name||((V=(B=l.value.raw)===null||B===void 0?void 0:B.metadata)===null||V===void 0?void 0:V.ss_output_name===void 0?V["modelspec.title"]:V.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(I=l.value.strengthMin)!==null&&I!==void 0?I:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(W=l.value.strengthMax)!==null&&W!==void 0?W:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(k=l.value.userNote)!==null&&k!==void 0?k:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(w=l.value.loraWorks)!==null&&w!==void 0?w:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1})}).catch(A=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},_e=A=>{let V=new URL(A).pathname.split("/").pop();return V=V.split("?")[0],decodeURIComponent(V)},le=async A=>{try{const B=await fetch(A),V=_e(A),I=await B.blob();En.postUplaodImg(I,l.value.file,V).then(W=>{Y({type:"success",str:"message.saveSuccess"})}).catch(W=>{Y({type:"warn",str:"message.unknownError"})})}catch{Y({type:"warn",str:"message.unknownError"})}},P=vt(()=>{var A;return(A=l.value.links)==null?void 0:A.find(B=>B.includes("civitai.com/models"))}),Z=vt(()=>{var A,B;return((B=(A=l.value.raw)==null?void 0:A.civitai)==null?void 0:B.error)==="Model not found"}),te=vt(()=>l.value.trainedWords||[]),z=async()=>{var B;const A=((B=r.value)==null?void 0:B.scrollTop)||0;a.value=!0,En.getLoraRefresh({file:$.value}).then(V=>{l.value=V.data,qe(function(){var I,W,k,w,O,Q;l.value.name=l.value.name||((W=(I=l.value.raw)===null||I===void 0?void 0:I.metadata)===null||W===void 0?void 0:W.ss_output_name===void 0?W["modelspec.title"]:W.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(k=l.value.strengthMin)!==null&&k!==void 0?k:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(w=l.value.strengthMax)!==null&&w!==void 0?w:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(O=l.value.userNote)!==null&&O!==void 0?O:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(Q=l.value.loraWorks)!==null&&Q!==void 0?Q:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1}),qe(function(){a.value=!1}),r.value&&(r.value.scrollTop=A),Y({type:"success",str:"message.dataLoaded"})}).catch(V=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},ne=A=>{J.value[A]?F(A):oe(A)},oe=A=>{var B,V;J.value[A]=!0,A in u.value?x.value[A]=((V=(B=l.value.user_diy_fileds)==null?void 0:B[A])==null?void 0:V.value)||"":x.value[A]=l.value[A],qe(()=>{A==="name"&&nameInput.value&&nameInput.value.focus()})},F=A=>{A in u.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[A]={label:u.value[A].label,value:x.value[A]}):l.value[A]=x.value[A],ue(l.value),J.value[A]=!1},U=A=>{J.value[A]=!1,x.value[A]=l.value[A]},ue=A=>{var V;const B=((V=r.value)==null?void 0:V.scrollTop)||0;a.value=!0,En.postLoraSave($.value,A).then(I=>{l.value=I.data,qe(function(){var W,k,w,O,Q,pe;l.value.name=l.value.name||((k=(W=l.value.raw)===null||W===void 0?void 0:W.metadata)===null||k===void 0?void 0:k.ss_output_name===void 0?k["modelspec.title"]:k.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(w=l.value.strengthMin)!==null&&w!==void 0?w:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(O=l.value.strengthMax)!==null&&O!==void 0?O:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(pe=l.value.loraWorks)!==null&&pe!==void 0?pe:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,qe(function(){r.value&&(r.value.scrollTop=B)})}),Y({type:"success",str:"message.saveSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},ke=async A=>{var V;const B=((V=r.value)==null?void 0:V.scrollTop)||0;a.value=!0,await En.postLoraDelet($.value,A).then(I=>{l.value=I.data,qe(function(){var W,k,w,O,Q,pe;l.value.name=l.value.name||((k=(W=l.value.raw)===null||W===void 0?void 0:W.metadata)===null||k===void 0?void 0:k.ss_output_name===void 0?k["modelspec.title"]:k.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(w=l.value.strengthMin)!==null&&w!==void 0?w:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(O=l.value.strengthMax)!==null&&O!==void 0?O:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(pe=l.value.loraWorks)!==null&&pe!==void 0?pe:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,qe(function(){r.value&&(r.value.scrollTop=B)})}),Y({type:"success",str:"message.deleteSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},ie=A=>{const B=N.value.indexOf(A);B===-1?N.value.push(A):N.value.splice(B,1)},ge=A=>N.value.includes(A),de=async()=>{N.value.length&&navigator.clipboard.writeText(N.value).then(A=>{Y({type:"success",str:"message.copySuccess"})},A=>{Y({type:"warn",str:"message.copyFailed"})})};h(!1),h(!1),vt(()=>a.value?o("common.loading"):o("common.ready"));const ae=h(!0),G=()=>{ae.value=!ae.value};return(A,B)=>(b(),C(Ie,null,[i.value?(b(),wt(kn,{key:0,title:f(o)("lora.title"),position:c.value.loraDetail.position,size:c.value.loraDetail.size,"z-index":f(Be).getZIndex("loraDetail"),"onUpdate:position":B[5]||(B[5]=V=>m("loraDetail",V)),"onUpdate:size":B[6]||(B[6]=V=>y("loraDetail",V)),onActive:B[7]||(B[7]=V=>f(Be).setActiveWindow("loraDetail")),onClose:B[8]||(B[8]=V=>v())},{default:it(()=>{var V;return[s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:r},[a.value?(b(),C("div",c7,B[9]||(B[9]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):re("",!0),s("div",d7,[B[24]||(B[24]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",p7,[l.value.type?(b(),C("li",{key:0,class:Le(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,f7)):re("",!0),l.value.baseModel?(b(),C("li",{key:1,class:Le(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,g7)):re("",!0)]),s("table",m7,[s("tbody",null,[s("tr",null,[s("td",v7,g(f(o)("lora.file")),1),s("td",h7,g(l.value.file),1),s("td",_7,[s("button",{class:"fetch-btn",onClick:B[0]||(B[0]=I=>D(l.value.raw.metadata))},g(f(o)("lora.seeLoraRaw")),1)])]),s("tr",null,[s("td",y7,g(f(o)("lora.hash")),1),s("td",b7,g(l.value.sha256),1)]),s("tr",null,[s("td",w7,g(f(o)("lora.civitai")),1),s("td",x7,[P.value?(b(),C(Ie,{key:0},[s("a",{href:P.value,target:"_blank",class:"civitai-link"},[B[10]||(B[10]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,S7),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:z},g(f(o)("lora.getCivitData")),1)],64)):Z.value?(b(),C("div",T7,[s("i",null,g(f(o)("lora.modelNotFound")),1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},B[11]||(B[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,k7))])):(b(),C("button",{key:2,class:"fetch-btn",onClick:z},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:Le({"is-editing":J.value.name})},[s("td",C7,[je(g(f(o)("lora.name"))+" ",1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},B[12]||(B[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,E7))]),s("td",null,[J.value.name?ve((b(),C("input",{key:0,"onUpdate:modelValue":B[1]||(B[1]=I=>x.value.name=I),type:"text",onKeyup:[B[2]||(B[2]=an(I=>F("name"),["enter"])),B[3]||(B[3]=an(I=>U("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,x.value.name]]):(b(),C("span",$7,g(l.value.name),1))]),s("td",L7,[s("button",{class:"edit-btn",onClick:B[4]||(B[4]=I=>ne("name"))},[(b(),C("svg",A7,[J.value.name?(b(),C("path",M7)):(b(),C("path",I7))]))])])],2),s("tr",null,[s("td",D7,g(f(o)("lora.baseModel")),1),s("td",R7,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                    (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",O7,g(f(o)("lora.skipClip")),1),s("td",N7,g((A._t=(A._s=l.value.raw)===null||A._s===void 0?void 0:A._s.metadata)===null||A._t===void 0?void 0:A._t.ss_clip_skip),1)]),(b(),C(Ie,null,ze(H,I=>s("tr",{key:I.key,class:Le({"is-editing":J.value[I.key]})},[s("td",P7,[je(g(I.label)+" ",1),I.tip?(b(),C("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:I.tip},B[13]||(B[13]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,F7)):re("",!0)]),s("td",null,[J.value[I.key]?ve((b(),C("input",{key:0,"onUpdate:modelValue":W=>x.value[I.key]=W,type:I.type||"text",onKeyup:[an(W=>F(I.key),["enter"]),an(W=>U(I.key),["esc"])]},null,40,B7)),[[Dd,x.value[I.key]]]):(b(),C("span",U7,g(l.value[I.key]),1))]),s("td",V7,[s("button",{class:"edit-btn",onClick:W=>ne(I.key),title:f(o)("promptBox.settings.edit")},[(b(),C("svg",z7,[J.value[I.key]?(b(),C("path",H7)):(b(),C("path",j7))]))],8,W7)])],2)),64)),(b(!0),C(Ie,null,ze(u.value,(I,W)=>{var k;return b(),C("tr",{key:W,class:Le({"is-editing":J.value[W]})},[s("td",G7,[J.value[W]?ve((b(),C("input",{key:0,"onUpdate:modelValue":w=>I.label=w,type:"text"},null,8,q7)),[[Ae,I.label]]):(b(),C("span",K7,g(I.label),1))]),s("td",null,[J.value[W]?ve((b(),C("input",{key:0,"onUpdate:modelValue":w=>x.value[W]=w,type:I.type||"text",onKeyup:[an(w=>F(W),["enter"]),an(w=>U(W),["esc"])]},null,40,Y7)),[[Dd,x.value[W]]]):(b(),C("span",J7,g(l.value.user_diy_fileds?(k=l.value.user_diy_fileds[W])==null?void 0:k.value:""),1))]),s("td",X7,[s("button",{class:"edit-btn",onClick:w=>ne(W),title:f(o)("promptBox.settings.edit")},[(b(),C("svg",Z7,[J.value[W]?(b(),C("path",e9)):(b(),C("path",t9))]))],8,Q7),s("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:w=>K(W),class:"edit-btn",title:f(o)("promptBox.settings.delete")},g(f(o)("promptBox.settings.delete")),9,n9)])],2)}),128)),s("div",o9,[s("button",{onClick:j,class:"add-btn",title:f(o)("lora.addDiyFiled")},g(f(o)("lora.addDiyFiled")),9,a9)]),te.value.length?(b(),C("tr",l9,[s("td",s9,[je(g(f(o)("lora.trainedWords"))+" ",1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},B[14]||(B[14]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,i9)),N.value.length?(b(),C("div",r9,[je(g(f(o)("lora.selectedWords",{count:N.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:de},g(f(o)("common.copy")),1)])):re("",!0)]),s("td",u9,[s("ul",c9,[(b(!0),C(Ie,null,ze(ae.value?te.value.slice(0,10):te.value,(I,W)=>(b(),C("li",{key:"words-"+W,class:Le(["word-item",{"is-selected":ge(I.word),"is-hidden":ae.value&&W>=10}]),onClick:k=>ie(I.word)},[s("span",null,g(I.word),1),I.civitai?(b(),C("svg",p9,B[15]||(B[15]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):re("",!0),I.count!=null?(b(),C("small",f9,g(I.count),1)):re("",!0)],10,d9))),128)),te.value.length>10?(b(),C("li",{key:0,class:"toggle-btn",onClick:G},g(ae.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):re("",!0)])])])):re("",!0)])]),(V=l.value.images)!=null&&V.length?(b(),C("ul",g9,[(b(!0),C(Ie,null,ze(l.value.images,(I,W)=>(b(),C("li",{key:W,class:"lora-detail__image-item"},[s("figure",null,[s("div",m9,[s("div",{class:"image-action",onClick:k=>le(I.url)}," Lora ",8,v9),s("img",{src:I.url},null,8,h9)]),s("figcaption",_9,[I.civitaiUrl?(b(),C("span",y9,[s("a",{href:I.civitaiUrl,target:"_blank",class:"civitai-link"},B[16]||(B[16]=[je(" C civitai "),s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)]),8,b9)])):re("",!0),I.seed?(b(),C("span",w9,[B[17]||(B[17]=s("label",null," seed",-1)),je(" "+g(I.seed),1)])):re("",!0),I.steps?(b(),C("span",x9,[B[18]||(B[18]=s("label",null," steps",-1)),je(" "+g(I.steps),1)])):re("",!0),I.cfg?(b(),C("span",S9,[B[19]||(B[19]=s("label",null," cfg",-1)),je(" "+g(I.cfg),1)])):re("",!0),I.sampler?(b(),C("span",T9,[B[20]||(B[20]=s("label",null," sampler",-1)),je(" "+g(I.sampler),1)])):re("",!0),I.model?(b(),C("span",k9,[B[21]||(B[21]=s("label",null," model",-1)),je(" "+g(I.model),1)])):re("",!0),I.positive?(b(),C("span",C9,[B[22]||(B[22]=s("label",null," positive",-1)),je(" "+g(I.positive),1)])):re("",!0),I.negative?(b(),C("span",E9,[B[23]||(B[23]=s("label",null," negative",-1)),je(" "+g(I.negative),1)])):re("",!0)])])]))),128))])):re("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):re("",!0),Ue(u7,{ref_key:"loraRawRef",ref:T},null,512)],64))}},[["__scopeId","data-v-1b0da0a7"]]),$9={key:0,class:"lora-detail__loading"},L9={class:"lora-detail__body"},A9={class:"lora-detail__tags"},M9=["title"],I9=["title"],D9={class:"lora-detail__table"},R9={class:"label"},O9={colspan:"2"},N9={class:"label"},P9={colspan:"2",class:"hash"},F9={class:"label"},B9={colspan:"2"},U9=["href"],V9={key:1,class:"not-found"},W9=["title"],z9={class:"label"},H9=["title"],j9={key:1,class:"text"},G9={class:"label"},q9={colspan:"2"},K9={class:"label"},Y9={colspan:"2"},J9={class:"label"},X9=["title"],Q9={class:"text"},Z9={class:"actions"},ex=["onClick","title"],tx={class:"label"},nx=["onUpdate:modelValue"],ox={key:1},ax={class:"text"},lx={class:"actions"},sx=["onClick","title"],ix={key:0},rx={class:"label"},ux=["title"],cx={key:0,class:"word-selection"},dx={colspan:"2"},px={class:"word-list"},fx=["onClick"],gx={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},mx={key:1},vx={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},hx={class:"image-wrapper",style:{height:"200px"}},_x=["src"],uu=_t({__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h({}),i=h(),r=h({}),u=e,p=h(""),d=n,c=()=>{d("cardLeave")},v=()=>{d("cardenter")},m=h({}),y=h({}),S=h([]),$=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}];mt(()=>{T()});const T=()=>{p.value=u.fileNmae,l.value={},S.value=[],y.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},En.getLoraDetail({file:p.value,refresh:!1,light:!1}).then(ne=>{l.value=ne.data,qe(function(){var oe,F,U,ue,ke,ie;l.value.name=l.value.name||((F=(oe=l.value.raw)===null||oe===void 0?void 0:oe.metadata)===null||F===void 0?void 0:F.ss_output_name===void 0?F["modelspec.title"]:F.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(U=l.value.strengthMin)!==null&&U!==void 0?U:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(ue=l.value.strengthMax)!==null&&ue!==void 0?ue:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(ke=l.value.userNote)!==null&&ke!==void 0?ke:"",y.value.notesValue=l.value.userNote,l.value.loraWorks=(ie=l.value.loraWorks)!==null&&ie!==void 0?ie:"",y.value.loraWorksValue=l.value.loraWorks,r.value=l.value.user_diy_fileds,a.value=!1})}).catch(ne=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},D=ne=>{navigator.clipboard.writeText(ne).then(()=>{Y({type:"success",str:""})}).catch(oe=>{Y({type:"error",str:""})})},J=vt(()=>{var ne;return(ne=l.value.links)==null?void 0:ne.find(oe=>oe.includes("civitai.com/models"))}),x=vt(()=>{var ne,oe;return((oe=(ne=l.value.raw)==null?void 0:ne.civitai)==null?void 0:oe.error)==="Model not found"}),N=vt(()=>l.value.trainedWords||[]),H=async()=>{var oe;const ne=((oe=i.value)==null?void 0:oe.scrollTop)||0;a.value=!0,En.getLoraRefresh({file:p.value}).then(F=>{l.value=F.data,qe(function(){var U,ue,ke,ie,ge;l.value.name=l.value.name||((ue=(U=l.value.raw)===null||U===void 0?void 0:U.metadata)===null||ue===void 0?void 0:ue.ss_output_name===void 0?ue["modelspec.title"]:ue.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(ke=l.value.strengthMin)!==null&&ke!==void 0?ke:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(ie=l.value.strengthMax)!==null&&ie!==void 0?ie:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(ge=l.value.userNote)!==null&&ge!==void 0?ge:"",y.value.notesValue=l.value.userNote,a.value=!1}),qe(function(){a.value=!1}),i.value&&(i.value.scrollTop=ne),Y({type:"success",str:"message.dataLoaded"})}).catch(F=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},j=ne=>{ne in r.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[ne]={label:r.value[ne].label,value:y.value[ne]}):l.value[ne]=y.value[ne],X(l.value),m.value[ne]=!1},K=ne=>{m.value[ne]=!1,y.value[ne]=l.value[ne]},X=ne=>{var F;const oe=((F=i.value)==null?void 0:F.scrollTop)||0;a.value=!0,En.postLoraSave(p.value,ne).then(U=>{l.value=U.data,qe(function(){var ue,ke,ie,ge,de;l.value.name=l.value.name||((ke=(ue=l.value.raw)===null||ue===void 0?void 0:ue.metadata)===null||ke===void 0?void 0:ke.ss_output_name===void 0?ke["modelspec.title"]:ke.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(ie=l.value.strengthMin)!==null&&ie!==void 0?ie:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(ge=l.value.strengthMax)!==null&&ge!==void 0?ge:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(de=l.value.userNote)!==null&&de!==void 0?de:"",y.value.notesValue=l.value.userNote,a.value=!1,qe(function(){i.value&&(i.value.scrollTop=oe)})}),Y({type:"success",str:"message.saveSuccess"})}).catch(U=>{Y({type:"warn",str:"message.networkError"}),a.value=!1})},_e=ne=>{const oe=S.value.indexOf(ne);oe===-1?S.value.push(ne):S.value.splice(oe,1)},le=ne=>S.value.includes(ne),P=async()=>{S.value.length&&navigator.clipboard.writeText(S.value).then(ne=>{Y({type:"success",str:"message.copySuccess"})},ne=>{Y({type:"warn",str:"message.copyFailed"})})},Z=h(!0),te=()=>{Z.value=!Z.value};return t({refresh:()=>{T()}}),(ne,oe)=>{var F;return b(),C("div",{class:"lora_catd_content",style:ct(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:v,onMouseleave:c},[s("div",{class:"close-button",onClick:c,title:""},oe[3]||(oe[3]=[s("span",null,"",-1)])),s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:i},[a.value?(b(),C("div",$9,oe[4]||(oe[4]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):re("",!0),s("div",L9,[oe[13]||(oe[13]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",A9,[l.value.type?(b(),C("li",{key:0,class:Le(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,M9)):re("",!0),l.value.baseModel?(b(),C("li",{key:1,class:Le(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,I9)):re("",!0)]),s("table",D9,[s("tbody",null,[s("tr",null,[s("td",R9,g(f(o)("lora.file")),1),s("td",O9,g(l.value.file),1)]),s("tr",null,[s("td",N9,g(f(o)("lora.hash")),1),s("td",P9,g(l.value.sha256),1)]),s("tr",null,[s("td",F9,g(f(o)("lora.civitai")),1),s("td",B9,[J.value?(b(),C(Ie,{key:0},[s("a",{href:J.value,target:"_blank",class:"civitai-link"},[oe[5]||(oe[5]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,U9),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:H},g(f(o)("lora.getCivitData")),1)],64)):x.value?(b(),C("div",V9,[s("i",null,g(f(o)("lora.modelNotFound")),1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},oe[6]||(oe[6]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,W9))])):(b(),C("button",{key:2,class:"fetch-btn",onClick:H},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:Le({"is-editing":m.value.name})},[s("td",z9,[je(g(f(o)("lora.name"))+" ",1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},oe[7]||(oe[7]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,H9))]),s("td",null,[m.value.name?ve((b(),C("input",{key:0,"onUpdate:modelValue":oe[0]||(oe[0]=U=>y.value.name=U),type:"text",onKeyup:[oe[1]||(oe[1]=an(U=>j("name"),["enter"])),oe[2]||(oe[2]=an(U=>K("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,y.value.name]]):(b(),C("span",j9,g(l.value.name),1))])],2),s("tr",null,[s("td",G9,g(f(o)("lora.baseModel")),1),s("td",q9,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",K9,g(f(o)("lora.skipClip")),1),s("td",Y9,g((ne._t=(ne._s=l.value.raw)===null||ne._s===void 0?void 0:ne._s.metadata)===null||ne._t===void 0?void 0:ne._t.ss_clip_skip),1)]),(b(),C(Ie,null,ze($,U=>s("tr",{key:U.key,class:Le({"is-editing":m.value[U.key]})},[s("td",J9,[je(g(U.label)+" ",1),U.tip?(b(),C("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:U.tip},oe[8]||(oe[8]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,X9)):re("",!0)]),s("td",null,[s("span",Q9,g(l.value[U.key]),1)]),s("td",Z9,[s("button",{class:"copy-btn",onClick:ue=>D(l.value[U.key]),title:f(o)("lora.copy")},[oe[9]||(oe[9]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,ex)])],2)),64)),(b(!0),C(Ie,null,ze(r.value,(U,ue)=>{var ke;return b(),C("tr",{key:ue,class:Le({"is-editing":m.value[ue]})},[s("td",tx,[m.value[ue]?ve((b(),C("input",{key:0,"onUpdate:modelValue":ie=>U.label=ie,type:"text"},null,8,nx)),[[Ae,U.label]]):(b(),C("span",ox,g(U.label),1))]),s("td",null,[s("span",ax,g(l.value.user_diy_fileds?(ke=l.value.user_diy_fileds[ue])==null?void 0:ke.value:""),1)]),s("td",lx,[s("button",{class:"copy-btn",onClick:ie=>{var ge;return D((ge=l.value.user_diy_fileds[ue])==null?void 0:ge.value)},title:f(o)("lora.copy")},[oe[10]||(oe[10]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,sx)])],2)}),128)),N.value.length?(b(),C("tr",ix,[s("td",rx,[je(g(f(o)("lora.trainedWords"))+" ",1),(b(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},oe[11]||(oe[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,ux)),S.value.length?(b(),C("div",cx,[je(g(f(o)("lora.selectedWords",{count:S.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:P},g(f(o)("common.copy")),1)])):re("",!0)]),s("td",dx,[s("ul",px,[(b(!0),C(Ie,null,ze(Z.value?N.value.slice(0,10):N.value,(U,ue)=>(b(),C("li",{key:"words-"+ue,class:Le(["word-item",{"is-selected":le(U.word),"is-hidden":Z.value&&ue>=10}]),onClick:ke=>_e(U.word)},[s("span",null,g(U.word),1),U.civitai?(b(),C("svg",gx,oe[12]||(oe[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):re("",!0),U.count!=null?(b(),C("small",mx,g(U.count),1)):re("",!0)],10,fx))),128)),N.value.length>10?(b(),C("li",{key:0,class:"toggle-btn",onClick:te},g(Z.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):re("",!0)])])])):re("",!0)])]),(F=l.value.images)!=null&&F.length?(b(),C("ul",vx,[(b(!0),C(Ie,null,ze(l.value.images,(U,ue)=>(b(),C("li",{key:ue,class:"lora-detail__image-item"},[s("div",hx,[s("img",{src:U.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,_x)])]))),128))])):re("",!0)])],512)],36)}}},[["__scopeId","data-v-b11ec087"]]),yx={class:"header-actions"},bx=["title"],wx=["onMouseover","onDragstart","onDrop"],xx={class:"lora-info"},Sx={class:"lora-header"},Tx=["title"],kx={class:"lora-actions"},Cx=["onClick","title"],Ex=["onClick","title"],$x={class:"lora-weights-row"},Lx={class:"weight-item-col"},Ax=["onUpdate:modelValue"],Mx={class:"weight-item-col"},Ix=["onUpdate:modelValue"],Dx={class:"switch-item-col"},Rx={class:"switch"},Ox=["checked","onChange"],Vo="weilin_prompt_ui_",Nx=_t({__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(""),i=h(100),r=h(0),u=h(),p=h(!1),d=h(!1),c=h(),v=e,m=n,y=(le,P)=>{if(d.value=!0,l.value===le&&a.value)return;const te=P.currentTarget.getBoundingClientRect();let ne={left:te.left-450-10,top:te.top};ne.left<10&&(ne.left=te.right+10),ne.top=Math.max(10,Math.min(ne.top,window.innerHeight-310)),i.value=ne.left,r.value=ne.top,a.value=!0,l.value=le,qe(()=>{c.value.refresh()})},S=()=>{d.value=!1,setTimeout(()=>{!p.value&&!d.value&&(a.value=!1,l.value="",p.value=!1)},200)},$=()=>{p.value=!0,d.value=!0},T=()=>{a.value=!1,l.value="",p.value=!1},D=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},J=le=>{le.hidden=!le.hidden},x=le=>{v.selectedLoras&&!v.selectedLoras.find(P=>P.name===le.name)&&(v.selectedLoras.push({name:le.name,weight:1,text_encoder_weight:1,...le}),m("update:selectedLoras",v.selectedLoras))},N=le=>{const P=v.selectedLoras.findIndex(Z=>Z.name===le.name);P>-1&&(v.selectedLoras.splice(P,1),m("update:selectedLoras",v.selectedLoras))},H=h(),j=le=>{H.value.open({name:le.lora})};window.addEventListener("message",le=>{le.data.type==="weilin_prompt_ui_selectLora"&&x(le.data.lora)});const K=h(null),X=le=>{K.value=le},_e=le=>{if(K.value===null||K.value===le)return;const P=v.selectedLoras.splice(K.value,1)[0];v.selectedLoras.splice(le,0,P),K.value=null,m("update:selectedLoras",v.selectedLoras)};return t({addLora:x,removeLora:N}),(le,P)=>(b(),C("div",{class:Le(`${Vo}lora-stack`),style:ct([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[s("div",{class:Le(`${Vo}lora-content`)},[s("div",{class:Le(`${Vo}lora-header`)},[s("h3",{class:Le(`${Vo}lora-title`)},g(f(o)("controls.loraStack")),3),s("div",yx,[s("button",{class:Le(`${Vo}add-btn`),onClick:D,title:f(o)("controls.addLora")},P[2]||(P[2]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,bx),s("button",{class:Le(`${Vo}close-btn`),onClick:P[0]||(P[0]=Z=>le.$emit("close"))},P[3]||(P[3]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)])],2),s("div",{class:Le(`${Vo}lora-body`)},[s("div",{class:Le(`${Vo}lora-list`)},[(b(!0),C(Ie,null,ze(e.selectedLoras,(Z,te)=>(b(),C("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:u,key:Z.name,class:Le(["lora-item",{"hidden-lora":Z.hidden}]),onMouseover:z=>y(Z.lora,z),onMouseleave:S,draggable:"true",onDragstart:z=>X(te),onDragover:P[1]||(P[1]=Je(()=>{},["prevent"])),onDrop:z=>_e(te)},[s("div",xx,[s("div",Sx,[s("span",{class:"lora-name",title:Z.name},g(Z.name),9,Tx),s("div",kx,[s("button",{class:"look-on-btn",onClick:z=>j(Z),title:f(o)("controls.lookOnLora")},P[4]||(P[4]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,Cx),s("button",{class:"remove-btn",onClick:z=>N(Z),title:f(o)("controls.removeLora")},P[5]||(P[5]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,Ex)])]),s("div",$x,[s("div",Lx,[s("label",null,g(f(o)("loraManager.modelWeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":z=>Z.weight=z,class:"lora-weight",step:"0.1"},null,8,Ax),[[Ae,Z.weight]])]),s("div",Mx,[s("label",null,g(f(o)("loraManager.textEncoderWeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":z=>Z.text_encoder_weight=z,class:"lora-weight",step:"0.1"},null,8,Ix),[[Ae,Z.text_encoder_weight]])]),s("div",Dx,[s("label",null,g(Z.hidden?f(o)("lora.hideLora"):f(o)("lora.showLora")),1),s("label",Rx,[s("input",{type:"checkbox",checked:!Z.hidden,onChange:z=>J(Z)},null,40,Ox),P[6]||(P[6]=s("span",{class:"slider"},null,-1))])])])])],42,wx))),128))],2)],2)],2),Ue(oi,{ref_key:"loraDetailLoraStackRef",ref:H},null,512),a.value?(b(),wt(uu,{key:0,ref_key:"loraCardItem",ref:c,fileNmae:l.value,paddingLeft:i.value,paddingTop:r.value,onCardLeave:T,onCardenter:$},null,8,["fileNmae","paddingLeft","paddingTop"])):re("",!0)],6))}},[["__scopeId","data-v-19f5b628"]]),Px={class:"main-label-manager"},Fx={class:"mlm-header"},Bx={class:"mlm-grid"},Ux=["disabled"],Vx=["disabled"],Wx=["onClick","title","onDragstart","onDragenter","onDrop"],zx={class:"mlm-item-main"},Hx={key:0,class:"pin-badge"},jx={class:"mlm-name"},Gx={class:"mlm-item-actions"},qx=["title","onClick"],Kx=["title","onClick"],Wg="/weilin/prompt_ui/api/",Yx="weilin_prompt_ui_main_labels_v1",Jx=_t({__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:n}){const o=e,a=n,l=h(null),i=h(""),r=h([]),u=h(o.selectedId),p=h(!0),d=h(!0),c=h("time"),v=h(null),m=h(null);async function y(){const ae={items:r.value,settings:{sortMode:c.value,sortTimeDesc:p.value,sortNameAsc:d.value,selectedId:u.value}};try{await Nt.post(Wg+"labels/save",ae)}catch(G){console.error(":",G),alert(": "+G.message)}}async function S(){var ae;try{const A=(ae=(await Nt.get(Wg+"labels/get")).data)==null?void 0:ae.data;if(!A)throw new Error("no data");const B=Array.isArray(A)?A:(A==null?void 0:A.items)??[],V=Array.isArray(A)?{}:(A==null?void 0:A.settings)??{};r.value=B.map((I,W)=>({id:I.id??J(),name:I.name??"",content:I.content??"",createdAt:I.createdAt??I.updatedAt??Date.now(),updatedAt:I.updatedAt??I.createdAt??Date.now(),pinned:!!I.pinned,highlighted:!!I.highlighted,order:typeof I.order=="number"?I.order:W})),V.sortMode&&(c.value=V.sortMode),typeof V.sortTimeDesc=="boolean"&&(p.value=V.sortTimeDesc),typeof V.sortNameAsc=="boolean"&&(d.value=V.sortNameAsc),(typeof V.selectedId=="string"||V.selectedId===null)&&(u.value=V.selectedId)}catch(G){console.error(":",G),r.value=[]}}mt(async()=>{await S()}),ot(()=>o.selectedId,ae=>{u.value=ae}),ot([c,p,d],()=>{y()}),ot(r,()=>{y()},{deep:!0}),ot(u,ae=>{y();const G=ae?x(ae):null;a("select",G?{...G}:null)});const $=vt(()=>{const ae=i.value.trim().toLowerCase();return ae?r.value.filter(G=>(G.name||"").toLowerCase().includes(ae)):r.value}),T=vt(()=>{const ae=[...$.value];if(c.value==="manual")return ae.sort((V,I)=>{const W=V.order??0,k=I.order??0;return W!==k?W-k:(V.createdAt??0)-(I.createdAt??0)});const G=(V,I)=>{const W=V.name||"",k=I.name||"";let w=W.localeCompare(k,void 0,{numeric:!0,sensitivity:"base"});return d.value||(w=-w),w},A=(V,I)=>{let W=V.createdAt-I.createdAt;return p.value&&(W=-W),W},B=V=>V.pinned?0:1;return ae.sort((V,I)=>{const W=B(V)-B(I);if(W!==0)return W;if(c.value==="name"){const w=G(V,I);return w!==0?w:A(V,I)}const k=A(V,I);return k!==0?k:G(V,I)}),ae}),D=vt(()=>x(u.value));function J(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function x(ae){return r.value.find(G=>G.id===ae)||null}function N(ae){u.value=ae.id,a("select",{...ae})}function H(){const ae=window.prompt("","");if(!ae)return;ne(),c.value="manual";const G=J(),A=Date.now(),B=r.value.reduce((I,W)=>typeof W.order=="number"?Math.min(I,W.order):I,0),V={id:G,name:ae.trim(),content:"",createdAt:A,updatedAt:A,pinned:!1,highlighted:!1,order:B-1};r.value.push(V),y(),u.value=G,a("select",{...V})}function j(){const ae=D.value;if(!ae)return;const G=window.prompt("",ae.name||"");G&&(ae.name=G.trim(),ae.updatedAt=Date.now(),y())}function K(){const ae=D.value;if(!ae||!window.confirm(`"${ae.name}"`))return;const G=r.value.findIndex(A=>A.id===ae.id);G>=0&&r.value.splice(G,1),y(),r.value.length?(u.value=r.value[0].id,a("select",{...r.value[0]})):(u.value=null,a("select",null))}function X(){c.value="time",p.value=!p.value}function _e(){c.value="name",d.value=!d.value}function le(ae){ae.pinned=!ae.pinned,ae.updatedAt=Date.now(),y()}function P(ae){ae.highlighted=!ae.highlighted,ae.updatedAt=Date.now(),y()}function Z(ae){const G=D.value;G&&(G.content=ae??"",G.updatedAt=Date.now(),clearTimeout(te),te=setTimeout(()=>y(),400))}let te=null;function z(ae){try{const G=new Date(ae);return`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}-${G.getDate().toString().padStart(2,"0")} ${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function ne(){T.value.forEach((G,A)=>{G.order=A})}function oe(ae,G,A){try{A.dataTransfer.effectAllowed="move"}catch{}v.value=ae.id,m.value=null,ne(),c.value="manual"}function F(ae){v.value&&(m.value=ae.id)}function U(ae){if(!v.value)return;const G=v.value,A=ae==null?void 0:ae.id;if(!A||G===A)return ue();const B=[...T.value],V=B.findIndex(k=>k.id===G),I=B.findIndex(k=>k.id===A);if(V<0||I<0)return ue();const[W]=B.splice(V,1);B.splice(I,0,W),B.forEach((k,w)=>{k.order=w}),y(),ue()}function ue(){v.value=null,m.value=null}async function ke(){try{const ae=localStorage.getItem(Yx);if(!ae){alert("");return}const G=JSON.parse(ae),A=Array.isArray(G)?G:(G==null?void 0:G.items)??[],B=Array.isArray(G)?{}:(G==null?void 0:G.settings)??{};if(!Array.isArray(A)||A.length===0){alert("");return}if(!window.confirm(` ${A.length} 

""
`))return;const I=new Set(r.value.map(w=>w.id)),W=r.value.reduce((w,O)=>Math.max(w,typeof O.order=="number"?O.order:w),-1);let k=0;A.forEach((w,O)=>{let Q=w.id;I.has(Q)&&(Q=J()),I.add(Q),r.value.push({id:Q,name:w.name??"",content:w.content??"",createdAt:w.createdAt??w.updatedAt??Date.now(),updatedAt:w.updatedAt??w.createdAt??Date.now(),pinned:!!w.pinned,highlighted:!!w.highlighted,order:(typeof w.order=="number",W+1+O)}),k++}),!c.value&&B.sortMode&&(c.value=B.sortMode),typeof p.value>"u"&&typeof B.sortTimeDesc=="boolean"&&(p.value=B.sortTimeDesc),typeof d.value>"u"&&typeof B.sortNameAsc=="boolean"&&(d.value=B.sortNameAsc),await y(),alert(`

 ${k} 
 ${r.value.length} `)}catch(ae){console.error(":",ae),alert(": "+ae.message)}}function ie(){try{const ae={items:r.value,settings:{sortMode:c.value,sortTimeDesc:p.value,sortNameAsc:d.value,selectedId:u.value},exportTime:new Date().toISOString(),version:"v1"},G=JSON.stringify(ae,null,2),A=new Blob([G],{type:"application/json"}),B=URL.createObjectURL(A),V=document.createElement("a");V.href=B;const I=new Date,W=I.getFullYear()+(I.getMonth()+1).toString().padStart(2,"0")+I.getDate().toString().padStart(2,"0"),k=I.getHours().toString().padStart(2,"0")+I.getMinutes().toString().padStart(2,"0")+I.getSeconds().toString().padStart(2,"0");V.download=`weilin_prompt_labels_${W}_${k}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(B),alert(` ${r.value.length} `)}catch(ae){console.error(":",ae),alert(": "+ae.message)}}function ge(){var ae;(ae=l.value)==null||ae.click()}async function de(ae){var B;const G=(B=ae.target.files)==null?void 0:B[0];if(!G)return;const A=new FileReader;A.onload=async V=>{var I,W;try{const k=(I=V.target)==null?void 0:I.result;if(typeof k!="string")throw new Error("");const w=JSON.parse(k);if(!w||typeof w!="object")throw new Error("JSON");const O=Array.isArray(w)?w:(w==null?void 0:w.items)??[],Q=Array.isArray(w)?{}:(w==null?void 0:w.settings)??{};if(!Array.isArray(O))throw new Error("items");const pe=window.confirm(` ${O.length} 

""
""`)?"replace":"merge";if(pe==="replace"){r.value=O.map((L,_)=>({id:L.id??J(),name:L.name??"",content:L.content??"",createdAt:L.createdAt??L.updatedAt??Date.now(),updatedAt:L.updatedAt??L.createdAt??Date.now(),pinned:!!L.pinned,highlighted:!!L.highlighted,order:typeof L.order=="number"?L.order:_})),Q.sortMode&&(c.value=Q.sortMode),typeof Q.sortTimeDesc=="boolean"&&(p.value=Q.sortTimeDesc),typeof Q.sortNameAsc=="boolean"&&(d.value=Q.sortNameAsc);const ye=Q.selectedId&&r.value.find(L=>L.id===Q.selectedId)?Q.selectedId:((W=r.value[0])==null?void 0:W.id)??null;u.value=ye}else{const ye=new Set(r.value.map(R=>R.id)),L=r.value.reduce((R,q)=>Math.max(R,typeof q.order=="number"?q.order:R),-1);let _=0;O.forEach((R,q)=>{let xe=R.id;ye.has(xe)&&(xe=J()),ye.add(xe),r.value.push({id:xe,name:R.name??"",content:R.content??"",createdAt:R.createdAt??R.updatedAt??Date.now(),updatedAt:R.updatedAt??R.createdAt??Date.now(),pinned:!!R.pinned,highlighted:!!R.highlighted,order:(typeof R.order=="number",L+1+q)}),_++}),alert(` ${_}  ${r.value.length} `)}await y(),pe==="replace"&&alert(` ${r.value.length} `)}catch(k){console.error(":",k),alert(": "+k.message)}finally{l.value&&(l.value.value="")}},A.onerror=()=>{alert(""),l.value&&(l.value.value="")},A.readAsText(G)}return t({updateSelectedContent:Z}),(ae,G)=>(b(),C("div",Px,[s("div",Fx,[ve(s("input",{"onUpdate:modelValue":G[0]||(G[0]=A=>i.value=A),class:"mlm-search",type:"text",placeholder:""},null,512),[[Ae,i.value]]),s("button",{class:"mlm-add",onClick:H},"+ "),s("button",{class:"mlm-migrate",onClick:ke,title:""},"   "),s("div",{class:"mlm-io-grid"},[s("button",{class:"mlm-export",onClick:ie,title:"JSON"},""),s("button",{class:"mlm-import",onClick:ge,title:"JSON"},"")]),s("input",{ref_key:"fileInput",ref:l,type:"file",accept:".json",style:{display:"none"},onChange:de},null,544),s("div",Bx,[s("button",{class:"mlm-sort",onClick:X},"  "+g(p.value?"":""),1),s("button",{class:"mlm-sort",onClick:_e},"  "+g(d.value?"AZ":"ZA"),1),s("button",{class:"mlm-edit",disabled:!D.value,onClick:j},"",8,Ux),s("button",{class:"mlm-delete",disabled:!D.value,onClick:K},"",8,Vx)])]),Ue(Uv,{name:"mlm",tag:"div",class:"mlm-list"},{default:it(()=>[(b(!0),C(Ie,null,ze(T.value,(A,B)=>(b(),C("div",{key:A.id,class:Le(["mlm-item",{active:A.id===u.value,pinned:!!A.pinned,highlighted:!!A.highlighted},{dragging:v.value===A.id,"drag-over":m.value===A.id}]),onClick:V=>N(A),title:A.updatedAt?z(A.updatedAt):"",draggable:"true",onDragstart:V=>oe(A,B,V),onDragenter:Je(V=>F(A),["prevent"]),onDragover:G[1]||(G[1]=Je(()=>{},["prevent"])),onDrop:Je(V=>U(A),["prevent"]),onDragend:ue},[s("div",zx,[A.pinned?(b(),C("span",Hx,"")):re("",!0),s("span",jx,g(A.name),1)]),s("div",Gx,[s("button",{class:Le(["mini-btn","pin",{active:A.pinned}]),title:A.pinned?"":"",onClick:Je(V=>le(A),["stop"])},G[2]||(G[2]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)]),10,qx),s("button",{class:Le(["mini-btn","highlight",{active:A.highlighted}]),title:A.highlighted?"":"",onClick:Je(V=>P(A),["stop"])},G[3]||(G[3]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)]),10,Kx)])],42,Wx))),128))]),_:1})]))}},[["__scopeId","data-v-e9866347"]]),Wn={getHistory:async()=>await Me({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await Me({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await Me({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await Me({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await Me({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await Me({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await Me({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await Me({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await Me({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},Xx={class:"lora-manager-top-bar"},Qx=["placeholder"],Zx=["title"],eS=["title"],tS={class:"checkbox-container"},nS=["onClick"],oS=["onClick"],aS={key:0,class:"loading-indicator"},lS={key:1,class:"empty-list"},sS=["onClick","onMouseover"],iS=["src","alt","title"],rS={key:0,class:"loading-more"},uS={key:1,class:"no-more-data"},zt="weilin_prompt_ui_",zg=_t({__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(!1),l=h(!1),i=h(!1),r=h("all"),u=h(""),p=h(null),d=h(""),c=h(null),v=h(!1),m=h(""),y=h(100),S=h(0),$=h(),T=h(!1),D=h(!1),J=h(),x=h(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),N=h(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(x.value===null||x.value===void 0||x.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),x.value=!0),(N.value===null||N.value===void 0||N.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),N.value=!1);const H=e;ot(x,_=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",_)}),ot(N,_=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",_)});const j=h(1),K=h(50),X=vt(()=>{if(r.value==="all"){const _=z.value;if(_){const R=Object.values(_);return Math.ceil(R.length/K.value)}}else{const _=z.value[u.value];if(_){const R=Object.values(_);return Math.ceil(R.length/K.value)}return 1}}),_e=()=>{T.value=!0,D.value=!0},le=(_,R)=>{if(!x.value||x.value=="false"||(D.value=!0,m.value===_&&v.value))return;const xe=R.currentTarget.getBoundingClientRect(),we=window.innerHeight,ee=450;let me={left:xe.left+(xe.width-ee)/2,top:xe.top+xe.height+10};me.top+310>we&&(me.top=xe.top-310),me.left=Math.max(10,Math.min(me.left,window.innerWidth-ee-10)),me.top=Math.max(10,Math.min(me.top,we-310)),y.value=me.left,S.value=me.top,v.value=!0,m.value=_,qe(()=>{J.value.refresh()})},P=()=>{D.value=!1,setTimeout(()=>{!T.value&&!D.value&&(v.value=!1,m.value="",T.value=!1)},200)},Z=()=>{v.value=!1,m.value="",T.value=!1},te=h([]),z=h([]),ne=h(""),oe=h(0),F=(_,R)=>{oe.value=_,ne.value=R},U=async()=>{try{const _=await En.getLoraFolderList();te.value=_.data}catch(_){console.error("Failed to get folder list:",_),Y({type:"error",str:"message.loadFailed"})}},ue=()=>{if(!c.value||l.value||i.value)return;const _=c.value;_.scrollHeight-_.scrollTop-_.clientHeight<100&&Q()},ke=h(!1);let ie=null;const ge=()=>{ie&&clearTimeout(ie),ie=setTimeout(()=>{d.value.length>0?(ke.value=!0,A()):(ke.value=!1,O())},300)},de=_=>{var R;return(R=_.local_info)!=null&&R.name&&_.local_info.name!==""&&_.local_info.name.length>0?_.local_info.name:_.name},ae=h(),G=_=>{H.loraManager==="addLora"?ye(_):H.loraManager==="prompt_inner"&&N.value?L(_):ae.value.open(_)},A=async()=>{try{const _=await En.searchLoraGetFolderList(d.value);if(z.value=_.data,z.value.length>0){j.value=1;const R=Object.values(z.value),q=(j.value-1)*50,xe=q+50,we=R.slice(q,xe);W(we)}}catch(_){console.error("Failed to get folder list:",_),Y({type:"error",str:"message.loadFailed"})}},B=h([]),V=_=>{if(_==="all"){B.value=[],r.value=_,u.value="/",z.value=te.value[_];const R=z.value;if(R){i.value=!1,j.value=1;const q=Object.values(R),xe=(j.value-1)*50,we=xe+50,ee=q.slice(xe,we);W(ee)}}else{B.value=[],r.value=_,u.value="/",z.value=te.value[_];const R=z.value["/"];if(R){i.value=!1,j.value=1;const q=Object.values(R),xe=(j.value-1)*50,we=xe+50,ee=q.slice(xe,we);W(ee)}}},I=_=>{if(_!=u.value){u.value=_,B.value=[];const R=z.value[u.value];if(R){i.value=!1,j.value=1;const q=Object.values(R),xe=(j.value-1)*50,we=xe+50,ee=q.slice(xe,we);W(ee)}}},W=async _=>{const R=await En.getLoraRangeList(_);j.value===1?B.value=R.data.loras:B.value=B.value.concat(R.data.loras)},k=async()=>{if(p.value!=null){Y({type:"warn",str:"message.isLoading"});return}try{Y({type:"success",str:"message.isLoadingPleaseWait"}),await En.getAllLoraList(),p.value=setInterval(async()=>{await w()},1e3)}catch(_){console.error("Failed to get all lora list:",_),Y({type:"error",str:"message.loadFailed"})}},w=async()=>{try{const _=await En.getAllLoraStatus();_.data.isLoading===!1?(clearInterval(p.value),p.value=null,Y({type:"success",str:"message.loaddingSuccess"}),await O()):Y({type:"warn",str:"message.loaddingPrc",name:_.data.progress})}catch(_){console.error("Failed to get lora status:",_),clearInterval(p.value),p.value=null,Y({type:"error",str:"message.loadFailed"})}},O=async()=>{if(!o.value){o.value=!0,j.value=1,i.value=!1,l.value=!1;try{await U(),qe(()=>{V("all")})}catch(_){console.error("Failed to refresh lora list:",_)}finally{o.value=!1}}},Q=async()=>{if(j.value>=X.value){i.value=!0;return}l.value=!0;try{if(j.value++,ke.value){if(z.value=res.data,z.value.length>0){const _=Object.values(z.value),R=(j.value-1)*50,q=R+50,xe=_.slice(R,q);W(xe)}}else if(r.value==="all"){z.value=te.value[r.value];const _=z.value;if(_){const R=Object.values(_),q=(j.value-1)*50,xe=q+50,we=R.slice(q,xe);W(we)}}else{const _=z.value[u.value];if(_){const R=Object.values(_),q=(j.value-1)*50,xe=q+50,we=R.slice(q,xe);W(we)}}}finally{l.value=!1}},pe=()=>{j.value=1,i.value=!1,l.value=!1};ot([r,u,d],()=>{pe()}),mt(()=>{O()});const ye=_=>{var R,q,xe,we,ee,me,Re,Pe,He;oe.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:_.model_name,display_name:de(_),lora:_.name,weight:(R=_.local_info)!=null&&R.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(q=_.local_info)!=null&&q.strWeight?_.local_info.strWeight:1,loraWorks:(xe=_.local_info)!=null&&xe.loraWorks?_.local_info.loraWorks:""}},"*"):oe.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+ne.value,lora:{name:_.model_name,display_name:de(_),lora:_.name,weight:(we=_.local_info)!=null&&we.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(ee=_.local_info)!=null&&ee.strWeight?_.local_info.strWeight:1,loraWorks:(me=_.local_info)!=null&&me.loraWorks?_.local_info.loraWorks:""}},"*"):oe.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+ne.value,lora:{name:_.model_name,display_name:de(_),lora:_.name,weight:(Re=_.local_info)!=null&&Re.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(Pe=_.local_info)!=null&&Pe.strWeight?_.local_info.strWeight:1,loraWorks:(He=_.local_info)!=null&&He.loraWorks?_.local_info.loraWorks:""}},"*")},L=_=>{var R,q,xe;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${_.model_name}:${(R=_.local_info)!=null&&R.strengthMin?_.local_info.strengthMin:1}:${(q=_.local_info)!=null&&q.strWeight?_.local_info.strWeight:1}>`,loraWorks:(xe=_.local_info)!=null&&xe.loraWorks?_.local_info.loraWorks:""}},"*")};return t({openSetSeed:F}),(_,R)=>(b(),C("div",{class:Le(`${zt}lora-manager`)},[s("div",Xx,[ve(s("input",{"onUpdate:modelValue":R[0]||(R[0]=q=>d.value=q),class:Le(`${zt}search-input`),placeholder:f(n)("loraManager.searchPlaceholder"),onInput:ge},null,42,Qx),[[Ae,d.value]]),s("button",{class:Le(`${zt}refresh-btn`),onClick:O,title:f(n)("loraManager.refresh")},[(b(),C("svg",{class:Le([`${zt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},R[3]||(R[3]=[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)]),2))],10,Zx),s("button",{style:{"margin-left":"10px"},class:Le(`${zt}refresh-btn`),onClick:k,title:f(n)("loraManager.cacheAll")},[(b(),C("svg",{class:Le([`${zt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},R[4]||(R[4]=[s("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)]),2))],10,eS),s("div",tS,[s("label",{class:Le(`${zt}checkbox-label`)},[ve(s("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=q=>x.value=q),class:Le(`${zt}checkbox`)},null,2),[[$t,x.value]]),R[5]||(R[5]=s("span",null,"",-1))],2),e.loraManager=="prompt_inner"?(b(),C("label",{key:0,class:Le(`${zt}checkbox-label`)},[ve(s("input",{type:"checkbox","onUpdate:modelValue":R[2]||(R[2]=q=>N.value=q),class:Le(`${zt}checkbox`)},null,2),[[$t,N.value]]),R[6]||(R[6]=s("span",null,"Tag",-1))],2)):re("",!0)])]),ke.value?re("",!0):(b(),C("div",{key:0,class:Le(`${zt}category-nav`)},[(b(!0),C(Ie,null,ze(Object.keys(te.value),q=>(b(),C("button",{key:q,class:Le([`${zt}category-btn`,{active:r.value===q}]),onClick:xe=>V(q)},g(q==="/"?f(n)("loraManager.root"):q=="all"?f(n)("loraManager.all"):q),11,nS))),128))],2)),r.value!="all"&&!ke.value?(b(),C("div",{key:1,class:Le(`${zt}subcategory-nav`)},[(b(!0),C(Ie,null,ze(Object.keys(z.value),q=>(b(),C("button",{key:q,class:Le([`${zt}category-btn`,{active:u.value===q}]),onClick:xe=>I(q)},g(q==="/"?f(n)("loraManager.root"):q=="all"?f(n)("loraManager.all"):q),11,oS))),128))],2)):re("",!0),s("div",{class:Le(`${zt}lora-list-container`),ref_key:"scrollContainer",ref:c,onScroll:ue},[a.value&&!l.value?(b(),C("div",aS,g(f(n)("loraManager.loading")),1)):B.value.length===0?(b(),C("div",lS,g(f(n)("loraManager.noResults")),1)):re("",!0),s("div",{class:Le(`${zt}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(b(!0),C(Ie,null,ze(B.value,q=>(b(),C("div",{key:q.file_path,class:Le(`${zt}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:$,onClick:xe=>G(q),onMouseover:xe=>le(q.name,xe),onMouseleave:P,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[s("div",{class:Le(`${zt}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[q.preview?(b(),C("img",{key:0,src:q.preview,alt:q.model_name,title:q.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,iS)):(b(),C("div",{key:1,class:Le(`${zt}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},R[7]||(R[7]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[s("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)]),2))],2),s("div",{class:Le(`${zt}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},g(de(q)),3)],42,sS))),128))],2),s("div",null,[l.value?(b(),C("div",rS,g(f(n)("loraManager.loadingMore")),1)):re("",!0),!l.value&&i.value?(b(),C("div",uS,g(f(n)("loraManager.noMoreData")),1)):re("",!0)])],34),Ue(oi,{ref_key:"loraDetailRef",ref:ae},null,512),v.value?(b(),wt(uu,{key:2,ref_key:"loraCardItem",ref:J,fileNmae:m.value,paddingLeft:y.value,paddingTop:S.value,onCardLeave:Z,onCardenter:_e},null,8,["fileNmae","paddingLeft","paddingTop"])):re("",!0)],2))}},[["__scopeId","data-v-e5643d0b"]]),cS={class:"tag-manager"},dS={class:"selected-categories-container"},pS={class:"selected-categories-header"},fS={class:"selected-categories-content"},gS={key:0,class:"selected-category-section"},mS={class:"section-title"},vS={class:"selected-items"},hS={class:"category-name"},_S=["onClick"],yS={key:1,class:"selected-category-section"},bS={class:"section-title"},wS={class:"selected-items"},xS={class:"category-name"},SS={class:"subcategory-name"},TS=["onClick"],kS={key:2,class:"no-selected"},CS={class:"category-tabs"},ES={class:"tabs-wrapper primary-tabs"},$S={class:"tabs-scroll"},LS=["onClick"],AS={class:"tab-text"},MS=["onClick","title"],IS={key:0,class:"tabs-wrapper group-tabs"},DS={class:"tabs-scroll"},RS=["onClick"],OS={class:"tab-text"},NS=["onClick","disabled","title"],PS=_t({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=n,l=h([]),i=h(null),r=h(null),u=h([]),p=h(!1),d=h([]),c=h(!1),v=h(0),m=vt(()=>d.value.filter(Z=>!Z.sub)),y=vt(()=>d.value.filter(Z=>Z.sub)),S=Z=>d.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&!te.sub),$=Z=>d.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&te.sub&&te.sub.g_uuid===Z.sub.g_uuid),T=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},D=async()=>{try{const Z=await It.getTagsGroupList();if(l.value=Z.info,r.value){const te=l.value.flatMap(z=>z.groups).find(z=>z.p_uuid===r.value.p_uuid);te?r.value=te:r.value=null}if(i.value){const te=l.value.find(z=>z.p_uuid===i.value.p_uuid);te?i.value=te:i.value=null}}catch(Z){console.error(":",Z)}},J=Z=>{if(!Z||Z==="transparent")return"var(--primary-text)";let te,z,ne,oe=1;if(Z.startsWith("rgba")){const U=Z.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);U&&([,te,z,ne,oe]=U.map(Number))}else if(Z.startsWith("rgb")){const U=Z.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);U&&([,te,z,ne]=U.map(Number))}return oe<.5?"var(--primary-text)":(te*299+z*587+ne*114)/1e3>128?"#000000":"#ffffff"};mt(()=>{window.addEventListener("message",le)}),Eo(()=>{window.removeEventListener("message",le)});const x=Z=>{i.value=Z,r.value=null,p.value=!1,u.value=[]},N=Z=>{H(i.value)||(r.value=Z,p.value=!1,u.value=[])},H=Z=>Z?d.value.some(te=>te.group.p_uuid===Z.p_uuid&&!te.sub):!1,j=Z=>{const te=d.value.findIndex(z=>z.group.p_uuid===Z.p_uuid&&!z.sub);te!==-1?d.value.splice(te,1):(d.value=d.value.filter(z=>z.group.p_uuid!==Z.p_uuid),d.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:null}))},K=(Z,te)=>{if(H(Z))return;const z=d.value.findIndex(ne=>ne.group.p_uuid===Z.p_uuid&&ne.sub&&ne.sub.g_uuid===te.g_uuid);if(z!==-1)d.value.splice(z,1);else{const ne=d.value.findIndex(oe=>oe.group.p_uuid===Z.p_uuid&&!oe.sub);ne!==-1&&d.value.splice(ne,1),d.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:te?{g_uuid:te.g_uuid,name:te.name}:null})}},X=Z=>{d.value.splice(Z,1)},_e=()=>{d.value=[]},le=Z=>{Z.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&D()},P=()=>{if(d.value.length===0){Y({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{data:d.value,index:v.value}),c.value=!1};return t({open:(Z,te)=>{T(),v.value=Z,d.value=te,c.value=!0}}),(Z,te)=>(b(),wt($a,{modelValue:c.value,"onUpdate:modelValue":te[1]||(te[1]=z=>c.value=z),title:f(o)("importDialog.selectTitle")},{footer:it(()=>[s("button",{onClick:te[0]||(te[0]=z=>c.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:P},g(f(o)("importDialog.sureSelect")),1)]),default:it(()=>[s("div",cS,[s("div",dS,[s("div",pS,[s("span",null,g(f(o)("importDialog.selectedCategories")),1),d.value.length>0?(b(),C("button",{key:0,class:"clear-all-btn",onClick:_e},g(f(o)("importDialog.clearAll")),1)):re("",!0)]),s("div",fS,[m.value.length>0?(b(),C("div",gS,[s("div",mS,g(f(o)("importDialog.primaryCategories")),1),s("div",vS,[(b(!0),C(Ie,null,ze(m.value,(z,ne)=>(b(),C("div",{key:"primary-"+ne,class:"selected-item"},[s("span",hS,g(z.group.name),1),s("button",{class:"remove-selected-btn",onClick:oe=>X(S(z))},"",8,_S)]))),128))])])):re("",!0),y.value.length>0?(b(),C("div",yS,[s("div",bS,g(f(o)("importDialog.subCategories")),1),s("div",wS,[(b(!0),C(Ie,null,ze(y.value,(z,ne)=>(b(),C("div",{key:"sub-"+ne,class:"selected-item"},[s("span",xS,g(z.group.name),1),te[2]||(te[2]=s("span",{class:"separator"},">",-1)),s("span",SS,g(z.sub.name),1),s("button",{class:"remove-selected-btn",onClick:oe=>X($(z))},"",8,TS)]))),128))])])):re("",!0),d.value.length===0?(b(),C("div",kS,g(f(o)("importDialog.noSelectedCategories")),1)):re("",!0)])]),s("div",CS,[s("div",ES,[s("div",$S,[(b(!0),C(Ie,null,ze(l.value,(z,ne)=>{var oe,F,U;return b(),C("div",{key:"Tabss-"+ne,class:Le(["tab-item",{active:((oe=i.value)==null?void 0:oe.p_uuid)===z.p_uuid}]),style:ct({backgroundColor:((F=i.value)==null?void 0:F.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((U=i.value)==null?void 0:U.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-text)":J(z.color)}),onClick:ue=>x(z)},[s("span",AS,g(z.name),1),s("button",{class:"select-tab-btn",onClick:Je(ue=>j(z),["stop"]),title:f(o)("importDialog.selectCategory")},te[3]||(te[3]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,MS)],14,LS)}),128))])]),i.value?(b(),C("div",IS,[s("div",DS,[(b(!0),C(Ie,null,ze(i.value.groups,(z,ne)=>{var oe,F,U;return b(),C("div",{key:"TabsSw-"+ne,class:Le(["tab-item",{active:((oe=r.value)==null?void 0:oe.g_uuid)===z.g_uuid,disabled:H(i.value)}]),style:ct({backgroundColor:((F=r.value)==null?void 0:F.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((U=r.value)==null?void 0:U.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-text)":J(z.color),opacity:H(i.value)?"0.5":"1",cursor:H(i.value)?"not-allowed":"pointer"}),onClick:ue=>H(i.value)?null:N(z)},[s("span",OS,g(z.name),1),H(i.value)?re("",!0):(b(),C("button",{key:0,class:"select-tab-btn",onClick:Je(ue=>K(i.value,z),["stop"]),disabled:H(i.value),title:f(o)("importDialog.selectSubcategory")},te[4]||(te[4]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,NS))],14,RS)}),128))])])):re("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-eb6b9225"]]),vn={getTemplateList:async()=>await Me({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await Me({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await Me({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await Me({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await Me({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await Me({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await Me({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await Me({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await Me({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},FS={class:"random-rule-container"},BS={class:"settings-section template-section"},US={class:"section-header"},VS={class:"template-controls"},WS={class:"template-select-group"},zS={class:"template-select-with-apply"},HS={value:""},jS=["value"],GS=["disabled"],qS={class:"template-bottom-buttons"},KS=["disabled"],YS=["disabled"],JS={key:0,class:"template-name-input"},XS=["placeholder"],QS={class:"template-actions"},ZS={key:0},eT={class:"settings-section"},tT={class:"section-header"},nT={class:"rules-reminder"},oT={class:"rules-list"},aT={class:"rule-header"},lT=["onClick"],sT={class:"rule-content"},iT={class:"form-group"},rT={class:"range-inputs"},uT=["onUpdate:modelValue"],cT=["onUpdate:modelValue"],dT={class:"form-group"},pT=["onUpdate:modelValue"],fT={value:"category"},gT={value:"specific"},mT={key:0,class:"form-group"},vT={class:"selected-categories-container"},hT={class:"selected-categories-header"},_T={class:"selected-categories-content"},yT={key:0,class:"selected-category-section"},bT={class:"section-title"},wT={class:"selected-items"},xT={class:"category-name"},ST={key:1,class:"selected-category-section"},TT={class:"section-title"},kT={class:"selected-items"},CT={class:"category-name"},ET={class:"subcategory-name"},$T={key:2,class:"no-selected"},LT=["onClick"],AT={key:1,class:"form-group"},MT={class:"tags-input-container"},IT=["onClick"],DT=["onUpdate:modelValue","onKeydown","placeholder"],RT=["onClick"],OT={class:"actions-section"},NT=["disabled"],Hg="weilin_tools_",PT=_t({__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(null),i=h(!1),r=h(""),u=h(""),p={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},c=h({});async function v(){try{r.value=="prompt_global"?await vn.getRandomTemplateApple().then(async V=>{V.data==""?c.value=d:await vn.getTemplateData(V.data).then(async I=>{z.value=V.data,c.value=I.data,i.value=!0}).catch(I=>{console.error(":",I),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(V=>{console.error(V),Y({type:"warn",str:"message.networkError"})}):u.value==""?c.value=d:await vn.getTemplateData(u.value).then(async V=>{z.value=u.value,c.value=V.data,i.value=!0}).catch(V=>{console.error(":",V),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(V){Y({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",V)}}function m(){try{const V=JSON.parse(JSON.stringify(c.value));V.rules&&V.rules.forEach(I=>{delete I.tagInput}),vn.updateTemplateData(z.value,V).then(async I=>{await vn.getTemplateData(I.path_name).then(async W=>{c.value=W.data,Y({type:"success",str:"randomUtils.templateSaved"})}).catch(W=>{console.error(":",W),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(I=>{console.error(":",I),Y({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(V){console.error("Error saving random tag settings:",V),Y({type:"warn",str:"randomUtils.errorSavingSettings"})}}function y(){c.value.rules.push({range:{min:c.value.rules.length>0?c.value.rules[c.value.rules.length-1].range.max+1:1,max:c.value.rules.length>0?c.value.rules[c.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function S(V){c.value.rules.splice(V,1)}function $(V){V.tagInput&&V.tagInput.trim()&&(V.specificTags.push(V.tagInput.trim()),V.tagInput="")}function T(V,I){V.specificTags.splice(I,1)}function D(){}const x=h((()=>{try{const V=localStorage.getItem(`${Hg}randomRuleSettingState`);if(V){const I=JSON.parse(V),W={...p};return I.randomRuleSetting&&(W.randomRuleSetting={...p.randomRuleSetting,...I.randomRuleSetting}),W}}catch(V){console.error("Error loading window states:",V)}return{...p}})());ot(x,V=>{try{localStorage.setItem(`${Hg}randomRuleSettingState`,JSON.stringify(V))}catch(I){console.error("Error saving window states:",I)}},{deep:!0});const N=V=>{a.value=!1},H=(V,I)=>{x.value[V]&&(x.value[V].position={...I})},j=(V,I)=>{x.value[V]&&(x.value[V].size={...I})},K=V=>{a.value=!0,r.value=V,Be.registerWindow("randomRuleSetting"),qe(()=>{Be.setActiveWindow("randomRuleSetting"),V=="prompt_global"?U(1):A()})},X=(V,I)=>{l.value.open(V,I)},_e=()=>void 0,le=V=>!V||!Array.isArray(V)||V.length<=0?[]:V.filter(I=>!I.sub),P=V=>!V||!Array.isArray(V)||V.length<=0?[]:V.filter(I=>I.sub),Z=V=>{V&&V.data&&Array.isArray(V.data)?c.value.rules[V.index].tagGroupList=V.data:c.value.rules[V.index].tagGroupList=[]},te=h([]),z=h(""),ne=h(""),oe=h(!1),F=h(!1);async function U(V=0){try{await vn.getTemplateList().then(I=>{te.value=I.data,V==1&&v()}).catch(I=>{console.error(I),Y({type:"warn",str:"message.networkError"})})}catch(I){Y({type:"warn",str:"message.networkError"}),console.error("RandomTemplate:",I)}}function ue(){oe.value=!0,ne.value=""}function ke(){oe.value=!1,ne.value=""}function ie(){if(!z.value){Y.warm(o("randomUtils.pleaseChooseTemplate"));return}r.value=="prompt_global"?vn.updateRandomTemplateApple(z.value).then(V=>{Y({type:"success",str:"randomUtils.templateApplied"})}).catch(V=>{console.error(":",V),Y({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:z.value},"*"),Y({type:"success",str:"randomUtils.templateApplied"}))}function ge(){z.value&&vn.deleteTemplateData(z.value).then(()=>{Y({type:"success",str:"randomUtils.templateDeleted"}),U(),z.value=""}).catch(V=>{console.error(":",V),Y({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function de(){if(!z.value)return;const V=te.value.find(I=>I.path_name===z.value);V&&(oe.value=!0,ne.value=V.file_name,F.value=!0)}function ae(){if(!ne.value.trim()){Y({type:"warn",str:"randomUtils.templateNameRequired"});return}if(c.value.file_name=ne.value.trim(),F.value){const V=te.value.find(I=>I.path_name===z.value);if(V){V.file_name=ne.value.trim();const I=JSON.parse(JSON.stringify(c.value));I.rules&&I.rules.forEach(W=>{delete W.tagInput}),vn.updateTemplateData(V.path_name,I).then(async W=>{Y({type:"success",str:"randomUtils.templateSaved"}),await U().then(async()=>{await vn.getTemplateData(W.path_name).then(async k=>{z.value=W.path_name,c.value=k.data,Y({type:"success",str:"randomUtils.templateSaved"})}).catch(k=>{console.error(":",k),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(W=>{console.error(":",W),Y({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{c.value=d,c.value.file_name=ne.value.trim();const V=JSON.parse(JSON.stringify(c.value));V.rules&&V.rules.forEach(I=>{delete I.tagInput}),vn.saveTemplateData(V).then(async I=>{await U().then(async()=>{await vn.getTemplateData(I.path_name).then(async W=>{z.value=I.path_name,c.value=W.data,Y({type:"success",str:"randomUtils.templateSaved"})}).catch(W=>{console.error(":",W),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(I=>{console.error(":",I),Y({type:"warn",str:"randomUtils.errorSavingTemplate"})})}oe.value=!1,ne.value="",F.value=!1}const G=async V=>{if(V.target.value!="")try{await vn.getTemplateData(V.target.value).then(async I=>{z.value=I.path_name,c.value=I.data,i.value=!0}).catch(I=>{console.error(":",I),Y({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(I){Y({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",I)}},A=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},B=V=>{V.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(u.value=V.data.data,U(1))};return mt(()=>{window.addEventListener("message",B)}),In(()=>{Be.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",B)}),t({open:K,getRandomTags:_e}),(V,I)=>(b(),C(Ie,null,[a.value?(b(),wt(kn,{key:0,title:f(o)("randomUtils.title"),position:x.value.randomRuleSetting.position,size:x.value.randomRuleSetting.size,"z-index":f(Be).getZIndex("randomRuleSetting"),"onUpdate:position":I[2]||(I[2]=W=>H("randomRuleSetting",W)),"onUpdate:size":I[3]||(I[3]=W=>j("randomRuleSetting",W)),onActive:I[4]||(I[4]=W=>f(Be).setActiveWindow("randomRuleSetting")),onClose:I[5]||(I[5]=W=>N())},{default:it(()=>[s("div",FS,[s("div",BS,[s("div",US,[s("h3",null,g(f(o)("randomUtils.ruleTemplates")),1)]),s("div",VS,[s("div",WS,[s("div",zS,[ve(s("select",{"onUpdate:modelValue":I[0]||(I[0]=W=>z.value=W),onChange:G,class:"form-select template-select"},[s("option",HS,g(f(o)("randomUtils.selectTemplate")),1),(b(!0),C(Ie,null,ze(te.value,(W,k)=>(b(),C("option",{key:k,value:W.path_name},g(W.file_name),9,jS))),128))],544),[[Gt,z.value]]),s("button",{class:"apply-template-btn",onClick:ie,disabled:!z.value},g(f(o)("randomUtils.applyTemplate")),9,GS)]),s("div",qS,[s("button",{class:"new-template-btn",onClick:ue},g(f(o)("randomUtils.newTemplate")),1),s("button",{class:"edit-template-btn",onClick:de,disabled:!z.value},g(f(o)("randomUtils.editTemplate")),9,KS),s("button",{class:"delete-template-btn",onClick:ge,disabled:!z.value},g(f(o)("randomUtils.deleteTemplate")),9,YS)])]),oe.value?(b(),C("div",JS,[ve(s("input",{type:"text","onUpdate:modelValue":I[1]||(I[1]=W=>ne.value=W),class:"form-input",placeholder:f(o)("randomUtils.templateNamePlaceholder")},null,8,XS),[[Ae,ne.value]]),s("div",QS,[s("button",{class:"save-template-btn",onClick:ae},g(f(o)("randomUtils.save")),1),s("button",{class:"cancel-template-btn",onClick:ke},g(f(o)("randomUtils.cancel")),1)])])):re("",!0)])]),z.value&&i.value?(b(),C("div",ZS,[s("div",eT,[s("div",tT,[s("h3",null,g(f(o)("randomUtils.rules")),1),s("button",{class:"add-rule-btn",onClick:y},[I[6]||(I[6]=s("span",null,"+",-1)),je(" "+g(f(o)("randomUtils.addRule")),1)])]),s("div",nT,[s("p",null,g(f(o)("randomUtils.rulesReminder")),1)]),s("div",oT,[(b(!0),C(Ie,null,ze(c.value.rules,(W,k)=>(b(),C("div",{key:k,class:"rule-item"},[s("div",aT,[s("h4",null,g(f(o)("randomUtils.rule"))+" #"+g(k+1),1),s("button",{class:"delete-rule-btn",onClick:w=>S(k)},"",8,lT)]),s("div",sT,[s("div",iT,[s("label",null,g(f(o)("randomUtils.range")),1),s("div",rT,[ve(s("input",{type:"number","onUpdate:modelValue":w=>W.range.min=w,min:"1",class:"form-input range-input"},null,8,uT),[[Ae,W.range.min,void 0,{number:!0}]]),I[7]||(I[7]=s("span",null,"-",-1)),ve(s("input",{type:"number","onUpdate:modelValue":w=>W.range.max=w,min:"1",class:"form-input range-input"},null,8,cT),[[Ae,W.range.max,void 0,{number:!0}]])])]),s("div",dT,[s("label",null,g(f(o)("randomUtils.tagType")),1),ve(s("select",{"onUpdate:modelValue":w=>W.type=w,class:"form-select"},[s("option",fT,g(f(o)("randomUtils.category")),1),s("option",gT,g(f(o)("randomUtils.specificTags")),1)],8,pT),[[Gt,W.type]])]),W.type==="category"?(b(),C("div",mT,[s("div",vT,[s("div",hT,[s("span",null,g(f(o)("importDialog.selectedCategories")),1)]),s("div",_T,[le(W.tagGroupList).length>0?(b(),C("div",yT,[s("div",bT,g(f(o)("importDialog.primaryCategories")),1),s("div",wT,[(b(!0),C(Ie,null,ze(le(W.tagGroupList),(w,O)=>(b(),C("div",{key:"primary-"+O,class:"selected-item"},[s("span",xT,g(w.group.name),1)]))),128))])])):re("",!0),P(W.tagGroupList).length>0?(b(),C("div",ST,[s("div",TT,g(f(o)("importDialog.subCategories")),1),s("div",kT,[(b(!0),C(Ie,null,ze(P(W.tagGroupList),(w,O)=>(b(),C("div",{key:"sub-"+O,class:"selected-item"},[s("span",CT,g(w.group.name),1),I[8]||(I[8]=s("span",{class:"separator"},">",-1)),s("span",ET,g(w.sub.name),1)]))),128))])])):re("",!0),!W.tagGroupList||W.tagGroupList.length===0?(b(),C("div",$T,g(f(o)("importDialog.noSelectedCategories")),1)):re("",!0)])]),s("button",{class:"add-tag-btn",onClick:w=>X(k,W.tagGroupList)},g(f(o)("randomUtils.selectTagGroup")),9,LT)])):re("",!0),W.type==="specific"?(b(),C("div",AT,[s("label",null,g(f(o)("randomUtils.specificTags")),1),s("div",MT,[(b(!0),C(Ie,null,ze(W.specificTags,(w,O)=>(b(),C("div",{key:O,class:"tag-chip"},[je(g(w)+" ",1),s("button",{class:"remove-tag-btn",onClick:Q=>T(W,O)},"",8,IT)]))),128)),ve(s("input",{type:"text","onUpdate:modelValue":w=>W.tagInput=w,onKeydown:an(Je(w=>$(W),["prevent"]),["enter"]),class:"tag-input",placeholder:f(o)("randomUtils.addTagPlaceholder")},null,40,DT),[[Ae,W.tagInput]])]),s("button",{class:"add-tag-btn",onClick:w=>$(W)},g(f(o)("randomUtils.addTag")),9,RT)])):re("",!0)])]))),128))])])])):re("",!0)]),s("div",OT,[s("button",{class:"save-btn",onClick:m,disabled:!z.value},g(f(o)("common.save")),9,NT)])]),_:1},8,["title","position","size","z-index"])):re("",!0),Ue(PS,{ref_key:"tagGroupSelectItem",ref:l,onSureSelect:Z},null,512)],64))}},[["__scopeId","data-v-71de91e1"]]);function Ra(e){let t=e.length;for(;--t>=0;)e[t]=0}const FT=3,BT=258,jg=29,UT=256+1+jg,Gg=30,VT=512,WT=new Array((UT+2)*2);Ra(WT);const zT=new Array(Gg*2);Ra(zT);const HT=new Array(VT);Ra(HT);const jT=new Array(BT-FT+1);Ra(jT);const GT=new Array(jg);Ra(GT);const qT=new Array(Gg);Ra(qT);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const cu=new Uint8Array(256);for(let e=0;e<256;e++)cu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;cu[254]=cu[254]=1;const KT={class:"tag-manager"},YT={class:"form-group"},JT={class:"select-group-item"},XT=["value","placeholder"],QT={class:"form-group"},ZT=["placeholder"],ek={class:"form-group"},tk=["placeholder"],nk={class:"form-group"},ok={class:"color-picker"},ak={class:"color-controls"},lk={class:"alpha-control"},sk={class:"alpha-value"},ik=_t({__name:"favour",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(null),l=h(!1),i=h({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),r=h({group:{id_index:0,name:"",color:"",create_time:0,p_uuid:""},sub:{id_index:0,name:"",color:"",create_time:0,g_uuid:"",p_uuid:""}}),u=h({hex:"#ff7b02",alpha:40}),p=vt(()=>c(u.value.hex,u.value.alpha)),d=()=>{const $=c(u.value.hex,u.value.alpha);i.value.color=$},c=($,T)=>{const D=parseInt($.slice(1,3),16),J=parseInt($.slice(3,5),16),x=parseInt($.slice(5,7),16);return`rgba(${D}, ${J}, ${x}, ${T/100})`},v=()=>{a.value.open()},m=()=>{if(!i.value.text||!i.value.desc||!r.value.sub.id_index||!r.value.sub.g_uuid){Y({type:"warn",str:"tagManager.textRequired"});return}It.addNewTags({id_index:r.value.sub.id_index,g_uuid:r.value.sub.g_uuid,text:i.value.text,desc:i.value.desc,color:i.value.color?i.value.color:"rgba(255, 123, 2, .4)"}).then($=>{window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.addSuccess"}),y()}).catch($=>{Y({type:"warn",str:"message.networkError"})})},y=()=>{i.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},l.value=!1},S=$=>{r.value=$,i.value.id_index=$.sub.id_index};return t({open:($,T)=>{i.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},i.value.text=$,i.value.desc=T,l.value=!0}}),($,T)=>(b(),C(Ie,null,[Ue($a,{modelValue:l.value,"onUpdate:modelValue":T[5]||(T[5]=D=>l.value=D),title:f(o)("tagManager.addTag")},{footer:it(()=>[s("button",{onClick:T[4]||(T[4]=D=>l.value=!1)},g(f(o)("common.cancel")),1),s("button",{onClick:m},g(f(o)("common.confirm")),1)]),default:it(()=>[s("div",KT,[s("div",YT,[s("label",null,g(f(o)("importDialog.selectGroup")),1),s("div",JT,[s("input",{type:"text",value:i.value.id_index!=""?r.value.group.name+" -> "+r.value.sub.name:"",readonly:"",placeholder:f(o)("importDialog.selectGroup")},null,8,XT),s("button",{class:"add-tag-btn",style:{"margin-left":"10px","min-width":"fit-content"},onClick:v},g(f(o)("importDialog.selectGroup")),1)])]),s("div",QT,[s("label",null,g(f(o)("tagManager.text")),1),ve(s("input",{type:"text","onUpdate:modelValue":T[0]||(T[0]=D=>i.value.desc=D),placeholder:f(o)("tagManager.textPlaceholder")},null,8,ZT),[[Ae,i.value.desc]])]),s("div",ek,[s("label",null,g(f(o)("tagManager.description")),1),ve(s("textarea",{"onUpdate:modelValue":T[1]||(T[1]=D=>i.value.text=D),placeholder:f(o)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,tk),[[Ae,i.value.text]])]),s("div",nk,[s("label",null,g(f(o)("tagManager.backgroundColor")),1),s("div",ok,[s("div",{class:"color-preview",style:ct({backgroundColor:p.value})},null,4),s("div",ak,[ve(s("input",{type:"color","onUpdate:modelValue":T[2]||(T[2]=D=>u.value.hex=D),onInput:d,class:"color-input"},null,544),[[Ae,u.value.hex]]),s("div",lk,[ve(s("input",{type:"range","onUpdate:modelValue":T[3]||(T[3]=D=>u.value.alpha=D),min:"0",max:"100",onInput:d,class:"alpha-slider"},null,544),[[Ae,u.value.alpha,void 0,{number:!0}]]),s("span",sk,g(u.value.alpha)+"%",1)])])])])])]),_:1},8,["modelValue","title"]),Ue(Tf,{ref_key:"tagGroupSelectItem",ref:a,onSureSelect:S},null,512)],64))}},[["__scopeId","data-v-08abaad1"]]),rk={class:"weilin_prompt_ui_prompt-box"},uk={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},ck={class:"center-container"},dk={class:"action-item"},pk=["title"],fk={class:"action-text"},gk={class:"action-item"},mk=["title"],vk={class:"action-text"},hk={class:"action-item"},_k={class:"action-text"},yk={class:"action-item"},bk=["title"],wk={class:"action-text"},xk={class:"action-item"},Sk=["title"],Tk={class:"action-text"},kk={class:"action-item"},Ck=["title"],Ek={class:"action-text"},$k={key:0,class:"action-item"},Lk=["title"],Ak={class:"action-text"},Mk={class:"action-item"},Ik=["title"],Dk={class:"action-text"},Rk={class:"action-item"},Ok=["title"],Nk={class:"action-text"},Pk={class:"action-item"},Fk=["title"],Bk={class:"action-text"},Uk={class:"action-item"},Vk=["title"],Wk={class:"action-text"},zk={class:"action-item"},Hk=["title"],jk={class:"action-text"},Gk={class:"action-item"},qk=["title"],Kk={class:"action-text"},Yk={class:"action-item"},Jk=["title"],Xk={class:"action-text"},Qk={class:"action-item weilin-comfyui-toolbar-right"},Zk=["disabled"],eC=["placeholder"],tC={class:"token-counter"},nC=["onClick"],oC={class:"tag"},aC={class:"desc"},lC={class:"prompt-input-translate-area"},sC={style:{display:"flex","align-items":"center"}},iC=["placeholder"],rC=["title"],uC={style:{"margin-left":"5px"},class:"action-text"},cC=["title"],dC={class:"action-text"},pC=["title"],fC={class:"action-text"},gC=["title"],mC={class:"action-text"},vC=["title"],hC={class:"action-text"},_C=["title"],yC={class:"action-text"},bC={key:0,class:"tokens-container"},wC=["draggable","onDragstart","onDragover","onDrop","onDblclick"],xC={key:0,class:"newline-token"},SC=["title"],TC=["onMouseenter","onMouseleave"],kC=["title"],CC=["title","onMouseenter","onMouseleave"],EC={style:{"margin-left":"5px"}},$C=["onMouseenter","onMouseleave"],LC=["onClick"],AC=["value","onInput","onBlur","onKeyup"],MC=["onClick","title"],IC={key:4,class:"translation-result"},DC=["onClick","title"],RC={class:"translated-text"},OC={key:0,class:"line-break"},NC={class:"tag-tips-content"},PC=["innerHTML"],FC={key:0,class:"weight-control"},BC={class:"weight-label"},UC={key:1,class:"lora-weight-controls"},VC={class:"weight-control"},WC={class:"weight-label"},zC={class:"weight-control"},HC={class:"weight-label"},jC=["title"],GC=["title"],qC={key:2,class:"bracket-btn-group"},KC={class:"bracket-btn-container"},YC={class:"vertical-btn-group"},JC=["title"],XC=["title"],QC={class:"bracket-btn-container"},ZC={class:"vertical-btn-group"},eE=["title"],tE=["title"],nE={class:"bracket-btn-container"},oE={class:"vertical-btn-group"},aE=["title"],lE=["title"],sE=["title"],iE={class:"tag-manager-section"},rE={class:"weilin-comfyui-selection-actions-content"},uE={class:"weilin-comfyui-selection-actions-count"},cE={class:"header-left"},dE={class:"section-title"},pE={class:"header-right"},fE={class:"lora-manager-container"},gE={class:"tag-manager-section"},mE={class:"header-left"},vE={class:"section-title"},hE={class:"header-right"},_E={class:"tag-manager-container"},yE="weilin_prompt_ui_",Il="weilin-selection-box",bE=16,qg="weilin_prompt_ui_sidebar_visible",wE="weilin_prompt_ui_main_labels_v1",xE=50,SE=_t({__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=h(null),{t:o}=ht(),a=h(),l=h(),i=h({top:0,left:0}),r=h(0),u=e,p=h(null),d=h(""),c=h([]),v={},m=h(null),y=h(!1),S=h({top:"0px",left:"0px"}),$=h(!1),T=h(null),D=h(null),J=h(null),x=h([]),N=h(!1),H=h(!1),j=h([]),K=h(0),X=h(null),_e=h(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),le=h(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),P=h(""),Z=h(!1),te=h({x:0,y:0}),z=h({x:0,y:0}),ne=h([]),oe=h(null),F=h(!1),U=h(!1),ue=h(!1),ke=h({top:"0px",left:"0px"}),ie=h(!1),ge=h(!1),de=h(0),ae=h(!1),G=h({top:"0px",left:"0px"}),A=h(localStorage.getItem("weilin_prompt_ui_show_delete_button")!=="false"),B=()=>{localStorage.setItem("weilin_prompt_ui_show_delete_button",String(A.value))},V=()=>{A.value=!A.value,B()},I=M=>{M.key==="weilin_prompt_ui_show_delete_button"&&(A.value=M.newValue!=="false")};mt(()=>{window.addEventListener("storage",I),window.addEventListener("storage",xe)}),In(()=>{window.removeEventListener("storage",I),window.removeEventListener("storage",xe)});const W=h(null),k=h(null),w=h(""),O=h(0),Q=h(!0),pe=h(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),ye=h(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),L=h(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),_=h(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),R=h(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),q=h(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false");ot([pe,ye,L,_,R,q],([M,E,se,he,Ne,be])=>{localStorage.setItem("weilin_function_toggles_clearAll",String(M)),localStorage.setItem("weilin_function_toggles_deleteButton",String(E)),localStorage.setItem("weilin_function_toggles_randomTag",String(se)),localStorage.setItem("weilin_function_toggles_randomTagSettings",String(he)),localStorage.setItem("weilin_function_toggles_translateTag",String(Ne)),localStorage.setItem("weilin_function_toggles_clearDisabled",String(be))});const xe=M=>{M.key==="weilin_function_toggles_clearAll"?pe.value=M.newValue!=="false":M.key==="weilin_function_toggles_deleteButton"?ye.value=M.newValue!=="false":M.key==="weilin_function_toggles_randomTag"?L.value=M.newValue!=="false":M.key==="weilin_function_toggles_randomTagSettings"?_.value=M.newValue!=="false":M.key==="weilin_function_toggles_translateTag"?R.value=M.newValue!=="false":M.key==="weilin_function_toggles_clearDisabled"&&(q.value=M.newValue!=="false")},we=()=>{Q.value=!Q.value};ot(Q,M=>{localStorage.setItem(qg,String(M))}),mt(()=>{const M=localStorage.getItem(qg);Q.value=M!=="false"});const ee=()=>(O.value++,`token_${O.value}_${Date.now()}`),me=()=>{N.value=!N.value},Re=()=>{N.value=!1},Pe=h(null),He=h(null),Xe=h(!1),at=`weilin_prompt_ui_last_main_label_id_${u.promptManager||"default"}`,bt=vt(()=>{const M=Q.value?280:0;return`calc(100% - ${(N.value?300:0)+M}px)`});let Dt=!1;const zn=M=>{if(!M){He.value=null,d.value="",qe(()=>{l.value&&(l.value.value="",yo({target:l.value}))}),Xe.value=!1;return}He.value=M.id,Dt=!0,d.value=M.content||"",qe(()=>{l.value&&(l.value.value=d.value,yo({target:l.value}))}),Xe.value=!1};ot(d,M=>{if(Dt){Dt=!1;return}Xe.value=!0}),ot(c,()=>{Dt||(Xe.value=!0)},{deep:!0}),ot(He,M=>{try{localStorage.setItem(at,M||"")}catch{}});function Wo(){try{const M=localStorage.getItem(at);if(!M)return;const E=localStorage.getItem(wE),se=E?JSON.parse(E):[],he=Array.isArray(se)?se.find(Ne=>Ne&&Ne.id===M):null;if(!he)return;He.value=M,Dt=!0,d.value=he.content||"",qe(()=>{l.value&&(l.value.value=d.value,yo({target:l.value})),Dt=!1}),Xe.value=!1}catch{}}mt(()=>{Wo();const M=()=>{try{localStorage.setItem(at,He.value||"")}catch{}};window.addEventListener("beforeunload",M),Eo(()=>window.removeEventListener("beforeunload",M))});function Yt(){var M;He.value&&(M=Pe.value)!=null&&M.updateSelectedContent&&(Pe.value.updateSelectedContent(d.value),Xe.value=!1,Dl())}const Zt=h(!1);let $n=null;function Dl(){Zt.value=!0,$n&&clearTimeout($n),$n=setTimeout(()=>{Zt.value=!1},1600)}Eo(()=>{$n&&clearTimeout($n)});const Rl=()=>{T.value.open()},Pt=h(1),Ve=()=>{if(m.value===null)return;let E=c.value[m.value].text;if(!gu(E)){Y({type:"warn",str:"message.noFinishKuo"});return}const se=$e=>$e.startsWith("(")&&$e.endsWith(")")&&!$e.slice(1,-1).includes("(")&&!$e.slice(1,-1).includes(")")&&!$e.slice(1,-1).includes("[")&&!$e.slice(1,-1).includes("]")&&!$e.slice(1,-1).includes("{")&&!$e.slice(1,-1).includes("}")&&!$e.slice(1,-1).includes("<")&&!$e.slice(1,-1).includes(">");let he=E;const Ne=/:(-?\d+(\.\d+)?)$/.test(E),be=E.match(/^\((.*?):(-?\d+(\.\d+)?)\)$/);if(Ne||be)Pt.value===1?E.startsWith("(")&&E.endsWith(")")?he=E.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):he=E.replace(/:(\d+(\.\d+)?)$/,""):be?he=`(${be[1]}:${Pt.value})`:he=E.replace(/:(-?\d+(\.\d+)?)$/,`:${Pt.value}`);else{const $e=E.match(/^([^_]+)_(\([^)]+\))$/);if($e&&!E.includes("\\(")&&!E.includes("\\)")){const[,De,et]=$e;Pt.value===1?he=E:he=`(${De} ${et}:${Pt.value})`}else E.includes("\\(")&&E.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test(E.replace(/\\[\(\)\[\]\{\}<>]/g,""))?Pt.value===1?he=E:E.startsWith("(")&&E.endsWith(")")?he=E.replace(/\)$/,`:${Pt.value})`):he=`(${E}:${Pt.value})`:/[\(\[\{\<\)\]\}\>]/.test(E)?Pt.value===1&&se(E)?he=E.slice(1,-1):Pt.value===1?he=E:E.startsWith("(")&&E.endsWith(")")?he=E.replace(/\)$/,`:${Pt.value})`):he=`(${E}:${Pt.value})`:Pt.value===1?he=E:he=`(${E}:${Pt.value})`}c.value[m.value].text=he,Nn()},Ce=h(.5),Ee=h(.5);ot(m,M=>{var E;if(M!==null&&((E=c.value[M])!=null&&E.isLoraTag)){const he=c.value[M].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);he&&(Ce.value=parseFloat(he[2]),Ee.value=parseFloat(he[3]))}});const Lt=()=>{var M;if(m.value!==null&&((M=c.value[m.value])!=null&&M.isLoraTag)){const E=c.value[m.value],se=E.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(se){const Ne=`<wlr:${se[1]}:${Ce.value}:${Ee.value}>`;E.text=Ne,Nn()}}},xn=M=>{if(m.value===null)return;let se=c.value[m.value].text;const he={"(":")","[":"]","{":"}","<":">"}[M];se=`${M}${se}${he}`,c.value[m.value].text=se,On()},Ol=M=>{if(m.value===null)return;let se=c.value[m.value].text;const he={"(":")","[":"]","{":"}","<":">"};se.startsWith(M)&&se.endsWith(he[M])&&(se=se.slice(1,-1),c.value[m.value].text=se,On())},gu=M=>{const E=[],se={"(":")","[":"]","{":"}","<":">"};for(let he of M)if(se[he])E.push(he);else if(Object.values(se).includes(he)&&(E.length===0||se[E.pop()]!==he))return!1;return E.length===0};wc(()=>{for(const M in v)delete v[M]}),h(!0),h(!1);const mu=M=>/[\p{L}]/u.test(M),Nl=M=>{const E=M.match(/([^:]+):[\d.]+/);return E?E[1]:M};let Fa=null;const Ba=async()=>{Fa&&clearTimeout(Fa),Fa=setTimeout(async()=>{if(!l.value)return;const M=l.value,E=M.selectionStart;await qe();const se=M.value.substring(0,E),he=document.createElement("div");he.style.position="absolute",he.style.top="0",he.style.left="0",he.style.visibility="hidden",he.style.whiteSpace="pre-wrap",he.style.wordWrap="break-word",he.style.width=window.getComputedStyle(M).width,he.style.font=window.getComputedStyle(M).font,he.style.padding=window.getComputedStyle(M).padding;const Ne=document.createTextNode(se),be=document.createElement("span");be.textContent="|",he.appendChild(Ne),he.appendChild(be),M.parentNode.appendChild(he);const $e=be.getBoundingClientRect(),De=M.parentNode.getBoundingClientRect();let et=$e.top-De.top+$e.height,pt=$e.left-De.left;if(await qe(),a.value){const Mt=a.value.offsetWidth,Gn=M.offsetWidth,en=M.getBoundingClientRect().left-De.left;pt+Mt>en+Gn&&(pt=en+Gn-Mt),pt<en&&(pt=en),pt=Math.max(0,Math.min(pt,De.width-Mt))}M.parentNode.removeChild(he),i.value={top:et,left:pt},Fa=null},50)},ii=h(null),yo=M=>{if(!(M!=null&&M.target)||!l.value)return;const E=M.target.value,se=M.target.selectionStart,he=M.target.selectionEnd,Ne={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern://g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern://g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"["},{pattern://g,replace:"]"},{pattern://g,replace:"("},{pattern://g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"<"},{pattern://g,replace:">"}]}};let be=E.substring(0,se),$e=E;Object.values(Ne).forEach(Qe=>{Qe.enabled&&(Qe.pattern?(be=be.replace(Qe.pattern,Qe.replace),$e=$e.replace(Qe.pattern,Qe.replace)):Qe.patterns&&Qe.patterns.forEach(({pattern:Ct,replace:St})=>{be=be.replace(Ct,St),$e=$e.replace(Ct,St)}))}),d.value=$e;const De=be.length,et=he-se,pt=De+et;qe(()=>{l.value&&(l.value.setSelectionRange(De,pt),l.value.focus())});const Mt=$e.substring(0,De),Gn=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",en=De>0?Mt[De-1]:"";if((en===","||en===" ")&&Gn){H.value=!1,W.value&&clearTimeout(W.value),W.value=setTimeout(()=>{var zl;const Qe=((zl=l.value)==null?void 0:zl.selectionStart)||0,St=(d.value||"").substring(0,Qe);let rn=Qe;for(;rn>0&&!/[,\s]/.test(St[rn-1]);)rn--;const Wl=St.substring(rn,Qe).trim();Wl&&cm(Wl),ra()},300),r.value=Ua(d.value);return}let ft=De;for(;ft>0&&!/[,\s]/.test(Mt[ft-1]);)ft--;const tt=Mt.substring(ft,De).trim();W.value&&clearTimeout(W.value),W.value=setTimeout(()=>{tt&&cm(tt),ra()},300),r.value=Ua(d.value)},Ua=M=>M?M.trim().split(/\s+/).length:0,Jt=async()=>{let M=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",E=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",se=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",he=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),M=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),E=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),se=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),he=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),M&&(d.value=d.value.replace(//g,",")),E&&(d.value=d.value.replace(//g,".")),se&&(d.value=d.value.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),he&&(d.value=d.value.replace(//g,"<").replace(//g,">"));const Ne=d.value;let be=[];const $e=c.value.map((lt,ft)=>({token:lt,originalIndex:ft,currentIndex:ft})).filter(({token:lt})=>lt.isHidden);be=((lt,ft=0)=>{let tt=[],Qe=ft,Ct="",St=[];for(;Qe<lt.length;){const rn=lt[Qe];if(rn===`
`){Ct.trim()&&(tt.push(Ct.trim()),Ct=""),tt.push(`
`),Qe++;continue}St.length===0&&rn===","?(Ct.trim()&&tt.push(Ct.trim()),Ct=""):Ct+=rn,Qe++}return Ct.trim()&&(St.length===0?tt.push(...Ct.split(",").filter(Boolean).map(rn=>rn.trim())):tt.push(Ct.trim())),tt})(Ne);const et=new Map;c.value.forEach((lt,ft)=>{lt.id||(lt.id=ee()),et.set(ft,lt)});const pt=[];be.forEach(lt=>{if(lt===`
`)pt.push({id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(lt.trim()){const ft=lt.trim(),tt=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(ft);let Qe=!1;for(const[Ct,St]of et)if(St.text===ft&&!St.isHidden&&!pt.includes(St)){tt&&!St.isLoraTag&&(St.isLoraTag=!0),pt.push(St),et.delete(Ct),Qe=!0;break}if(!Qe){for(const[Ct,St]of et)if(St.text===ft&&!pt.includes(St)){tt&&!St.isLoraTag&&(St.isLoraTag=!0),pt.push(St),et.delete(Ct),Qe=!0;break}}Qe||pt.push({id:ee(),text:ft,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:tt})}});const Mt=new Set;$e.forEach(({token:lt,originalIndex:ft})=>{if(Mt.has(lt.id)||(Mt.add(lt.id),pt.some(Ct=>Ct.id===lt.id)))return;let Qe=ft;for(;Qe>pt.length;)Qe--;Qe<0?pt.push(lt):pt.splice(Qe,0,lt)}),c.value=pt,d.value=c.value.length>0?c.value.reduce((lt,ft,tt)=>{var zl,vm;if(ft.isHidden)return lt;if(ft.text===`
`){const wo=ja(tt);return wo!==-1&&c.value[wo],lt+ft.text}if(lt===""){let wo=tt+1;for(;wo<c.value.length&&((zl=c.value[wo])!=null&&zl.isHidden);)wo++;const nI=wo>=c.value.length,hm=wo<c.value.length?c.value[wo]:null,oI=nI||hm&&hm.text===`
`;return ft.text+(oI?",":"")}let Qe=tt+1;for(;Qe<c.value.length&&((vm=c.value[Qe])!=null&&vm.isHidden);)Qe++;const Ct=Qe>=c.value.length,St=Qe<c.value.length?c.value[Qe]:null,rn=St&&St.text===`
`||Ct,Wl=ja(tt);return Wl!==-1&&c.value[Wl].text===`
`?lt+ft.text+(rn?",":""):lt+", "+ft.text+(rn?",":"")},""):"",k.value&&clearTimeout(k.value),k.value=setTimeout(()=>{On()},1e3),ra();const Gn=20;let en=0;for(;en<c.value.length;){const lt=Math.min(en+Gn,c.value.length),ft=[];for(let tt=en;tt<lt;tt++)if(c.value[tt].text.length>0&&!c.value[tt].translate){let Qe=c.value[tt].text;const Ct=Nl(Qe.trim());ft.push(yn.getTranslateLocal(Ct).then(St=>{const rn=St;c.value[tt].translate=rn.translated.translate,c.value[tt].color=rn.translated.color}))}await Promise.all(ft),en=lt}r.value=Ua(d.value)},ri=async()=>{let E=0;const se=20;for(;E<c.value.length;){let he=[],Ne=[],be=0;for(let $e=E;$e<c.value.length;$e++){const De=c.value[$e];if(De.translate&&/[a-zA-Z]/.test(De.translate)&&!(typeof De.text=="string"&&De.text.startsWith("<wlr"))){const et=De.text;if(et.length>se){const Mt=JSON.stringify([{index:De.id,text:et,translate:""}]);await Pl(Mt,[De.id]),E=$e+1;break}else he.push({index:De.id,text:et,translate:""}),Ne.push(De.id),be++}if(be===2)break}if(he.length>0){const $e=JSON.stringify(he);await Pl($e)}E+=be>0?be:1}},Pl=async(M,E)=>{let se=0;for(;se<2;)try{const he=await yn.translaterText(M,"");if(he&&he.data){const Ne=JSON.parse(he.data);for(let be=0;be<Ne.length;be++){const $e=Ne[be],De=c.value.findIndex(et=>et.id===$e.index);De!==-1&&(c.value[De].translate=$e.translate)}return!0}return!1}catch{if(se++,se>=2)return!1}return!1},bo=h(""),On=()=>{const M=d.value.replace(/[\s\t\n]+/g,"");if(x.value.length>0){if(M.length>0){const E=x.value.filter(Ne=>!Ne.hidden);let se={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:x.value};E.length>0&&(se.lora=E);const he=JSON.stringify(se);bo.value!=he&&(bo.value=he,Wn.saveHistory({tag:he}))}}else if(bo.value!=d.value){const E={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:""},se=JSON.stringify(E);M.length>0&&Wn.saveHistory({tag:se})}ra(),Dt||(Xe.value=!0)},ra=()=>{if(x.value.length>0){bo.value=d.value;const M=x.value.filter(he=>!he.hidden);let E={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:x.value};M.length>0&&(E.lora=M);const se=JSON.stringify(E);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:se},"*")}else{bo.value=d.value;const M={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:""},E=JSON.stringify(M);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:E},"*")}},Fl=(M,E)=>{if(F.value)return;to.value&&(clearTimeout(to.value),to.value=null);const se=E.target.getBoundingClientRect();S.value={top:`${se.top-50}px`,left:`${se.left+se.width/2}px`},m.value=M;const he=c.value[M].text;Pt.value=ui(he),G.value={top:`${se.bottom+window.scrollY+se.height+10}px`,left:`${se.left+se.width/2}px`},c.value[M].isLoraTag||(ae.value=!0)},ui=M=>{const E=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const he of E)if(M.startsWith(he.open)&&M.endsWith(he.close))return ui(M.slice(1,-1));const se=M.match(/:(\d+(\.\d+)?)$/);return se?parseFloat(se[1]):1},to=h(null),Va=M=>{to.value&&clearTimeout(to.value),to.value=setTimeout(()=>{y.value||vu(),to.value=null},100),ae.value=!1},Bl=()=>{y.value=!1,Va(m.value),setTimeout(()=>{y.value||(F.value=!1)},100)},vu=()=>{y.value||(m.value=null)},hu=()=>{if(m.value!==null){const M=m.value;di(M),m.value=null,y.value=!1}},ci=()=>{if(m.value!==null){const M=m.value;c.value.splice(M+1,0,{id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),Nn()}},di=M=>{const E=d.value;let se=c.value[M],he=0,Ne=-1;for(let be=0;be<M;be++){let $e=E.indexOf(c.value[be].text,he);$e!==-1&&(he=$e+c.value[be].text.length)}if(se.text===`
`||se.text==="	"){for(let be=he;be<E.length;be++)if(E[be]===se.text){Ne=be;break}}else Ne=E.indexOf(se.text,he);if(Ne!==-1){const be=se.text===`
`?" ":"",$e=E.substring(0,Ne)+be+E.substring(Ne+se.text.length);d.value=$e}c.value.splice(M,1),d.value=c.value.length>0?c.value.reduce((be,$e,De)=>{var lt,ft;if($e.isHidden)return be;if($e.text===`
`){const tt=ja(De);return tt!==-1&&c.value[tt],be+$e.text}if(be===""){let tt=De+1;for(;tt<c.value.length&&((lt=c.value[tt])!=null&&lt.isHidden);)tt++;const Qe=tt>=c.value.length,Ct=tt<c.value.length?c.value[tt]:null,St=Qe||Ct&&Ct.text===`
`;return $e.text+(St?",":"")}let et=De+1;for(;et<c.value.length&&((ft=c.value[et])!=null&&ft.isHidden);)et++;const pt=et>=c.value.length,Mt=et<c.value.length?c.value[et]:null,Gn=Mt&&Mt.text===`
`||pt,en=ja(De);return en!==-1&&c.value[en].text===`
`?be+$e.text+(Gn?",":""):be+", "+$e.text+(Gn?",":"")},""):"",On(),Xe.value=!0},fe=(M,E)=>{const se=d.value;let he=0,Ne=-1;for(let $e=0;$e<M;$e++){let De=se.indexOf(c.value[$e].text,he);De!==-1&&(he=De+c.value[$e].text.length)}const be=c.value[M].text;if(Ne=se.indexOf(be,he),Ne!==-1){const $e=E.target.value,De=se.substring(0,Ne)+$e+se.substring(Ne+be.length);d.value=De,c.value[M]={...c.value[M],text:$e},On()}},ce=M=>{c.value[M].isPunctuation||(c.value[M].isEditing=!0,setTimeout(()=>{const E=v[M];if(E){E.focus();const se=E.value.length;E.setSelectionRange(se,se),Se(E),E.addEventListener("input",()=>Se(E)),On(),Xe.value=!0}}))},Se=M=>{const E=document.createElement("span");E.style.visibility="hidden",E.style.position="absolute",E.style.whiteSpace="pre";const se=window.getComputedStyle(M);E.style.font=se.font,E.style.fontSize=se.fontSize,E.style.fontFamily=se.fontFamily,E.style.padding=se.padding,E.style.border=se.border,E.textContent=M.value||M.placeholder||"",document.body.appendChild(E);const he=E.offsetWidth;M.style.width=`${Math.max(he+4,20)}px`,document.body.removeChild(E)},Ke=M=>{c.value[M].isEditing=!1};ot(c,M=>{Nn()},{deep:!0}),ot(x,M=>{On(),Xe.value=!0},{deep:!0});const Ft=()=>{$.value=!$.value,$.value&&qe(()=>{var E;const M=D.value.getBoundingClientRect();(E=J.value)==null||E.setPosition(M)})},Xt=()=>{$.value=!1},st=M=>{var E,se;D.value&&!D.value.contains(M.target)&&J.value&&!J.value.$el.contains(M.target)&&Xt(),(E=a.value)!=null&&E.contains&&((se=l.value)!=null&&se.contains)&&!a.value.contains(M.target)&&!l.value.contains(M.target)&&(H.value=!1)},Bt=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},pi=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},Hn=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},Wa=h(!0),SM=()=>{Wa.value=!Wa.value},fi=h(!1),TM=()=>{fi.value=!fi.value};h(null);const kM=()=>{const M=l.value;M&&(M.addEventListener("keyup",za),M.addEventListener("click",za),M.addEventListener("input",za))},za=()=>{H.value&&Ba()},nm=()=>{if(l.value){const M=l.value.style.height||`${l.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",M)}},CM=()=>{const M=localStorage.getItem("weilinPromptTextAreaHeight");M&&l.value&&(l.value.style.height=M)};mt(()=>{document.addEventListener("click",st),window.addEventListener("message",im),rm(),kM(),qe(()=>{CM()}),setTimeout(()=>{oe.value||(oe.value=document.querySelector(".tokens-container")),oe.value?(oe.value.removeEventListener("mousedown",gi),oe.value.removeEventListener("mousemove",mi),oe.value.removeEventListener("mouseup",zo),oe.value.removeEventListener("mouseleave",zo),oe.value.addEventListener("mousedown",gi),oe.value.addEventListener("mousemove",mi),oe.value.addEventListener("mouseup",zo),oe.value.addEventListener("mouseleave",zo),oe.value.style.userSelect="none",oe.value.style.cursor="default",console.log("")):console.warn("tokens-container")},100)}),Eo(()=>{oe.value&&(oe.value.removeEventListener("mousedown",gi),oe.value.removeEventListener("mousemove",mi),oe.value.removeEventListener("mouseup",zo),oe.value.removeEventListener("mouseleave",zo)),vi()});const gi=M=>{if(M.button===0&&!M.ctrlKey&&!M.metaKey){const E=M.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),se=oe.value;if(se&&!E){U.value=!1,Z.value=!1,ie.value=!1,ge.value=!1,Ul(),vi();const he=se.getBoundingClientRect();te.value={x:Math.max(M.clientX,he.left),y:Math.max(M.clientY,he.top)},z.value={x:Math.max(M.clientX,he.left),y:Math.max(M.clientY,he.top)},U.value=!0,console.log("")}}},mi=M=>{if(U.value&&oe.value&&!Z.value&&Math.sqrt(Math.pow(M.clientX-te.value.x,2)+Math.pow(M.clientY-te.value.y,2))>3&&(M.preventDefault(),M.stopPropagation(),Z.value=!0,F.value=!0,ne.value=[],om(),console.log("")),Z.value&&oe.value){M.preventDefault(),M.stopPropagation();const E=oe.value.getBoundingClientRect();z.value={x:Math.min(Math.max(M.clientX,E.left),E.right),y:Math.min(Math.max(M.clientY,E.top),E.bottom)};const se=5;Math.abs(z.value.x-te.value.x)<se&&(z.value.x=te.value.x+se),Math.abs(z.value.y-te.value.y)<se&&(z.value.y=te.value.y+se),(!ie.value||Date.now()-de.value>100)&&(ie.value=!0,requestAnimationFrame(()=>{am(),ie.value=!1}));const he=Date.now();!ge.value&&he-de.value>bE&&(de.value=he,ge.value=!0,requestAnimationFrame(()=>{EM(),ge.value=!1}))}},zo=()=>{if(U.value=!1,Z.value){const M=ne.value.length;Z.value=!1,F.value=!1,ie.value=!1,ge.value=!1,vi(),M>0&&$M()}},om=()=>{try{let M=document.getElementById(Il);M&&document.body.removeChild(M),M=document.createElement("div"),M.id=Il,M.style.cssText=`
      position: fixed;
      background-color: rgba(66, 133, 244, 0.4);
      border: 2px dashed #4285f4;
      box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
      pointer-events: none;
      z-index: 99999;
      transition: none;
      opacity: 1;
      display: block;
    `,document.body.appendChild(M),console.log(""),am()}catch(M){console.error(":",M),ie.value=!1}},am=()=>{try{let M=document.getElementById(Il);if(!M&&Z.value&&(om(),M=document.getElementById(Il),!M))return;const E=Math.min(te.value.x,z.value.x),se=Math.min(te.value.y,z.value.y),he=Math.abs(z.value.x-te.value.x),Ne=Math.abs(z.value.y-te.value.y),be=5,$e=Math.max(he,be),De=Math.max(Ne,be);M&&(M.style.left=`${E}px`,M.style.top=`${se}px`,M.style.width=`${$e}px`,M.style.height=`${De}px`)}catch(M){console.error(":",M),ie.value=!1}},vi=()=>{try{const M=document.getElementById(Il);M&&document.body.removeChild(M)}catch(M){console.error(":",M)}},EM=()=>{ne.value=[];const M=Math.min(te.value.x,z.value.x),E=Math.min(te.value.y,z.value.y),se=Math.max(te.value.x,z.value.x),he=Math.max(te.value.y,z.value.y);document.querySelectorAll(".token-item-box").forEach((be,$e)=>{if(!be.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const et=be.getBoundingClientRect();et.right>=M&&et.left<=se&&et.bottom>=E&&et.top<=he&&ne.value.push($e)}),lm()},lm=()=>{const M=document.querySelectorAll(".token-item-box"),E=[],se=[];M.forEach((he,Ne)=>{ne.value.includes(Ne)?E.push(he):se.push(he)}),E.forEach(he=>{he.classList.add("token-item-box-selected")}),se.forEach(he=>{he.classList.remove("token-item-box-selected"),he.style.border="",he.style.boxShadow="",he.style.backgroundColor=he.dataset.originalBgColor||""})},$M=()=>{if(ne.value.length>0){const M=Math.min(te.value.x,z.value.x),E=Math.min(te.value.y,z.value.y),se=Math.max(te.value.x,z.value.x);Math.max(te.value.y,z.value.y),ke.value={top:`${E-50}px`,left:`${(M+se)/2}px`},ue.value=!0,setTimeout(()=>{document.addEventListener("click",_u)},0)}},LM=()=>{if(ne.value.length===0)return;const se=[...ne.value].sort((he,Ne)=>he-Ne).map(he=>c.value[he].text).join(", ");navigator.clipboard.writeText(se).then(()=>{const he=document.createElement("div");he.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,he.textContent="",document.body.appendChild(he),setTimeout(()=>{document.body.removeChild(he)},2e3)}),Ul()},AM=()=>{ne.value.length!==0&&(ne.value.forEach(M=>{c.value[M]&&!c.value[M].isHidden&&(c.value[M].isHidden=!0,c.value[M].hiddenHint=o("promptBox.hiddenHint"))}),Nn(),On(),Ul())},MM=()=>{ne.value.length!==0&&(ne.value.forEach(M=>{c.value[M]&&c.value[M].isHidden&&(c.value[M].isHidden=!1,c.value[M].hiddenHint="")}),Nn(),On(),Ul())},IM=()=>{ne.value.length>0&&(confirm(` ${ne.value.length} `)?DM():hi())},Ul=()=>{ue.value=!1,document.removeEventListener("click",_u),hi()},_u=M=>{const E=document.querySelector(".token-controls");E&&!E.contains(M.target)&&Ul()},DM=()=>{if(ne.value.length===0)return;[...ne.value].sort((E,se)=>se-E).forEach(E=>{c.value.splice(E,1)}),Nn(),On(),hi()},hi=()=>{document.querySelectorAll(".token-item-box-selected").forEach(E=>{E.classList.remove("token-item-box-selected"),E.style.border="",E.style.boxShadow="",E.style.backgroundColor=E.dataset.originalBgColor||""}),ne.value=[],ue.value&&(ue.value=!1,document.removeEventListener("click",_u))},sm=M=>{if(ne.value.length===0)return;const E=M.target.closest(".token-item-box, .token-item, .token-controls, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box"),se=oe.value;(M.target===l.value||!E&&(!se||!se.contains(M.target)))&&hi()};mt(()=>{document.addEventListener("click",sm)}),In(()=>{document.removeEventListener("click",st),document.removeEventListener("click",sm),ii.value&&clearTimeout(ii.value),window.removeEventListener("message",im);const M=l.value;M&&(M.removeEventListener("keyup",za),M.removeEventListener("click",za),M.removeEventListener("input",za)),oe.value&&(oe.value.removeEventListener("mousedown",gi),oe.value.removeEventListener("mousemove",mi),oe.value.removeEventListener("mouseup",zo),oe.value.removeEventListener("mouseleave",zo)),vi()});const im=M=>{if(M.data.type==="weilin_prompt_ui_insertTag"){const E=d.value,se=M.data.tagText;E===""?d.value=se:(E.endsWith(" "),d.value=E+", "+se+","),w.value=d.value,Jt()}else if(M.data.type==="weilin_prompt_ui_user_history_tag"){const E=M.data.tagText;bo.value=E,gm(E)}else if(M.data.type!=="weilin_prompt_ui_refresh_all_data"){if(M.data.type==="weilin_prompt_ui_translate_setting")rm();else if(M.data.type==="weilin_prompt_ui_selectLora"){if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const E=d.value,se=M.data.lora.loraWorks;E===""?d.value=se:(E.endsWith(" "),d.value=E+", "+se+","),w.value=d.value,Jt()}}else if(M.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")XM(M.data.data);else if(M.data.type==="weilin_prompt_ui_addLoraTag_inner")if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const E=d.value,se=M.data.lora.tag+(M.data.lora.loraWorks===""?"":", "+M.data.lora.loraWorks);E===""?d.value=se:(E.endsWith(" "),d.value=E+", "+se+","),w.value=d.value,Jt()}else{const E=d.value,se=M.data.lora.tag;E===""?d.value=se:(E.endsWith(" "),d.value=E+", "+se+","),w.value=d.value,Jt()}}},rm=async()=>{const M=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",E=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",M),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",E),await qe()},RM=(M,E)=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network")translate.request.translateText(M,function(se){if(se.result>0){const he=se.text.map(Ne=>Ne.replace(/[\[\]]/g,"")).join(", ");E.translate=he}});else{let se={index:E.id,text:E.text,translate:""};const he=JSON.stringify(se);yn.translaterText(he,"").then(Ne=>{if(Ne&&Ne.data){const be=JSON.parse(Ne.data);E.translate=be.translate}})}},um=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")!="network"){let M={text:P.value,translate:""};const E=JSON.stringify(M);yn.translaterInputText(E,"").then(se=>{if(se&&se.data){const he=JSON.parse(se.data);c.value.push({text:he.translate,translate:P.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),P.value="",Nn()}})}},OM=()=>{setTimeout(()=>{H.value||(w.value=d.value,Jt())},100)},cm=M=>{let E=M.replace(/[\[\]{}]/g,"").trim();const he=Nl(E).trim();if(!he){H.value=!1;return}if(he.length>20){H.value=!1;return}try{const Ne=he.toLowerCase();Gr.getAutocomplete(String(Ne)).then(async be=>{j.value=be.data,await Ba(),setTimeout(()=>{_e.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,le.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,H.value=j.value.length>0,K.value=0},50)})}catch(Ne){console.error("Autocomplete error:",Ne),H.value=!1}},NM=M=>{H.value&&(M.key==="ArrowDown"?(M.preventDefault(),K.value=Math.min(K.value+1,j.value.length-1),dm()):M.key==="ArrowUp"?(M.preventDefault(),K.value=Math.max(K.value-1,0),dm()):M.key==="Tab"||M.key==="Enter"?(M.preventDefault(),pm(K.value,null)):M.key==="Escape"&&(M.preventDefault(),fm()))},dm=()=>{qe(()=>{if(X.value&&a.value){const M=a.value,E=X.value,se=M.getBoundingClientRect(),he=E.getBoundingClientRect(),Ne=he.top<se.top,be=he.bottom>se.bottom;Ne?M.scrollTop=M.scrollTop+(he.top-se.top):be&&(M.scrollTop=M.scrollTop+(he.bottom-se.bottom))}})},PM=vt(()=>{if(!p.value)return{left:i.value.left};const M=p.value.offsetWidth;_e.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const E=_e.value;let se=i.value.left;return se+E>M&&(se=M-E),se<0&&(se=0),{left:se}}),pm=(M,E)=>{if(E&&(E.preventDefault(),E.stopPropagation()),!j.value[M])return;H.value=!1;const se=l.value.selectionStart,he=l.value.selectionEnd,Ne=d.value;let be=j.value[M].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(be=be.replace(//g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(be=be.replace(//g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(be=be.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(be=be.replace(//g,"<").replace(//g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(be=be.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(be=be.replace(/\(([^)]+)\)/g,"\\($1\\)"));let $e=se,De=he;for(;$e>0&&!/[,\s]/.test(Ne[$e-1]);)$e--;for(;!1;)De++;let et=Ne.substring(0,$e)+be+", "+Ne.substring(De);const pt=$e+be.length+2;d.value=et,w.value=et,Jt(),qe(()=>{l.value&&(l.value.selectionStart=pt,l.value.selectionEnd=pt)})},fm=()=>{H.value=!1},gm=M=>{if(M.length>0)try{const E=JSON.parse(M);if(d.value=E.prompt,w.value=d.value,E.lora&&E.lora!=""&&(x.value=E.lora),E.temp_prompt&&E.temp_prompt!=""){const se=E.temp_prompt;let he=!1;se.tokens&&se.tokens.length>0&&se.tokens!=""&&(c.value=se.tokens,he=!0),se.lora&&se.lora.length>0&&se.lora!=""&&(x.value=se.lora,he=!0),!he&&se.length>0&&se!=""&&(c.value=se)}if(E.temp_lora&&E.temp_lora.length>0&&E.temp_lora!=""){const se=E.temp_lora;x.value=se}Jt()}catch{Y({type:"warn",str:"promptBox.settings.errorPrompt"})}},_i=h(!1),Vl=h(null),jn=h([]);let Ha=null,Ho=null;const FM=(M,E=!1)=>{_i.value=!0,Vl.value=null,jn.value=[],E&&ne.value.length>1&&ne.value.includes(M)?jn.value=[...ne.value].sort((se,he)=>se-he):(ne.value=[],Vl.value=M),Ho={originalTokens:[...c.value],draggedItems:jn.value.length>0?jn.value.map(se=>c.value[se]):[c.value[M]]}},BM=(M,E)=>{if(F.value){E.preventDefault();return}FM(M,!0),E.dataTransfer.effectAllowed="move"},UM=(M,E,se)=>{const he=E.filter($e=>$e<se).length;let Ne=Math.max(0,se-he);const be=M.length-E.length;return Ne=Math.min(Ne,be),Ne},mm=M=>{if(!Ho)return;const E=[...Ho.originalTokens],se=jn.value.length>0?jn.value:[Vl.value],he=se.map(be=>Ho.originalTokens[be]);for(let be=se.length-1;be>=0;be--){const $e=se[be];$e<E.length&&E.splice($e,1)}const Ne=UM(Ho.originalTokens,se,M);if(Ho.draggedItems.forEach((be,$e)=>{E.splice(Ne+$e,0,be)}),c.value=E,Nn(),jn.value.length>0&&ne.value.length>0){const be=[];for(let $e=0;$e<E.length;$e++){const De=E[$e];he.some(et=>et.text===De.text)&&be.push($e)}ne.value=be,setTimeout(()=>{lm()},0)}},VM=(M,E)=>{if(F.value){E.preventDefault();return}E.preventDefault(),_i.value&&(M<0||M>=c.value.length||jn.value.length>0&&jn.value.includes(M)||jn.value.length===0&&Vl.value===M||(Ha&&clearTimeout(Ha),Ha=setTimeout(()=>{mm(M)},xE)))},WM=(M,E)=>{E.preventDefault(),Ha&&(clearTimeout(Ha),Ha=null),_i.value&&Ho&&mm(M),_i.value=!1,Vl.value=null,jn.value=[],Ho=null},Nn=()=>{d.value=c.value.length>0?c.value.reduce((M,E,se)=>{var et,pt;if(E.isHidden)return M;if(E.text===`
`){const Mt=ja(se);return Mt!==-1&&c.value[Mt],M+E.text}if(M===""){let Mt=se+1;for(;Mt<c.value.length&&((et=c.value[Mt])!=null&&et.isHidden);)Mt++;const Gn=Mt>=c.value.length,en=Mt<c.value.length?c.value[Mt]:null,lt=Gn||en&&en.text===`
`;return E.text+(lt?",":"")}let he=se+1;for(;he<c.value.length&&((pt=c.value[he])!=null&&pt.isHidden);)he++;const Ne=he>=c.value.length,be=he<c.value.length?c.value[he]:null,$e=be&&be.text===`
`||Ne,De=ja(se);return De!==-1&&c.value[De].text===`
`?M+E.text+($e?",":""):M+", "+E.text+($e?",":"")},""):"",ra(),Dt||(Xe.value=!0)},zM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},HM=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},jM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},GM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},qM=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},ja=M=>{for(let E=M-1;E>=0;E--)if(!c.value[E].isHidden)return E;return-1},KM=M=>{if(M>=0&&M<c.value.length){if(c.value[M].text===`
`||c.value[M].text==="	")return;c.value[M].isHidden=!c.value[M].isHidden,c.value[M].isHidden?c.value[M].hiddenHint=o("promptBox.hiddenHint"):c.value[M].hiddenHint="",Nn()}},YM=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},JM=async()=>{if(u.promptManager=="prompt_global")try{await vn.goRandomTemplate().then(M=>{M.code===200?(d.value=M.random_tags,qe(()=>{Jt()})):Y({type:"warn",str:M.info})}).catch(M=>{console.error(M),Y({type:"warn",str:"message.networkError"})})}catch(M){Y({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",M)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},XM=async M=>{try{await vn.goRandomTemplatePath(M).then(E=>{E.code===200?(d.value=E.random_tags,qe(()=>{Jt()})):Y({type:"warn",str:E.info})}).catch(E=>{console.error(E),Y({type:"warn",str:"message.networkError"})})}catch(E){Y({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",E)}},yu=h(null),QM=M=>{yu.value&&yu.value.open(M.text,M.translate)},ZM=()=>{n.value.open(u.promptManager)},eI=()=>{d.value="",c.value=[],P.value="",x.value=[],w.value="",Nn()},tI=()=>{const M=c.value.filter(E=>!E.isHidden);c.value=M,Nn(),Y({type:"success",str:o("promptBox.clearDisabledSuccess")||""})};return t({setPromptText:gm}),(M,E)=>{var se,he,Ne;return b(),C(Ie,null,[s("div",rk,[Ue(ys,{name:"weilin-fade"},{default:it(()=>[Zt.value?(b(),C("div",uk,"")):re("",!0)]),_:1}),u.promptManager==="prompt"?(b(),wt(Nx,{key:0,"is-open":N.value,"selected-loras":x.value,onClose:Re},null,8,["is-open","selected-loras"])):re("",!0),Q.value?(b(),wt(Jx,{key:1,ref_key:"mainLabelManagerRef",ref:Pe,"selected-id":He.value,onSelect:zn},null,8,["selected-id"])):re("",!0),s("div",{class:Le(`${yE}main-content`),style:ct({width:bt.value})},[s("div",ck,[s("div",dk,[s("button",{class:"tag-manager-btn",onClick:we,title:Q.value?"":""},[(b(),C("svg",{class:Le(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!Q.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},E[16]||(E[16]=[s("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)]),2)),s("span",fk,g(Q.value?"":""),1)],8,pk)]),s("div",gk,[s("button",{class:"language-switch-btn",onClick:Je(Ft,["stop"]),ref_key:"langBtnRef",ref:D,title:f(o)("controls.language")},[E[17]||(E[17]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[s("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),s("span",vk,g(f(o)("controls.language")),1)],8,mk),Ue(ys,{name:"fade"},{default:it(()=>[$.value?(b(),wt(K0,{key:0,ref_key:"languageSwitcherRef",ref:J,onClose:Xt},null,512)):re("",!0)]),_:1})]),s("div",hk,[Ue(D4,{title:f(o)("controls.switchTheme")},{default:it(({isDark:be})=>[s("span",_k,g(f(o)(be?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),s("div",yk,[s("button",{class:"settings-btn",onClick:Rl,title:f(o)("controls.settings")},[E[18]||(E[18]=s("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),s("span",wk,g(f(o)("controls.settings")),1)],8,bk)]),s("div",xk,[s("button",{class:"tag-manager-btn",onClick:Bt,title:f(o)("controls.tagManager")},[E[19]||(E[19]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",Tk,g(f(o)("controls.tagManager")),1)],8,Sk)]),s("div",kk,[s("button",{class:"tag-manager-btn",onClick:GM,title:f(o)("controls.danbooruManager")},[E[20]||(E[20]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",Ek,g(f(o)("controls.danbooruManager")),1)],8,Ck)]),u.hasPromptLoraStack?(b(),C("div",$k,[s("button",{class:"tag-manager-btn",onClick:me,title:f(o)("controls.loraStack")},[E[21]||(E[21]=s("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),s("span",Ak,g(f(o)("controls.loraStack")),1)],8,Lk)])):re("",!0),s("div",Mk,[s("button",{class:"tag-manager-btn",onClick:pi,title:f(o)("controls.loraManager")},[E[22]||(E[22]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",Dk,g(f(o)("controls.loraManager")),1)],8,Ik)]),s("div",Rk,[s("button",{class:"tag-manager-btn",onClick:Hn,title:f(o)("controls.history")},[E[23]||(E[23]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),s("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),s("span",Nk,g(f(o)("controls.history")),1)],8,Ok)]),s("div",Pk,[s("button",{class:"tag-manager-btn",onClick:zM,title:f(o)("controls.aiChat")},[E[24]||(E[24]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),s("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),s("span",Bk,g(f(o)("controls.aiChat")),1)],8,Fk)]),s("div",Uk,[s("button",{class:"tag-manager-btn",onClick:HM,title:f(o)("controls.github")},[E[25]||(E[25]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),s("span",Wk,g(f(o)("controls.github")),1)],8,Vk)]),s("div",zk,[s("button",{class:"tag-manager-btn",onClick:jM,title:f(o)("controls.shareCloudData")},[E[26]||(E[26]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),s("span",jk,g(f(o)("controls.shareCloudData")),1)],8,Hk)]),s("div",Gk,[s("button",{class:"tag-manager-btn",onClick:YM,title:f(o)("controls.tutorialVideo")},[E[27]||(E[27]=s("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[s("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),s("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),s("span",Kk,g(f(o)("controls.tutorialVideo")),1)],8,qk)]),s("div",Yk,[s("button",{class:"tag-manager-btn",onClick:qM,title:f(o)("controls.sponsor")},[E[28]||(E[28]=s("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[s("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),s("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),s("span",Xk,g(f(o)("controls.sponsor")),1)],8,Jk)]),Ue(xf,{ref_key:"settingDialog",ref:T},null,512),s("div",Qk,[s("button",{class:Le(["update-label-btn",{"is-dirty":Xe.value}]),disabled:!He.value||!Xe.value,onClick:Yt},"  ",10,Zk)])]),s("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:p},[ve(s("textarea",{"onUpdate:modelValue":E[0]||(E[0]=be=>d.value=be),class:"input-area",onInput:yo,placeholder:f(o)("promptBox.placeholder"),onKeydown:NM,onBlur:OM,rows:"6",ref_key:"inputAreaRef",ref:l,onMouseup:nm,onResize:nm},null,40,eC),[[Ae,d.value]]),s("div",tC,g(r.value)+" tokens ",1),s("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:a,style:ct({top:`${i.value.top}px`,left:`${PM.value.left}px`,display:H.value?"block":"none",width:`${_e.value}px`,maxHeight:`${le.value}px`})},[s("button",{class:"close-autocomplete-btn",onClick:Je(fm,["stop"])},""),(b(!0),C(Ie,null,ze(j.value,(be,$e)=>(b(),C("div",{key:$e,class:Le(["autocomplete-item",{selected:$e===K.value}]),onClick:Je(De=>pm($e,De),["stop"]),ref_for:!0,ref:De=>{De&&$e===K.value&&(X.value=De)}},[s("span",oC,g(be.text),1),s("span",aC,g(be.desc),1)],10,nC))),128))],4)],512),s("div",lC,[s("div",sC,[ve(s("input",{type:"text","onUpdate:modelValue":E[1]||(E[1]=be=>P.value=be),class:"prompt-input-translate-area-textarea",onKeyup:E[2]||(E[2]=an(be=>um(),["enter"])),placeholder:f(o)("promptBox.translatePlaceholder")},null,40,iC),[[Ae,P.value]]),s("button",{class:"translate-btn",style:{"margin-left":"8px"},onClick:E[3]||(E[3]=be=>um())},"  ")]),R.value?(b(),C("button",{key:0,class:"translate-btn random-tag-settings-btn",onClick:ri,title:f(o)("promptBox.oneClickTranslate")},[E[29]||(E[29]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),s("span",uC,g(f(o)("promptBox.oneClickTranslate")),1)],8,rC)):re("",!0),_.value?(b(),C("button",{key:1,class:"translate-btn random-tag-settings-btn",onClick:ZM,title:f(o)("promptBox.randomTagSettings")},[E[30]||(E[30]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),s("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),s("span",dC,g(f(o)("promptBox.randomTagSettings")),1)],8,cC)):re("",!0),L.value?(b(),C("button",{key:2,class:"translate-btn random-tag-btn",onClick:JM,title:f(o)("promptBox.oneClickRandomTag")},[E[31]||(E[31]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),s("span",fC,g(f(o)("promptBox.oneClickRandomTag")),1)],8,pC)):re("",!0),ye.value?(b(),C("button",{key:3,class:Le(["translate-btn toggle-delete-btn",{active:A.value}]),onClick:V,title:A.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")},[E[32]||(E[32]=s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})],-1)),s("span",mC,g(A.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")),1)],10,gC)):re("",!0),pe.value?(b(),C("button",{key:4,class:"translate-btn clear-all-btn",onClick:eI,title:f(o)("promptBox.oneClickCleanAll")},[E[33]||(E[33]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",hC,g(f(o)("promptBox.oneClickCleanAll")),1)],8,vC)):re("",!0),q.value?(b(),C("button",{key:5,class:"translate-btn clear-disabled-btn",onClick:tI,title:f(o)("promptBox.oneClickClearDisabled")},[E[34]||(E[34]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",yC,g(f(o)("promptBox.oneClickClearDisabled")),1)],8,_C)):re("",!0)]),c.value.length>0?(b(),C("div",bC,[(b(!0),C(Ie,null,ze(c.value,(be,$e)=>(b(),C(Ie,{key:"tag-item-"+$e},[s("div",{class:Le(["token-item-box",{"token-item-box-disabled":be.isHidden}]),draggable:!be.isEditing,onDragstart:De=>BM($e,De),onDragover:Je(De=>VM($e,De),["prevent"]),onDrop:De=>WM($e,De),onDblclick:De=>KM($e),style:ct({backgroundColor:be.color})},[be.text===`
`?(b(),C("div",xC,[s("span",{class:"token-symbol",title:f(o)("promptBox.newline")},"",8,SC)])):be.text==="	"?(b(),C("div",{key:1,class:"token-item tab-token",onMouseenter:De=>Fl($e,De),onMouseleave:De=>Va()},[s("span",{class:"token-symbol",title:f(o)("promptBox.tab")},"",8,kC)],40,TC)):be.isLoraTag?(b(),C("div",{key:2,class:"lora-tag-icon",title:f(o)("promptBox.loraTag"),onMouseenter:De=>Fl($e,De),onMouseleave:De=>Va()},[E[35]||(E[35]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[s("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),s("span",EC,g(be.text),1)],40,CC)):be.text&&!be.isLoraTag?(b(),C("div",{key:3,class:Le(["token-item",{punctuation:be.isPunctuation}]),onMouseenter:De=>Fl($e,De),onMouseleave:De=>Va()},[!be.isEditing||be.isPunctuation?(b(),C("span",{key:0,onClick:De=>!be.isPunctuation&&ce($e)},g(be.text),9,LC)):be.isPunctuation?re("",!0):(b(),C("input",{key:1,value:be.text,onInput:De=>fe($e,De),onBlur:De=>Ke($e),onKeyup:an(De=>Ke($e),["enter"]),ref_for:!0,ref:De=>{De&&(v[$e]=De)}},null,40,AC)),A.value?(b(),C("button",{key:2,class:"quick-delete-btn",onClick:Je(De=>di($e),["stop"]),title:f(o)("promptBox.delete"),style:{"margin-left":"4px"}},E[36]||(E[36]=[s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#ff4d4f70"})],-1)]),8,MC)):re("",!0)],42,$C)):re("",!0),be.text!==`
`&&be.text!=="	"&&!be.isLoraTag?(b(),C("div",IC,[mu(be.text)?(b(),C("div",{key:0,onClick:De=>RM(be.text,be),class:"translate-button",title:f(o)("promptBox.translate")},E[37]||(E[37]=[s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)]),8,DC)):re("",!0),s("span",RC,g(be.translate?be.translate:""),1)])):re("",!0)],46,wC),be.text===`
`?(b(),C("div",OC)):re("",!0)],64))),128))])):re("",!0),ae.value?(b(),C("div",{key:1,class:"tag-tips-box",style:ct(G.value)},[s("div",NC,[s("p",{innerHTML:f(o)("promptBox.tagTips")},null,8,PC)])],4)):re("",!0),ve(s("div",{class:"token-controls",style:ct(S.value),onMouseenter:E[14]||(E[14]=be=>y.value=!0),onMouseleave:Bl},[(se=c.value[m.value])!=null&&se.isLoraTag?re("",!0):(b(),C("div",FC,[ve(s("input",{type:"number","onUpdate:modelValue":E[4]||(E[4]=be=>Pt.value=be),step:"0.1",class:"weight-input",onChange:Ve},null,544),[[Ae,Pt.value]]),s("span",BC,g(f(o)("promptBox.weight")),1)])),(he=c.value[m.value])!=null&&he.isLoraTag?(b(),C("div",UC,[s("div",VC,[ve(s("input",{type:"number","onUpdate:modelValue":E[5]||(E[5]=be=>Ce.value=be),step:"0.1",class:"weight-input",onChange:Lt},null,544),[[Ae,Ce.value]]),s("span",WC,g(f(o)("promptBox.modelWeight")),1)]),s("div",zC,[ve(s("input",{type:"number","onUpdate:modelValue":E[6]||(E[6]=be=>Ee.value=be),step:"0.1",class:"weight-input",onChange:Lt},null,544),[[Ae,Ee.value]]),s("span",HC,g(f(o)("promptBox.textWeight")),1)])])):re("",!0),s("button",{class:"favour-btn",onClick:E[7]||(E[7]=be=>QM(c.value[m.value])),title:f(o)("promptBox.favour")},E[38]||(E[38]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:"#FFD700"})],-1)]),8,jC),s("button",{onClick:hu,class:"delete-btn",title:f(o)("promptBox.delete")},E[39]||(E[39]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,GC),(Ne=c.value[m.value])!=null&&Ne.isLoraTag?re("",!0):(b(),C("div",qC,[s("div",KC,[E[40]||(E[40]=s("div",{class:"bracket-btn"}," () ",-1)),s("div",YC,[s("button",{class:"vertical-btn",onClick:E[8]||(E[8]=be=>xn("(")),title:f(o)("promptBox.addBracket")}," + ",8,JC),s("button",{class:"vertical-btn",onClick:E[9]||(E[9]=be=>Ol("(")),title:f(o)("promptBox.removeLayer")}," - ",8,XC)])]),s("div",QC,[E[41]||(E[41]=s("div",{class:"bracket-btn"}," [] ",-1)),s("div",ZC,[s("button",{class:"vertical-btn",onClick:E[10]||(E[10]=be=>xn("[")),title:f(o)("promptBox.addBracket")}," + ",8,eE),s("button",{class:"vertical-btn",onClick:E[11]||(E[11]=be=>Ol("[")),title:f(o)("promptBox.removeLayer")}," - ",8,tE)])]),s("div",nE,[E[42]||(E[42]=s("div",{class:"bracket-btn"}," {} ",-1)),s("div",oE,[s("button",{class:"vertical-btn",onClick:E[12]||(E[12]=be=>xn("{")),title:f(o)("promptBox.addBracket")}," + ",8,aE),s("button",{class:"vertical-btn",onClick:E[13]||(E[13]=be=>Ol("{")),title:f(o)("promptBox.removeLayer")}," - ",8,lE)])])])),s("button",{class:"line-token-btn",onClick:ci,title:f(o)("promptBox.addLineToken"),style:{"margin-left":"8px"}},E[43]||(E[43]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M5 19h14v-2H5v2zm0-7h14v-2H5v2zm0-7v2h14V5H5z",fill:"#888"}),s("path",{d:"M7 17v-2h2v2H7zm0-7V8h2v2H7zm0-7V3h2v2H7z",fill:"#4285f4"})],-1)]),8,sE)],36),[[fl,m.value!==null&&c.value[m.value]]]),s("div",iE,[ve(s("div",{class:"token-controls",style:ct(ke.value),onMouseenter:E[15]||(E[15]=be=>y.value=!0),onMouseleave:Bl},[s("div",rE,[s("div",uE," "+g(ne.value.length)+" ",1),s("div",{class:"weilin-comfyui-selection-actions-buttons"},[s("button",{class:"delete-btn copy-btn",onClick:LM,title:""},E[44]||(E[44]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])),s("button",{class:"delete-btn",onClick:AM,title:""},E[45]||(E[45]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),s("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])),s("button",{class:"delete-btn enable-btn",onClick:MM,title:""},E[46]||(E[46]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])),s("button",{class:"delete-btn",onClick:IM,title:""},E[47]||(E[47]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))])])],36),[[fl,ue.value]]),s("div",{class:"tag-manager-header",onClick:TM},[s("div",cE,[E[48]||(E[48]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",dE,g(f(o)("controls.loraManager")),1)]),s("div",pE,[(b(),C("svg",{class:Le(["collapse-icon",{"is-collapsed":!fi.value}]),viewBox:"0 0 24 24"},E[49]||(E[49]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),ve(s("div",fE,[Ue(zg,{loraManager:"prompt_inner"})],512),[[fl,fi.value]])]),s("div",gE,[s("div",{class:"tag-manager-header",onClick:SM},[s("div",mE,[E[50]||(E[50]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",vE,g(f(o)("controls.tagManager")),1)]),s("div",hE,[(b(),C("svg",{class:Le(["collapse-icon",{"is-collapsed":!Wa.value}]),viewBox:"0 0 24 24"},E[51]||(E[51]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),ve(s("div",_E,[Ue($g)],512),[[fl,Wa.value]])])],6)]),Ue(PT,{ref_key:"randomSettingItem",ref:n},null,512),Ue(ik,{ref_key:"favourItemRef",ref:yu},null,512)],64)}}},[["__scopeId","data-v-9f8f7513"]]),TE={class:"container"},kE={class:"tab-container"},CE={key:0},EE={class:"search-container"},$E=["placeholder"],LE=["title"],AE=["title","disabled"],ME=["title"],IE={class:"history-list"},DE={class:"action-buttons"},RE=["onClick","title"],OE=["onClick","title"],NE=["onClick","title"],PE=["value"],FE={key:1},BE={class:"search-container"},UE=["placeholder"],VE=["title"],WE=["title"],zE=["title","disabled"],HE=["title"],jE={class:"history-list"},GE={key:0,class:"favor-name"},qE={class:"action-buttons"},KE=["onClick","title"],YE=["onClick","title"],JE=["onClick","title"],XE=["value"],QE={key:2,class:"weilin-tools-dialog-overlay"},ZE={class:"weilin-tools-dialog-header"},e$={class:"weilin-tools-dialog-body"},t$={class:"form-group"},n$=["placeholder"],o$={class:"form-group"},a$=["placeholder"],l$={class:"form-group"},s$={class:"color-picker"},i$={class:"color-controls"},r$={class:"alpha-control"},u$={class:"alpha-value"},c$={class:"weilin-tools-dialog-footer"},d$={key:3,class:"weilin-tools-dialog-overlay"},p$={class:"weilin-tools-dialog-header"},f$={class:"weilin-tools-dialog-body"},g$={class:"confirm-message"},m$={class:"weilin-tools-dialog-footer"},v$=_t({__name:"history_index",setup(e){const{t}=ht(),n=h(""),o=h([]),a=h([]),l=h([]),i=h([]),r=h("history"),u=h([]),p=h(!1),d=h(!1),c=h(!1),v=h({hex:"rgba(255, 123, 2, .4)",alpha:100}),m=h({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),y=h(!1),S=h(0),$=I=>JSON.parse(I).prompt,T=I=>({hex:"#FFFFFF",alpha:0}),D=I=>{const{hex:W,alpha:k}=T();v.value={hex:W,alpha:k}},J=()=>{c.value=!1,m.value={id:"",name:"",tag:"",backgroundColor:"transparent"},D(),p.value=!0},x=I=>{const W=I.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(W){const[,k,w,O,Q]=W,pe=`#${((1<<24)+(parseInt(k)<<16)+(parseInt(w)<<8)+parseInt(O)).toString(16).slice(1)}`,ye=Q?Math.round(parseFloat(Q)*100):100;return{hex:pe,alpha:ye}}return{hex:"#FF7B02",alpha:50}},N=I=>{c.value=!0,m.value={...I},v.value=x(I.color),p.value=!0},H=()=>{const I=oe(v.value.hex,v.value.alpha);m.value.color=I},j=()=>{p.value=!1,m.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},c.value=!1},K=h(""),X=h(null),_e=vt(()=>{if(!X.value)return"";switch(K.value){case"history":return t("history.deleteHistoryConfirm",{name:X.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:X.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),le=I=>{K.value="history",X.value=I,d.value=!0},P=I=>{K.value="favorite",X.value=I,d.value=!0},Z=()=>{y.value=!1,S.value=0,K.value="deleteSelected",X.value=u.value,d.value=!0},te=()=>{y.value=!1,S.value=0,K.value="deleteSelectedFavorite",X.value=u.value,d.value=!0},z=async()=>{try{switch(K.value){case"history":Wn.deleteHistory(X.value.id_index).then(I=>{ue(),Y({type:"success",str:"message.deleteSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})});break;case"favorite":Wn.deleteFavorite(X.value.id_index).then(I=>{ke(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.deleteSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Wn.batchDeleteHistory(u.value).then(I=>{ue(),Y({type:"success",str:"message.deleteSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":Wn.batchDeleteFavorite(X.value).then(I=>{ke(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.deleteSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})});break}F()}catch{Y({type:"warn",str:"message.networkError"})}},ne=I=>{I.target.checked?r.value==="history"?u.value=o.value.map(W=>W.id_index):u.value=l.value.map(W=>W.id_index):u.value=[]},oe=(I,W)=>{const k=parseInt(I.slice(1,3),16),w=parseInt(I.slice(3,5),16),O=parseInt(I.slice(5,7),16);return`rgba(${k}, ${w}, ${O}, ${W/100})`},F=()=>{d.value=!1,K.value="",X.value=null},U=()=>{if(!m.value.tag){Y({type:"warn",str:"history.dialog.tag_placeholder"});return}c.value?Wn.editFavorite({id_index:m.value.id_index,name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{ke(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.editSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})}):Wn.addFavorite({name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{ke(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Y({type:"success",str:"message.addSuccess"})}).catch(I=>{Y({type:"warn",str:"message.networkError"})}),j()},ue=()=>{Wn.getHistory({}).then(I=>{o.value=I.data,a.value=o.value}).catch(I=>{Y({type:"warn",str:"message.networkError"})})},ke=()=>{Wn.getFavorite().then(I=>{l.value=I.data,i.value=l.value}).catch(I=>{Y({type:"warn",str:"message.networkError"})})},ie=()=>{a.value=o.value.filter(I=>I.tag.includes(n.value))},ge=()=>{i.value=l.value.filter(I=>I.tag.includes(n.value))},de=()=>{ue()},ae=()=>{ke()},G=I=>{Wn.addFavorite({tag:I.tag}).then(W=>{W.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),ke(),Y({type:"success",str:"message.addFavoriteSuccess"})):Y({type:"success",str:"message.addFavoriteIsExist"})}).catch(W=>{Y({type:"warn",str:"message.networkError"})})},A=I=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:I.tag},"*")},B=()=>{u.value=[],y.value=!0},V=()=>{u.value=[],y.value=!1,S.value=0};return mt(()=>{ue(),ke()}),(I,W)=>(b(),C("div",TE,[s("h1",null,g(r.value==="history"?f(t)("history.title"):f(t)("history.favorites")),1),s("div",kE,[s("button",{class:Le([{active:r.value==="history"},"tab-button"]),onClick:W[0]||(W[0]=k=>r.value="history")},g(f(t)("history.history")),3),s("button",{class:Le([{active:r.value==="favorites"},"tab-button"]),onClick:W[1]||(W[1]=k=>r.value="favorites")},g(f(t)("history.favorites")),3)]),r.value==="history"?(b(),C("div",CE,[s("div",EE,[s("button",{class:"refresh-btn",onClick:de},W[14]||(W[14]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),ve(s("input",{type:"text","onUpdate:modelValue":W[2]||(W[2]=k=>n.value=k),placeholder:f(t)("history.search_placeholder"),onInput:ie,class:"search-input"},null,40,$E),[[Ae,n.value]]),y.value?ve((b(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":W[3]||(W[3]=k=>S.value=k),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[$t,S.value]]):re("",!0),y.value?re("",!0):(b(),C("button",{key:1,class:"bulk-delete-btn",onClick:B,title:f(t)("history.bulk_delete")},W[15]||(W[15]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,LE)),y.value?(b(),C("button",{key:2,class:"bulk-delete-btn",onClick:Z,title:f(t)("history.sure_delete"),disabled:u.value.length===0},W[16]||(W[16]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,AE)):re("",!0),y.value?(b(),C("button",{key:3,class:"bulk-delete-btn",onClick:V,title:f(t)("history.cancel_delete")},W[17]||(W[17]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,ME)):re("",!0)]),s("ul",IE,[(b(!0),C(Ie,null,ze(a.value,k=>(b(),C("li",{key:k.id_index,class:"history-item"},[s("span",null,g($(k.tag)),1),s("div",DE,[s("button",{onClick:w=>G(k),class:"favorite-btn",title:f(t)("history.add_to_favorites")},W[18]||(W[18]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,RE),s("button",{onClick:w=>le(k),class:"delete-favorite-btn",title:f(t)("history.delete_history")},W[19]||(W[19]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,OE),s("button",{onClick:w=>A(k),class:"use-btn",title:f(t)("history.use_item")},W[20]||(W[20]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,NE),y.value?ve((b(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":W[4]||(W[4]=w=>u.value=w),value:k.id_index,class:"tag-checkbox"},null,8,PE)),[[$t,u.value]]):re("",!0)])]))),128))])])):(b(),C("div",FE,[s("div",BE,[s("button",{class:"refresh-btn",onClick:ae},W[21]||(W[21]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),ve(s("input",{type:"text","onUpdate:modelValue":W[5]||(W[5]=k=>n.value=k),placeholder:f(t)("history.search_placeholder"),onInput:ge,class:"search-input"},null,40,UE),[[Ae,n.value]]),y.value?ve((b(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":W[6]||(W[6]=k=>S.value=k),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[$t,S.value]]):re("",!0),s("button",{class:"add-his-btn",onClick:J,title:f(t)("history.add_new")},W[22]||(W[22]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[s("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)]),8,VE),y.value?re("",!0):(b(),C("button",{key:1,class:"bulk-delete-btn",onClick:B,title:f(t)("history.bulk_delete")},W[23]||(W[23]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,WE)),y.value?(b(),C("button",{key:2,class:"bulk-delete-btn",onClick:te,title:f(t)("history.sure_delete"),disabled:u.value.length===0},W[24]||(W[24]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,zE)):re("",!0),y.value?(b(),C("button",{key:3,class:"bulk-delete-btn",onClick:V,title:f(t)("history.cancel_delete")},W[25]||(W[25]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,HE)):re("",!0)]),s("ul",jE,[(b(!0),C(Ie,null,ze(i.value,k=>(b(),C("li",{key:k.id_index,class:"history-item"},[s("div",{class:"favor-name-box",style:ct({backgroundColor:k.color||"transparent"})},[k.name.length>0?(b(),C("span",GE,g(k.name),1)):re("",!0)],4),s("span",null,g($(k.tag)),1),s("div",qE,[s("button",{onClick:w=>N(k),class:"delete-favorite-btn",title:f(t)("history.edit_favorite")},W[26]||(W[26]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)]),8,KE),s("button",{onClick:w=>P(k),class:"delete-favorite-btn",title:f(t)("history.delete_favorite")},W[27]||(W[27]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,YE),s("button",{onClick:w=>A(k),class:"use-btn",title:f(t)("history.use_favorite")},W[28]||(W[28]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,JE),y.value?ve((b(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":W[7]||(W[7]=w=>u.value=w),value:k.id_index,class:"tag-checkbox"},null,8,XE)),[[$t,u.value]]):re("",!0)])]))),128))])])),p.value?(b(),C("div",QE,[s("div",{class:"weilin-tools-dialog-content",onMousedown:W[12]||(W[12]=Je(()=>{},["stop"]))},[s("div",ZE,[s("h2",null,g(c.value?f(t)("history.dialog.edit_tag"):f(t)("history.dialog.add_tag")),1),s("button",{class:"close-btn",onClick:j},"")]),s("div",e$,[s("div",t$,[s("label",null,g(f(t)("history.dialog.name")),1),ve(s("input",{type:"text","onUpdate:modelValue":W[8]||(W[8]=k=>m.value.name=k),placeholder:f(t)("history.dialog.name_placeholder")},null,8,n$),[[Ae,m.value.name]])]),s("div",o$,[s("label",null,g(f(t)("history.dialog.tag")),1),ve(s("textarea",{"onUpdate:modelValue":W[9]||(W[9]=k=>m.value.tag=k),placeholder:f(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,a$),[[Ae,m.value.tag]])]),s("div",l$,[s("label",null,g(f(t)("history.dialog.background_color")),1),s("div",s$,[s("div",{class:"color-preview",style:ct({backgroundColor:I.previewColor})},null,4),s("div",i$,[ve(s("input",{type:"color","onUpdate:modelValue":W[10]||(W[10]=k=>v.value.hex=k),onInput:H,class:"color-input"},null,544),[[Ae,v.value.hex]]),s("div",r$,[ve(s("input",{type:"range","onUpdate:modelValue":W[11]||(W[11]=k=>v.value.alpha=k),min:"0",max:"100",onInput:H,class:"alpha-slider"},null,544),[[Ae,v.value.alpha,void 0,{number:!0}]]),s("span",u$,g(v.value.alpha)+"%",1)])])])])]),s("div",c$,[s("button",{class:"cancel-btn",onClick:j},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:U},g(f(t)("common.confirm")),1)])],32)])):re("",!0),d.value?(b(),C("div",d$,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:W[13]||(W[13]=Je(()=>{},["stop"]))},[s("div",p$,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:F},"")]),s("div",f$,[s("p",g$,g(_e.value),1)]),s("div",m$,[s("button",{class:"cancel-btn",onClick:F},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("common.delete")),1)])],32)])):re("",!0)]))}},[["__scopeId","data-v-31204146"]]),h$={key:0,class:"drop-zone"},_$={key:1,class:"preview-container"},y$=["srcdoc"],b$={class:"action-buttons"},Kg="weilin_tools_",w$=_t({__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(""),i=h(null),r={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},p=h((()=>{try{const K=localStorage.getItem(`${Kg}tranToWebState`);if(K){const X=JSON.parse(K),_e={...r};return X.tranToWeb&&(_e.tranToWeb={...r.tranToWeb,...X.tranToWeb}),_e}}catch(K){console.error("Error loading window states:",K)}return{...r}})());ot(p,K=>{try{localStorage.setItem(`${Kg}tranToWebState`,JSON.stringify(K))}catch(X){console.error("Error saving window states:",X)}},{deep:!0}),mt(()=>{Be.registerWindow("tranToWeb")}),In(()=>{Be.unregisterWindow("tranToWeb")});const d=K=>{a.value=!1},c=(K,X)=>{p.value[K]&&(p.value[K].position={...X})},v=(K,X)=>{p.value[K]&&(p.value[K].size={...X})},m=()=>{a.value=!0,Be.setActiveWindow("tranToWeb")},y=K=>{K.dataTransfer.dropEffect="copy"},S=K=>{const X=K.dataTransfer.files[0];X&&X.type.startsWith("image/")&&T(X)},$=K=>{const X=K.clipboardData.items;for(let _e=0;_e<X.length;_e++)if(X[_e].type.startsWith("image/")){const le=X[_e].getAsFile();T(le);break}},T=K=>{const X=new FileReader;X.onload=_e=>{const le=_e.target.result,P=btoa(le);i.value=P,D()},X.readAsDataURL(K)},D=()=>{l.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 
                    try {
                        const encryptedData = "${i.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error(':', e);
                        document.body.innerHTML = '<p></p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},J=()=>{const K=new Blob([l.value],{type:"text/html"}),X=URL.createObjectURL(K),_e=document.createElement("a");_e.href=X,_e.download="image-to-html.html",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),URL.revokeObjectURL(X)},x=()=>{l.value="",i.value=null},N=h(null),H=()=>{l.value||N.value.click()},j=K=>{const X=K.target.files[0];X&&X.type.startsWith("image/")&&T(X)};return t({open:m}),(K,X)=>a.value?(b(),wt(kn,{key:0,title:f(o)("utils.tranToWeb"),position:p.value.tranToWeb.position,size:p.value.tranToWeb.size,"z-index":f(Be).getZIndex("tranToWeb"),"onUpdate:position":X[0]||(X[0]=_e=>c("tranToWeb",_e)),"onUpdate:size":X[1]||(X[1]=_e=>v("tranToWeb",_e)),onActive:X[2]||(X[2]=_e=>f(Be).setActiveWindow("tranToWeb")),onClose:X[3]||(X[3]=_e=>d())},{default:it(()=>[s("div",{class:"utils_tran_web__content",onDragover:Je(y,["prevent"]),onDrop:Je(S,["prevent"]),onPaste:$,onClick:H},[l.value?(b(),C("div",_$,[s("iframe",{srcdoc:l.value,class:"html-preview"},null,8,y$),s("div",b$,[s("button",{onClick:J},g(f(o)("utils.downloadHtml")),1),s("button",{onClick:x},g(f(o)("utils.clear")),1)])])):(b(),C("div",h$,g(f(o)("utils.dropOrPasteImage")),1)),s("input",{type:"file",ref_key:"fileInput",ref:N,style:{display:"none"},accept:"image/*",onChange:j},null,544)],32)]),_:1},8,["title","position","size","z-index"])):re("",!0)}},[["__scopeId","data-v-3647b8ec"]]),x$=["onMouseenter","onMouseleave","onMousedown","onMouseup"],S$=_t({__name:"FloatingBall",setup(e){const{t}=ht(),n=h(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),o=h(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),a=h(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||o.value),l=h(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),i=h(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),r=h(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),u=h(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),p=h(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),d=h(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);n.value<1&&(n.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value)),o.value<5&&(o.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value)),a.value<5&&(a.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",a.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",o.value);const c=h([]),v=h([]),m=h([]),y=h([]),S=h(null),$=vt(()=>y.value.map(le=>{const P={...le};return l.value==="custom"&&i.value?(P.backgroundImage=`url(${i.value})`,P.backgroundSize="contain",P.backgroundRepeat="no-repeat",P.backgroundPosition="center",P.imageRendering="optimizeQuality"):r.value==="gradient"?P.background=`linear-gradient(135deg, ${u.value}, ${p.value})`:P.background="transparent",P.borderRadius=`${d.value}%`,P}));for(let le=0;le<n.value;le++){m.value[le]=!1,v.value[le]=!1;const P=window.innerWidth,Z=window.innerHeight,te=o.value,z=a.value,ne=10,oe=Math.floor(P/(te+ne)),F=Math.floor(le/oe);let ue=20+le%oe*(te+ne),ke=Z-100-F*(z+ne);ue=Math.max(0,ue),ue=Math.min(ue,P-te),ke=Math.max(0,ke),ke=Math.min(ke,Z-z),c.value[le]={x:ue,y:ke,width:te+"px",height:z+"px"},y.value[le]={left:`${c.value[le].x}px`,top:`${c.value[le].y}px`,width:`${te}px`,height:`${z}px`}}const T=(le,P)=>{le.target.closest(".weilin_prompt_ui_floating-ball")&&(v.value[P]=!0,document.addEventListener("mousemove",te=>D(te,P)),document.addEventListener("mouseup",te=>J(te,P)))},D=(le,P)=>{if(v.value[P]){const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value;let oe=le.clientX-z/2,F=le.clientY-ne/2;oe=Math.max(0,oe),oe=Math.min(oe,Z-z),F=Math.max(0,F),F=Math.min(F,te-ne),c.value[P]={x:oe,y:F,width:z+"px",height:ne+"px"},y.value[P]={left:`${c.value[P].x}px`,top:`${c.value[P].y}px`,width:`${z}px`,height:`${ne}px`}}},J=(le,P)=>{v.value[P]=!1,document.removeEventListener("mousemove",Z=>D(Z,P)),document.removeEventListener("mouseup",Z=>J(Z,P))},x=()=>{},N=le=>{switch(le){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":j();break;case"item8":S.value.open();break}},H=h(),j=()=>{H.value.open()},K=le=>{if(le.data.type==="weilin_prompt_ui_floating_ball_setting"){n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||o.value,l.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",i.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",r.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",u.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",p.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",d.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,m.value=[],v.value=[],c.value=[],y.value=[];for(let P=0;P<n.value;P++){m.value[P]=!1,v.value[P]=!1;const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value,oe=10,F=Math.floor(Z/(z+oe)),U=Math.floor(P/F);let ke=20+P%F*(z+oe),ie=te-100-U*(ne+oe);ke=Math.max(0,ke),ke=Math.min(ke,Z-z),ie=Math.max(0,ie),ie=Math.min(ie,te-ne),c.value[P]={x:ke,y:ie,width:z+"px",height:ne+"px"},y.value[P]={left:`${c.value[P].x}px`,top:`${c.value[P].y}px`,width:`${z}px`,height:`${ne}px`,...l.value==="custom"&&i.value?{backgroundImage:`url(${i.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:r.value==="gradient"?{background:`linear-gradient(135deg, ${u.value}, ${p.value})`}:{background:"transparent"},borderRadius:`${d.value}%`}}}},X=le=>{m.value[le]=!0},_e=le=>{m.value[le]=!1};return mt(()=>{window.addEventListener("message",K)}),In(()=>{window.removeEventListener("message",K),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",J)}),(le,P)=>(b(),C(Ie,null,[(b(!0),C(Ie,null,ze(n.value,Z=>(b(),C("div",{class:"weilin_prompt_ui_floating-ball",style:ct($.value[Z-1]),onMouseenter:te=>X(Z-1),onMouseleave:te=>_e(Z-1),onMousedown:te=>T(te,Z-1),onMouseup:te=>J(te,Z-1),key:"floating-ball-"+Z},[s("div",{class:"weilin_prompt_ui_ball-content",onClick:x},g(l.value==="default"?"WeiLin":""),1),m.value[Z-1]?(b(),C("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:P[8]||(P[8]=Je(()=>{},["stop"]))},[s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[0]||(P[0]=te=>N("item1"))},g(f(t)("floatingBall.promptBox")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[1]||(P[1]=te=>N("item2"))},g(f(t)("floatingBall.tagManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[2]||(P[2]=te=>N("item3"))},g(f(t)("floatingBall.loraManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[3]||(P[3]=te=>N("item4"))},g(f(t)("floatingBall.aiWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[4]||(P[4]=te=>N("item6"))},g(f(t)("floatingBall.openNodeListWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[5]||(P[5]=te=>N("item7"))},g(f(t)("floatingBall.tranToWeb")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[6]||(P[6]=te=>N("item8"))},g(f(t)("floatingBall.openSetting")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:P[7]||(P[7]=te=>N("item5"))},g(f(t)("floatingBall.restoreWindow")),1)],32)):re("",!0)],44,x$))),128)),Ue(w$,{ref_key:"tranToWebRef",ref:H},null,512),Ue(xf,{ref_key:"settingDialog",ref:S},null,512)],64))}},[["__scopeId","data-v-c0790e8c"]]),T$={class:"ai-chat-window"},k$={class:"history-sidebar"},C$={class:"history-list"},E$=["onClick"],$$={key:0},L$=["onKeyup","onBlur"],A$={class:"item-actions"},M$=["onClick"],I$=["onClick"],D$={class:"chat-main"},R$={class:"message-list"},O$={class:"message-content"},N$={key:0,class:"message assistant"},P$={class:"message-content"},F$={class:"input-area"},B$=["placeholder","onKeydown"],U$=["disabled"],V$=_t({__name:"ai_window",setup(e){const{t}=ht(),n=h([]),o=h(-1),a=h(""),l=h(!1),i=h({}),r=h(!1),u=h(""),p=N=>{var H;n.value[N]&&(r.value=!0,u.value=((H=n.value[N])==null?void 0:H.title)||` ${N+1}`,o.value=N)},d=N=>{n.value[N]&&(u.value.trim()&&(n.value[N].title=u.value.trim(),T()),r.value=!1)},c=()=>{r.value=!1},v=()=>{Cl.getOpenAiSetting().then(N=>{i.value=N.data}).catch(N=>{Y({type:"warn",str:"message.networkError"})})};mt(()=>{v()});const m=vt(()=>n.value[o.value]||{messages:[]}),y=N=>{o.value=N},S=()=>{l.value=!0;const N={title:` ${n.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return n.value.push(N),o.value=n.value.length-1,T(),l.value=!1,N},$=()=>{const N=localStorage.getItem("aiChatHistory");N&&(n.value=JSON.parse(N))},T=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(n.value))};mt(()=>{v(),$()});const D=async()=>{if(!a.value.trim()||l.value)return;(n.value.length===0||o.value===-1)&&S();const N={role:"user",content:a.value,timestamp:new Date().toISOString()};m.value.messages.push(N),T(),a.value="";const H={role:"assistant",content:"",timestamp:new Date().toISOString()};m.value.messages.push(H),T(),l.value=!0;try{await x({messages:m.value.messages},j=>{const K=m.value.messages[m.value.messages.length-1];K.content+=j.content,T()},j=>{console.error("Error:",j);const K=m.value.messages[m.value.messages.length-1];K.content="",T()},()=>{l.value=!1,T()})}catch(j){console.error("Error:",j),l.value=!1;const K=m.value.messages[m.value.messages.length-1];K.content="",T()}},J=N=>{n.value.splice(N,1),o.value===N&&(o.value=Math.max(0,N-1)),T()},x=async(N,H,j,K)=>{var X,_e;try{const le=await fetch(i.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.value.api_key}`},body:JSON.stringify({model:i.value.model,messages:N.messages,stream:!0})});if(!le.ok)throw new Error(`HTTP error! status: ${le.status}`);const P=le.body.getReader(),Z=new TextDecoder;let te="";for(;;){const{done:z,value:ne}=await P.read();if(z){K();break}te+=Z.decode(ne,{stream:!0});const oe=te.split(`
`);te=oe.pop();for(const F of oe)if(F.trim()!==""){if(F==="data: [DONE]"){K();return}try{const U=F.replace(/^data: /,""),ke=((_e=(X=JSON.parse(U).choices[0])==null?void 0:X.delta)==null?void 0:_e.content)||"";ke&&H({content:ke})}catch{console.error("Failed to parse message:",F)}}}}catch(le){j(le)}};return(N,H)=>(b(),C("div",T$,[s("div",k$,[s("button",{class:"new-chat-btn",onClick:S},g(f(t)("aiWindow.newChat")),1),s("div",C$,[(b(!0),C(Ie,null,ze(n.value,(j,K)=>(b(),C("div",{key:K,class:Le(["history-item",{active:o.value===K}]),onClick:X=>y(K)},[!r.value||o.value!==K?(b(),C("span",$$,g((j==null?void 0:j.title)||f(t)("aiWindow.chatName")+` ${K+1}`),1)):ve((b(),C("input",{key:1,"onUpdate:modelValue":H[0]||(H[0]=X=>u.value=X),onKeyup:[an(X=>d(K),["enter"]),an(c,["esc"])],onBlur:X=>d(K),class:"rename-input"},null,40,L$)),[[Ae,u.value]]),s("div",A$,[s("button",{class:"rename-btn",onClick:Je(X=>p(K),["stop"])},"",8,M$),r.value?re("",!0):(b(),C("button",{key:0,class:"delete-btn",onClick:Je(X=>J(K),["stop"])},"",8,I$))])],10,E$))),128))])]),s("div",D$,[s("div",R$,[(b(!0),C(Ie,null,ze(m.value.messages,(j,K)=>(b(),C("div",{key:K,class:Le(["message",j.role])},[s("div",O$,[s("pre",null,g(j.content),1)])],2))),128)),l.value?(b(),C("div",N$,[s("div",P$,[s("pre",null,g(f(t)("aiWindow.thinking")),1)])])):re("",!0)]),s("div",F$,[ve(s("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":H[1]||(H[1]=j=>a.value=j),placeholder:f(t)("aiWindow.inputMessage"),onKeydown:an(Je(D,["exact","prevent"]),["enter"])},null,40,B$),[[Ae,a.value]]),s("button",{class:"ai-chat-btn",onClick:D,disabled:l.value},g(f(t)("aiWindow.send")),9,U$)])])]))}},[["__scopeId","data-v-5271cf26"]]),W$={class:"lora-info"},z$={class:"lora-header"},H$=["title"],j$={class:"lora-weights"},G$={class:"weight-item"},q$=["title"],K$={class:"weight-item"},Y$={class:"center-box"},J$=["onClick"],ai="weilin_prompt_ui_",X$=_t({__name:"index",setup(e){const{t}=ht(),n=h([]);window.addEventListener("message",a=>{a.data.type==="weilin_prompt_ui_update_node_list_info"&&(n.value=a.data.nodeList)});const o=a=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:a},"*")};return mt(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(a,l)=>(b(),C("div",{class:Le(`${ai}lora-stack`)},[s("div",{class:Le(`${ai}lora-content`)},[s("div",{class:Le(`${ai}lora-body`)},[s("div",{class:Le(`${ai}lora-list`)},[(b(!0),C(Ie,null,ze(n.value,i=>(b(),C("div",{key:i.id,class:"lora-item"},[s("div",W$,[s("div",z$,[s("span",{class:"lora-name",title:i.title},"#"+g(i.id)+" - "+g(i.title),9,H$)]),s("div",j$,[s("div",G$,[s("div",{class:"text-label",title:i.text},g(i.text),9,q$)]),s("div",K$,[s("div",Y$,[s("button",{onClick:r=>o(i.seed),class:"open-button"},g(f(t)("nodeListWindow.openPromptUI")),9,J$)])])])])]))),128))],2)],2)],2)],2))}},[["__scopeId","data-v-43ee045e"]]),du={getTreeFromCloud:async e=>await Me({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await Me({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await Me({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},Q$={class:"cloud-manager"},Z$={class:"toolbar"},eL={class:"current-path"},tL={class:"file-list"},nL={class:"file-info"},oL={class:"file-name"},aL={class:"file-type"},lL={class:"file-actions"},sL=["onClick"],iL={key:1,class:"install-container"},rL={key:0,class:"installed-badge"},uL=["onClick","disabled"],cL=_t({__name:"index",setup(e){const{t}=ht(),n=h([]),o=h("tags"),a=h("tags"),l=h([]),i=async S=>{try{const $=await du.getTreeFromCloud(S);n.value=$.data}catch($){console.error(":",$),Y({type:"warn",str:"message.networkError"})}},r=async()=>{try{const S=await du.getLocalInstallPackage();l.value=S.data||[]}catch(S){console.error(":",S),Y({type:"warn",str:"message.networkError"})}},u=S=>l.value.some($=>$===S),p=async S=>{try{const $=n.value.find(T=>T.path===S);$&&($.isInstalling=!0,await du.installSelectPackage(a.value,[S]).then(()=>{r(),Y({type:"success",str:"message.installPackageSuccess"})}))}catch($){console.error(":",$),Y({type:"warn",str:"message.installPackageFail"})}finally{const $=n.value.find(T=>T.path===S);$&&($.isInstalling=!1)}},d=()=>{const S=o.value.split("/");S.length>1&&(o.value=S.slice(0,-1).join("/"),i(o.value))},c=()=>{i(o.value),r()},v=S=>{o.value=S,i(S)},m=()=>{a.value="tags",o.value="tags",i(o.value)},y=()=>{a.value="danbooru",o.value="danbooru",i(o.value)};return mt(()=>{i(o.value),r()}),(S,$)=>(b(),C("div",Q$,[s("div",Z$,[s("button",{class:"refresh-btn",onClick:c},$[0]||($[0]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),s("button",{class:"database-btn",onClick:m},[$[1]||($[1]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",null,g(f(t)("cloudWindow.tagDatabase")),1)]),s("button",{class:"database-btn",onClick:y},[$[2]||($[2]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),s("span",null,g(f(t)("cloudWindow.danbooruDatabase")),1)]),s("div",eL,[s("span",null,g(f(t)("cloudWindow.currentPath"))+": "+g(a.value=="tags"?f(t)("cloudWindow.tagDatabase"):f(t)("cloudWindow.danbooruDatabase")),1)])]),s("div",tL,[o.value!=="tags"&&o.value!=="danbooru"?(b(),C("button",{key:0,class:"back-btn",onClick:d},[$[3]||($[3]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),je(" "+g(f(t)("cloudWindow.back")),1)])):re("",!0),(b(!0),C(Ie,null,ze(n.value,T=>(b(),C("div",{key:T.path,class:"file-item"},[s("div",nL,[s("span",oL,g(T.name),1),s("span",aL,g(T.type=="dir"?"":T.type=="file"?"":""),1)]),s("div",lL,[T.type==="dir"?(b(),C("button",{key:0,onClick:D=>v(T.path),class:"open-btn"},g(f(t)("cloudWindow.open")),9,sL)):T.type==="file"?(b(),C("div",iL,[u(T.path)?(b(),C("span",rL,g(f(t)("cloudWindow.installed")),1)):(b(),C("button",{key:1,onClick:D=>p(T.path),class:"install-btn",disabled:T.isInstalling},g(T.isInstalling?f(t)("cloudWindow.installing"):f(t)("cloudWindow.install")),9,uL))])):re("",!0)])]))),128))])]))}},[["__scopeId","data-v-026f0961"]]),dL={class:"header-actions"},pL=["title"],fL=["onMouseover","onDragstart","onDrop"],gL={class:"lora-info"},mL={class:"lora-header"},vL=["title"],hL={class:"lora-actions"},_L=["onClick","title"],yL=["onClick","title"],bL={class:"lora-weights-row"},wL={class:"weight-item-col"},xL=["onUpdate:modelValue"],SL={class:"weight-item-col"},TL=["onUpdate:modelValue"],kL={class:"switch-item-col"},CL={class:"switch"},EL=["checked","onChange"],Oa="weilin_prompt_ui_",$L=_t({__name:"lora_stack",setup(e,{expose:t}){const{t:n}=ht(),o=h([]),a=h(""),l=h(!1),i=h(""),r=h(100),u=h(0),p=h(),d=h(!1),c=h(!1),v=h(),m=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:a.value},"*")},y=P=>{P.hidden=!P.hidden},S=(P,Z)=>{if(c.value=!0,i.value===P&&l.value)return;const z=Z.currentTarget.getBoundingClientRect();let oe={left:z.left-450-10,top:z.top};oe.left<10&&(oe.left=z.right+10),oe.top=Math.max(10,Math.min(oe.top,window.innerHeight-310)),r.value=oe.left,u.value=oe.top,l.value=!0,i.value=P,qe(()=>{v.value.refresh()})},$=()=>{c.value=!1,setTimeout(()=>{!d.value&&!c.value&&(l.value=!1,i.value="",d.value=!1)},200)},T=()=>{d.value=!0,c.value=!0},D=()=>{l.value=!1,i.value="",d.value=!1},J=P=>{o.value.find(Z=>Z.name===P.name)||o.value.push({name:P.name,weight:1,text_encoder_weight:1,...P})},x=P=>{const Z=o.value.findIndex(te=>te.name===P.name);Z>-1&&o.value.splice(Z,1)},N=h(),H=P=>{N.value.open({name:P.lora})};window.addEventListener("message",P=>{P.data.type==="weilin_prompt_ui_selectLora_stack_"+a.value&&J(P.data.lora)});const j=(P,Z)=>{if(a.value=Z,P.length>0)try{const te=JSON.parse(P);if(te.lora&&te.lora!=""&&(o.value=te.lora),te.temp_lora&&te.temp_lora.length>0&&te.temp_lora!=""){const z=te.temp_lora;o.value=z}}catch{Y({type:"warn",str:"promptBox.settings.errorPrompt"})}};ot(o,P=>{K()},{deep:!0});const K=()=>{if(o.value.length>0){const P=o.value.filter(z=>!z.hidden);let Z={lora:"",temp_lora:o.value};P.length>0&&(Z.lora=P);const te=JSON.stringify(Z);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:te},"*")}else{const Z=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:Z},"*")}},X=h(null),_e=P=>{X.value=P},le=P=>{if(X.value===null||X.value===P)return;const Z=o.value.splice(X.value,1)[0];o.value.splice(P,0,Z),X.value=null,K()};return t({initLoraStack:j}),(P,Z)=>(b(),C("div",{class:Le(`${Oa}lora-stack`)},[s("div",{class:Le(`${Oa}lora-content`)},[s("div",{class:Le(`${Oa}lora-header`)},[s("div",dL,[s("button",{class:Le(`${Oa}add-btn`),onClick:m,title:f(n)("controls.addLora")},Z[1]||(Z[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,pL)])],2),s("div",{class:Le(`${Oa}lora-body`)},[s("div",{class:Le(`${Oa}lora-list`)},[(b(!0),C(Ie,null,ze(o.value,(te,z)=>(b(),C("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:p,key:te.name,class:Le(["lora-item",{"hidden-lora":te.hidden}]),onMouseover:ne=>S(te.lora,ne),onMouseleave:$,draggable:"true",onDragstart:ne=>_e(z),onDragover:Z[0]||(Z[0]=Je(()=>{},["prevent"])),onDrop:ne=>le(z)},[s("div",gL,[s("div",mL,[s("span",{class:"lora-name",title:te.name},g(te.name),9,vL),s("div",hL,[s("button",{class:"look-on-btn",onClick:ne=>H(te),title:f(n)("controls.lookOnLora")},Z[2]||(Z[2]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,_L),s("button",{class:"remove-btn",onClick:ne=>x(te),title:f(n)("controls.removeLora")},Z[3]||(Z[3]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,yL)])]),s("div",bL,[s("div",wL,[s("label",null,g(f(n)("loraManager.modelWeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":ne=>te.weight=ne,class:"lora-weight",step:"0.1"},null,8,xL),[[Ae,te.weight]])]),s("div",SL,[s("label",null,g(f(n)("loraManager.textEncoderWeight")),1),ve(s("input",{type:"number","onUpdate:modelValue":ne=>te.text_encoder_weight=ne,class:"lora-weight",step:"0.1"},null,8,TL),[[Ae,te.text_encoder_weight]])]),s("div",kL,[s("label",null,g(te.hidden?f(n)("lora.hideLora"):f(n)("lora.showLora")),1),s("label",CL,[s("input",{type:"checkbox",checked:!te.hidden,onChange:ne=>y(te)},null,40,EL),Z[4]||(Z[4]=s("span",{class:"slider"},null,-1))])])])])],42,fL))),128))],2)],2)],2),Ue(oi,{ref_key:"loraDetailLoraStackRef",ref:N},null,512),l.value?(b(),wt(uu,{key:0,ref_key:"loraCardItem",ref:v,fileNmae:i.value,paddingLeft:r.value,paddingTop:u.value,onCardLeave:D,onCardenter:T},null,8,["fileNmae","paddingLeft","paddingTop"])):re("",!0)],2))}},[["__scopeId","data-v-c2ab38ea"]]),Na={searchDanbooru:async(e="",t=1,n=100)=>await Me({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:n}}),addDanbooruTag:async e=>await Me({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await Me({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await Me({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await Me({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await Me({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},LL={key:0,class:"loading-overlay"},AL={class:"settings-content"},ML={style:{"margin-bottom":"16px"}},IL=["placeholder"],DL={style:{"margin-bottom":"16px"}},RL=["placeholder"],OL=["placeholder"],NL=["placeholder"],PL={class:"data-container"},FL={key:0},BL={key:0},UL={class:"tag-group-container"},VL={key:0},WL={key:1},zL={style:{display:"flex","align-items":"center"}},HL={key:0},jL=["placeholder"],GL=["placeholder"],qL=["placeholder"],KL=["placeholder"],YL=["onClick"],JL=["onClick"],XL=["onClick"],QL={key:1},ZL={class:"tag-group-container"},eA={key:0},tA={key:1},nA={style:{display:"flex","align-items":"center"}},oA={key:0},aA=["placeholder"],lA=["placeholder"],sA=["placeholder"],iA=["placeholder"],rA=["onClick"],uA=["onClick"],cA=["onClick"],dA=_t({__name:"import_danbooru",setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(""),l=h(""),i=h(""),r=h(""),u=h(""),p=h(""),d=h(""),c=h(""),v=h(""),m=h([]),y=h(-1),S=h(""),$=h(""),T=h(null);h(null);const D=h(null),J=h(!1),x=h(""),N=h(0),H=h(0);function j(){a.value="",l.value="",N.value=0,H.value=0,i.value="",r.value="",u.value="",p.value="",d.value="",c.value="",v.value="",m.value=[],y.value=-1,S.value="",$.value="",J.value=!1}function K(G){j();const A=G.target.files[0];if(A){const B=new FileReader;B.onload=V=>{V.target.result.split(";").filter(k=>k.trim()).forEach(k=>{if((k.includes("tag_groups")||k.includes("tag_subgroups"))&&k.includes("p_uuid"))if(k.includes("g_uuid")){u.value=k+";";const O=k.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);O&&(v.value=O[1]);const Q=k.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(d.value=Q[1].replace(/''/g,"'"))}else{r.value=k+";";const O=k.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);O&&(c.value=O[1]);const Q=k.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(p.value=Q[1].replace(/''/g,"'"))}else k.includes("tag_tags")&&m.value.push(k+";")})},B.readAsText(A)}G.target.value=""}function X(G){const A=G.target.files[0];if(A){const B=new FileReader;B.onload=V=>{V.target.result.split(`
`).filter(k=>k.trim()).forEach(k=>{const w=k.split(",");if(w.length>=2){let O,Q,pe,ye;w.length===2?(O=w[0].trim(),ye=w[1].trim(),Q=0,pe=0):w.length>=3&&(O=w[0].trim(),Q=parseInt(w[1].trim())||0,pe=parseInt(w[2].trim())||0,ye=w.slice(3).join(",").trim(),ye=ye.replace(/^"(.*)"$/,"$1"));const L=O.replace(/'/g,"''"),_=ye.replace(/'/g,"''"),R=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${L}', '', '${_}', ${pe}, ${Q});`;m.value.push(R)}})},B.readAsText(A)}G.target.value=""}function _e(){D.value.click()}function le(){let G;m.value.length>0&&Z(m.value[0])?G=[...m.value].join(`
`):G=[r.value,u.value,...m.value].join(`
`);const A=new Blob([G],{type:"text/sql"}),B=document.createElement("a");if(B.href=URL.createObjectURL(A),x.value.length<=0){const V=parseInt(new Date().getTime()/1e3);B.download="export_"+V+".sql"}else B.download=x.value+".sql";B.click()}function P(G){const A=G.match(/VALUES\s*\([^']*'([^']+)'/),B=G.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:A?A[1].replace(/''/g,"'"):"",desc:B?B[1].replace(/''/g,"'"):""}}function Z(G){return G.includes("danbooru_tag")}function te(G){const A=G.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return A?{tag:A[1].replace(/''/g,"'"),color_id:A[2],translate:A[3].replace(/''/g,"'"),hot:parseInt(A[4]),aliases:parseInt(A[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const z=h(0),ne=h(0);function oe(G){const A=m.value[G];if(Z(A)){const B=te(A);S.value=B.tag,$.value=B.translate,z.value=B.hot,ne.value=B.aliases}else{const B=P(A);S.value=B.text,$.value=B.desc}y.value=G}function F(G){const A=S.value.replace(/'/g,"''"),B=$.value.replace(/'/g,"''");if(Z(m.value[G])){const V=te(m.value[G]),I=parseInt(z.value)||0,W=parseInt(ne.value)||0;m.value[G]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${A}', '${V.color_id}', '${B}', ${I}, ${W});`}else m.value[G]=m.value[G].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${A}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${B}'`);y.value=-1}function U(){y.value=-1,S.value="",$.value="",z.value=0,ne.value=0}function ue(G){m.value.splice(G,1)}function ke(){const G=a.value.replace(/'/g,"''"),A=l.value.replace(/'/g,"''"),B=parseInt(N.value)||0,V=parseInt(H.value)||0,I=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${G}', '', '${A}', ${B}, ${V});`;m.value.push(I),a.value="",l.value="",N.value=0,H.value=0}const ie=h(!1),ge=async G=>{ie.value=!0;try{await Na.runSQLToServer(G).then(A=>{if(A.code!=200){Y({type:"warn",str:A.message});return}else de(),Y({type:"success",str:"importDialog.successImport"})}).catch(A=>{console.error(A),Y({type:"warn",str:"importDialog.importFail"})})}catch(A){console.error(A),Y({type:"warn",str:"importDialog.importFail"})}finally{ie.value=!1}},de=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ae=async()=>{if(m.value.length>0&&Z(m.value[0])){const G=[...m.value];await ge(G)}else if(J.value){if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}const G=[...m.value];await ge(G)}else{if(r.value.length<=0||u.value.length<=0){Y({type:"warn",str:"importDialog.pleaseFullRequest"});return}const G=[r.value,u.value,...m.value];await ge(G)}};return ot(r,(G,A)=>{var I,W;if(!G||G===A)return;const B=(I=G.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],V=(W=A==null?void 0:A.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:W[1];B&&V&&u.value&&(u.value=u.value.replace(new RegExp(`'${V}'`,"g"),`'${B}'`))}),ot(u,(G,A)=>{var I,W;if(!G||G===A)return;const B=(I=G.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],V=(W=A==null?void 0:A.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:W[1];B&&V&&m.value.length>0&&(m.value=m.value.map(k=>k.replace(new RegExp(`'${V}'`,"g"),`'${B}'`)))}),t({open:()=>{o.value=!0}}),(G,A)=>(b(),C(Ie,null,[ie.value?(b(),C("div",LL,A[19]||(A[19]=[s("div",{class:"loading-spinner"},null,-1)]))):re("",!0),Ue($a,{modelValue:o.value,"onUpdate:modelValue":A[18]||(A[18]=B=>o.value=B),title:f(n)("danbooruManager.importBatchTitle")},{footer:it(()=>[s("button",{onClick:A[17]||(A[17]=B=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:ae},g(f(n)("importDialog.sure")),1)]),default:it(()=>[s("div",AL,[s("div",ML,[s("button",{onClick:j,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:le},g(f(n)("importDialog.dumpSQL")),1),ve(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":A[0]||(A[0]=B=>x.value=B),placeholder:f(n)("importDialog.settingOutputName")},null,8,IL),[[Ae,x.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:K,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:D,onChange:X,accept:".txt,.csv",style:{display:"none"}},null,544)]),s("div",DL,[ve(s("input",{"onUpdate:modelValue":A[1]||(A[1]=B=>a.value=B),placeholder:"Tag"},null,512),[[Ae,a.value]]),ve(s("input",{"onUpdate:modelValue":A[2]||(A[2]=B=>l.value=B),placeholder:f(n)("importDialog.translater")},null,8,RL),[[Ae,l.value]]),ve(s("input",{"onUpdate:modelValue":A[3]||(A[3]=B=>N.value=B),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,OL),[[Ae,N.value]]),ve(s("input",{"onUpdate:modelValue":A[4]||(A[4]=B=>H.value=B),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,NL),[[Ae,H.value]]),s("button",{onClick:ke},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:_e,class:"upload-btn"},g(f(n)("danbooruManager.import")),1)]),s("div",PL,[r.value?(b(),C("div",FL,[s("h3",null,g(P(r.value).text),1),u.value?(b(),C("div",BL,[s("h4",null,g(P(u.value).text),1),s("div",UL,[(b(!0),C(Ie,null,ze(m.value,(B,V)=>(b(),C("div",{key:V,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(B)?(b(),C("p",VL,g(te(B).tag)+" - "+g(te(B).translate)+" ("+g(f(n)("danbooruManager.hot"))+": "+g(te(B).hot)+", "+g(f(n)("danbooruManager.aliases"))+": "+g(te(B).aliases)+")",1)):(b(),C("p",WL,g(P(B).text)+" - "+g(P(B).desc),1)),s("div",zL,[y.value===V?(b(),C("div",HL,[Z(B)?ve((b(),C("input",{key:0,"onUpdate:modelValue":A[5]||(A[5]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]):ve((b(),C("input",{key:1,"onUpdate:modelValue":A[6]||(A[6]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]),Z(B)?ve((b(),C("input",{key:2,"onUpdate:modelValue":A[7]||(A[7]=I=>$.value=I),placeholder:f(n)("importDialog.translate")},null,8,jL)),[[Ae,$.value]]):ve((b(),C("input",{key:3,"onUpdate:modelValue":A[8]||(A[8]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,GL)),[[Ae,$.value]]),Z(B)?ve((b(),C("input",{key:4,"onUpdate:modelValue":A[9]||(A[9]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,qL)),[[Ae,z.value]]):re("",!0),Z(B)?ve((b(),C("input",{key:5,"onUpdate:modelValue":A[10]||(A[10]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,KL)),[[Ae,ne.value]]):re("",!0),s("button",{onClick:I=>F(V)},g(f(n)("importDialog.sureYes")),9,YL),s("button",{style:{"margin-left":"10px"},onClick:U},g(f(n)("importDialog.cancel")),1)])):(b(),C("button",{key:1,onClick:I=>oe(V)},g(f(n)("importDialog.edit")),9,JL)),s("button",{style:{"margin-left":"10px"},onClick:I=>ue(V)},g(f(n)("importDialog.delete")),9,XL)])]))),128))])])):re("",!0)])):m.value.length>0?(b(),C("div",QL,[s("h3",null,g(f(n)("danbooruManager.importTitle")),1),s("div",ZL,[(b(!0),C(Ie,null,ze(m.value,(B,V)=>(b(),C("div",{key:V,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(B)?(b(),C("p",eA,g(te(B).tag)+" - "+g(te(B).translate)+" (: "+g(te(B).hot)+", : "+g(te(B).aliases)+")",1)):(b(),C("p",tA,g(P(B).text)+" - "+g(P(B).desc),1)),s("div",nA,[y.value===V?(b(),C("div",oA,[Z(B)?ve((b(),C("input",{key:0,"onUpdate:modelValue":A[11]||(A[11]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]):ve((b(),C("input",{key:1,"onUpdate:modelValue":A[12]||(A[12]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]),Z(B)?ve((b(),C("input",{key:2,"onUpdate:modelValue":A[13]||(A[13]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,aA)),[[Ae,$.value]]):ve((b(),C("input",{key:3,"onUpdate:modelValue":A[14]||(A[14]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,lA)),[[Ae,$.value]]),Z(B)?ve((b(),C("input",{key:4,"onUpdate:modelValue":A[15]||(A[15]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,sA)),[[Ae,z.value]]):re("",!0),Z(B)?ve((b(),C("input",{key:5,"onUpdate:modelValue":A[16]||(A[16]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,iA)),[[Ae,ne.value]]):re("",!0),s("button",{onClick:I=>F(V)},g(f(n)("importDialog.sureYes")),9,rA),s("button",{style:{"margin-left":"10px"},onClick:U},g(f(n)("importDialog.cancel")),1)])):(b(),C("button",{key:1,onClick:I=>oe(V)},g(f(n)("importDialog.edit")),9,uA)),s("button",{style:{"margin-left":"10px"},onClick:I=>ue(V)},g(f(n)("importDialog.delete")),9,cA)])]))),128))])])):re("",!0)])])]),_:1},8,["modelValue","title"])],64))}},[["__scopeId","data-v-d9630f57"]]),pA={class:"danbooru-manager"},fA={class:"title"},gA={class:"action-bar"},mA={class:"search-box"},vA=["placeholder"],hA=["disabled"],_A={class:"pagination"},yA=["disabled"],bA={class:"page-info"},wA=["disabled"],xA={class:"page-size-control"},SA={key:0,class:"tag-list"},TA={style:{"table-layout":"fixed",overflow:"auto"}},kA={class:"checkbox-column"},CA=["checked"],EA={class:"tag-column"},$A={class:"translate-column"},LA={class:"color-column"},AA={class:"hot-column"},MA={class:"aliases-column"},IA={class:"control-column"},DA=["value"],RA=["onClick"],OA=["onClick"],NA={key:1,class:"no-results"},PA={key:2,class:"weilin-tools-dialog"},FA={class:"weilin-tools-dialog-content"},BA={class:"form-group"},UA=["placeholder"],VA={class:"form-group"},WA=["placeholder"],zA={class:"form-group"},HA=["value"],jA={class:"form-group"},GA={key:0,class:"form-group"},qA={class:"weilin-tools-dialog-actions"},KA={key:3,class:"weilin-tools-dialog"},YA={class:"weilin-tools-dialog-content"},JA={class:"weilin-tools-dialog-actions"},XA={key:4,class:"weilin-tools-dialog"},QA={class:"weilin-tools-dialog-content"},ZA={class:"weilin-tools-dialog-actions"},eM={key:5,class:"overlay"},tM=_t({__name:"danbooru_manager",setup(e){const{t}=ht(),n=h(""),o=h([]),a=h(1),l=h(1),i=h(100),r=h(!1),u=h(!1),p=h(!1),d=h(!1),c=h(!1),v=h(null),m=h({tag:"",translate:"",color_id:0,hot:0,aliases:0}),y=[{name:"",color:"#888888"},{name:"",color:"#FF6666"},{name:"",color:"#66FF66"},{name:"",color:"#6666FF"},{name:"",color:"#FFFF66"},{name:"",color:"#FF66FF"},{name:"",color:"#66FFFF"},{name:"",color:"#FF9966"},{name:"",color:"#FF99CC"},{name:"",color:"#996633"}],S=F=>y[F]?y[F].color:y[0].color;let $=null;const T=()=>{$&&clearTimeout($),$=setTimeout(()=>{a.value=1,D()},300)},D=async()=>{r.value=!0,le.value=[];try{const F=await Na.searchDanbooru(n.value,a.value,i.value);F&&F.data?(o.value=F.data.data||[],l.value=F.data.total_pages||1):(o.value=[],l.value=1)}catch(F){console.error(":",F),Y({type:"error",str:t("message.searchFailed")}),o.value=[]}finally{r.value=!1}},J=F=>{F<1||F>l.value||(a.value=F,D())},x=()=>{i.value<10&&(i.value=10),i.value>500&&(i.value=500),a.value=1,le.value=[],D()},N=()=>{c.value=!1,m.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},u.value=!0},H=F=>{c.value=!0,v.value=F,m.value={id:F.id_index,tag:F.tag,translate:F.translate||"",color_id:F.color_id||0,hot:F.hot||0,aliases:F.aliases||0},u.value=!0},j=()=>{u.value=!1},K=async()=>{if(!m.value.tag){Y({type:"error",str:t("tagManager.textRequired")});return}try{if(c.value){const F=await Na.updateDanbooruTag({id:m.value.id,update_data:{tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases}});F&&F.code===200?(Y({type:"success",str:t("message.editSuccess")}),D()):Y({type:"error",str:t("message.editFailed")})}else{const F=await Na.addDanbooruTag({tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases});F&&F.code===200?(Y({type:"success",str:t("message.addSuccess")}),D()):Y({type:"error",str:t("message.addFailed")})}j()}catch(F){console.error(":",F),Y({type:"error",str:c.value?t("message.editFailed"):t("message.addFailed")})}},X=F=>{v.value=F,p.value=!0},_e=async()=>{if(!(!v.value||!v.value.id_index))try{const F=await Na.deleteDanbooruTag(v.value.id_index);F&&F.code===200?(Y({type:"success",str:t("message.deleteSuccess")}),D()):Y({type:"error",str:t("message.deleteFailed")}),p.value=!1}catch(F){console.error(":",F),Y({type:"error",str:t("message.deleteFailed")})}},le=h([]),P=vt(()=>o.value.length>0&&le.value.length===o.value.length),Z=()=>{P.value?le.value=[]:le.value=o.value.map(F=>F.id_index)},te=()=>{le.value.length!==0&&(d.value=!0)},z=async()=>{if(le.value.length!==0){try{const F=await Na.batchDeleteDanbooruTags(le.value);F&&F.code===200?(Y({type:"success",str:` ${le.value.length} `}),le.value=[],D()):Y({type:"error",str:""})}catch(F){console.error(":",F),Y({type:"error",str:""})}d.value=!1}},ne=h(),oe=()=>{ne.value.open()};return mt(()=>{D()}),(F,U)=>{var ue;return b(),C("div",pA,[s("h2",fA,g(f(t)("danbooruManager.title")),1),s("div",gA,[s("div",mA,[ve(s("input",{"onUpdate:modelValue":U[0]||(U[0]=ke=>n.value=ke),type:"text",placeholder:f(t)("danbooruManager.searchPlaceholder"),onInput:T},null,40,vA),[[Ae,n.value]]),s("button",{class:"search-btn",onClick:D},g(f(t)("tagManager.search")),1)]),s("button",{class:"add-btn",onClick:N},g(f(t)("danbooruManager.add")),1),s("button",{class:"add-btn",onClick:oe},g(f(t)("tagManager.importDanbooru")),1),s("button",{class:Le(["batch-delete-btn",{disabled:le.value.length===0}]),disabled:le.value.length===0,onClick:te},g(f(t)("tagManager.hasDeleteAction"))+" ("+g(le.value.length)+") ",11,hA)]),s("div",_A,[s("button",{disabled:a.value<=1,onClick:U[1]||(U[1]=ke=>J(a.value-1)),class:"page-btn"},g(f(t)("loraManager.prevPage")),9,yA),s("span",bA,g(a.value)+" / "+g(l.value),1),s("button",{disabled:a.value>=l.value,onClick:U[2]||(U[2]=ke=>J(a.value+1)),class:"page-btn"},g(f(t)("loraManager.nextPage")),9,wA),s("div",xA,[s("label",null,g(f(t)("danbooruManager.pageShow")),1),ve(s("input",{"onUpdate:modelValue":U[3]||(U[3]=ke=>i.value=ke),type:"number",min:"10",max:"500",onChange:x,class:"page-size-input"},null,544),[[Ae,i.value,void 0,{number:!0}]]),s("span",null,g(f(t)("danbooruManager.pageLimit")),1)])]),o.value.length>0?(b(),C("div",SA,[s("table",TA,[s("thead",null,[s("tr",null,[s("th",kA,[s("input",{type:"checkbox",checked:P.value,onChange:Z},null,40,CA)]),U[12]||(U[12]=s("th",{class:"id-column"},"ID",-1)),s("th",EA,g(f(t)("tagManager.description")),1),s("th",$A,g(f(t)("promptBox.translate")),1),s("th",LA,g(f(t)("tagManager.backgroundColor")),1),s("th",AA,g(f(t)("danbooruManager.hot")),1),s("th",MA,g(f(t)("danbooruManager.aliases")),1),s("th",IA,g(f(t)("danbooruManager.controle")),1)])]),s("tbody",null,[(b(!0),C(Ie,null,ze(o.value,ke=>(b(),C("tr",{key:ke.id_index},[s("td",null,[ve(s("input",{type:"checkbox",value:ke.id_index,"onUpdate:modelValue":U[4]||(U[4]=ie=>le.value=ie)},null,8,DA),[[$t,le.value]])]),s("td",null,g(ke.id_index),1),s("td",null,g(ke.tag),1),s("td",null,g(ke.translate),1),s("td",null,[s("div",{class:"color-box",style:ct({backgroundColor:S(ke.color_id)})},null,4)]),s("td",null,g(ke.hot),1),s("td",null,g(ke.aliases),1),s("td",null,[s("button",{class:"edit-btn",onClick:ie=>H(ke)},g(f(t)("common.edit")),9,RA),s("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:ie=>X(ke)},g(f(t)("common.delete")),9,OA)])]))),128))])])])):(b(),C("div",NA,g(f(t)("tagManager.noResults")),1)),u.value?(b(),C("div",PA,[s("div",FA,[s("h3",null,g(c.value?f(t)("danbooruManager.edit"):f(t)("danbooruManager.add")),1),s("div",BA,[s("label",null,g(f(t)("tagManager.description")),1),ve(s("input",{"onUpdate:modelValue":U[5]||(U[5]=ke=>m.value.tag=ke),type:"text",placeholder:f(t)("tagManager.descriptionPlaceholder")},null,8,UA),[[Ae,m.value.tag]])]),s("div",VA,[s("label",null,g(f(t)("promptBox.translate")),1),ve(s("input",{"onUpdate:modelValue":U[6]||(U[6]=ke=>m.value.translate=ke),type:"text",placeholder:f(t)("danbooruManager.translatePlaceholder")},null,8,WA),[[Ae,m.value.translate]])]),s("div",zA,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),ve(s("select",{"onUpdate:modelValue":U[7]||(U[7]=ke=>m.value.color_id=ke)},[(b(),C(Ie,null,ze(y,(ke,ie)=>s("option",{key:ie,value:ie},g(ke.name),9,HA)),64))],512),[[Gt,m.value.color_id]]),s("div",{class:"color-preview",style:ct({backgroundColor:S(m.value.color_id)})},null,4)]),s("div",jA,[U[13]||(U[13]=s("label",null,"Hot",-1)),ve(s("input",{"onUpdate:modelValue":U[8]||(U[8]=ke=>m.value.hot=ke),type:"number",min:"0"},null,512),[[Ae,m.value.hot,void 0,{number:!0}]])]),c.value?re("",!0):(b(),C("div",GA,[U[14]||(U[14]=s("label",null,"Aliases",-1)),ve(s("input",{"onUpdate:modelValue":U[9]||(U[9]=ke=>m.value.aliases=ke),type:"number",min:"0"},null,512),[[Ae,m.value.aliases,void 0,{number:!0}]])])),s("div",qA,[s("button",{onClick:j},g(f(t)("common.cancel")),1),s("button",{onClick:K},g(f(t)("common.save")),1)])])])):re("",!0),p.value?(b(),C("div",KA,[s("div",YA,[s("h3",null,g(f(t)("common.confirmDelete")),1),s("p",null,g(f(t)("tagManager.deleteTagConfirm",{name:((ue=v.value)==null?void 0:ue.tag)||""})),1),s("div",JA,[s("button",{onClick:U[10]||(U[10]=ke=>p.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:_e},g(f(t)("common.delete")),1)])])])):re("",!0),d.value?(b(),C("div",XA,[s("div",QA,[s("h3",null,g(f(t)("danbooruManager.sureBatchDelete")),1),s("p",null,g(f(t)("danbooruManager.sureBatchDeleteTips1"))+" "+g(le.value.length)+" "+g(f(t)("danbooruManager.sureBatchDeleteTips2")),1),s("div",ZA,[s("button",{onClick:U[11]||(U[11]=ke=>d.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("danbooruManager.sureDelete")),1)])])])):re("",!0),u.value||p.value||d.value?(b(),C("div",eM)):re("",!0),Ue(dA,{ref_key:"importDanbooruDialog",ref:ne},null,512)])}}},[["__scopeId","data-v-f19f168a"]]),nM={id:"weilin_comfyui_tools_prompt_ui_container_main"},oM={key:10,class:"version-update-notification"},aM={class:"version-update-content"},Pa="weilin_tools_",lM=_t({__name:"App",setup(e){Ds();const t=h(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:n}=ht(),o=h(""),a=h("look"),l=h("manager"),i=h("prompt_global"),r=h(!1),u=`${Pa}theme`,p=h(localStorage.getItem(u)==="dark"),d=h(""),c=h(!1),v=h(""),m=h(null),y=`${Pa}version_update_remind`,S=()=>{c.value=!1,m.value&&(clearTimeout(m.value),m.value=null)},$=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),S()},T=()=>{localStorage.setItem(y,"false"),S()},D={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},J=()=>{try{const F=localStorage.getItem(`${Pa}windowStates`);if(F){const U=JSON.parse(F),ue={...D};for(const ke in U)ke in ue&&(ue[ke]={...D[ke],...U[ke],visible:U[ke].is_default_close?!1:U[ke].visible});return ue}}catch(F){console.error("Error loading window states:",F)}return{...D}},x=h(J());ot(x,F=>{try{localStorage.setItem(`${Pa}windowStates`,JSON.stringify(F))}catch(U){console.error("Error saving window states:",U)}},{deep:!0}),mt(()=>{Object.keys(x.value).forEach(F=>{Be.registerWindow(F)}),N(),window.addEventListener("message",ne),oe()});const N=()=>{let F=localStorage.getItem(u);F||(localStorage.setItem(u,"dark"),F="dark",p.value=!0),p.value=F==="dark";const U=document.getElementById("weilin_comfyui_tools_prompt_ui_div");U&&U.setAttribute("data-theme",p.value?"dark":"light")};In(()=>{Object.keys(x.value).forEach(F=>{Be.unregisterWindow(F)}),window.removeEventListener("message",ne),m.value&&(clearTimeout(m.value),m.value=null)});const H=F=>{F==="prompt"&&(o.value=""),x.value[F].visible=!1},j=(F,U)=>{x.value[F]&&(x.value[F].position={...U})},K=(F,U)=>{x.value[F]&&(x.value[F].size={...U})},X=()=>{const F={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},U={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${Pa}windowStates`,JSON.stringify(U)),localStorage.setItem(`${Pa}loraDetailState`,JSON.stringify(F)),x.value=J()};(()=>{yn.getTranslateSetting().then(F=>{localStorage.setItem("weilin_prompt_ui_translater_setting",F.data)}).catch(F=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const le=h(),P=h(),Z=h(),te=h(),z=h(),ne=F=>{F.data.type==="weilin_prompt_ui_openTagManager"?(l.value="manager",x.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openTagManager_prompt"?(l.value="prompt",x.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openPromptBox"?(o.value=F.data.id,i.value="prompt",x.value.prompt.visible=!0,r.value=!1,F.data.node==="WeiLinPromptUI"&&(r.value=!0),qe(()=>{le.value.setPromptText(F.data.prompt)}),Be.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_openLoraManager"?(a.value="look",x.value.lora.visible=!0,Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(0,"")}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(1,F.data.seed)}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(2,F.data.seed)}),Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openHistoryManager"?(x.value.history.visible=!0,Be.setActiveWindow("history")):F.data.type==="weilin_prompt_ui_openAiWindow"?(x.value.ai_window.visible=!0,Be.setActiveWindow("ai_window")):F.data.type==="weilin_prompt_ui_open_node_list_window"?(x.value.node_list_window.visible=!0,Be.setActiveWindow("node_list_window")):F.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_open_global_prompt_box"?(i.value="prompt_global",o.value="global",x.value.prompt.visible=!0,r.value=!1,qe(()=>{le.value.setPromptText(d.value)}),Be.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_open_global_tag_manager"?(l.value="manager",x.value.tag.visible=!0,Be.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_open_global_lora_manager"?(a.value="look",x.value.lora.visible=!0,Be.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?d.value=F.data.data:F.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":F.data.type==="weilin_prompt_ui_restore_window"?X():F.data.type==="weilin_prompt_ui_open_cloud_window"?(x.value.cloud_window.visible=!0,Be.setActiveWindow("cloud_window")):F.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(x.value.lora_stack_window.visible=!0,qe(()=>{P.value.initLoraStack(F.data.prompt,F.data.seed)}),Be.setActiveWindow("lora_stack_window")):F.data.type==="weilin_prompt_ui_openLoraDetail"?te.value.open({name:F.data.lora}):F.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(x.value.danbooru_manager_window.visible=!0,Be.setActiveWindow("danbooru_manager_window")):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_response"?o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_go_random_response"&&o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:F.data.data},"*")},oe=async()=>{try{if(localStorage.getItem(y)==="false"){console.info("WeiLin-Comfyui-Tools ");return}const U=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!U.ok){console.error(":",U.status);return}const ke=(await U.text()).match(/export const version = "([^"]+)"/);if(ke&&ke[1]){const ie=ke[1];console.info(`WeiLin-Comfyui-Tools GitHub ${ie}`),ie!==mo&&(v.value=`WeiLin-Comfyui-Tools  ${ie} ${mo}`,c.value=!0,m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{c.value=!1,m.value=null},1e4),console.info(`WeiLin-Comfyui-Tools  ${ie} ${mo} GitHubhttps://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(F){console.error("WeiLin-Comfyui-Tools :",F)}};return(F,U)=>(b(),C("div",nM,[x.value.prompt.visible?(b(),wt(kn,{key:0,name:"promptBox",title:i.value==="prompt"?f(n)("promptBox.windowTitle"):f(n)("promptBox.windowTitleGlobal"),position:x.value.prompt.position,size:x.value.prompt.size,"z-index":f(Be).getZIndex("prompt"),"onUpdate:position":U[0]||(U[0]=ue=>j("prompt",ue)),"onUpdate:size":U[1]||(U[1]=ue=>K("prompt",ue)),onActive:U[2]||(U[2]=ue=>f(Be).setActiveWindow("prompt")),onClose:U[3]||(U[3]=ue=>H("prompt"))},{default:it(()=>[Ue(SE,{promptManager:i.value,hasPromptLoraStack:r.value,ref_key:"promptBoxRef",ref:le},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.tag.visible?(b(),wt(kn,{key:1,name:"tagManager",title:f(n)("tagManager.windowTitle"),position:x.value.tag.position,size:x.value.tag.size,"z-index":f(Be).getZIndex("tag"),"onUpdate:position":U[4]||(U[4]=ue=>j("tag",ue)),"onUpdate:size":U[5]||(U[5]=ue=>K("tag",ue)),onActive:U[6]||(U[6]=ue=>f(Be).setActiveWindow("tag")),onClose:U[7]||(U[7]=ue=>H("tag"))},{default:it(()=>[Ue($g,{tagManager:l.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.lora.visible?(b(),wt(kn,{key:2,name:"loraManager",title:f(n)("loraManager.windowTitle"),position:x.value.lora.position,size:x.value.lora.size,"z-index":f(Be).getZIndex("lora"),"onUpdate:position":U[8]||(U[8]=ue=>j("lora",ue)),"onUpdate:size":U[9]||(U[9]=ue=>K("lora",ue)),onActive:U[10]||(U[10]=ue=>f(Be).setActiveWindow("lora")),onClose:U[11]||(U[11]=ue=>H("lora"))},{default:it(()=>[Ue(zg,{loraManager:a.value,ref_key:"loraManagerRef",ref:Z},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.history.visible?(b(),wt(kn,{key:3,name:"historyManager",title:f(n)("history.windowTitle"),position:x.value.history.position,size:x.value.history.size,"z-index":f(Be).getZIndex("history"),"onUpdate:position":U[12]||(U[12]=ue=>j("history",ue)),"onUpdate:size":U[13]||(U[13]=ue=>K("history",ue)),onActive:U[14]||(U[14]=ue=>f(Be).setActiveWindow("history")),onClose:U[15]||(U[15]=ue=>H("history"))},{default:it(()=>[Ue(v$)]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.ai_window.visible?(b(),wt(kn,{key:4,name:"aiWindow",title:f(n)("aiWindow.windowTitle"),position:x.value.ai_window.position,size:x.value.ai_window.size,"z-index":f(Be).getZIndex("ai_window"),"onUpdate:position":U[16]||(U[16]=ue=>j("ai_window",ue)),"onUpdate:size":U[17]||(U[17]=ue=>K("ai_window",ue)),onActive:U[18]||(U[18]=ue=>f(Be).setActiveWindow("ai_window")),onClose:U[19]||(U[19]=ue=>H("ai_window"))},{default:it(()=>[Ue(V$)]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.node_list_window.visible?(b(),wt(kn,{key:5,name:"nodeListWindow",title:f(n)("nodeListWindow.windowTitle"),position:x.value.node_list_window.position,size:x.value.node_list_window.size,"z-index":f(Be).getZIndex("node_list_window"),"onUpdate:position":U[20]||(U[20]=ue=>j("node_list_window",ue)),"onUpdate:size":U[21]||(U[21]=ue=>K("node_list_window",ue)),onActive:U[22]||(U[22]=ue=>f(Be).setActiveWindow("node_list_window")),onClose:U[23]||(U[23]=ue=>H("node_list_window"))},{default:it(()=>[Ue(X$)]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.cloud_window.visible?(b(),wt(kn,{key:6,name:"cloudWindow",title:f(n)("cloudWindow.windowTitle"),position:x.value.cloud_window.position,size:x.value.cloud_window.size,"z-index":f(Be).getZIndex("cloud_window"),"onUpdate:position":U[24]||(U[24]=ue=>j("cloud_window",ue)),"onUpdate:size":U[25]||(U[25]=ue=>K("cloud_window",ue)),onActive:U[26]||(U[26]=ue=>f(Be).setActiveWindow("cloud_window")),onClose:U[27]||(U[27]=ue=>H("cloud_window"))},{default:it(()=>[Ue(cL)]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.lora_stack_window.visible?(b(),wt(kn,{key:7,name:"loraStackWindow",title:f(n)("controls.loraStack"),position:x.value.lora_stack_window.position,size:x.value.lora_stack_window.size,"z-index":f(Be).getZIndex("lora_stack_window"),"onUpdate:position":U[28]||(U[28]=ue=>j("lora_stack_window",ue)),"onUpdate:size":U[29]||(U[29]=ue=>K("lora_stack_window",ue)),onActive:U[30]||(U[30]=ue=>f(Be).setActiveWindow("lora_stack_window")),onClose:U[31]||(U[31]=ue=>H("lora_stack_window"))},{default:it(()=>[Ue($L,{ref_key:"loraStackRef",ref:P},null,512)]),_:1},8,["title","position","size","z-index"])):re("",!0),x.value.danbooru_manager_window.visible?(b(),wt(kn,{key:8,name:"DanbooruManagerWindow",title:f(n)("controls.danbooruManager"),position:x.value.danbooru_manager_window.position,size:x.value.danbooru_manager_window.size,"z-index":f(Be).getZIndex("danbooru_manager_window"),"onUpdate:position":U[32]||(U[32]=ue=>j("danbooru_manager_window",ue)),"onUpdate:size":U[33]||(U[33]=ue=>K("danbooru_manager_window",ue)),onActive:U[34]||(U[34]=ue=>f(Be).setActiveWindow("danbooru_manager_window")),onClose:U[35]||(U[35]=ue=>H("danbooru_manager_window"))},{default:it(()=>[Ue(tM,{ref_key:"danbooruManagerRef",ref:z},null,512)]),_:1},8,["title","position","size","z-index"])):re("",!0),t.value?(b(),wt(S$,{key:9})):re("",!0),Ue(oi,{ref_key:"loraDetailLoraStackRef",ref:te},null,512),c.value?(b(),C("div",oM,[s("div",aM,[s("span",null,g(v.value),1),s("div",{class:"version-update-actions"},[s("button",{class:"goto-github-btn",onClick:$},"GitHub"),s("button",{class:"no-remind-btn",onClick:T},""),s("button",{class:"close-version-update",onClick:S},"")])])])):re("",!0)]))}},[["__scopeId","data-v-1d4ca131"]]);function sM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var li={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var iM=li.exports,Yg;function rM(){return Yg||(Yg=1,function(e,t){(function(o,a){e.exports=a()})(iM,function(){return function(){var n={686:function(l,i,r){r.d(i,{default:function(){return ke}});var u=r(279),p=r.n(u),d=r(370),c=r.n(d),v=r(817),m=r.n(v);function y(ie){try{return document.execCommand(ie)}catch{return!1}}var S=function(ge){var de=m()(ge);return y("cut"),de},$=S;function T(ie){var ge=document.documentElement.getAttribute("dir")==="rtl",de=document.createElement("textarea");de.style.fontSize="12pt",de.style.border="0",de.style.padding="0",de.style.margin="0",de.style.position="absolute",de.style[ge?"right":"left"]="-9999px";var ae=window.pageYOffset||document.documentElement.scrollTop;return de.style.top="".concat(ae,"px"),de.setAttribute("readonly",""),de.value=ie,de}var D=function(ge,de){var ae=T(ge);de.container.appendChild(ae);var G=m()(ae);return y("copy"),ae.remove(),G},J=function(ge){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ae="";return typeof ge=="string"?ae=D(ge,de):ge instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ge==null?void 0:ge.type)?ae=D(ge.value,de):(ae=m()(ge),y("copy")),ae},x=J;function N(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(de){return typeof de}:N=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},N(ie)}var H=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=ge.action,ae=de===void 0?"copy":de,G=ge.container,A=ge.target,B=ge.text;if(ae!=="copy"&&ae!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(A!==void 0)if(A&&N(A)==="object"&&A.nodeType===1){if(ae==="copy"&&A.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ae==="cut"&&(A.hasAttribute("readonly")||A.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(B)return x(B,{container:G});if(A)return ae==="cut"?$(A):x(A,{container:G})},j=H;function K(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K=function(de){return typeof de}:K=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},K(ie)}function X(ie,ge){if(!(ie instanceof ge))throw new TypeError("Cannot call a class as a function")}function _e(ie,ge){for(var de=0;de<ge.length;de++){var ae=ge[de];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ie,ae.key,ae)}}function le(ie,ge,de){return ge&&_e(ie.prototype,ge),de&&_e(ie,de),ie}function P(ie,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),ge&&Z(ie,ge)}function Z(ie,ge){return Z=Object.setPrototypeOf||function(ae,G){return ae.__proto__=G,ae},Z(ie,ge)}function te(ie){var ge=oe();return function(){var ae=F(ie),G;if(ge){var A=F(this).constructor;G=Reflect.construct(ae,arguments,A)}else G=ae.apply(this,arguments);return z(this,G)}}function z(ie,ge){return ge&&(K(ge)==="object"||typeof ge=="function")?ge:ne(ie)}function ne(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(ie){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},F(ie)}function U(ie,ge){var de="data-clipboard-".concat(ie);if(ge.hasAttribute(de))return ge.getAttribute(de)}var ue=function(ie){P(de,ie);var ge=te(de);function de(ae,G){var A;return X(this,de),A=ge.call(this),A.resolveOptions(G),A.listenClick(ae),A}return le(de,[{key:"resolveOptions",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof G.action=="function"?G.action:this.defaultAction,this.target=typeof G.target=="function"?G.target:this.defaultTarget,this.text=typeof G.text=="function"?G.text:this.defaultText,this.container=K(G.container)==="object"?G.container:document.body}},{key:"listenClick",value:function(G){var A=this;this.listener=c()(G,"click",function(B){return A.onClick(B)})}},{key:"onClick",value:function(G){var A=G.delegateTarget||G.currentTarget,B=this.action(A)||"copy",V=j({action:B,container:this.container,target:this.target(A),text:this.text(A)});this.emit(V?"success":"error",{action:B,text:V,trigger:A,clearSelection:function(){A&&A.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(G){return U("action",G)}},{key:"defaultTarget",value:function(G){var A=U("target",G);if(A)return document.querySelector(A)}},{key:"defaultText",value:function(G){return U("text",G)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(G){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(G,A)}},{key:"cut",value:function(G){return $(G)}},{key:"isSupported",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],A=typeof G=="string"?[G]:G,B=!!document.queryCommandSupported;return A.forEach(function(V){B=B&&!!document.queryCommandSupported(V)}),B}}]),de}(p()),ke=ue},828:function(l){var i=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(p,d){for(;p&&p.nodeType!==i;){if(typeof p.matches=="function"&&p.matches(d))return p;p=p.parentNode}}l.exports=u},438:function(l,i,r){var u=r(828);function p(v,m,y,S,$){var T=c.apply(this,arguments);return v.addEventListener(y,T,$),{destroy:function(){v.removeEventListener(y,T,$)}}}function d(v,m,y,S,$){return typeof v.addEventListener=="function"?p.apply(null,arguments):typeof y=="function"?p.bind(null,document).apply(null,arguments):(typeof v=="string"&&(v=document.querySelectorAll(v)),Array.prototype.map.call(v,function(T){return p(T,m,y,S,$)}))}function c(v,m,y,S){return function($){$.delegateTarget=u($.target,m),$.delegateTarget&&S.call(v,$)}}l.exports=d},879:function(l,i){i.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},i.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||i.node(r[0]))},i.string=function(r){return typeof r=="string"||r instanceof String},i.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}},370:function(l,i,r){var u=r(879),p=r(438);function d(y,S,$){if(!y&&!S&&!$)throw new Error("Missing required arguments");if(!u.string(S))throw new TypeError("Second argument must be a String");if(!u.fn($))throw new TypeError("Third argument must be a Function");if(u.node(y))return c(y,S,$);if(u.nodeList(y))return v(y,S,$);if(u.string(y))return m(y,S,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(y,S,$){return y.addEventListener(S,$),{destroy:function(){y.removeEventListener(S,$)}}}function v(y,S,$){return Array.prototype.forEach.call(y,function(T){T.addEventListener(S,$)}),{destroy:function(){Array.prototype.forEach.call(y,function(T){T.removeEventListener(S,$)})}}}function m(y,S,$){return p(document.body,y,S,$)}l.exports=d},817:function(l){function i(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var p=r.hasAttribute("readonly");p||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),p||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var d=window.getSelection(),c=document.createRange();c.selectNodeContents(r),d.removeAllRanges(),d.addRange(c),u=d.toString()}return u}l.exports=i},279:function(l){function i(){}i.prototype={on:function(r,u,p){var d=this.e||(this.e={});return(d[r]||(d[r]=[])).push({fn:u,ctx:p}),this},once:function(r,u,p){var d=this;function c(){d.off(r,c),u.apply(p,arguments)}return c._=u,this.on(r,c,p)},emit:function(r){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[r]||[]).slice(),d=0,c=p.length;for(d;d<c;d++)p[d].fn.apply(p[d].ctx,u);return this},off:function(r,u){var p=this.e||(this.e={}),d=p[r],c=[];if(d&&u)for(var v=0,m=d.length;v<m;v++)d[v].fn!==u&&d[v].fn._!==u&&c.push(d[v]);return c.length?p[r]=c:delete p[r],this}},l.exports=i,l.exports.TinyEmitter=i}},o={};function a(l){if(o[l])return o[l].exports;var i=o[l]={exports:{}};return n[l](i,i.exports,a),i.exports}return function(){a.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(i,{a:i}),i}}(),function(){a.d=function(l,i){for(var r in i)a.o(i,r)&&!a.o(l,r)&&Object.defineProperty(l,r,{enumerable:!0,get:i[r]})}}(),function(){a.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)}}(),a(686)}().default})}(li)),li.exports}var uM=rM();const cM=sM(uM),dM=e=>({toClipboard(t,n){return new Promise((o,a)=>{const l=document.createElement("button"),i=new cM(l,{text:()=>t,action:()=>"copy",container:n!==void 0?n:document.body});i.on("success",r=>{i.destroy(),o(r)}),i.on("error",r=>{i.destroy(),a(r)}),document.body.appendChild(l),l.click(),document.body.removeChild(l)})}}),pM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,fM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,gM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function mM(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){vM(e);return}return t}function vM(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function hM(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!gM.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(pM.test(e)||fM.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,mM)}return JSON.parse(e)}catch(o){if(t.strict)throw o;return e}}function _M(e,t){if(e==null)return;let n=e;for(let o=0;o<t.length;o++){if(n==null||n[t[o]]==null)return;n=n[t[o]]}return n}function pu(e,t,n){if(n.length===0)return t;const o=n[0];return n.length>1&&(t=pu(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,o)?Number.isInteger(Number(n[1]))?[]:{}:e[o],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(o))&&Array.isArray(e)?e.slice()[o]:Object.assign({},e,{[o]:t})}function Jg(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const o in e)n[o]=e[o];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const o in e)n[o]=e[o];return n}return pu(e,Jg(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Xg(e,t){return t.map(n=>n.split(".")).map(n=>[n,_M(e,n)]).filter(n=>n[1]!==void 0).reduce((n,o)=>pu(n,o[1],o[0]),{})}function Qg(e,t){return t.map(n=>n.split(".")).reduce((n,o)=>Jg(n,o),e)}function Zg(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:i,beforeHydrate:r,afterHydrate:u},p,d=!0){try{d&&(r==null||r(p));const c=t.getItem(o);if(c){const v=n.deserialize(c),m=l?Xg(v,l):v,y=i?Qg(m,i):m;e.$patch(y)}d&&(u==null||u(p))}catch(c){a&&console.error("[pinia-plugin-persistedstate]",c)}}function em(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:i}){try{const r=l?Xg(e,l):e,u=i?Qg(r,i):r,p=n.serialize(u);t.setItem(o,p)}catch(r){a&&console.error("[pinia-plugin-persistedstate]",r)}}function yM(e,t,n){const{pinia:o,store:a,options:{persist:l=n}}=e;if(!l)return;if(!(a.$id in o.state.value)){const u=o._s.get(a.$id.replace("__hot:",""));u&&Promise.resolve().then(()=>u.$persist());return}const r=(Array.isArray(l)?l:l===!0?[{}]:[l]).map(t);a.$hydrate=({runHooks:u=!0}={})=>{r.forEach(p=>{Zg(a,p,e,u)})},a.$persist=()=>{r.forEach(u=>{em(a.$state,u)})},r.forEach(u=>{Zg(a,u,e),a.$subscribe((p,d)=>em(d,u),{detached:!0})})}function bM(e={}){return function(t){yM(t,n=>({key:(e.key?e.key:o=>o)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:o=>JSON.stringify(o),deserialize:o=>hM(o)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var wM=bM();const{toClipboard:xM}=dM(),fu=document.createElement("div");fu.id="weilin_comfyui_tools_prompt_ui_div",document.querySelector("body").appendChild(fu);const tm=r_();tm.use(wM);const si=Xv(lM);si.use(tm),si.use(kl),U0(),si.config.globalProperties.$copyText=xM,si.mount(fu),console.log("WeiLin Prompt UI is running - version "+mo),console.log("WeiLin  -  "+mo)});
//# sourceMappingURL=main.entry.js.map
