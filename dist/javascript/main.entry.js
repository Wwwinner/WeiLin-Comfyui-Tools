(function(ia){typeof define=="function"&&define.amd?define(ia):ia()})(function(){"use strict";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ia(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const kt={},ua=[],Gn=()=>{},ym=()=>!1,Hl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),yr=e=>e.startsWith("onUpdate:"),Ht=Object.assign,br=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bm=Object.prototype.hasOwnProperty,gt=(e,t)=>bm.call(e,t),We=Array.isArray,ca=e=>Ga(e)==="[object Map]",da=e=>Ga(e)==="[object Set]",bu=e=>Ga(e)==="[object Date]",Ge=e=>typeof e=="function",Rt=e=>typeof e=="string",Nn=e=>typeof e=="symbol",Ct=e=>e!==null&&typeof e=="object",wu=e=>(Ct(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),xu=Object.prototype.toString,Ga=e=>xu.call(e),wm=e=>Ga(e).slice(8,-1),Su=e=>Ga(e)==="[object Object]",wr=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qa=ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xm=/-(\w)/g,$n=jl(e=>e.replace(xm,(t,n)=>n?n.toUpperCase():"")),Sm=/\B([A-Z])/g,wo=jl(e=>e.replace(Sm,"-$1").toLowerCase()),Gl=jl(e=>e.charAt(0).toUpperCase()+e.slice(1)),xr=jl(e=>e?`on${Gl(e)}`:""),xo=(e,t)=>!Object.is(e,t),ql=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Tu=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Kl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Tm=e=>{const t=Rt(e)?Number(e):NaN;return isNaN(t)?e:t};let ku;const Yl=()=>ku||(ku=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dt(e){if(We(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=Rt(o)?$m(o):dt(o);if(a)for(const l in a)t[l]=a[l]}return t}else if(Rt(e)||Ct(e))return e}const km=/;(?![^(]*\))/g,Cm=/:([^]+)/,Em=/\/\*[^]*?\*\//g;function $m(e){const t={};return e.replace(Em,"").split(km).forEach(n=>{if(n){const o=n.split(Cm);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Le(e){let t="";if(Rt(e))t=e;else if(We(e))for(let n=0;n<e.length;n++){const o=Le(e[n]);o&&(t+=o+" ")}else if(Ct(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Lm=ia("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Cu(e){return!!e||e===""}function Am(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Ho(e[o],t[o]);return n}function Ho(e,t){if(e===t)return!0;let n=bu(e),o=bu(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Nn(e),o=Nn(t),n||o)return e===t;if(n=We(e),o=We(t),n||o)return n&&o?Am(e,t):!1;if(n=Ct(e),o=Ct(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,l=Object.keys(t).length;if(a!==l)return!1;for(const r in e){const i=e.hasOwnProperty(r),u=t.hasOwnProperty(r);if(i&&!u||!i&&u||!Ho(e[r],t[r]))return!1}}return String(e)===String(t)}function Sr(e,t){return e.findIndex(n=>Ho(n,t))}const Eu=e=>!!(e&&e.__v_isRef===!0),g=e=>Rt(e)?e:e==null?"":We(e)||Ct(e)&&(e.toString===xu||!Ge(e.toString))?Eu(e)?g(e.value):JSON.stringify(e,$u,2):String(e),$u=(e,t)=>Eu(t)?$u(e,t.value):ca(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],l)=>(n[Tr(o,l)+" =>"]=a,n),{})}:da(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Tr(n))}:Nn(t)?Tr(t):Ct(t)&&!We(t)&&!Su(t)?String(t):t,Tr=(e,t="")=>{var n;return Nn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cn;class Lu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=cn,!t&&cn&&(this.index=(cn.scopes||(cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=cn;try{return cn=this,t()}finally{cn=n}}}on(){cn=this}off(){cn=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function kr(e){return new Lu(e)}function Au(){return cn}function Mm(e,t=!1){cn&&cn.cleanups.push(e)}let $t;const Cr=new WeakSet;class Mu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,cn&&cn.active&&cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Cr.has(this)&&(Cr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Du(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fu(this),Ru(this);const t=$t,n=Pn;$t=this,Pn=!0;try{return this.fn()}finally{Ou(this),$t=t,Pn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ar(t);this.deps=this.depsTail=void 0,Fu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Cr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lr(this)&&this.run()}get dirty(){return Lr(this)}}let Iu=0,Ka,Ya;function Du(e,t=!1){if(e.flags|=8,t){e.next=Ya,Ya=e;return}e.next=Ka,Ka=e}function Er(){Iu++}function $r(){if(--Iu>0)return;if(Ya){let t=Ya;for(Ya=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ka;){let t=Ka;for(Ka=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ru(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ou(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),Ar(o),Im(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Lr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ja))return;e.globalVersion=Ja;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Lr(e)){e.flags&=-3;return}const n=$t,o=Pn;$t=e,Pn=!0;try{Ru(e);const a=e.fn(e._value);(t.version===0||xo(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{$t=n,Pn=o,Ou(e),e.flags&=-3}}function Ar(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)Ar(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Im(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pn=!0;const Pu=[];function to(){Pu.push(Pn),Pn=!1}function no(){const e=Pu.pop();Pn=e===void 0?!0:e}function Fu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=$t;$t=void 0;try{t()}finally{$t=n}}}let Ja=0;class Dm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!$t||!Pn||$t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$t)n=this.activeLink=new Dm($t,this),$t.deps?(n.prevDep=$t.depsTail,$t.depsTail.nextDep=n,$t.depsTail=n):$t.deps=$t.depsTail=n,Bu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=$t.depsTail,n.nextDep=void 0,$t.depsTail.nextDep=n,$t.depsTail=n,$t.deps===n&&($t.deps=o)}return n}trigger(t){this.version++,Ja++,this.notify(t)}notify(t){Er();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$r()}}}function Bu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Bu(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Jl=new WeakMap,jo=Symbol(""),Ir=Symbol(""),Xa=Symbol("");function nn(e,t,n){if(Pn&&$t){let o=Jl.get(e);o||Jl.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Mr),a.map=o,a.key=n),a.track()}}function oo(e,t,n,o,a,l){const r=Jl.get(e);if(!r){Ja++;return}const i=u=>{u&&u.trigger()};if(Er(),t==="clear")r.forEach(i);else{const u=We(e),p=u&&wr(n);if(u&&n==="length"){const d=Number(o);r.forEach((c,v)=>{(v==="length"||v===Xa||!Nn(v)&&v>=d)&&i(c)})}else switch((n!==void 0||r.has(void 0))&&i(r.get(n)),p&&i(r.get(Xa)),t){case"add":u?p&&i(r.get("length")):(i(r.get(jo)),ca(e)&&i(r.get(Ir)));break;case"delete":u||(i(r.get(jo)),ca(e)&&i(r.get(Ir)));break;case"set":ca(e)&&i(r.get(jo));break}}$r()}function Rm(e,t){const n=Jl.get(e);return n&&n.get(t)}function pa(e){const t=nt(e);return t===e?t:(nn(t,"iterate",Xa),Ln(e)?t:t.map(on))}function Xl(e){return nn(e=nt(e),"iterate",Xa),e}const Om={__proto__:null,[Symbol.iterator](){return Dr(this,Symbol.iterator,on)},concat(...e){return pa(this).concat(...e.map(t=>We(t)?pa(t):t))},entries(){return Dr(this,"entries",e=>(e[1]=on(e[1]),e))},every(e,t){return ao(this,"every",e,t,void 0,arguments)},filter(e,t){return ao(this,"filter",e,t,n=>n.map(on),arguments)},find(e,t){return ao(this,"find",e,t,on,arguments)},findIndex(e,t){return ao(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ao(this,"findLast",e,t,on,arguments)},findLastIndex(e,t){return ao(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ao(this,"forEach",e,t,void 0,arguments)},includes(...e){return Rr(this,"includes",e)},indexOf(...e){return Rr(this,"indexOf",e)},join(e){return pa(this).join(e)},lastIndexOf(...e){return Rr(this,"lastIndexOf",e)},map(e,t){return ao(this,"map",e,t,void 0,arguments)},pop(){return Qa(this,"pop")},push(...e){return Qa(this,"push",e)},reduce(e,...t){return Uu(this,"reduce",e,t)},reduceRight(e,...t){return Uu(this,"reduceRight",e,t)},shift(){return Qa(this,"shift")},some(e,t){return ao(this,"some",e,t,void 0,arguments)},splice(...e){return Qa(this,"splice",e)},toReversed(){return pa(this).toReversed()},toSorted(e){return pa(this).toSorted(e)},toSpliced(...e){return pa(this).toSpliced(...e)},unshift(...e){return Qa(this,"unshift",e)},values(){return Dr(this,"values",on)}};function Dr(e,t,n){const o=Xl(e),a=o[t]();return o!==e&&!Ln(e)&&(a._next=a.next,a.next=()=>{const l=a._next();return l.value&&(l.value=n(l.value)),l}),a}const Nm=Array.prototype;function ao(e,t,n,o,a,l){const r=Xl(e),i=r!==e&&!Ln(e),u=r[t];if(u!==Nm[t]){const c=u.apply(e,l);return i?on(c):c}let p=n;r!==e&&(i?p=function(c,v){return n.call(this,on(c),v,e)}:n.length>2&&(p=function(c,v){return n.call(this,c,v,e)}));const d=u.call(r,p,o);return i&&a?a(d):d}function Uu(e,t,n,o){const a=Xl(e);let l=n;return a!==e&&(Ln(e)?n.length>3&&(l=function(r,i,u){return n.call(this,r,i,u,e)}):l=function(r,i,u){return n.call(this,r,on(i),u,e)}),a[t](l,...o)}function Rr(e,t,n){const o=nt(e);nn(o,"iterate",Xa);const a=o[t](...n);return(a===-1||a===!1)&&Nr(n[0])?(n[0]=nt(n[0]),o[t](...n)):a}function Qa(e,t,n=[]){to(),Er();const o=nt(e)[t].apply(e,n);return $r(),no(),o}const Pm=ia("__proto__,__v_isRef,__isVue"),Vu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Nn));function Fm(e){Nn(e)||(e=String(e));const t=nt(this);return nn(t,"has",e),t.hasOwnProperty(e)}class Wu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return l;if(n==="__v_raw")return o===(a?l?Ku:qu:l?Gu:ju).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=We(t);if(!a){let u;if(r&&(u=Om[n]))return u;if(n==="hasOwnProperty")return Fm}const i=Reflect.get(t,n,Ot(t)?t:o);return(Nn(n)?Vu.has(n):Pm(n))||(a||nn(t,"get",n),l)?i:Ot(i)?r&&wr(n)?i:i.value:Ct(i)?a?Yu(i):ts(i):i}}class zu extends Wu{constructor(t=!1){super(!1,t)}set(t,n,o,a){let l=t[n];if(!this._isShallow){const u=Go(l);if(!Ln(o)&&!Go(o)&&(l=nt(l),o=nt(o)),!We(t)&&Ot(l)&&!Ot(o))return u?!1:(l.value=o,!0)}const r=We(t)&&wr(n)?Number(n)<t.length:gt(t,n),i=Reflect.set(t,n,o,Ot(t)?t:a);return t===nt(a)&&(r?xo(o,l)&&oo(t,"set",n,o):oo(t,"add",n,o)),i}deleteProperty(t,n){const o=gt(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&oo(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Nn(n)||!Vu.has(n))&&nn(t,"has",n),o}ownKeys(t){return nn(t,"iterate",We(t)?"length":jo),Reflect.ownKeys(t)}}class Hu extends Wu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Bm=new zu,Um=new Hu,Vm=new zu(!0),Wm=new Hu(!0),Or=e=>e,Ql=e=>Reflect.getPrototypeOf(e);function zm(e,t,n){return function(...o){const a=this.__v_raw,l=nt(a),r=ca(l),i=e==="entries"||e===Symbol.iterator&&r,u=e==="keys"&&r,p=a[e](...o),d=n?Or:t?Fr:on;return!t&&nn(l,"iterate",u?Ir:jo),{next(){const{value:c,done:v}=p.next();return v?{value:c,done:v}:{value:i?[d(c[0]),d(c[1])]:d(c),done:v}},[Symbol.iterator](){return this}}}}function Zl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hm(e,t){const n={get(a){const l=this.__v_raw,r=nt(l),i=nt(a);e||(xo(a,i)&&nn(r,"get",a),nn(r,"get",i));const{has:u}=Ql(r),p=t?Or:e?Fr:on;if(u.call(r,a))return p(l.get(a));if(u.call(r,i))return p(l.get(i));l!==r&&l.get(a)},get size(){const a=this.__v_raw;return!e&&nn(nt(a),"iterate",jo),Reflect.get(a,"size",a)},has(a){const l=this.__v_raw,r=nt(l),i=nt(a);return e||(xo(a,i)&&nn(r,"has",a),nn(r,"has",i)),a===i?l.has(a):l.has(a)||l.has(i)},forEach(a,l){const r=this,i=r.__v_raw,u=nt(i),p=t?Or:e?Fr:on;return!e&&nn(u,"iterate",jo),i.forEach((d,c)=>a.call(l,p(d),p(c),r))}};return Ht(n,e?{add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear")}:{add(a){!t&&!Ln(a)&&!Go(a)&&(a=nt(a));const l=nt(this);return Ql(l).has.call(l,a)||(l.add(a),oo(l,"add",a,a)),this},set(a,l){!t&&!Ln(l)&&!Go(l)&&(l=nt(l));const r=nt(this),{has:i,get:u}=Ql(r);let p=i.call(r,a);p||(a=nt(a),p=i.call(r,a));const d=u.call(r,a);return r.set(a,l),p?xo(l,d)&&oo(r,"set",a,l):oo(r,"add",a,l),this},delete(a){const l=nt(this),{has:r,get:i}=Ql(l);let u=r.call(l,a);u||(a=nt(a),u=r.call(l,a)),i&&i.call(l,a);const p=l.delete(a);return u&&oo(l,"delete",a,void 0),p},clear(){const a=nt(this),l=a.size!==0,r=a.clear();return l&&oo(a,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=zm(a,e,t)}),n}function es(e,t){const n=Hm(e,t);return(o,a,l)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(gt(n,a)&&a in o?n:o,a,l)}const jm={get:es(!1,!1)},Gm={get:es(!1,!0)},qm={get:es(!0,!1)},Km={get:es(!0,!0)},ju=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Ku=new WeakMap;function Ym(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jm(e){return e.__v_skip||!Object.isExtensible(e)?0:Ym(wm(e))}function ts(e){return Go(e)?e:ns(e,!1,Bm,jm,ju)}function Xm(e){return ns(e,!1,Vm,Gm,Gu)}function Yu(e){return ns(e,!0,Um,qm,qu)}function eI(e){return ns(e,!0,Wm,Km,Ku)}function ns(e,t,n,o,a){if(!Ct(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=a.get(e);if(l)return l;const r=Jm(e);if(r===0)return e;const i=new Proxy(e,r===2?o:n);return a.set(e,i),i}function So(e){return Go(e)?So(e.__v_raw):!!(e&&e.__v_isReactive)}function Go(e){return!!(e&&e.__v_isReadonly)}function Ln(e){return!!(e&&e.__v_isShallow)}function Nr(e){return e?!!e.__v_raw:!1}function nt(e){const t=e&&e.__v_raw;return t?nt(t):e}function Pr(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&Tu(e,"__v_skip",!0),e}const on=e=>Ct(e)?ts(e):e,Fr=e=>Ct(e)?Yu(e):e;function Ot(e){return e?e.__v_isRef===!0:!1}function h(e){return Ju(e,!1)}function Qm(e){return Ju(e,!0)}function Ju(e,t){return Ot(e)?e:new Zm(e,t)}class Zm{constructor(t,n){this.dep=new Mr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:nt(t),this._value=n?t:on(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Ln(t)||Go(t);t=o?t:nt(t),xo(t,n)&&(this._rawValue=t,this._value=o?t:on(t),this.dep.trigger())}}function f(e){return Ot(e)?e.value:e}const e1={get:(e,t,n)=>t==="__v_raw"?e:f(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return Ot(a)&&!Ot(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Xu(e){return So(e)?e:new Proxy(e,e1)}function t1(e){const t=We(e)?new Array(e.length):{};for(const n in e)t[n]=o1(e,n);return t}class n1{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Rm(nt(this._object),this._key)}}function o1(e,t,n){const o=e[t];return Ot(o)?o:new n1(e,t,n)}class a1{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Mr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ja-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return Du(this,!0),!0}get value(){const t=this.dep.track();return Nu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function l1(e,t,n=!1){let o,a;return Ge(e)?o=e:(o=e.get,a=e.set),new a1(o,a,n)}const os={},as=new WeakMap;let qo;function s1(e,t=!1,n=qo){if(n){let o=as.get(n);o||as.set(n,o=[]),o.push(e)}}function r1(e,t,n=kt){const{immediate:o,deep:a,once:l,scheduler:r,augmentJob:i,call:u}=n,p=x=>a?x:Ln(x)||a===!1||a===0?lo(x,1):lo(x);let d,c,v,m,y=!1,S=!1;if(Ot(e)?(c=()=>e.value,y=Ln(e)):So(e)?(c=()=>p(e),y=!0):We(e)?(S=!0,y=e.some(x=>So(x)||Ln(x)),c=()=>e.map(x=>{if(Ot(x))return x.value;if(So(x))return p(x);if(Ge(x))return u?u(x,2):x()})):Ge(e)?t?c=u?()=>u(e,2):e:c=()=>{if(v){to();try{v()}finally{no()}}const x=qo;qo=d;try{return u?u(e,3,[m]):e(m)}finally{qo=x}}:c=Gn,t&&a){const x=c,P=a===!0?1/0:a;c=()=>lo(x(),P)}const $=Au(),T=()=>{d.stop(),$&&$.active&&br($.effects,d)};if(l&&t){const x=t;t=(...P)=>{x(...P),T()}}let D=S?new Array(e.length).fill(os):os;const Y=x=>{if(!(!(d.flags&1)||!d.dirty&&!x))if(t){const P=d.run();if(a||y||(S?P.some((H,j)=>xo(H,D[j])):xo(P,D))){v&&v();const H=qo;qo=d;try{const j=[P,D===os?void 0:S&&D[0]===os?[]:D,m];u?u(t,3,j):t(...j),D=P}finally{qo=H}}}else d.run()};return i&&i(Y),d=new Mu(c),d.scheduler=r?()=>r(Y,!1):Y,m=x=>s1(x,!1,d),v=d.onStop=()=>{const x=as.get(d);if(x){if(u)u(x,4);else for(const P of x)P();as.delete(d)}},t?o?Y(!0):D=d.run():r?r(Y.bind(null,!0),!0):d.run(),T.pause=d.pause.bind(d),T.resume=d.resume.bind(d),T.stop=T,T}function lo(e,t=1/0,n){if(t<=0||!Ct(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ot(e))lo(e.value,t,n);else if(We(e))for(let o=0;o<e.length;o++)lo(e[o],t,n);else if(da(e)||ca(e))e.forEach(o=>{lo(o,t,n)});else if(Su(e)){for(const o in e)lo(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&lo(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Za=[];let Br=!1;function tI(e,...t){if(Br)return;Br=!0,to();const n=Za.length?Za[Za.length-1].component:null,o=n&&n.appContext.config.warnHandler,a=i1();if(o)fa(o,n,11,[e+t.map(l=>{var r,i;return(i=(r=l.toString)==null?void 0:r.call(l))!=null?i:JSON.stringify(l)}).join(""),n&&n.proxy,a.map(({vnode:l})=>`at <${ad(n,l.type)}>`).join(`
`),a]);else{const l=[`[Vue warn]: ${e}`,...t];a.length&&l.push(`
`,...u1(a)),console.warn(...l)}no(),Br=!1}function i1(){let e=Za[Za.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function u1(e){const t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...c1(n))}),t}function c1({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,a=` at <${ad(e.component,e.type,o)}`,l=">"+n;return e.props?[a,...d1(e.props),l]:[a+l]}function d1(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...Qu(o,e[o]))}),n.length>3&&t.push(" ..."),t}function Qu(e,t,n){return Rt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:Ot(t)?(t=Qu(e,nt(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Ge(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=nt(t),n?t:[`${e}=`,t])}function fa(e,t,n,o){try{return o?e(...o):e()}catch(a){ls(a,t,n)}}function Fn(e,t,n,o){if(Ge(e)){const a=fa(e,t,n,o);return a&&wu(a)&&a.catch(l=>{ls(l,t,n)}),a}if(We(e)){const a=[];for(let l=0;l<e.length;l++)a.push(Fn(e[l],t,n,o));return a}}function ls(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||kt;if(t){let i=t.parent;const u=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const d=i.ec;if(d){for(let c=0;c<d.length;c++)if(d[c](e,u,p)===!1)return}i=i.parent}if(l){to(),fa(l,null,10,[e,u,p]),no();return}}p1(e,n,a,o,r)}function p1(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const dn=[];let qn=-1;const ga=[];let To=null,ma=0;const Zu=Promise.resolve();let ss=null;function qe(e){const t=ss||Zu;return e?t.then(this?e.bind(this):e):t}function f1(e){let t=qn+1,n=dn.length;for(;t<n;){const o=t+n>>>1,a=dn[o],l=el(a);l<e||l===e&&a.flags&2?t=o+1:n=o}return t}function Ur(e){if(!(e.flags&1)){const t=el(e),n=dn[dn.length-1];!n||!(e.flags&2)&&t>=el(n)?dn.push(e):dn.splice(f1(t),0,e),e.flags|=1,ec()}}function ec(){ss||(ss=Zu.then(oc))}function g1(e){We(e)?ga.push(...e):To&&e.id===-1?To.splice(ma+1,0,e):e.flags&1||(ga.push(e),e.flags|=1),ec()}function tc(e,t,n=qn+1){for(;n<dn.length;n++){const o=dn[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;dn.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function nc(e){if(ga.length){const t=[...new Set(ga)].sort((n,o)=>el(n)-el(o));if(ga.length=0,To){To.push(...t);return}for(To=t,ma=0;ma<To.length;ma++){const n=To[ma];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}To=null,ma=0}}const el=e=>e.id==null?e.flags&2?-1:1/0:e.id;function oc(e){try{for(qn=0;qn<dn.length;qn++){const t=dn[qn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),fa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qn<dn.length;qn++){const t=dn[qn];t&&(t.flags&=-2)}qn=-1,dn.length=0,nc(),ss=null,(dn.length||ga.length)&&oc()}}let jt=null,ac=null;function rs(e){const t=jt;return jt=e,ac=e&&e.type.__scopeId||null,t}function it(e,t=jt,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&Jc(-1);const l=rs(t);let r;try{r=e(...a)}finally{rs(l),o._d&&Jc(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function he(e,t){if(jt===null)return e;const n=_s(jt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[l,r,i,u=kt]=t[a];l&&(Ge(l)&&(l={mounted:l,updated:l}),l.deep&&lo(r),o.push({dir:l,instance:n,value:r,oldValue:void 0,arg:i,modifiers:u}))}return e}function Ko(e,t,n,o){const a=e.dirs,l=t&&t.dirs;for(let r=0;r<a.length;r++){const i=a[r];l&&(i.oldValue=l[r].value);let u=i.dir[o];u&&(to(),Fn(u,n,8,[e.el,i,e,t]),no())}}const lc=Symbol("_vte"),sc=e=>e.__isTeleport,tl=e=>e&&(e.disabled||e.disabled===""),rc=e=>e&&(e.defer||e.defer===""),ic=e=>typeof SVGElement<"u"&&e instanceof SVGElement,uc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Vr=(e,t)=>{const n=e&&e.to;return Rt(n)?t?t(n):null:n},cc={name:"Teleport",__isTeleport:!0,process(e,t,n,o,a,l,r,i,u,p){const{mc:d,pc:c,pbc:v,o:{insert:m,querySelector:y,createText:S,createComment:$}}=p,T=tl(t.props);let{shapeFlag:D,children:Y,dynamicChildren:x}=t;if(e==null){const P=t.el=S(""),H=t.anchor=S("");m(P,n,o),m(H,n,o);const j=(X,ye)=>{D&16&&(a&&a.isCE&&(a.ce._teleportTarget=X),d(Y,X,ye,a,l,r,i,u))},K=()=>{const X=t.target=Vr(t.props,y),ye=pc(X,t,S,m);X&&(r!=="svg"&&ic(X)?r="svg":r!=="mathml"&&uc(X)&&(r="mathml"),T||(j(X,ye),us(t,!1)))};T&&(j(n,H),us(t,!0)),rc(t.props)?fn(()=>{K(),t.el.__isMounted=!0},l):K()}else{if(rc(t.props)&&!e.el.__isMounted){fn(()=>{cc.process(e,t,n,o,a,l,r,i,u,p),delete e.el.__isMounted},l);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,H=t.target=e.target,j=t.targetAnchor=e.targetAnchor,K=tl(e.props),X=K?n:H,ye=K?P:j;if(r==="svg"||ic(H)?r="svg":(r==="mathml"||uc(H))&&(r="mathml"),x?(v(e.dynamicChildren,x,X,a,l,r,i),Qr(e,t,!0)):u||c(e,t,X,ye,a,l,r,i,!1),T)K?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):is(t,n,P,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const se=t.target=Vr(t.props,y);se&&is(t,se,null,p,0)}else K&&is(t,H,j,p,1);us(t,T)}},remove(e,t,n,{um:o,o:{remove:a}},l){const{shapeFlag:r,children:i,anchor:u,targetStart:p,targetAnchor:d,target:c,props:v}=e;if(c&&(a(p),a(d)),l&&a(u),r&16){const m=l||!tl(v);for(let y=0;y<i.length;y++){const S=i[y];o(S,t,n,m,!!S.dynamicChildren)}}},move:is,hydrate:m1};function is(e,t,n,{o:{insert:o},m:a},l=2){l===0&&o(e.targetAnchor,t,n);const{el:r,anchor:i,shapeFlag:u,children:p,props:d}=e,c=l===2;if(c&&o(r,t,n),(!c||tl(d))&&u&16)for(let v=0;v<p.length;v++)a(p[v],t,n,2);c&&o(i,t,n)}function m1(e,t,n,o,a,l,{o:{nextSibling:r,parentNode:i,querySelector:u,insert:p,createText:d}},c){const v=t.target=Vr(t.props,u);if(v){const m=tl(t.props),y=v._lpa||v.firstChild;if(t.shapeFlag&16)if(m)t.anchor=c(r(e),t,i(e),n,o,a,l),t.targetStart=y,t.targetAnchor=y&&r(y);else{t.anchor=r(e);let S=y;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")t.targetStart=S;else if(S.data==="teleport anchor"){t.targetAnchor=S,v._lpa=t.targetAnchor&&r(t.targetAnchor);break}}S=r(S)}t.targetAnchor||pc(v,t,d,p),c(y&&r(y),t,v,n,o,a,l)}us(t,m)}return t.anchor&&r(t.anchor)}const dc=cc;function us(e,t){const n=e.ctx;if(n&&n.ut){let o,a;for(t?(o=e.el,a=e.anchor):(o=e.targetStart,a=e.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function pc(e,t,n,o){const a=t.targetStart=n(""),l=t.targetAnchor=n("");return a[lc]=l,e&&(o(a,e),o(l,e)),l}const ko=Symbol("_leaveCb"),cs=Symbol("_enterCb");function fc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{e.isMounted=!0}),Co(()=>{e.isUnmounting=!0}),e}const An=[Function,Array],gc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:An,onEnter:An,onAfterEnter:An,onEnterCancelled:An,onBeforeLeave:An,onLeave:An,onAfterLeave:An,onLeaveCancelled:An,onBeforeAppear:An,onAppear:An,onAfterAppear:An,onAppearCancelled:An},mc=e=>{const t=e.subTree;return t.component?mc(t.component):t},v1={name:"BaseTransition",props:gc,setup(e,{slots:t}){const n=Zo(),o=fc();return()=>{const a=t.default&&zr(t.default(),!0);if(!a||!a.length)return;const l=vc(a),r=nt(e),{mode:i}=r;if(o.isLeaving)return Wr(l);const u=_c(l);if(!u)return Wr(l);let p=nl(u,r,o,n,c=>p=c);u.type!==gn&&Yo(u,p);let d=n.subTree&&_c(n.subTree);if(d&&d.type!==gn&&!Qo(u,d)&&mc(n).type!==gn){let c=nl(d,r,o,n);if(Yo(d,c),i==="out-in"&&u.type!==gn)return o.isLeaving=!0,c.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete c.afterLeave,d=void 0},Wr(l);i==="in-out"&&u.type!==gn?c.delayLeave=(v,m,y)=>{const S=hc(o,d);S[String(d.key)]=d,v[ko]=()=>{m(),v[ko]=void 0,delete p.delayedLeave,d=void 0},p.delayedLeave=()=>{y(),delete p.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return l}}};function vc(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==gn){t=n;break}}return t}const h1=v1;function hc(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function nl(e,t,n,o,a){const{appear:l,mode:r,persisted:i=!1,onBeforeEnter:u,onEnter:p,onAfterEnter:d,onEnterCancelled:c,onBeforeLeave:v,onLeave:m,onAfterLeave:y,onLeaveCancelled:S,onBeforeAppear:$,onAppear:T,onAfterAppear:D,onAppearCancelled:Y}=t,x=String(e.key),P=hc(n,e),H=(X,ye)=>{X&&Fn(X,o,9,ye)},j=(X,ye)=>{const se=ye[1];H(X,ye),We(X)?X.every(N=>N.length<=1)&&se():X.length<=1&&se()},K={mode:r,persisted:i,beforeEnter(X){let ye=u;if(!n.isMounted)if(l)ye=$||u;else return;X[ko]&&X[ko](!0);const se=P[x];se&&Qo(e,se)&&se.el[ko]&&se.el[ko](),H(ye,[X])},enter(X){let ye=p,se=d,N=c;if(!n.isMounted)if(l)ye=T||p,se=D||d,N=Y||c;else return;let Z=!1;const te=X[cs]=z=>{Z||(Z=!0,z?H(N,[X]):H(se,[X]),K.delayedLeave&&K.delayedLeave(),X[cs]=void 0)};ye?j(ye,[X,te]):te()},leave(X,ye){const se=String(e.key);if(X[cs]&&X[cs](!0),n.isUnmounting)return ye();H(v,[X]);let N=!1;const Z=X[ko]=te=>{N||(N=!0,ye(),te?H(S,[X]):H(y,[X]),X[ko]=void 0,P[se]===e&&delete P[se])};P[se]=e,m?j(m,[X,Z]):Z()},clone(X){const ye=nl(X,t,n,o,a);return a&&a(ye),ye}};return K}function Wr(e){if(ps(e))return e=Eo(e),e.children=null,e}function _c(e){if(!ps(e))return sc(e.type)&&e.children?vc(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ge(n.default))return n.default()}}function Yo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Yo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zr(e,t=!1,n){let o=[],a=0;for(let l=0;l<e.length;l++){let r=e[l];const i=n==null?r.key:String(n)+String(r.key!=null?r.key:l);r.type===De?(r.patchFlag&128&&a++,o=o.concat(zr(r.children,t,i))):(t||r.type!==gn)&&o.push(i!=null?Eo(r,{key:i}):r)}if(a>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Hr(e,t){return Ge(e)?Ht({name:e.name},t,{setup:e}):e}function yc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ds(e,t,n,o,a=!1){if(We(e)){e.forEach((y,S)=>ds(y,t&&(We(t)?t[S]:t),n,o,a));return}if(va(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ds(e,t,n,o.component.subTree);return}const l=o.shapeFlag&4?_s(o.component):o.el,r=a?null:l,{i,r:u}=e,p=t&&t.r,d=i.refs===kt?i.refs={}:i.refs,c=i.setupState,v=nt(c),m=c===kt?()=>!1:y=>gt(v,y);if(p!=null&&p!==u&&(Rt(p)?(d[p]=null,m(p)&&(c[p]=null)):Ot(p)&&(p.value=null)),Ge(u))fa(u,i,12,[r,d]);else{const y=Rt(u),S=Ot(u);if(y||S){const $=()=>{if(e.f){const T=y?m(u)?c[u]:d[u]:u.value;a?We(T)&&br(T,l):We(T)?T.includes(l)||T.push(l):y?(d[u]=[l],m(u)&&(c[u]=d[u])):(u.value=[l],e.k&&(d[e.k]=u.value))}else y?(d[u]=r,m(u)&&(c[u]=r)):S&&(u.value=r,e.k&&(d[e.k]=r))};r?($.id=-1,fn($,n)):$()}}}Yl().requestIdleCallback,Yl().cancelIdleCallback;const va=e=>!!e.type.__asyncLoader,ps=e=>e.type.__isKeepAlive;function _1(e,t){bc(e,"a",t)}function y1(e,t){bc(e,"da",t)}function bc(e,t,n=Xt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(fs(t,o,n),n){let a=n.parent;for(;a&&a.parent;)ps(a.parent.vnode)&&b1(o,t,n,a),a=a.parent}}function b1(e,t,n,o){const a=fs(t,e,o,!0);Mn(()=>{br(o[t],a)},n)}function fs(e,t,n=Xt,o=!1){if(n){const a=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...r)=>{to();const i=cl(n),u=Fn(t,n,e,r);return i(),no(),u});return o?a.unshift(l):a.push(l),l}}const so=e=>(t,n=Xt)=>{(!dl||e==="sp")&&fs(e,(...o)=>t(...o),n)},w1=so("bm"),mt=so("m"),wc=so("bu"),xc=so("u"),Co=so("bum"),Mn=so("um"),x1=so("sp"),S1=so("rtg"),T1=so("rtc");function k1(e,t=Xt){fs("ec",e,t)}const C1="components";function E1(e,t){return L1(C1,e,!0,t)||e}const $1=Symbol.for("v-ndc");function L1(e,t,n=!0,o=!1){const a=jt||Xt;if(a){const l=a.type;{const i=od(l,!1);if(i&&(i===t||i===$n(t)||i===Gl($n(t))))return l}const r=Sc(a[e]||l[e],t)||Sc(a.appContext[e],t);return!r&&o?l:r}}function Sc(e,t){return e&&(e[t]||e[$n(t)]||e[Gl($n(t))])}function ze(e,t,n,o){let a;const l=n,r=We(e);if(r||Rt(e)){const i=r&&So(e);let u=!1;i&&(u=!Ln(e),e=Xl(e)),a=new Array(e.length);for(let p=0,d=e.length;p<d;p++)a[p]=t(u?on(e[p]):e[p],p,void 0,l)}else if(typeof e=="number"){a=new Array(e);for(let i=0;i<e;i++)a[i]=t(i+1,i,void 0,l)}else if(Ct(e))if(e[Symbol.iterator])a=Array.from(e,(i,u)=>t(i,u,void 0,l));else{const i=Object.keys(e);a=new Array(i.length);for(let u=0,p=i.length;u<p;u++){const d=i[u];a[u]=t(e[d],d,u,l)}}else a=[];return a}function ol(e,t,n={},o,a){if(jt.ce||jt.parent&&va(jt.parent)&&jt.parent.ce)return t!=="default"&&(n.name=t),w(),xt(De,null,[Ve("slot",n,o&&o())],64);let l=e[t];l&&l._c&&(l._d=!1),w();const r=l&&Tc(l(n)),i=n.key||r&&r.key,u=xt(De,{key:(i&&!Nn(i)?i:`_${t}`)+(!r&&o?"_fb":"")},r||(o?o():[]),r&&e._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function Tc(e){return e.some(t=>ul(t)?!(t.type===gn||t.type===De&&!Tc(t.children)):!0)?e:null}const jr=e=>e?ed(e)?_s(e):jr(e.parent):null,al=Ht(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jr(e.parent),$root:e=>jr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$c(e),$forceUpdate:e=>e.f||(e.f=()=>{Ur(e.update)}),$nextTick:e=>e.n||(e.n=qe.bind(e.proxy)),$watch:e=>Q1.bind(e)}),Gr=(e,t)=>e!==kt&&!e.__isScriptSetup&&gt(e,t),A1={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:l,accessCache:r,type:i,appContext:u}=e;let p;if(t[0]!=="$"){const m=r[t];if(m!==void 0)switch(m){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return l[t]}else{if(Gr(o,t))return r[t]=1,o[t];if(a!==kt&&gt(a,t))return r[t]=2,a[t];if((p=e.propsOptions[0])&&gt(p,t))return r[t]=3,l[t];if(n!==kt&&gt(n,t))return r[t]=4,n[t];qr&&(r[t]=0)}}const d=al[t];let c,v;if(d)return t==="$attrs"&&nn(e.attrs,"get",""),d(e);if((c=i.__cssModules)&&(c=c[t]))return c;if(n!==kt&&gt(n,t))return r[t]=4,n[t];if(v=u.config.globalProperties,gt(v,t))return v[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:l}=e;return Gr(a,t)?(a[t]=n,!0):o!==kt&&gt(o,t)?(o[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:l}},r){let i;return!!n[r]||e!==kt&&gt(e,r)||Gr(t,r)||(i=l[0])&&gt(i,r)||gt(o,r)||gt(al,r)||gt(a.config.globalProperties,r)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function kc(e){return We(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qr=!0;function M1(e){const t=$c(e),n=e.proxy,o=e.ctx;qr=!1,t.beforeCreate&&Cc(t.beforeCreate,e,"bc");const{data:a,computed:l,methods:r,watch:i,provide:u,inject:p,created:d,beforeMount:c,mounted:v,beforeUpdate:m,updated:y,activated:S,deactivated:$,beforeDestroy:T,beforeUnmount:D,destroyed:Y,unmounted:x,render:P,renderTracked:H,renderTriggered:j,errorCaptured:K,serverPrefetch:X,expose:ye,inheritAttrs:se,components:N,directives:Z,filters:te}=t;if(p&&I1(p,o,null),r)for(const oe in r){const F=r[oe];Ge(F)&&(o[oe]=F.bind(n))}if(a){const oe=a.call(n,n);Ct(oe)&&(e.data=ts(oe))}if(qr=!0,l)for(const oe in l){const F=l[oe],B=Ge(F)?F.bind(n,n):Ge(F.get)?F.get.bind(n,n):Gn,ie=!Ge(F)&&Ge(F.set)?F.set.bind(n):Gn,Ce=vt({get:B,set:ie});Object.defineProperty(o,oe,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:re=>Ce.value=re})}if(i)for(const oe in i)Ec(i[oe],o,n,oe);if(u){const oe=Ge(u)?u.call(n):u;Reflect.ownKeys(oe).forEach(F=>{F1(F,oe[F])})}d&&Cc(d,e,"c");function ne(oe,F){We(F)?F.forEach(B=>oe(B.bind(n))):F&&oe(F.bind(n))}if(ne(w1,c),ne(mt,v),ne(wc,m),ne(xc,y),ne(_1,S),ne(y1,$),ne(k1,K),ne(T1,H),ne(S1,j),ne(Co,D),ne(Mn,x),ne(x1,X),We(ye))if(ye.length){const oe=e.exposed||(e.exposed={});ye.forEach(F=>{Object.defineProperty(oe,F,{get:()=>n[F],set:B=>n[F]=B})})}else e.exposed||(e.exposed={});P&&e.render===Gn&&(e.render=P),se!=null&&(e.inheritAttrs=se),N&&(e.components=N),Z&&(e.directives=Z),X&&yc(e)}function I1(e,t,n=Gn){We(e)&&(e=Kr(e));for(const o in e){const a=e[o];let l;Ct(a)?"default"in a?l=ha(a.from||o,a.default,!0):l=ha(a.from||o):l=ha(a),Ot(l)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:r=>l.value=r}):t[o]=l}}function Cc(e,t,n){Fn(We(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ec(e,t,n,o){let a=o.includes(".")?jc(n,o):()=>n[o];if(Rt(e)){const l=t[e];Ge(l)&&ot(a,l)}else if(Ge(e))ot(a,e.bind(n));else if(Ct(e))if(We(e))e.forEach(l=>Ec(l,t,n,o));else{const l=Ge(e.handler)?e.handler.bind(n):t[e.handler];Ge(l)&&ot(a,l,e)}}function $c(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:l,config:{optionMergeStrategies:r}}=e.appContext,i=l.get(t);let u;return i?u=i:!a.length&&!n&&!o?u=t:(u={},a.length&&a.forEach(p=>gs(u,p,r,!0)),gs(u,t,r)),Ct(t)&&l.set(t,u),u}function gs(e,t,n,o=!1){const{mixins:a,extends:l}=t;l&&gs(e,l,n,!0),a&&a.forEach(r=>gs(e,r,n,!0));for(const r in t)if(!(o&&r==="expose")){const i=D1[r]||n&&n[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const D1={data:Lc,props:Ac,emits:Ac,methods:ll,computed:ll,beforeCreate:pn,created:pn,beforeMount:pn,mounted:pn,beforeUpdate:pn,updated:pn,beforeDestroy:pn,beforeUnmount:pn,destroyed:pn,unmounted:pn,activated:pn,deactivated:pn,errorCaptured:pn,serverPrefetch:pn,components:ll,directives:ll,watch:O1,provide:Lc,inject:R1};function Lc(e,t){return t?e?function(){return Ht(Ge(e)?e.call(this,this):e,Ge(t)?t.call(this,this):t)}:t:e}function R1(e,t){return ll(Kr(e),Kr(t))}function Kr(e){if(We(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function pn(e,t){return e?[...new Set([].concat(e,t))]:t}function ll(e,t){return e?Ht(Object.create(null),e,t):t}function Ac(e,t){return e?We(e)&&We(t)?[...new Set([...e,...t])]:Ht(Object.create(null),kc(e),kc(t??{})):t}function O1(e,t){if(!e)return t;if(!t)return e;const n=Ht(Object.create(null),e);for(const o in t)n[o]=pn(e[o],t[o]);return n}function Mc(){return{app:null,config:{isNativeTag:ym,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N1=0;function P1(e,t){return function(o,a=null){Ge(o)||(o=Ht({},o)),a!=null&&!Ct(a)&&(a=null);const l=Mc(),r=new WeakSet,i=[];let u=!1;const p=l.app={_uid:N1++,_component:o,_props:a,_container:null,_context:l,_instance:null,version:bv,get config(){return l.config},set config(d){},use(d,...c){return r.has(d)||(d&&Ge(d.install)?(r.add(d),d.install(p,...c)):Ge(d)&&(r.add(d),d(p,...c))),p},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),p},component(d,c){return c?(l.components[d]=c,p):l.components[d]},directive(d,c){return c?(l.directives[d]=c,p):l.directives[d]},mount(d,c,v){if(!u){const m=p._ceVNode||Ve(o,a);return m.appContext=l,v===!0?v="svg":v===!1&&(v=void 0),e(m,d,v),u=!0,p._container=d,d.__vue_app__=p,_s(m.component)}},onUnmount(d){i.push(d)},unmount(){u&&(Fn(i,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(d,c){return l.provides[d]=c,p},runWithContext(d){const c=Jo;Jo=p;try{return d()}finally{Jo=c}}};return p}}let Jo=null;function F1(e,t){if(Xt){let n=Xt.provides;const o=Xt.parent&&Xt.parent.provides;o===n&&(n=Xt.provides=Object.create(o)),n[e]=t}}function ha(e,t,n=!1){const o=Xt||jt;if(o||Jo){const a=Jo?Jo._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&Ge(t)?t.call(o&&o.proxy):t}}function B1(){return!!(Xt||jt||Jo)}const Ic={},Dc=()=>Object.create(Ic),Rc=e=>Object.getPrototypeOf(e)===Ic;function U1(e,t,n,o=!1){const a={},l=Dc();e.propsDefaults=Object.create(null),Oc(e,t,a,l);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=o?a:Xm(a):e.type.props?e.props=a:e.props=l,e.attrs=l}function V1(e,t,n,o){const{props:a,attrs:l,vnode:{patchFlag:r}}=e,i=nt(a),[u]=e.propsOptions;let p=!1;if((o||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let c=0;c<d.length;c++){let v=d[c];if(ms(e.emitsOptions,v))continue;const m=t[v];if(u)if(gt(l,v))m!==l[v]&&(l[v]=m,p=!0);else{const y=$n(v);a[y]=Yr(u,i,y,m,e,!1)}else m!==l[v]&&(l[v]=m,p=!0)}}}else{Oc(e,t,a,l)&&(p=!0);let d;for(const c in i)(!t||!gt(t,c)&&((d=wo(c))===c||!gt(t,d)))&&(u?n&&(n[c]!==void 0||n[d]!==void 0)&&(a[c]=Yr(u,i,c,void 0,e,!0)):delete a[c]);if(l!==i)for(const c in l)(!t||!gt(t,c))&&(delete l[c],p=!0)}p&&oo(e.attrs,"set","")}function Oc(e,t,n,o){const[a,l]=e.propsOptions;let r=!1,i;if(t)for(let u in t){if(qa(u))continue;const p=t[u];let d;a&&gt(a,d=$n(u))?!l||!l.includes(d)?n[d]=p:(i||(i={}))[d]=p:ms(e.emitsOptions,u)||(!(u in o)||p!==o[u])&&(o[u]=p,r=!0)}if(l){const u=nt(n),p=i||kt;for(let d=0;d<l.length;d++){const c=l[d];n[c]=Yr(a,u,c,p[c],e,!gt(p,c))}}return r}function Yr(e,t,n,o,a,l){const r=e[n];if(r!=null){const i=gt(r,"default");if(i&&o===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&Ge(u)){const{propsDefaults:p}=a;if(n in p)o=p[n];else{const d=cl(a);o=p[n]=u.call(null,t),d()}}else o=u;a.ce&&a.ce._setProp(n,o)}r[0]&&(l&&!i?o=!1:r[1]&&(o===""||o===wo(n))&&(o=!0))}return o}const W1=new WeakMap;function Nc(e,t,n=!1){const o=n?W1:t.propsCache,a=o.get(e);if(a)return a;const l=e.props,r={},i=[];let u=!1;if(!Ge(e)){const d=c=>{u=!0;const[v,m]=Nc(c,t,!0);Ht(r,v),m&&i.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!l&&!u)return Ct(e)&&o.set(e,ua),ua;if(We(l))for(let d=0;d<l.length;d++){const c=$n(l[d]);Pc(c)&&(r[c]=kt)}else if(l)for(const d in l){const c=$n(d);if(Pc(c)){const v=l[d],m=r[c]=We(v)||Ge(v)?{type:v}:Ht({},v),y=m.type;let S=!1,$=!0;if(We(y))for(let T=0;T<y.length;++T){const D=y[T],Y=Ge(D)&&D.name;if(Y==="Boolean"){S=!0;break}else Y==="String"&&($=!1)}else S=Ge(y)&&y.name==="Boolean";m[0]=S,m[1]=$,(S||gt(m,"default"))&&i.push(c)}}const p=[r,i];return Ct(e)&&o.set(e,p),p}function Pc(e){return e[0]!=="$"&&!qa(e)}const Fc=e=>e[0]==="_"||e==="$stable",Jr=e=>We(e)?e.map(Kn):[Kn(e)],z1=(e,t,n)=>{if(t._n)return t;const o=it((...a)=>Jr(t(...a)),n);return o._c=!1,o},Bc=(e,t,n)=>{const o=e._ctx;for(const a in e){if(Fc(a))continue;const l=e[a];if(Ge(l))t[a]=z1(a,l,o);else if(l!=null){const r=Jr(l);t[a]=()=>r}}},Uc=(e,t)=>{const n=Jr(t);e.slots.default=()=>n},Vc=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},H1=(e,t,n)=>{const o=e.slots=Dc();if(e.vnode.shapeFlag&32){const a=t._;a?(Vc(o,t,n),n&&Tu(o,"_",a,!0)):Bc(t,o)}else t&&Uc(e,t)},j1=(e,t,n)=>{const{vnode:o,slots:a}=e;let l=!0,r=kt;if(o.shapeFlag&32){const i=t._;i?n&&i===1?l=!1:Vc(a,t,n):(l=!t.$stable,Bc(t,a)),r=t}else t&&(Uc(e,t),r={default:1});if(l)for(const i in a)!Fc(i)&&r[i]==null&&delete a[i]},fn=lv;function G1(e){return q1(e)}function q1(e,t){const n=Yl();n.__VUE__=!0;const{insert:o,remove:a,patchProp:l,createElement:r,createText:i,createComment:u,setText:p,setElementText:d,parentNode:c,nextSibling:v,setScopeId:m=Gn,insertStaticContent:y}=e,S=(C,b,O,Q=null,pe=null,be=null,A=void 0,_=null,R=!!b.dynamicChildren)=>{if(C===b)return;C&&!Qo(C,b)&&(Q=L(C),re(C,pe,be,!0),C=null),b.patchFlag===-2&&(R=!1,b.dynamicChildren=null);const{type:q,ref:Se,shapeFlag:we}=b;switch(q){case sl:$(C,b,O,Q);break;case gn:T(C,b,O,Q);break;case Zr:C==null&&D(b,O,Q,A);break;case De:N(C,b,O,Q,pe,be,A,_,R);break;default:we&1?P(C,b,O,Q,pe,be,A,_,R):we&6?Z(C,b,O,Q,pe,be,A,_,R):(we&64||we&128)&&q.process(C,b,O,Q,pe,be,A,_,R,I)}Se!=null&&pe&&ds(Se,C&&C.ref,be,b||C,!b)},$=(C,b,O,Q)=>{if(C==null)o(b.el=i(b.children),O,Q);else{const pe=b.el=C.el;b.children!==C.children&&p(pe,b.children)}},T=(C,b,O,Q)=>{C==null?o(b.el=u(b.children||""),O,Q):b.el=C.el},D=(C,b,O,Q)=>{[C.el,C.anchor]=y(C.children,b,O,Q,C.el,C.anchor)},Y=({el:C,anchor:b},O,Q)=>{let pe;for(;C&&C!==b;)pe=v(C),o(C,O,Q),C=pe;o(b,O,Q)},x=({el:C,anchor:b})=>{let O;for(;C&&C!==b;)O=v(C),a(C),C=O;a(b)},P=(C,b,O,Q,pe,be,A,_,R)=>{b.type==="svg"?A="svg":b.type==="math"&&(A="mathml"),C==null?H(b,O,Q,pe,be,A,_,R):X(C,b,pe,be,A,_,R)},H=(C,b,O,Q,pe,be,A,_)=>{let R,q;const{props:Se,shapeFlag:we,transition:ee,dirs:me}=C;if(R=C.el=r(C.type,be,Se&&Se.is,Se),we&8?d(R,C.children):we&16&&K(C.children,R,null,Q,pe,Xr(C,be),A,_),me&&Ko(C,null,Q,"created"),j(R,C,C.scopeId,A,Q),Se){for(const Pe in Se)Pe!=="value"&&!qa(Pe)&&l(R,Pe,null,Se[Pe],be,Q);"value"in Se&&l(R,"value",null,Se.value,be),(q=Se.onVnodeBeforeMount)&&Yn(q,Q,C)}me&&Ko(C,null,Q,"beforeMount");const Re=K1(pe,ee);Re&&ee.beforeEnter(R),o(R,b,O),((q=Se&&Se.onVnodeMounted)||Re||me)&&fn(()=>{q&&Yn(q,Q,C),Re&&ee.enter(R),me&&Ko(C,null,Q,"mounted")},pe)},j=(C,b,O,Q,pe)=>{if(O&&m(C,O),Q)for(let be=0;be<Q.length;be++)m(C,Q[be]);if(pe){let be=pe.subTree;if(b===be||Yc(be.type)&&(be.ssContent===b||be.ssFallback===b)){const A=pe.vnode;j(C,A,A.scopeId,A.slotScopeIds,pe.parent)}}},K=(C,b,O,Q,pe,be,A,_,R=0)=>{for(let q=R;q<C.length;q++){const Se=C[q]=_?$o(C[q]):Kn(C[q]);S(null,Se,b,O,Q,pe,be,A,_)}},X=(C,b,O,Q,pe,be,A)=>{const _=b.el=C.el;let{patchFlag:R,dynamicChildren:q,dirs:Se}=b;R|=C.patchFlag&16;const we=C.props||kt,ee=b.props||kt;let me;if(O&&Xo(O,!1),(me=ee.onVnodeBeforeUpdate)&&Yn(me,O,b,C),Se&&Ko(b,C,O,"beforeUpdate"),O&&Xo(O,!0),(we.innerHTML&&ee.innerHTML==null||we.textContent&&ee.textContent==null)&&d(_,""),q?ye(C.dynamicChildren,q,_,O,Q,Xr(b,pe),be):A||F(C,b,_,null,O,Q,Xr(b,pe),be,!1),R>0){if(R&16)se(_,we,ee,O,pe);else if(R&2&&we.class!==ee.class&&l(_,"class",null,ee.class,pe),R&4&&l(_,"style",we.style,ee.style,pe),R&8){const Re=b.dynamicProps;for(let Pe=0;Pe<Re.length;Pe++){const He=Re[Pe],Xe=we[He],at=ee[He];(at!==Xe||He==="value")&&l(_,He,Xe,at,pe,O)}}R&1&&C.children!==b.children&&d(_,b.children)}else!A&&q==null&&se(_,we,ee,O,pe);((me=ee.onVnodeUpdated)||Se)&&fn(()=>{me&&Yn(me,O,b,C),Se&&Ko(b,C,O,"updated")},Q)},ye=(C,b,O,Q,pe,be,A)=>{for(let _=0;_<b.length;_++){const R=C[_],q=b[_],Se=R.el&&(R.type===De||!Qo(R,q)||R.shapeFlag&70)?c(R.el):O;S(R,q,Se,null,Q,pe,be,A,!0)}},se=(C,b,O,Q,pe)=>{if(b!==O){if(b!==kt)for(const be in b)!qa(be)&&!(be in O)&&l(C,be,b[be],null,pe,Q);for(const be in O){if(qa(be))continue;const A=O[be],_=b[be];A!==_&&be!=="value"&&l(C,be,_,A,pe,Q)}"value"in O&&l(C,"value",b.value,O.value,pe)}},N=(C,b,O,Q,pe,be,A,_,R)=>{const q=b.el=C?C.el:i(""),Se=b.anchor=C?C.anchor:i("");let{patchFlag:we,dynamicChildren:ee,slotScopeIds:me}=b;me&&(_=_?_.concat(me):me),C==null?(o(q,O,Q),o(Se,O,Q),K(b.children||[],O,Se,pe,be,A,_,R)):we>0&&we&64&&ee&&C.dynamicChildren?(ye(C.dynamicChildren,ee,O,pe,be,A,_),(b.key!=null||pe&&b===pe.subTree)&&Qr(C,b,!0)):F(C,b,O,Se,pe,be,A,_,R)},Z=(C,b,O,Q,pe,be,A,_,R)=>{b.slotScopeIds=_,C==null?b.shapeFlag&512?pe.ctx.activate(b,O,Q,A,R):te(b,O,Q,pe,be,A,R):z(C,b,R)},te=(C,b,O,Q,pe,be,A)=>{const _=C.component=pv(C,Q,pe);if(ps(C)&&(_.ctx.renderer=I),fv(_,!1,A),_.asyncDep){if(pe&&pe.registerDep(_,ne,A),!C.el){const R=_.subTree=Ve(gn);T(null,R,b,O)}}else ne(_,C,b,O,pe,be,A)},z=(C,b,O)=>{const Q=b.component=C.component;if(ov(C,b,O))if(Q.asyncDep&&!Q.asyncResolved){oe(Q,b,O);return}else Q.next=b,Q.update();else b.el=C.el,Q.vnode=b},ne=(C,b,O,Q,pe,be,A)=>{const _=()=>{if(C.isMounted){let{next:we,bu:ee,u:me,parent:Re,vnode:Pe}=C;{const Dt=Wc(C);if(Dt){we&&(we.el=Pe.el,oe(C,we,A)),Dt.asyncDep.then(()=>{C.isUnmounted||_()});return}}let He=we,Xe;Xo(C,!1),we?(we.el=Pe.el,oe(C,we,A)):we=Pe,ee&&ql(ee),(Xe=we.props&&we.props.onVnodeBeforeUpdate)&&Yn(Xe,Re,we,Pe),Xo(C,!0);const at=qc(C),bt=C.subTree;C.subTree=at,S(bt,at,c(bt.el),L(bt),C,pe,be),we.el=at.el,He===null&&av(C,at.el),me&&fn(me,pe),(Xe=we.props&&we.props.onVnodeUpdated)&&fn(()=>Yn(Xe,Re,we,Pe),pe)}else{let we;const{el:ee,props:me}=b,{bm:Re,m:Pe,parent:He,root:Xe,type:at}=C,bt=va(b);Xo(C,!1),Re&&ql(Re),!bt&&(we=me&&me.onVnodeBeforeMount)&&Yn(we,He,b),Xo(C,!0);{Xe.ce&&Xe.ce._injectChildStyle(at);const Dt=C.subTree=qc(C);S(null,Dt,O,Q,C,pe,be),b.el=Dt.el}if(Pe&&fn(Pe,pe),!bt&&(we=me&&me.onVnodeMounted)){const Dt=b;fn(()=>Yn(we,He,Dt),pe)}(b.shapeFlag&256||He&&va(He.vnode)&&He.vnode.shapeFlag&256)&&C.a&&fn(C.a,pe),C.isMounted=!0,b=O=Q=null}};C.scope.on();const R=C.effect=new Mu(_);C.scope.off();const q=C.update=R.run.bind(R),Se=C.job=R.runIfDirty.bind(R);Se.i=C,Se.id=C.uid,R.scheduler=()=>Ur(Se),Xo(C,!0),q()},oe=(C,b,O)=>{b.component=C;const Q=C.vnode.props;C.vnode=b,C.next=null,V1(C,b.props,Q,O),j1(C,b.children,O),to(),tc(C),no()},F=(C,b,O,Q,pe,be,A,_,R=!1)=>{const q=C&&C.children,Se=C?C.shapeFlag:0,we=b.children,{patchFlag:ee,shapeFlag:me}=b;if(ee>0){if(ee&128){ie(q,we,O,Q,pe,be,A,_,R);return}else if(ee&256){B(q,we,O,Q,pe,be,A,_,R);return}}me&8?(Se&16&&G(q,pe,be),we!==q&&d(O,we)):Se&16?me&16?ie(q,we,O,Q,pe,be,A,_,R):G(q,pe,be,!0):(Se&8&&d(O,""),me&16&&K(we,O,Q,pe,be,A,_,R))},B=(C,b,O,Q,pe,be,A,_,R)=>{C=C||ua,b=b||ua;const q=C.length,Se=b.length,we=Math.min(q,Se);let ee;for(ee=0;ee<we;ee++){const me=b[ee]=R?$o(b[ee]):Kn(b[ee]);S(C[ee],me,O,null,pe,be,A,_,R)}q>Se?G(C,pe,be,!0,!1,we):K(b,O,Q,pe,be,A,_,R,we)},ie=(C,b,O,Q,pe,be,A,_,R)=>{let q=0;const Se=b.length;let we=C.length-1,ee=Se-1;for(;q<=we&&q<=ee;){const me=C[q],Re=b[q]=R?$o(b[q]):Kn(b[q]);if(Qo(me,Re))S(me,Re,O,null,pe,be,A,_,R);else break;q++}for(;q<=we&&q<=ee;){const me=C[we],Re=b[ee]=R?$o(b[ee]):Kn(b[ee]);if(Qo(me,Re))S(me,Re,O,null,pe,be,A,_,R);else break;we--,ee--}if(q>we){if(q<=ee){const me=ee+1,Re=me<Se?b[me].el:Q;for(;q<=ee;)S(null,b[q]=R?$o(b[q]):Kn(b[q]),O,Re,pe,be,A,_,R),q++}}else if(q>ee)for(;q<=we;)re(C[q],pe,be,!0),q++;else{const me=q,Re=q,Pe=new Map;for(q=Re;q<=ee;q++){const zt=b[q]=R?$o(b[q]):Kn(b[q]);zt.key!=null&&Pe.set(zt.key,q)}let He,Xe=0;const at=ee-Re+1;let bt=!1,Dt=0;const Wn=new Array(at);for(q=0;q<at;q++)Wn[q]=0;for(q=me;q<=we;q++){const zt=C[q];if(Xe>=at){re(zt,pe,be,!0);continue}let Qt;if(zt.key!=null)Qt=Pe.get(zt.key);else for(He=Re;He<=ee;He++)if(Wn[He-Re]===0&&Qo(zt,b[He])){Qt=He;break}Qt===void 0?re(zt,pe,be,!0):(Wn[Qt-Re]=q+1,Qt>=Dt?Dt=Qt:bt=!0,S(zt,b[Qt],O,null,pe,be,A,_,R),Xe++)}const Vo=bt?Y1(Wn):ua;for(He=Vo.length-1,q=at-1;q>=0;q--){const zt=Re+q,Qt=b[zt],Rn=zt+1<Se?b[zt+1].el:Q;Wn[q]===0?S(null,Qt,O,Rn,pe,be,A,_,R):bt&&(He<0||q!==Vo[He]?Ce(Qt,O,Rn,2):He--)}}},Ce=(C,b,O,Q,pe=null)=>{const{el:be,type:A,transition:_,children:R,shapeFlag:q}=C;if(q&6){Ce(C.component.subTree,b,O,Q);return}if(q&128){C.suspense.move(b,O,Q);return}if(q&64){A.move(C,b,O,I);return}if(A===De){o(be,b,O);for(let we=0;we<R.length;we++)Ce(R[we],b,O,Q);o(C.anchor,b,O);return}if(A===Zr){Y(C,b,O);return}if(Q!==2&&q&1&&_)if(Q===0)_.beforeEnter(be),o(be,b,O),fn(()=>_.enter(be),pe);else{const{leave:we,delayLeave:ee,afterLeave:me}=_,Re=()=>o(be,b,O),Pe=()=>{we(be,()=>{Re(),me&&me()})};ee?ee(be,Re,Pe):Pe()}else o(be,b,O)},re=(C,b,O,Q=!1,pe=!1)=>{const{type:be,props:A,ref:_,children:R,dynamicChildren:q,shapeFlag:Se,patchFlag:we,dirs:ee,cacheIndex:me}=C;if(we===-2&&(pe=!1),_!=null&&ds(_,null,O,C,!0),me!=null&&(b.renderCache[me]=void 0),Se&256){b.ctx.deactivate(C);return}const Re=Se&1&&ee,Pe=!va(C);let He;if(Pe&&(He=A&&A.onVnodeBeforeUnmount)&&Yn(He,b,C),Se&6)ae(C.component,O,Q);else{if(Se&128){C.suspense.unmount(O,Q);return}Re&&Ko(C,null,b,"beforeUnmount"),Se&64?C.type.remove(C,b,O,I,Q):q&&!q.hasOnce&&(be!==De||we>0&&we&64)?G(q,b,O,!1,!0):(be===De&&we&384||!pe&&Se&16)&&G(R,b,O),Q&&ge(C)}(Pe&&(He=A&&A.onVnodeUnmounted)||Re)&&fn(()=>{He&&Yn(He,b,C),Re&&Ko(C,null,b,"unmounted")},O)},ge=C=>{const{type:b,el:O,anchor:Q,transition:pe}=C;if(b===De){ce(O,Q);return}if(b===Zr){x(C);return}const be=()=>{a(O),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(C.shapeFlag&1&&pe&&!pe.persisted){const{leave:A,delayLeave:_}=pe,R=()=>A(O,be);_?_(C.el,be,R):R()}else be()},ce=(C,b)=>{let O;for(;C!==b;)O=v(C),a(C),C=O;a(b)},ae=(C,b,O)=>{const{bum:Q,scope:pe,job:be,subTree:A,um:_,m:R,a:q}=C;zc(R),zc(q),Q&&ql(Q),pe.stop(),be&&(be.flags|=8,re(A,C,b,O)),_&&fn(_,b),fn(()=>{C.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},G=(C,b,O,Q=!1,pe=!1,be=0)=>{for(let A=be;A<C.length;A++)re(C[A],b,O,Q,pe)},L=C=>{if(C.shapeFlag&6)return L(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const b=v(C.anchor||C.el),O=b&&b[lc];return O?v(O):b};let U=!1;const V=(C,b,O)=>{C==null?b._vnode&&re(b._vnode,null,null,!0):S(b._vnode||null,C,b,null,null,null,O),b._vnode=C,U||(U=!0,tc(),nc(),U=!1)},I={p:S,um:re,m:Ce,r:ge,mt:te,mc:K,pc:F,pbc:ye,n:L,o:e};return{render:V,hydrate:void 0,createApp:P1(V)}}function Xr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Xo({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function K1(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qr(e,t,n=!1){const o=e.children,a=t.children;if(We(o)&&We(a))for(let l=0;l<o.length;l++){const r=o[l];let i=a[l];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=a[l]=$o(a[l]),i.el=r.el),!n&&i.patchFlag!==-2&&Qr(r,i)),i.type===sl&&(i.el=r.el)}}function Y1(e){const t=e.slice(),n=[0];let o,a,l,r,i;const u=e.length;for(o=0;o<u;o++){const p=e[o];if(p!==0){if(a=n[n.length-1],e[a]<p){t[o]=a,n.push(o);continue}for(l=0,r=n.length-1;l<r;)i=l+r>>1,e[n[i]]<p?l=i+1:r=i;p<e[n[l]]&&(l>0&&(t[o]=n[l-1]),n[l]=o)}}for(l=n.length,r=n[l-1];l-- >0;)n[l]=r,r=t[r];return n}function Wc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wc(t)}function zc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const J1=Symbol.for("v-scx"),X1=()=>ha(J1);function ot(e,t,n){return Hc(e,t,n)}function Hc(e,t,n=kt){const{immediate:o,deep:a,flush:l,once:r}=n,i=Ht({},n),u=t&&o||!t&&l!=="post";let p;if(dl){if(l==="sync"){const m=X1();p=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=Gn,m.resume=Gn,m.pause=Gn,m}}const d=Xt;i.call=(m,y,S)=>Fn(m,d,y,S);let c=!1;l==="post"?i.scheduler=m=>{fn(m,d&&d.suspense)}:l!=="sync"&&(c=!0,i.scheduler=(m,y)=>{y?m():Ur(m)}),i.augmentJob=m=>{t&&(m.flags|=4),c&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=r1(e,t,i);return dl&&(p?p.push(v):u&&v()),v}function Q1(e,t,n){const o=this.proxy,a=Rt(e)?e.includes(".")?jc(o,e):()=>o[e]:e.bind(o,o);let l;Ge(t)?l=t:(l=t.handler,n=t);const r=cl(this),i=Hc(a,l.bind(o),n);return r(),i}function jc(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const Z1=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${$n(t)}Modifiers`]||e[`${wo(t)}Modifiers`];function ev(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||kt;let a=n;const l=t.startsWith("update:"),r=l&&Z1(o,t.slice(7));r&&(r.trim&&(a=n.map(d=>Rt(d)?d.trim():d)),r.number&&(a=n.map(Kl)));let i,u=o[i=xr(t)]||o[i=xr($n(t))];!u&&l&&(u=o[i=xr(wo(t))]),u&&Fn(u,e,6,a);const p=o[i+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Fn(p,e,6,a)}}function Gc(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const l=e.emits;let r={},i=!1;if(!Ge(e)){const u=p=>{const d=Gc(p,t,!0);d&&(i=!0,Ht(r,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!l&&!i?(Ct(e)&&o.set(e,null),null):(We(l)?l.forEach(u=>r[u]=null):Ht(r,l),Ct(e)&&o.set(e,r),r)}function ms(e,t){return!e||!Hl(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,wo(t))||gt(e,t))}function nI(){}function qc(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[l],slots:r,attrs:i,emit:u,render:p,renderCache:d,props:c,data:v,setupState:m,ctx:y,inheritAttrs:S}=e,$=rs(e);let T,D;try{if(n.shapeFlag&4){const x=a||o,P=x;T=Kn(p.call(P,x,d,c,m,v,y)),D=i}else{const x=t;T=Kn(x.length>1?x(c,{attrs:i,slots:r,emit:u}):x(c,null)),D=t.props?i:tv(i)}}catch(x){rl.length=0,ls(x,e,1),T=Ve(gn)}let Y=T;if(D&&S!==!1){const x=Object.keys(D),{shapeFlag:P}=Y;x.length&&P&7&&(l&&x.some(yr)&&(D=nv(D,l)),Y=Eo(Y,D,!1,!0))}return n.dirs&&(Y=Eo(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&Yo(Y,n.transition),T=Y,rs($),T}const tv=e=>{let t;for(const n in e)(n==="class"||n==="style"||Hl(n))&&((t||(t={}))[n]=e[n]);return t},nv=(e,t)=>{const n={};for(const o in e)(!yr(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function ov(e,t,n){const{props:o,children:a,component:l}=e,{props:r,children:i,patchFlag:u}=t,p=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return o?Kc(o,r,p):!!r;if(u&8){const d=t.dynamicProps;for(let c=0;c<d.length;c++){const v=d[c];if(r[v]!==o[v]&&!ms(p,v))return!0}}}else return(a||i)&&(!i||!i.$stable)?!0:o===r?!1:o?r?Kc(o,r,p):!0:!!r;return!1}function Kc(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const l=o[a];if(t[l]!==e[l]&&!ms(n,l))return!0}return!1}function av({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Yc=e=>e.__isSuspense;function lv(e,t){t&&t.pendingBranch?We(e)?t.effects.push(...e):t.effects.push(e):g1(e)}const De=Symbol.for("v-fgt"),sl=Symbol.for("v-txt"),gn=Symbol.for("v-cmt"),Zr=Symbol.for("v-stc"),rl=[];let xn=null;function w(e=!1){rl.push(xn=e?null:[])}function sv(){rl.pop(),xn=rl[rl.length-1]||null}let il=1;function Jc(e,t=!1){il+=e,e<0&&xn&&t&&(xn.hasOnce=!0)}function Xc(e){return e.dynamicChildren=il>0?xn||ua:null,sv(),il>0&&xn&&xn.push(e),e}function E(e,t,n,o,a,l){return Xc(s(e,t,n,o,a,l,!0))}function xt(e,t,n,o,a){return Xc(Ve(e,t,n,o,a,!0))}function ul(e){return e?e.__v_isVNode===!0:!1}function Qo(e,t){return e.type===t.type&&e.key===t.key}const Qc=({key:e})=>e??null,vs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Ot(e)||Ge(e)?{i:jt,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,a=null,l=e===De?0:1,r=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qc(t),ref:t&&vs(t),scopeId:ac,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:jt};return i?(ei(u,n),l&128&&e.normalize(u)):n&&(u.shapeFlag|=Rt(n)?8:16),il>0&&!r&&xn&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&xn.push(u),u}const Ve=rv;function rv(e,t=null,n=null,o=0,a=null,l=!1){if((!e||e===$1)&&(e=gn),ul(e)){const i=Eo(e,t,!0);return n&&ei(i,n),il>0&&!l&&xn&&(i.shapeFlag&6?xn[xn.indexOf(e)]=i:xn.push(i)),i.patchFlag=-2,i}if(yv(e)&&(e=e.__vccOpts),t){t=iv(t);let{class:i,style:u}=t;i&&!Rt(i)&&(t.class=Le(i)),Ct(u)&&(Nr(u)&&!We(u)&&(u=Ht({},u)),t.style=dt(u))}const r=Rt(e)?1:Yc(e)?128:sc(e)?64:Ct(e)?4:Ge(e)?2:0;return s(e,t,n,o,a,r,l,!0)}function iv(e){return e?Nr(e)||Rc(e)?Ht({},e):e:null}function Eo(e,t,n=!1,o=!1){const{props:a,ref:l,patchFlag:r,children:i,transition:u}=e,p=t?uv(a||{},t):a,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&Qc(p),ref:t&&t.ref?n&&l?We(l)?l.concat(vs(t)):[l,vs(t)]:vs(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==De?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Eo(e.ssContent),ssFallback:e.ssFallback&&Eo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&o&&Yo(d,u.clone(d)),d}function je(e=" ",t=0){return Ve(sl,null,e,t)}function de(e="",t=!1){return t?(w(),xt(gn,null,e)):Ve(gn,null,e)}function Kn(e){return e==null||typeof e=="boolean"?Ve(gn):We(e)?Ve(De,null,e.slice()):ul(e)?$o(e):Ve(sl,null,String(e))}function $o(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Eo(e)}function ei(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(We(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),ei(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!Rc(t)?t._ctx=jt:a===3&&jt&&(jt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ge(t)?(t={default:t,_ctx:jt},n=32):(t=String(t),o&64?(n=16,t=[je(t)]):n=8);e.children=t,e.shapeFlag|=n}function uv(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=Le([t.class,o.class]));else if(a==="style")t.style=dt([t.style,o.style]);else if(Hl(a)){const l=t[a],r=o[a];r&&l!==r&&!(We(l)&&l.includes(r))&&(t[a]=l?[].concat(l,r):r)}else a!==""&&(t[a]=o[a])}return t}function Yn(e,t,n,o=null){Fn(e,t,7,[n,o])}const cv=Mc();let dv=0;function pv(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||cv,l={uid:dv++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nc(o,a),emitsOptions:Gc(o,a),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:o.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=ev.bind(null,l),e.ce&&e.ce(l),l}let Xt=null;const Zo=()=>Xt||jt;let hs,ti;{const e=Yl(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),l=>{a.length>1?a.forEach(r=>r(l)):a[0](l)}};hs=t("__VUE_INSTANCE_SETTERS__",n=>Xt=n),ti=t("__VUE_SSR_SETTERS__",n=>dl=n)}const cl=e=>{const t=Xt;return hs(e),e.scope.on(),()=>{e.scope.off(),hs(t)}},Zc=()=>{Xt&&Xt.scope.off(),hs(null)};function ed(e){return e.vnode.shapeFlag&4}let dl=!1;function fv(e,t=!1,n=!1){t&&ti(t);const{props:o,children:a}=e.vnode,l=ed(e);U1(e,o,l,t),H1(e,a,n);const r=l?gv(e,t):void 0;return t&&ti(!1),r}function gv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,A1);const{setup:o}=n;if(o){to();const a=e.setupContext=o.length>1?vv(e):null,l=cl(e),r=fa(o,e,0,[e.props,a]),i=wu(r);if(no(),l(),(i||e.sp)&&!va(e)&&yc(e),i){if(r.then(Zc,Zc),t)return r.then(u=>{td(e,u)}).catch(u=>{ls(u,e,0)});e.asyncDep=r}else td(e,r)}else nd(e)}function td(e,t,n){Ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ct(t)&&(e.setupState=Xu(t)),nd(e)}function nd(e,t,n){const o=e.type;e.render||(e.render=o.render||Gn);{const a=cl(e);to();try{M1(e)}finally{no(),a()}}}const mv={get(e,t){return nn(e,"get",""),e[t]}};function vv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mv),slots:e.slots,emit:e.emit,expose:t}}function _s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xu(Pr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in al)return al[n](e)},has(t,n){return n in t||n in al}})):e.proxy}const hv=/(?:^|[-_])(\w)/g,_v=e=>e.replace(hv,t=>t.toUpperCase()).replace(/[-_]/g,"");function od(e,t=!0){return Ge(e)?e.displayName||e.name:e.name||t&&e.__name}function ad(e,t,n=!1){let o=od(t);if(!o&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(o=a[1])}if(!o&&e&&e.parent){const a=l=>{for(const r in l)if(l[r]===t)return r};o=a(e.components||e.parent.type.components)||a(e.appContext.components)}return o?_v(o):n?"App":"Anonymous"}function yv(e){return Ge(e)&&"__vccOpts"in e}const vt=(e,t)=>l1(e,t,dl);function ut(e,t,n){const o=arguments.length;return o===2?Ct(t)&&!We(t)?ul(t)?Ve(e,null,[t]):Ve(e,t):Ve(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&ul(n)&&(n=[n]),Ve(e,t,n))}const bv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ni;const ld=typeof window<"u"&&window.trustedTypes;if(ld)try{ni=ld.createPolicy("vue",{createHTML:e=>e})}catch{}const sd=ni?e=>ni.createHTML(e):e=>e,wv="http://www.w3.org/2000/svg",xv="http://www.w3.org/1998/Math/MathML",ro=typeof document<"u"?document:null,rd=ro&&ro.createElement("template"),Sv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?ro.createElementNS(wv,e):t==="mathml"?ro.createElementNS(xv,e):n?ro.createElement(e,{is:n}):ro.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>ro.createTextNode(e),createComment:e=>ro.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ro.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,l){const r=n?n.previousSibling:t.lastChild;if(a&&(a===l||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===l||!(a=a.nextSibling)););else{rd.innerHTML=sd(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=rd.content;if(o==="svg"||o==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Lo="transition",pl="animation",_a=Symbol("_vtc"),id={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ud=Ht({},gc,id),ys=(e=>(e.displayName="Transition",e.props=ud,e))((e,{slots:t})=>ut(h1,dd(e),t)),ea=(e,t=[])=>{We(e)?e.forEach(n=>n(...t)):e&&e(...t)},cd=e=>e?We(e)?e.some(t=>t.length>1):e.length>1:!1;function dd(e){const t={};for(const N in e)N in id||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:o,duration:a,enterFromClass:l=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:u=l,appearActiveClass:p=r,appearToClass:d=i,leaveFromClass:c=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,y=Tv(a),S=y&&y[0],$=y&&y[1],{onBeforeEnter:T,onEnter:D,onEnterCancelled:Y,onLeave:x,onLeaveCancelled:P,onBeforeAppear:H=T,onAppear:j=D,onAppearCancelled:K=Y}=t,X=(N,Z,te,z)=>{N._enterCancelled=z,Ao(N,Z?d:i),Ao(N,Z?p:r),te&&te()},ye=(N,Z)=>{N._isLeaving=!1,Ao(N,c),Ao(N,m),Ao(N,v),Z&&Z()},se=N=>(Z,te)=>{const z=N?j:D,ne=()=>X(Z,N,te);ea(z,[Z,ne]),pd(()=>{Ao(Z,N?u:l),Jn(Z,N?d:i),cd(z)||fd(Z,o,S,ne)})};return Ht(t,{onBeforeEnter(N){ea(T,[N]),Jn(N,l),Jn(N,r)},onBeforeAppear(N){ea(H,[N]),Jn(N,u),Jn(N,p)},onEnter:se(!1),onAppear:se(!0),onLeave(N,Z){N._isLeaving=!0;const te=()=>ye(N,Z);Jn(N,c),N._enterCancelled?(Jn(N,v),ai()):(ai(),Jn(N,v)),pd(()=>{N._isLeaving&&(Ao(N,c),Jn(N,m),cd(x)||fd(N,o,$,te))}),ea(x,[N,te])},onEnterCancelled(N){X(N,!1,void 0,!0),ea(Y,[N])},onAppearCancelled(N){X(N,!0,void 0,!0),ea(K,[N])},onLeaveCancelled(N){ye(N),ea(P,[N])}})}function Tv(e){if(e==null)return null;if(Ct(e))return[oi(e.enter),oi(e.leave)];{const t=oi(e);return[t,t]}}function oi(e){return Tm(e)}function Jn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[_a]||(e[_a]=new Set)).add(t)}function Ao(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[_a];n&&(n.delete(t),n.size||(e[_a]=void 0))}function pd(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let kv=0;function fd(e,t,n,o){const a=e._endId=++kv,l=()=>{a===e._endId&&o()};if(n!=null)return setTimeout(l,n);const{type:r,timeout:i,propCount:u}=gd(e,t);if(!r)return o();const p=r+"end";let d=0;const c=()=>{e.removeEventListener(p,v),l()},v=m=>{m.target===e&&++d>=u&&c()};setTimeout(()=>{d<u&&c()},i+1),e.addEventListener(p,v)}function gd(e,t){const n=window.getComputedStyle(e),o=y=>(n[y]||"").split(", "),a=o(`${Lo}Delay`),l=o(`${Lo}Duration`),r=md(a,l),i=o(`${pl}Delay`),u=o(`${pl}Duration`),p=md(i,u);let d=null,c=0,v=0;t===Lo?r>0&&(d=Lo,c=r,v=l.length):t===pl?p>0&&(d=pl,c=p,v=u.length):(c=Math.max(r,p),d=c>0?r>p?Lo:pl:null,v=d?d===Lo?l.length:u.length:0);const m=d===Lo&&/\b(transform|all)(,|$)/.test(o(`${Lo}Property`).toString());return{type:d,timeout:c,propCount:v,hasTransform:m}}function md(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>vd(n)+vd(e[o])))}function vd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ai(){return document.body.offsetHeight}function Cv(e,t,n){const o=e[_a];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const bs=Symbol("_vod"),hd=Symbol("_vsh"),fl={beforeMount(e,{value:t},{transition:n}){e[bs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):gl(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),gl(e,!0),o.enter(e)):o.leave(e,()=>{gl(e,!1)}):gl(e,t))},beforeUnmount(e,{value:t}){gl(e,t)}};function gl(e,t){e.style.display=t?e[bs]:"none",e[hd]=!t}const Ev=Symbol(""),$v=/(^|;)\s*display\s*:/;function Lv(e,t,n){const o=e.style,a=Rt(n);let l=!1;if(n&&!a){if(t)if(Rt(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();n[i]==null&&ws(o,i,"")}else for(const r in t)n[r]==null&&ws(o,r,"");for(const r in n)r==="display"&&(l=!0),ws(o,r,n[r])}else if(a){if(t!==n){const r=o[Ev];r&&(n+=";"+r),o.cssText=n,l=$v.test(n)}}else t&&e.removeAttribute("style");bs in e&&(e[bs]=l?o.display:"",e[hd]&&(o.display="none"))}const _d=/\s*!important$/;function ws(e,t,n){if(We(n))n.forEach(o=>ws(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Av(e,t);_d.test(n)?e.setProperty(wo(o),n.replace(_d,""),"important"):e[o]=n}}const yd=["Webkit","Moz","ms"],li={};function Av(e,t){const n=li[t];if(n)return n;let o=$n(t);if(o!=="filter"&&o in e)return li[t]=o;o=Gl(o);for(let a=0;a<yd.length;a++){const l=yd[a]+o;if(l in e)return li[t]=l}return t}const bd="http://www.w3.org/1999/xlink";function wd(e,t,n,o,a,l=Lm(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(bd,t.slice(6,t.length)):e.setAttributeNS(bd,t,n):n==null||l&&!Cu(n)?e.removeAttribute(t):e.setAttribute(t,l?"":Nn(n)?String(n):n)}function xd(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?sd(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const i=l==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(i!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=Cu(n):n==null&&i==="string"?(n="",r=!0):i==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(a||t)}function io(e,t,n,o){e.addEventListener(t,n,o)}function Mv(e,t,n,o){e.removeEventListener(t,n,o)}const Sd=Symbol("_vei");function Iv(e,t,n,o,a=null){const l=e[Sd]||(e[Sd]={}),r=l[t];if(o&&r)r.value=o;else{const[i,u]=Dv(t);if(o){const p=l[t]=Nv(o,a);io(e,i,p,u)}else r&&(Mv(e,i,r,u),l[t]=void 0)}}const Td=/(?:Once|Passive|Capture)$/;function Dv(e){let t;if(Td.test(e)){t={};let o;for(;o=e.match(Td);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wo(e.slice(2)),t]}let si=0;const Rv=Promise.resolve(),Ov=()=>si||(Rv.then(()=>si=0),si=Date.now());function Nv(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Fn(Pv(o,n.value),t,5,[o])};return n.value=e,n.attached=Ov(),n}function Pv(e,t){if(We(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const kd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Fv=(e,t,n,o,a,l)=>{const r=a==="svg";t==="class"?Cv(e,o,r):t==="style"?Lv(e,n,o):Hl(t)?yr(t)||Iv(e,t,n,o,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Bv(e,t,o,r))?(xd(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&wd(e,t,o,r,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Rt(o))?xd(e,$n(t),o,l,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),wd(e,t,o,r))};function Bv(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&kd(t)&&Ge(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return kd(t)&&Rt(n)?!1:t in e}const Cd=new WeakMap,Ed=new WeakMap,xs=Symbol("_moveCb"),$d=Symbol("_enterCb"),Uv=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:Ht({},ud,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Zo(),o=fc();let a,l;return xc(()=>{if(!a.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!Hv(a[0].el,n.vnode.el,r))return;a.forEach(Vv),a.forEach(Wv);const i=a.filter(zv);ai(),i.forEach(u=>{const p=u.el,d=p.style;Jn(p,r),d.transform=d.webkitTransform=d.transitionDuration="";const c=p[xs]=v=>{v&&v.target!==p||(!v||/transform$/.test(v.propertyName))&&(p.removeEventListener("transitionend",c),p[xs]=null,Ao(p,r))};p.addEventListener("transitionend",c)})}),()=>{const r=nt(e),i=dd(r);let u=r.tag||De;if(a=[],l)for(let p=0;p<l.length;p++){const d=l[p];d.el&&d.el instanceof Element&&(a.push(d),Yo(d,nl(d,i,o,n)),Cd.set(d,d.el.getBoundingClientRect()))}l=t.default?zr(t.default()):[];for(let p=0;p<l.length;p++){const d=l[p];d.key!=null&&Yo(d,nl(d,i,o,n))}return Ve(u,null,l)}}});function Vv(e){const t=e.el;t[xs]&&t[xs](),t[$d]&&t[$d]()}function Wv(e){Ed.set(e,e.el.getBoundingClientRect())}function zv(e){const t=Cd.get(e),n=Ed.get(e),o=t.left-n.left,a=t.top-n.top;if(o||a){const l=e.el.style;return l.transform=l.webkitTransform=`translate(${o}px,${a}px)`,l.transitionDuration="0s",e}}function Hv(e,t,n){const o=e.cloneNode(),a=e[_a];a&&a.forEach(i=>{i.split(/\s+/).forEach(u=>u&&o.classList.remove(u))}),n.split(/\s+/).forEach(i=>i&&o.classList.add(i)),o.style.display="none";const l=t.nodeType===1?t:t.parentNode;l.appendChild(o);const{hasTransform:r}=gd(o);return l.removeChild(o),r}const Mo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return We(t)?n=>ql(t,n):t};function jv(e){e.target.composing=!0}function Ld(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const In=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[In]=Mo(a);const l=o||a.props&&a.props.type==="number";io(e,t?"change":"input",r=>{if(r.target.composing)return;let i=e.value;n&&(i=i.trim()),l&&(i=Kl(i)),e[In](i)}),n&&io(e,"change",()=>{e.value=e.value.trim()}),t||(io(e,"compositionstart",jv),io(e,"compositionend",Ld),io(e,"change",Ld))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:l}},r){if(e[In]=Mo(r),e.composing)return;const i=(l||e.type==="number")&&!/^0\d/.test(e.value)?Kl(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===u)||(e.value=u))}},Lt={deep:!0,created(e,t,n){e[In]=Mo(n),io(e,"change",()=>{const o=e._modelValue,a=ya(e),l=e.checked,r=e[In];if(We(o)){const i=Sr(o,a),u=i!==-1;if(l&&!u)r(o.concat(a));else if(!l&&u){const p=[...o];p.splice(i,1),r(p)}}else if(da(o)){const i=new Set(o);l?i.add(a):i.delete(a),r(i)}else r(Id(e,l))})},mounted:Ad,beforeUpdate(e,t,n){e[In]=Mo(n),Ad(e,t,n)}};function Ad(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(We(t))a=Sr(t,o.props.value)>-1;else if(da(t))a=t.has(o.props.value);else{if(t===n)return;a=Ho(t,Id(e,!0))}e.checked!==a&&(e.checked=a)}const uo={created(e,{value:t},n){e.checked=Ho(t,n.props.value),e[In]=Mo(n),io(e,"change",()=>{e[In](ya(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[In]=Mo(o),t!==n&&(e.checked=Ho(t,o.props.value))}},Gt={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=da(t);io(e,"change",()=>{const l=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?Kl(ya(r)):ya(r));e[In](e.multiple?a?new Set(l):l:l[0]),e._assigning=!0,qe(()=>{e._assigning=!1})}),e[In]=Mo(o)},mounted(e,{value:t}){Md(e,t)},beforeUpdate(e,t,n){e[In]=Mo(n)},updated(e,{value:t}){e._assigning||Md(e,t)}};function Md(e,t){const n=e.multiple,o=We(t);if(!(n&&!o&&!da(t))){for(let a=0,l=e.options.length;a<l;a++){const r=e.options[a],i=ya(r);if(n)if(o){const u=typeof i;u==="string"||u==="number"?r.selected=t.some(p=>String(p)===String(i)):r.selected=Sr(t,i)>-1}else r.selected=t.has(i);else if(Ho(ya(r),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ya(e){return"_value"in e?e._value:e.value}function Id(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Dd={created(e,t,n){Ss(e,t,n,null,"created")},mounted(e,t,n){Ss(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){Ss(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){Ss(e,t,n,o,"updated")}};function Gv(e,t){switch(e){case"SELECT":return Gt;case"TEXTAREA":return Ae;default:switch(t){case"checkbox":return Lt;case"radio":return uo;default:return Ae}}}function Ss(e,t,n,o,a){const r=Gv(e.tagName,n.props&&n.props.type)[a];r&&r(e,t,n,o)}const qv=["ctrl","shift","alt","meta"],Kv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qv.some(n=>e[`${n}Key`]&&!t.includes(n))},Je=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...l)=>{for(let r=0;r<t.length;r++){const i=Kv[t[r]];if(i&&i(a,t))return}return e(a,...l)})},Yv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},an=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=a=>{if(!("key"in a))return;const l=wo(a.key);if(t.some(r=>r===l||Yv[r]===l))return e(a)})},Jv=Ht({patchProp:Fv},Sv);let Rd;function Od(){return Rd||(Rd=G1(Jv))}const Nd=(...e)=>{Od().render(...e)},Xv=(...e)=>{const t=Od().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Zv(o);if(!a)return;const l=t._component;!Ge(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const r=n(a,!1,Qv(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),r},t};function Qv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Zv(e){return Rt(e)?document.querySelector(e):e}/*!
  * shared v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Ts=typeof window<"u",Io=(e,t=!1)=>t?Symbol.for(e):Symbol(e),eh=(e,t,n)=>th({l:e,k:t,s:n}),th=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Bt=e=>typeof e=="number"&&isFinite(e),nh=e=>ri(e)==="[object Date]",ba=e=>ri(e)==="[object RegExp]",ks=e=>et(e)&&Object.keys(e).length===0,qt=Object.assign,oh=Object.create,St=(e=null)=>oh(e);let Pd;const ta=()=>Pd||(Pd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:St());function Fd(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const ah=Object.prototype.hasOwnProperty;function Bn(e,t){return ah.call(e,t)}const Ut=Array.isArray,At=e=>typeof e=="function",Ne=e=>typeof e=="string",ct=e=>typeof e=="boolean",pt=e=>e!==null&&typeof e=="object",lh=e=>pt(e)&&At(e.then)&&At(e.catch),Bd=Object.prototype.toString,ri=e=>Bd.call(e),et=e=>ri(e)==="[object Object]",sh=e=>e==null?"":Ut(e)||et(e)&&e.toString===Bd?JSON.stringify(e,null,2):String(e);function ii(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}function rh(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Cs=e=>!pt(e)||Ut(e);function Es(e,t){if(Cs(e)||Cs(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:o,des:a}=n.pop();Object.keys(o).forEach(l=>{l!=="__proto__"&&(pt(o[l])&&!pt(a[l])&&(a[l]=Array.isArray(o[l])?[]:St()),Cs(a[l])||Cs(o[l])?a[l]=o[l]:n.push({src:o[l],des:a[l]}))})}}/*!
  * message-compiler v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function ih(e,t,n){return{line:e,column:t,offset:n}}function ui(e,t,n){return{start:e,end:t}}const yt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},uh=17;function $s(e,t,n={}){const{domain:o,messages:a,args:l}=n,r=e,i=new SyntaxError(String(r));return i.code=e,t&&(i.location=t),i.domain=o,i}function ch(e){throw e}const co=" ",dh="\r",mn=`
`,ph="\u2028",fh="\u2029";function gh(e){const t=e;let n=0,o=1,a=1,l=0;const r=j=>t[j]===dh&&t[j+1]===mn,i=j=>t[j]===mn,u=j=>t[j]===fh,p=j=>t[j]===ph,d=j=>r(j)||i(j)||u(j)||p(j),c=()=>n,v=()=>o,m=()=>a,y=()=>l,S=j=>r(j)||u(j)||p(j)?mn:t[j],$=()=>S(n),T=()=>S(n+l);function D(){return l=0,d(n)&&(o++,a=0),r(n)&&n++,n++,a++,t[n]}function Y(){return r(n+l)&&l++,l++,t[n+l]}function x(){n=0,o=1,a=1,l=0}function P(j=0){l=j}function H(){const j=n+l;for(;j!==n;)D();l=0}return{index:c,line:v,column:m,peekOffset:y,charAt:S,currentChar:$,currentPeek:T,next:D,peek:Y,reset:x,resetPeek:P,skipToPeek:H}}const Do=void 0,mh=".",Ud="'",vh="tokenizer";function hh(e,t={}){const n=t.location!==!1,o=gh(e),a=()=>o.index(),l=()=>ih(o.line(),o.column(),o.index()),r=l(),i=a(),u={currentType:13,offset:i,startLoc:r,endLoc:r,lastType:13,lastOffset:i,lastStartLoc:r,lastEndLoc:r,braceNest:0,inLinked:!1,text:""},p=()=>u,{onError:d}=t;function c(A,_,R,...q){const Se=p();if(_.column+=R,_.offset+=R,d){const we=n?ui(Se.startLoc,_):null,ee=$s(A,we,{domain:vh,args:q});d(ee)}}function v(A,_,R){A.endLoc=l(),A.currentType=_;const q={type:_};return n&&(q.loc=ui(A.startLoc,A.endLoc)),R!=null&&(q.value=R),q}const m=A=>v(A,13);function y(A,_){return A.currentChar()===_?(A.next(),_):(c(yt.EXPECTED_TOKEN,l(),0,_),"")}function S(A){let _="";for(;A.currentPeek()===co||A.currentPeek()===mn;)_+=A.currentPeek(),A.peek();return _}function $(A){const _=S(A);return A.skipToPeek(),_}function T(A){if(A===Do)return!1;const _=A.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_===95}function D(A){if(A===Do)return!1;const _=A.charCodeAt(0);return _>=48&&_<=57}function Y(A,_){const{currentType:R}=_;if(R!==2)return!1;S(A);const q=T(A.currentPeek());return A.resetPeek(),q}function x(A,_){const{currentType:R}=_;if(R!==2)return!1;S(A);const q=A.currentPeek()==="-"?A.peek():A.currentPeek(),Se=D(q);return A.resetPeek(),Se}function P(A,_){const{currentType:R}=_;if(R!==2)return!1;S(A);const q=A.currentPeek()===Ud;return A.resetPeek(),q}function H(A,_){const{currentType:R}=_;if(R!==7)return!1;S(A);const q=A.currentPeek()===".";return A.resetPeek(),q}function j(A,_){const{currentType:R}=_;if(R!==8)return!1;S(A);const q=T(A.currentPeek());return A.resetPeek(),q}function K(A,_){const{currentType:R}=_;if(!(R===7||R===11))return!1;S(A);const q=A.currentPeek()===":";return A.resetPeek(),q}function X(A,_){const{currentType:R}=_;if(R!==9)return!1;const q=()=>{const we=A.currentPeek();return we==="{"?T(A.peek()):we==="@"||we==="|"||we===":"||we==="."||we===co||!we?!1:we===mn?(A.peek(),q()):se(A,!1)},Se=q();return A.resetPeek(),Se}function ye(A){S(A);const _=A.currentPeek()==="|";return A.resetPeek(),_}function se(A,_=!0){const R=(Se=!1,we="")=>{const ee=A.currentPeek();return ee==="{"||ee==="@"||!ee?Se:ee==="|"?!(we===co||we===mn):ee===co?(A.peek(),R(!0,co)):ee===mn?(A.peek(),R(!0,mn)):!0},q=R();return _&&A.resetPeek(),q}function N(A,_){const R=A.currentChar();return R===Do?Do:_(R)?(A.next(),R):null}function Z(A){const _=A.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36}function te(A){return N(A,Z)}function z(A){const _=A.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36||_===45}function ne(A){return N(A,z)}function oe(A){const _=A.charCodeAt(0);return _>=48&&_<=57}function F(A){return N(A,oe)}function B(A){const _=A.charCodeAt(0);return _>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102}function ie(A){return N(A,B)}function Ce(A){let _="",R="";for(;_=F(A);)R+=_;return R}function re(A){let _="";for(;;){const R=A.currentChar();if(R==="{"||R==="}"||R==="@"||R==="|"||!R)break;if(R===co||R===mn)if(se(A))_+=R,A.next();else{if(ye(A))break;_+=R,A.next()}else _+=R,A.next()}return _}function ge(A){$(A);let _="",R="";for(;_=ne(A);)R+=_;return A.currentChar()===Do&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R}function ce(A){$(A);let _="";return A.currentChar()==="-"?(A.next(),_+=`-${Ce(A)}`):_+=Ce(A),A.currentChar()===Do&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),_}function ae(A){return A!==Ud&&A!==mn}function G(A){$(A),y(A,"'");let _="",R="";for(;_=N(A,ae);)_==="\\"?R+=L(A):R+=_;const q=A.currentChar();return q===mn||q===Do?(c(yt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),q===mn&&(A.next(),y(A,"'")),R):(y(A,"'"),R)}function L(A){const _=A.currentChar();switch(_){case"\\":case"'":return A.next(),`\\${_}`;case"u":return U(A,_,4);case"U":return U(A,_,6);default:return c(yt.UNKNOWN_ESCAPE_SEQUENCE,l(),0,_),""}}function U(A,_,R){y(A,_);let q="";for(let Se=0;Se<R;Se++){const we=ie(A);if(!we){c(yt.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${_}${q}${A.currentChar()}`);break}q+=we}return`\\${_}${q}`}function V(A){return A!=="{"&&A!=="}"&&A!==co&&A!==mn}function I(A){$(A);let _="",R="";for(;_=N(A,V);)R+=_;return R}function W(A){let _="",R="";for(;_=te(A);)R+=_;return R}function C(A){const _=R=>{const q=A.currentChar();return q==="{"||q==="@"||q==="|"||q==="("||q===")"||!q||q===co?R:(R+=q,A.next(),_(R))};return _("")}function b(A){$(A);const _=y(A,"|");return $(A),_}function O(A,_){let R=null;switch(A.currentChar()){case"{":return _.braceNest>=1&&c(yt.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),A.next(),R=v(_,2,"{"),$(A),_.braceNest++,R;case"}":return _.braceNest>0&&_.currentType===2&&c(yt.EMPTY_PLACEHOLDER,l(),0),A.next(),R=v(_,3,"}"),_.braceNest--,_.braceNest>0&&$(A),_.inLinked&&_.braceNest===0&&(_.inLinked=!1),R;case"@":return _.braceNest>0&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R=Q(A,_)||m(_),_.braceNest=0,R;default:{let Se=!0,we=!0,ee=!0;if(ye(A))return _.braceNest>0&&c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),R=v(_,1,b(A)),_.braceNest=0,_.inLinked=!1,R;if(_.braceNest>0&&(_.currentType===4||_.currentType===5||_.currentType===6))return c(yt.UNTERMINATED_CLOSING_BRACE,l(),0),_.braceNest=0,pe(A,_);if(Se=Y(A,_))return R=v(_,4,ge(A)),$(A),R;if(we=x(A,_))return R=v(_,5,ce(A)),$(A),R;if(ee=P(A,_))return R=v(_,6,G(A)),$(A),R;if(!Se&&!we&&!ee)return R=v(_,12,I(A)),c(yt.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,R.value),$(A),R;break}}return R}function Q(A,_){const{currentType:R}=_;let q=null;const Se=A.currentChar();switch((R===7||R===8||R===11||R===9)&&(Se===mn||Se===co)&&c(yt.INVALID_LINKED_FORMAT,l(),0),Se){case"@":return A.next(),q=v(_,7,"@"),_.inLinked=!0,q;case".":return $(A),A.next(),v(_,8,".");case":":return $(A),A.next(),v(_,9,":");default:return ye(A)?(q=v(_,1,b(A)),_.braceNest=0,_.inLinked=!1,q):H(A,_)||K(A,_)?($(A),Q(A,_)):j(A,_)?($(A),v(_,11,W(A))):X(A,_)?($(A),Se==="{"?O(A,_)||q:v(_,10,C(A))):(R===7&&c(yt.INVALID_LINKED_FORMAT,l(),0),_.braceNest=0,_.inLinked=!1,pe(A,_))}}function pe(A,_){let R={type:13};if(_.braceNest>0)return O(A,_)||m(_);if(_.inLinked)return Q(A,_)||m(_);switch(A.currentChar()){case"{":return O(A,_)||m(_);case"}":return c(yt.UNBALANCED_CLOSING_BRACE,l(),0),A.next(),v(_,3,"}");case"@":return Q(A,_)||m(_);default:{if(ye(A))return R=v(_,1,b(A)),_.braceNest=0,_.inLinked=!1,R;if(se(A))return v(_,0,re(A));break}}return R}function be(){const{currentType:A,offset:_,startLoc:R,endLoc:q}=u;return u.lastType=A,u.lastOffset=_,u.lastStartLoc=R,u.lastEndLoc=q,u.offset=a(),u.startLoc=l(),o.currentChar()===Do?v(u,13):pe(o,u)}return{nextToken:be,currentOffset:a,currentPosition:l,context:p}}const _h="parser",yh=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function bh(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(t||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):""}}}function wh(e={}){const t=e.location!==!1,{onError:n}=e;function o(T,D,Y,x,...P){const H=T.currentPosition();if(H.offset+=x,H.column+=x,n){const j=t?ui(Y,H):null,K=$s(D,j,{domain:_h,args:P});n(K)}}function a(T,D,Y){const x={type:T};return t&&(x.start=D,x.end=D,x.loc={start:Y,end:Y}),x}function l(T,D,Y,x){t&&(T.end=D,T.loc&&(T.loc.end=Y))}function r(T,D){const Y=T.context(),x=a(3,Y.offset,Y.startLoc);return x.value=D,l(x,T.currentOffset(),T.currentPosition()),x}function i(T,D){const Y=T.context(),{lastOffset:x,lastStartLoc:P}=Y,H=a(5,x,P);return H.index=parseInt(D,10),T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function u(T,D){const Y=T.context(),{lastOffset:x,lastStartLoc:P}=Y,H=a(4,x,P);return H.key=D,T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function p(T,D){const Y=T.context(),{lastOffset:x,lastStartLoc:P}=Y,H=a(9,x,P);return H.value=D.replace(yh,bh),T.nextToken(),l(H,T.currentOffset(),T.currentPosition()),H}function d(T){const D=T.nextToken(),Y=T.context(),{lastOffset:x,lastStartLoc:P}=Y,H=a(8,x,P);return D.type!==11?(o(T,yt.UNEXPECTED_EMPTY_LINKED_MODIFIER,Y.lastStartLoc,0),H.value="",l(H,x,P),{nextConsumeToken:D,node:H}):(D.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,Y.lastStartLoc,0,Xn(D)),H.value=D.value||"",l(H,T.currentOffset(),T.currentPosition()),{node:H})}function c(T,D){const Y=T.context(),x=a(7,Y.offset,Y.startLoc);return x.value=D,l(x,T.currentOffset(),T.currentPosition()),x}function v(T){const D=T.context(),Y=a(6,D.offset,D.startLoc);let x=T.nextToken();if(x.type===8){const P=d(T);Y.modifier=P.node,x=P.nextConsumeToken||T.nextToken()}switch(x.type!==9&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(x)),x=T.nextToken(),x.type===2&&(x=T.nextToken()),x.type){case 10:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(x)),Y.key=c(T,x.value||"");break;case 4:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(x)),Y.key=u(T,x.value||"");break;case 5:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(x)),Y.key=i(T,x.value||"");break;case 6:x.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(x)),Y.key=p(T,x.value||"");break;default:{o(T,yt.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const P=T.context(),H=a(7,P.offset,P.startLoc);return H.value="",l(H,P.offset,P.startLoc),Y.key=H,l(Y,P.offset,P.startLoc),{nextConsumeToken:x,node:Y}}}return l(Y,T.currentOffset(),T.currentPosition()),{node:Y}}function m(T){const D=T.context(),Y=D.currentType===1?T.currentOffset():D.offset,x=D.currentType===1?D.endLoc:D.startLoc,P=a(2,Y,x);P.items=[];let H=null;do{const X=H||T.nextToken();switch(H=null,X.type){case 0:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(X)),P.items.push(r(T,X.value||""));break;case 5:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(X)),P.items.push(i(T,X.value||""));break;case 4:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(X)),P.items.push(u(T,X.value||""));break;case 6:X.value==null&&o(T,yt.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Xn(X)),P.items.push(p(T,X.value||""));break;case 7:{const ye=v(T);P.items.push(ye.node),H=ye.nextConsumeToken||null;break}}}while(D.currentType!==13&&D.currentType!==1);const j=D.currentType===1?D.lastOffset:T.currentOffset(),K=D.currentType===1?D.lastEndLoc:T.currentPosition();return l(P,j,K),P}function y(T,D,Y,x){const P=T.context();let H=x.items.length===0;const j=a(1,D,Y);j.cases=[],j.cases.push(x);do{const K=m(T);H||(H=K.items.length===0),j.cases.push(K)}while(P.currentType!==13);return H&&o(T,yt.MUST_HAVE_MESSAGES_IN_PLURAL,Y,0),l(j,T.currentOffset(),T.currentPosition()),j}function S(T){const D=T.context(),{offset:Y,startLoc:x}=D,P=m(T);return D.currentType===13?P:y(T,Y,x,P)}function $(T){const D=hh(T,qt({},e)),Y=D.context(),x=a(0,Y.offset,Y.startLoc);return t&&x.loc&&(x.loc.source=T),x.body=S(D),e.onCacheKey&&(x.cacheKey=e.onCacheKey(T)),Y.currentType!==13&&o(D,yt.UNEXPECTED_LEXICAL_ANALYSIS,Y.lastStartLoc,0,T[Y.offset]||""),l(x,D.currentOffset(),D.currentPosition()),x}return{parse:$}}function Xn(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function xh(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:l=>(n.helpers.add(l),l)}}function Vd(e,t){for(let n=0;n<e.length;n++)ci(e[n],t)}function ci(e,t){switch(e.type){case 1:Vd(e.cases,t),t.helper("plural");break;case 2:Vd(e.items,t);break;case 6:{ci(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function Sh(e,t={}){const n=xh(e);n.helper("normalize"),e.body&&ci(e.body,n);const o=n.context();e.helpers=Array.from(o.helpers)}function Th(e){const t=e.body;return t.type===2?Wd(t):t.cases.forEach(n=>Wd(n)),e}function Wd(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const o=e.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;t.push(o.value)}if(t.length===e.items.length){e.static=ii(t);for(let n=0;n<e.items.length;n++){const o=e.items[n];(o.type===3||o.type===9)&&delete o.value}}}}function wa(e){switch(e.t=e.type,e.type){case 0:{const t=e;wa(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let o=0;o<n.length;o++)wa(n[o]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let o=0;o<n.length;o++)wa(n[o]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;wa(t.key),t.k=t.key,delete t.key,t.modifier&&(wa(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function kh(e,t){const{filename:n,breakLineCode:o,needIndent:a}=t,l=t.location!==!1,r={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:a,indentLevel:0};l&&e.loc&&(r.source=e.loc.source);const i=()=>r;function u(S,$){r.code+=S}function p(S,$=!0){const T=$?o:"";u(a?T+"  ".repeat(S):T)}function d(S=!0){const $=++r.indentLevel;S&&p($)}function c(S=!0){const $=--r.indentLevel;S&&p($)}function v(){p(r.indentLevel)}return{context:i,push:u,indent:d,deindent:c,newline:v,helper:S=>`_${S}`,needIndent:()=>r.needIndent}}function Ch(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),xa(e,t.key),t.modifier?(e.push(", "),xa(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function Eh(e,t){const{helper:n,needIndent:o}=e;e.push(`${n("normalize")}([`),e.indent(o());const a=t.items.length;for(let l=0;l<a&&(xa(e,t.items[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}function $h(e,t){const{helper:n,needIndent:o}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(o());const a=t.cases.length;for(let l=0;l<a&&(xa(e,t.cases[l]),l!==a-1);l++)e.push(", ");e.deindent(o()),e.push("])")}}function Lh(e,t){t.body?xa(e,t.body):e.push("null")}function xa(e,t){const{helper:n}=e;switch(t.type){case 0:Lh(e,t);break;case 1:$h(e,t);break;case 2:Eh(e,t);break;case 6:Ch(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const Ah=(e,t={})=>{const n=Ne(t.mode)?t.mode:"normal",o=Ne(t.filename)?t.filename:"message.intl";t.sourceMap;const a=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,l=t.needIndent?t.needIndent:n!=="arrow",r=e.helpers||[],i=kh(e,{filename:o,breakLineCode:a,needIndent:l});i.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),i.indent(l),r.length>0&&(i.push(`const { ${ii(r.map(d=>`${d}: _${d}`),", ")} } = ctx`),i.newline()),i.push("return "),xa(i,e),i.deindent(l),i.push("}"),delete e.helpers;const{code:u,map:p}=i.context();return{ast:e,code:u,map:p?p.toJSON():void 0}};function Mh(e,t={}){const n=qt({},t),o=!!n.jit,a=!!n.minify,l=n.optimize==null?!0:n.optimize,i=wh(n).parse(e);return o?(l&&Th(i),a&&wa(i),{ast:i,code:""}):(Sh(i,n),Ah(i,n))}/*!
  * core-base v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Ih(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ta().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ta().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function di(e){return n=>Dh(n,e)}function Dh(e,t){const n=Oh(t);if(n==null)throw ml(0);if(fi(n)===1){const l=Ph(n);return e.plural(l.reduce((r,i)=>[...r,zd(e,i)],[]))}else return zd(e,n)}const Rh=["b","body"];function Oh(e){return Ro(e,Rh)}const Nh=["c","cases"];function Ph(e){return Ro(e,Nh,[])}function zd(e,t){const n=Bh(t);if(n!=null)return e.type==="text"?n:e.normalize([n]);{const o=Vh(t).reduce((a,l)=>[...a,pi(e,l)],[]);return e.normalize(o)}}const Fh=["s","static"];function Bh(e){return Ro(e,Fh)}const Uh=["i","items"];function Vh(e){return Ro(e,Uh,[])}function pi(e,t){const n=fi(t);switch(n){case 3:return Ls(t,n);case 9:return Ls(t,n);case 4:{const o=t;if(Bn(o,"k")&&o.k)return e.interpolate(e.named(o.k));if(Bn(o,"key")&&o.key)return e.interpolate(e.named(o.key));throw ml(n)}case 5:{const o=t;if(Bn(o,"i")&&Bt(o.i))return e.interpolate(e.list(o.i));if(Bn(o,"index")&&Bt(o.index))return e.interpolate(e.list(o.index));throw ml(n)}case 6:{const o=t,a=jh(o),l=qh(o);return e.linked(pi(e,l),a?pi(e,a):void 0,e.type)}case 7:return Ls(t,n);case 8:return Ls(t,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Wh=["t","type"];function fi(e){return Ro(e,Wh)}const zh=["v","value"];function Ls(e,t){const n=Ro(e,zh);if(n)return n;throw ml(t)}const Hh=["m","modifier"];function jh(e){return Ro(e,Hh)}const Gh=["k","key"];function qh(e){const t=Ro(e,Gh);if(t)return t;throw ml(6)}function Ro(e,t,n){for(let o=0;o<t.length;o++){const a=t[o];if(Bn(e,a)&&e[a]!=null)return e[a]}return n}function ml(e){return new Error(`unhandled node type: ${e}`)}const Kh=e=>e;let As=St();function Sa(e){return pt(e)&&fi(e)===0&&(Bn(e,"b")||Bn(e,"body"))}function Yh(e,t={}){let n=!1;const o=t.onError||ch;return t.onError=a=>{n=!0,o(a)},{...Mh(e,t),detectError:n}}function Jh(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Ne(e)){ct(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||Kh)(e),a=As[o];if(a)return a;const{ast:l,detectError:r}=Yh(e,{...t,location:!1,jit:!0}),i=di(l);return r?i:As[o]=i}else{const n=e.cacheKey;if(n){const o=As[n];return o||(As[n]=di(e))}else return di(e)}}let vl=null;function Xh(e){vl=e}function Qh(e,t,n){vl&&vl.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const Zh=e2("function:translate");function e2(e){return t=>vl&&vl.emit(e,t)}const po={INVALID_ARGUMENT:uh,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},t2=24;function fo(e){return $s(e,null,void 0)}function gi(e,t){return t.locale!=null?Hd(t.locale):Hd(e.locale)}let mi;function Hd(e){if(Ne(e))return e;if(At(e)){if(e.resolvedOnce&&mi!=null)return mi;if(e.constructor.name==="Function"){const t=e();if(lh(t))throw fo(po.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return mi=t}else throw fo(po.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw fo(po.NOT_SUPPORT_LOCALE_TYPE)}function n2(e,t,n){return[...new Set([n,...Ut(t)?t:pt(t)?Object.keys(t):Ne(t)?[t]:[n]])]}function jd(e,t,n){const o=Ne(n)?n:hl,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let l=a.__localeChainCache.get(o);if(!l){l=[];let r=[n];for(;Ut(r);)r=Gd(l,r,t);const i=Ut(t)||!et(t)?t:t.default?t.default:null;r=Ne(i)?[i]:i,Ut(r)&&Gd(l,r,!1),a.__localeChainCache.set(o,l)}return l}function Gd(e,t,n){let o=!0;for(let a=0;a<t.length&&ct(o);a++){const l=t[a];Ne(l)&&(o=o2(e,t[a],n))}return o}function o2(e,t,n){let o;const a=t.split("-");do{const l=a.join("-");o=a2(e,l,n),a.splice(-1,1)}while(a.length&&o===!0);return o}function a2(e,t,n){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(Ut(n)||et(n))&&n[a]&&(o=n[a])}return o}const Oo=[];Oo[0]={w:[0],i:[3,0],"[":[4],o:[7]},Oo[1]={w:[1],".":[2],"[":[4],o:[7]},Oo[2]={w:[2],i:[3,0],0:[3,0]},Oo[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Oo[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Oo[5]={"'":[4,0],o:8,l:[5,0]},Oo[6]={'"':[4,0],o:8,l:[6,0]};const l2=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function s2(e){return l2.test(e)}function r2(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function i2(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function u2(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:s2(t)?r2(t):"*"+t}function c2(e){const t=[];let n=-1,o=0,a=0,l,r,i,u,p,d,c;const v=[];v[0]=()=>{r===void 0?r=i:r+=i},v[1]=()=>{r!==void 0&&(t.push(r),r=void 0)},v[2]=()=>{v[0](),a++},v[3]=()=>{if(a>0)a--,o=4,v[0]();else{if(a=0,r===void 0||(r=u2(r),r===!1))return!1;v[1]()}};function m(){const y=e[n+1];if(o===5&&y==="'"||o===6&&y==='"')return n++,i="\\"+y,v[0](),!0}for(;o!==null;)if(n++,l=e[n],!(l==="\\"&&m())){if(u=i2(l),c=Oo[o],p=c[u]||c.l||8,p===8||(o=p[0],p[1]!==void 0&&(d=v[p[1]],d&&(i=l,d()===!1))))return;if(o===7)return t}}const qd=new Map;function d2(e,t){return pt(e)?e[t]:null}function p2(e,t){if(!pt(e))return null;let n=qd.get(t);if(n||(n=c2(t),n&&qd.set(t,n)),!n)return null;const o=n.length;let a=e,l=0;for(;l<o;){const r=a[n[l]];if(r===void 0||At(a))return null;a=r,l++}return a}const f2="11.1.2",Ms=-1,hl="en-US",Kd="",Yd=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function g2(){return{upper:(e,t)=>t==="text"&&Ne(e)?e.toUpperCase():t==="vnode"&&pt(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Ne(e)?e.toLowerCase():t==="vnode"&&pt(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Ne(e)?Yd(e):t==="vnode"&&pt(e)&&"__v_isVNode"in e?Yd(e.children):e}}let Jd;function m2(e){Jd=e}let Xd;function v2(e){Xd=e}let Qd;function h2(e){Qd=e}let Zd=null;const _2=e=>{Zd=e},y2=()=>Zd;let ep=null;const tp=e=>{ep=e},b2=()=>ep;let np=0;function w2(e={}){const t=At(e.onWarn)?e.onWarn:rh,n=Ne(e.version)?e.version:f2,o=Ne(e.locale)||At(e.locale)?e.locale:hl,a=At(o)?hl:o,l=Ut(e.fallbackLocale)||et(e.fallbackLocale)||Ne(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,r=et(e.messages)?e.messages:vi(a),i=et(e.datetimeFormats)?e.datetimeFormats:vi(a),u=et(e.numberFormats)?e.numberFormats:vi(a),p=qt(St(),e.modifiers,g2()),d=e.pluralRules||St(),c=At(e.missing)?e.missing:null,v=ct(e.missingWarn)||ba(e.missingWarn)?e.missingWarn:!0,m=ct(e.fallbackWarn)||ba(e.fallbackWarn)?e.fallbackWarn:!0,y=!!e.fallbackFormat,S=!!e.unresolving,$=At(e.postTranslation)?e.postTranslation:null,T=et(e.processor)?e.processor:null,D=ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,Y=!!e.escapeParameter,x=At(e.messageCompiler)?e.messageCompiler:Jd,P=At(e.messageResolver)?e.messageResolver:Xd||d2,H=At(e.localeFallbacker)?e.localeFallbacker:Qd||n2,j=pt(e.fallbackContext)?e.fallbackContext:void 0,K=e,X=pt(K.__datetimeFormatters)?K.__datetimeFormatters:new Map,ye=pt(K.__numberFormatters)?K.__numberFormatters:new Map,se=pt(K.__meta)?K.__meta:{};np++;const N={version:n,cid:np,locale:o,fallbackLocale:l,messages:r,modifiers:p,pluralRules:d,missing:c,missingWarn:v,fallbackWarn:m,fallbackFormat:y,unresolving:S,postTranslation:$,processor:T,warnHtmlMessage:D,escapeParameter:Y,messageCompiler:x,messageResolver:P,localeFallbacker:H,fallbackContext:j,onWarn:t,__meta:se};return N.datetimeFormats=i,N.numberFormats=u,N.__datetimeFormatters=X,N.__numberFormatters=ye,__INTLIFY_PROD_DEVTOOLS__&&Qh(N,n,se),N}const vi=e=>({[e]:St()});function hi(e,t,n,o,a){const{missing:l,onWarn:r}=e;if(l!==null){const i=l(e,n,t,a);return Ne(i)?i:t}else return t}function _l(e,t,n){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function x2(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function S2(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let o=n+1;o<t.length;o++)if(x2(e,t[o]))return!0;return!1}function op(e,...t){const{datetimeFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:r}=e,{__datetimeFormatters:i}=e,[u,p,d,c]=_i(...t),v=ct(d.missingWarn)?d.missingWarn:e.missingWarn;ct(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn;const m=!!d.part,y=gi(e,d),S=r(e,a,y);if(!Ne(u)||u==="")return new Intl.DateTimeFormat(y,c).format(p);let $={},T,D=null;const Y="datetime format";for(let H=0;H<S.length&&(T=S[H],$=n[T]||{},D=$[u],!et(D));H++)hi(e,u,T,v,Y);if(!et(D)||!Ne(T))return o?Ms:u;let x=`${T}__${u}`;ks(c)||(x=`${x}__${JSON.stringify(c)}`);let P=i.get(x);return P||(P=new Intl.DateTimeFormat(T,qt({},D,c)),i.set(x,P)),m?P.formatToParts(p):P.format(p)}const ap=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function _i(...e){const[t,n,o,a]=e,l=St();let r=St(),i;if(Ne(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw fo(po.INVALID_ISO_DATE_ARGUMENT);const p=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();i=new Date(p);try{i.toISOString()}catch{throw fo(po.INVALID_ISO_DATE_ARGUMENT)}}else if(nh(t)){if(isNaN(t.getTime()))throw fo(po.INVALID_DATE_ARGUMENT);i=t}else if(Bt(t))i=t;else throw fo(po.INVALID_ARGUMENT);return Ne(n)?l.key=n:et(n)&&Object.keys(n).forEach(u=>{ap.includes(u)?r[u]=n[u]:l[u]=n[u]}),Ne(o)?l.locale=o:et(o)&&(r=o),et(a)&&(r=a),[l.key||"",i,l,r]}function lp(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__datetimeFormatters.has(l)&&o.__datetimeFormatters.delete(l)}}function sp(e,...t){const{numberFormats:n,unresolving:o,fallbackLocale:a,onWarn:l,localeFallbacker:r}=e,{__numberFormatters:i}=e,[u,p,d,c]=yi(...t),v=ct(d.missingWarn)?d.missingWarn:e.missingWarn;ct(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn;const m=!!d.part,y=gi(e,d),S=r(e,a,y);if(!Ne(u)||u==="")return new Intl.NumberFormat(y,c).format(p);let $={},T,D=null;const Y="number format";for(let H=0;H<S.length&&(T=S[H],$=n[T]||{},D=$[u],!et(D));H++)hi(e,u,T,v,Y);if(!et(D)||!Ne(T))return o?Ms:u;let x=`${T}__${u}`;ks(c)||(x=`${x}__${JSON.stringify(c)}`);let P=i.get(x);return P||(P=new Intl.NumberFormat(T,qt({},D,c)),i.set(x,P)),m?P.formatToParts(p):P.format(p)}const rp=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function yi(...e){const[t,n,o,a]=e,l=St();let r=St();if(!Bt(t))throw fo(po.INVALID_ARGUMENT);const i=t;return Ne(n)?l.key=n:et(n)&&Object.keys(n).forEach(u=>{rp.includes(u)?r[u]=n[u]:l[u]=n[u]}),Ne(o)?l.locale=o:et(o)&&(r=o),et(a)&&(r=a),[l.key||"",i,l,r]}function ip(e,t,n){const o=e;for(const a in n){const l=`${t}__${a}`;o.__numberFormatters.has(l)&&o.__numberFormatters.delete(l)}}const T2=e=>e,k2=e=>"",C2="text",E2=e=>e.length===0?"":ii(e),$2=sh;function up(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function L2(e){const t=Bt(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Bt(e.named.count)||Bt(e.named.n))?Bt(e.named.count)?e.named.count:Bt(e.named.n)?e.named.n:t:t}function A2(e,t){t.count||(t.count=e),t.n||(t.n=e)}function M2(e={}){const t=e.locale,n=L2(e),o=pt(e.pluralRules)&&Ne(t)&&At(e.pluralRules[t])?e.pluralRules[t]:up,a=pt(e.pluralRules)&&Ne(t)&&At(e.pluralRules[t])?up:void 0,l=T=>T[o(n,T.length,a)],r=e.list||[],i=T=>r[T],u=e.named||St();Bt(e.pluralIndex)&&A2(n,u);const p=T=>u[T];function d(T,D){const Y=At(e.messages)?e.messages(T,!!D):pt(e.messages)?e.messages[T]:!1;return Y||(e.parent?e.parent.message(T):k2)}const c=T=>e.modifiers?e.modifiers[T]:T2,v=et(e.processor)&&At(e.processor.normalize)?e.processor.normalize:E2,m=et(e.processor)&&At(e.processor.interpolate)?e.processor.interpolate:$2,y=et(e.processor)&&Ne(e.processor.type)?e.processor.type:C2,$={list:i,named:p,plural:l,linked:(T,...D)=>{const[Y,x]=D;let P="text",H="";D.length===1?pt(Y)?(H=Y.modifier||H,P=Y.type||P):Ne(Y)&&(H=Y||H):D.length===2&&(Ne(Y)&&(H=Y||H),Ne(x)&&(P=x||P));const j=d(T,!0)($),K=P==="vnode"&&Ut(j)&&H?j[0]:j;return H?c(H)(K,P):K},message:d,type:y,interpolate:m,normalize:v,values:qt(St(),r,u)};return $}const cp=()=>"",Dn=e=>At(e);function dp(e,...t){const{fallbackFormat:n,postTranslation:o,unresolving:a,messageCompiler:l,fallbackLocale:r,messages:i}=e,[u,p]=bi(...t),d=ct(p.missingWarn)?p.missingWarn:e.missingWarn,c=ct(p.fallbackWarn)?p.fallbackWarn:e.fallbackWarn,v=ct(p.escapeParameter)?p.escapeParameter:e.escapeParameter,m=!!p.resolvedMessage,y=Ne(p.default)||ct(p.default)?ct(p.default)?l?u:()=>u:p.default:n?l?u:()=>u:null,S=n||y!=null&&(Ne(y)||At(y)),$=gi(e,p);v&&I2(p);let[T,D,Y]=m?[u,$,i[$]||St()]:pp(e,u,$,r,c,d),x=T,P=u;if(!m&&!(Ne(x)||Sa(x)||Dn(x))&&S&&(x=y,P=x),!m&&(!(Ne(x)||Sa(x)||Dn(x))||!Ne(D)))return a?Ms:u;let H=!1;const j=()=>{H=!0},K=Dn(x)?x:fp(e,u,D,x,P,j);if(H)return x;const X=O2(e,D,Y,p),ye=M2(X),se=D2(e,K,ye),N=o?o(se,u):se;if(__INTLIFY_PROD_DEVTOOLS__){const Z={timestamp:Date.now(),key:Ne(u)?u:Dn(x)?x.key:"",locale:D||(Dn(x)?x.locale:""),format:Ne(x)?x:Dn(x)?x.source:"",message:N};Z.meta=qt({},e.__meta,y2()||{}),Zh(Z)}return N}function I2(e){Ut(e.list)?e.list=e.list.map(t=>Ne(t)?Fd(t):t):pt(e.named)&&Object.keys(e.named).forEach(t=>{Ne(e.named[t])&&(e.named[t]=Fd(e.named[t]))})}function pp(e,t,n,o,a,l){const{messages:r,onWarn:i,messageResolver:u,localeFallbacker:p}=e,d=p(e,o,n);let c=St(),v,m=null;const y="translate";for(let S=0;S<d.length&&(v=d[S],c=r[v]||St(),(m=u(c,t))===null&&(m=c[t]),!(Ne(m)||Sa(m)||Dn(m)));S++)if(!S2(v,d)){const $=hi(e,t,v,l,y);$!==t&&(m=$)}return[m,v,c]}function fp(e,t,n,o,a,l){const{messageCompiler:r,warnHtmlMessage:i}=e;if(Dn(o)){const p=o;return p.locale=p.locale||n,p.key=p.key||t,p}if(r==null){const p=()=>o;return p.locale=n,p.key=t,p}const u=r(o,R2(e,n,a,o,i,l));return u.locale=n,u.key=t,u.source=o,u}function D2(e,t,n){return t(n)}function bi(...e){const[t,n,o]=e,a=St();if(!Ne(t)&&!Bt(t)&&!Dn(t)&&!Sa(t))throw fo(po.INVALID_ARGUMENT);const l=Bt(t)?String(t):(Dn(t),t);return Bt(n)?a.plural=n:Ne(n)?a.default=n:et(n)&&!ks(n)?a.named=n:Ut(n)&&(a.list=n),Bt(o)?a.plural=o:Ne(o)?a.default=o:et(o)&&qt(a,o),[l,a]}function R2(e,t,n,o,a,l){return{locale:t,key:n,warnHtmlMessage:a,onError:r=>{throw l&&l(r),r},onCacheKey:r=>eh(t,n,r)}}function O2(e,t,n,o){const{modifiers:a,pluralRules:l,messageResolver:r,fallbackLocale:i,fallbackWarn:u,missingWarn:p,fallbackContext:d}=e,v={locale:t,modifiers:a,pluralRules:l,messages:(m,y)=>{let S=r(n,m);if(S==null&&(d||y)){const[,,$]=pp(d||e,m,t,i,u,p);S=r($,m)}if(Ne(S)||Sa(S)){let $=!1;const D=fp(e,m,t,S,m,()=>{$=!0});return $?cp:D}else return Dn(S)?S:cp}};return e.processor&&(v.processor=e.processor),o.list&&(v.list=o.list),o.named&&(v.named=o.named),Bt(o.plural)&&(v.pluralIndex=o.plural),v}Ih();/*!
  * vue-i18n v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const N2="11.1.2";function P2(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(ta().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(ta().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ta().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ta().__INTLIFY_PROD_DEVTOOLS__=!1)}const _n={UNEXPECTED_RETURN_TYPE:t2,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Sn(e,...t){return $s(e,null,void 0)}const wi=Io("__translateVNode"),xi=Io("__datetimeParts"),Si=Io("__numberParts"),gp=Io("__setPluralRules"),mp=Io("__injectWithOption"),Ti=Io("__dispose");function yl(e){if(!pt(e))return e;for(const t in e)if(Bn(e,t))if(!t.includes("."))pt(e[t])&&yl(e[t]);else{const n=t.split("."),o=n.length-1;let a=e,l=!1;for(let r=0;r<o;r++){if(n[r]==="__proto__")throw new Error(`unsafe key: ${n[r]}`);if(n[r]in a||(a[n[r]]=St()),!pt(a[n[r]])){l=!0;break}a=a[n[r]]}l||(a[n[o]]=e[t],delete e[t]),pt(a[n[o]])&&yl(a[n[o]])}return e}function ki(e,t){const{messages:n,__i18n:o,messageResolver:a,flatJson:l}=t,r=et(n)?n:Ut(o)?St():{[e]:St()};if(Ut(o)&&o.forEach(i=>{if("locale"in i&&"resource"in i){const{locale:u,resource:p}=i;u?(r[u]=r[u]||St(),Es(p,r[u])):Es(p,r)}else Ne(i)&&Es(JSON.parse(i),r)}),a==null&&l)for(const i in r)Bn(r,i)&&yl(r[i]);return r}function vp(e){return e.type}function hp(e,t,n){let o=pt(t.messages)?t.messages:St();"__i18nGlobal"in n&&(o=ki(e.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const a=Object.keys(o);a.length&&a.forEach(l=>{e.mergeLocaleMessage(l,o[l])});{if(pt(t.datetimeFormats)){const l=Object.keys(t.datetimeFormats);l.length&&l.forEach(r=>{e.mergeDateTimeFormat(r,t.datetimeFormats[r])})}if(pt(t.numberFormats)){const l=Object.keys(t.numberFormats);l.length&&l.forEach(r=>{e.mergeNumberFormat(r,t.numberFormats[r])})}}}function _p(e){return Ve(sl,null,e,0)}const yp="__INTLIFY_META__",bp=()=>[],F2=()=>!1;let wp=0;function xp(e){return(t,n,o,a)=>e(n,o,Zo()||void 0,a)}const B2=()=>{const e=Zo();let t=null;return e&&(t=vp(e)[yp])?{[yp]:t}:null};function Ci(e={}){const{__root:t,__injectWithOption:n}=e,o=t===void 0,a=e.flatJson,l=Ts?h:Qm;let r=ct(e.inheritLocale)?e.inheritLocale:!0;const i=l(t&&r?t.locale.value:Ne(e.locale)?e.locale:hl),u=l(t&&r?t.fallbackLocale.value:Ne(e.fallbackLocale)||Ut(e.fallbackLocale)||et(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i.value),p=l(ki(i.value,e)),d=l(et(e.datetimeFormats)?e.datetimeFormats:{[i.value]:{}}),c=l(et(e.numberFormats)?e.numberFormats:{[i.value]:{}});let v=t?t.missingWarn:ct(e.missingWarn)||ba(e.missingWarn)?e.missingWarn:!0,m=t?t.fallbackWarn:ct(e.fallbackWarn)||ba(e.fallbackWarn)?e.fallbackWarn:!0,y=t?t.fallbackRoot:ct(e.fallbackRoot)?e.fallbackRoot:!0,S=!!e.fallbackFormat,$=At(e.missing)?e.missing:null,T=At(e.missing)?xp(e.missing):null,D=At(e.postTranslation)?e.postTranslation:null,Y=t?t.warnHtmlMessage:ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter;const P=t?t.modifiers:et(e.modifiers)?e.modifiers:{};let H=e.pluralRules||t&&t.pluralRules,j;j=(()=>{o&&tp(null);const ee={version:N2,locale:i.value,fallbackLocale:u.value,messages:p.value,modifiers:P,pluralRules:H,missing:T===null?void 0:T,missingWarn:v,fallbackWarn:m,fallbackFormat:S,unresolving:!0,postTranslation:D===null?void 0:D,warnHtmlMessage:Y,escapeParameter:x,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ee.datetimeFormats=d.value,ee.numberFormats=c.value,ee.__datetimeFormatters=et(j)?j.__datetimeFormatters:void 0,ee.__numberFormatters=et(j)?j.__numberFormatters:void 0;const me=w2(ee);return o&&tp(me),me})(),_l(j,i.value,u.value);function X(){return[i.value,u.value,p.value,d.value,c.value]}const ye=vt({get:()=>i.value,set:ee=>{j.locale=ee,i.value=ee}}),se=vt({get:()=>u.value,set:ee=>{j.fallbackLocale=ee,u.value=ee,_l(j,i.value,ee)}}),N=vt(()=>p.value),Z=vt(()=>d.value),te=vt(()=>c.value);function z(){return At(D)?D:null}function ne(ee){D=ee,j.postTranslation=ee}function oe(){return $}function F(ee){ee!==null&&(T=xp(ee)),$=ee,j.missing=T}const B=(ee,me,Re,Pe,He,Xe)=>{X();let at;try{__INTLIFY_PROD_DEVTOOLS__,o||(j.fallbackContext=t?b2():void 0),at=ee(j)}finally{__INTLIFY_PROD_DEVTOOLS__,o||(j.fallbackContext=void 0)}if(Re!=="translate exists"&&Bt(at)&&at===Ms||Re==="translate exists"&&!at){const[bt,Dt]=me();return t&&y?Pe(t):He(bt)}else{if(Xe(at))return at;throw Sn(_n.UNEXPECTED_RETURN_TYPE)}};function ie(...ee){return B(me=>Reflect.apply(dp,null,[me,...ee]),()=>bi(...ee),"translate",me=>Reflect.apply(me.t,me,[...ee]),me=>me,me=>Ne(me))}function Ce(...ee){const[me,Re,Pe]=ee;if(Pe&&!pt(Pe))throw Sn(_n.INVALID_ARGUMENT);return ie(me,Re,qt({resolvedMessage:!0},Pe||{}))}function re(...ee){return B(me=>Reflect.apply(op,null,[me,...ee]),()=>_i(...ee),"datetime format",me=>Reflect.apply(me.d,me,[...ee]),()=>Kd,me=>Ne(me))}function ge(...ee){return B(me=>Reflect.apply(sp,null,[me,...ee]),()=>yi(...ee),"number format",me=>Reflect.apply(me.n,me,[...ee]),()=>Kd,me=>Ne(me))}function ce(ee){return ee.map(me=>Ne(me)||Bt(me)||ct(me)?_p(String(me)):me)}const G={normalize:ce,interpolate:ee=>ee,type:"vnode"};function L(...ee){return B(me=>{let Re;const Pe=me;try{Pe.processor=G,Re=Reflect.apply(dp,null,[Pe,...ee])}finally{Pe.processor=null}return Re},()=>bi(...ee),"translate",me=>me[wi](...ee),me=>[_p(me)],me=>Ut(me))}function U(...ee){return B(me=>Reflect.apply(sp,null,[me,...ee]),()=>yi(...ee),"number format",me=>me[Si](...ee),bp,me=>Ne(me)||Ut(me))}function V(...ee){return B(me=>Reflect.apply(op,null,[me,...ee]),()=>_i(...ee),"datetime format",me=>me[xi](...ee),bp,me=>Ne(me)||Ut(me))}function I(ee){H=ee,j.pluralRules=H}function W(ee,me){return B(()=>{if(!ee)return!1;const Re=Ne(me)?me:i.value,Pe=O(Re),He=j.messageResolver(Pe,ee);return Sa(He)||Dn(He)||Ne(He)},()=>[ee],"translate exists",Re=>Reflect.apply(Re.te,Re,[ee,me]),F2,Re=>ct(Re))}function C(ee){let me=null;const Re=jd(j,u.value,i.value);for(let Pe=0;Pe<Re.length;Pe++){const He=p.value[Re[Pe]]||{},Xe=j.messageResolver(He,ee);if(Xe!=null){me=Xe;break}}return me}function b(ee){const me=C(ee);return me??(t?t.tm(ee)||{}:{})}function O(ee){return p.value[ee]||{}}function Q(ee,me){if(a){const Re={[ee]:me};for(const Pe in Re)Bn(Re,Pe)&&yl(Re[Pe]);me=Re[ee]}p.value[ee]=me,j.messages=p.value}function pe(ee,me){p.value[ee]=p.value[ee]||{};const Re={[ee]:me};if(a)for(const Pe in Re)Bn(Re,Pe)&&yl(Re[Pe]);me=Re[ee],Es(me,p.value[ee]),j.messages=p.value}function be(ee){return d.value[ee]||{}}function A(ee,me){d.value[ee]=me,j.datetimeFormats=d.value,lp(j,ee,me)}function _(ee,me){d.value[ee]=qt(d.value[ee]||{},me),j.datetimeFormats=d.value,lp(j,ee,me)}function R(ee){return c.value[ee]||{}}function q(ee,me){c.value[ee]=me,j.numberFormats=c.value,ip(j,ee,me)}function Se(ee,me){c.value[ee]=qt(c.value[ee]||{},me),j.numberFormats=c.value,ip(j,ee,me)}wp++,t&&Ts&&(ot(t.locale,ee=>{r&&(i.value=ee,j.locale=ee,_l(j,i.value,u.value))}),ot(t.fallbackLocale,ee=>{r&&(u.value=ee,j.fallbackLocale=ee,_l(j,i.value,u.value))}));const we={id:wp,locale:ye,fallbackLocale:se,get inheritLocale(){return r},set inheritLocale(ee){r=ee,ee&&t&&(i.value=t.locale.value,u.value=t.fallbackLocale.value,_l(j,i.value,u.value))},get availableLocales(){return Object.keys(p.value).sort()},messages:N,get modifiers(){return P},get pluralRules(){return H||{}},get isGlobal(){return o},get missingWarn(){return v},set missingWarn(ee){v=ee,j.missingWarn=v},get fallbackWarn(){return m},set fallbackWarn(ee){m=ee,j.fallbackWarn=m},get fallbackRoot(){return y},set fallbackRoot(ee){y=ee},get fallbackFormat(){return S},set fallbackFormat(ee){S=ee,j.fallbackFormat=S},get warnHtmlMessage(){return Y},set warnHtmlMessage(ee){Y=ee,j.warnHtmlMessage=ee},get escapeParameter(){return x},set escapeParameter(ee){x=ee,j.escapeParameter=ee},t:ie,getLocaleMessage:O,setLocaleMessage:Q,mergeLocaleMessage:pe,getPostTranslationHandler:z,setPostTranslationHandler:ne,getMissingHandler:oe,setMissingHandler:F,[gp]:I};return we.datetimeFormats=Z,we.numberFormats=te,we.rt=Ce,we.te=W,we.tm=b,we.d=re,we.n=ge,we.getDateTimeFormat=be,we.setDateTimeFormat=A,we.mergeDateTimeFormat=_,we.getNumberFormat=R,we.setNumberFormat=q,we.mergeNumberFormat=Se,we[mp]=n,we[wi]=L,we[xi]=V,we[Si]=U,we}function U2(e){const t=Ne(e.locale)?e.locale:hl,n=Ne(e.fallbackLocale)||Ut(e.fallbackLocale)||et(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,o=At(e.missing)?e.missing:void 0,a=ct(e.silentTranslationWarn)||ba(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,l=ct(e.silentFallbackWarn)||ba(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,r=ct(e.fallbackRoot)?e.fallbackRoot:!0,i=!!e.formatFallbackMessages,u=et(e.modifiers)?e.modifiers:{},p=e.pluralizationRules,d=At(e.postTranslation)?e.postTranslation:void 0,c=Ne(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,v=!!e.escapeParameterHtml,m=ct(e.sync)?e.sync:!0;let y=e.messages;if(et(e.sharedMessages)){const P=e.sharedMessages;y=Object.keys(P).reduce((j,K)=>{const X=j[K]||(j[K]={});return qt(X,P[K]),j},y||{})}const{__i18n:S,__root:$,__injectWithOption:T}=e,D=e.datetimeFormats,Y=e.numberFormats,x=e.flatJson;return{locale:t,fallbackLocale:n,messages:y,flatJson:x,datetimeFormats:D,numberFormats:Y,missing:o,missingWarn:a,fallbackWarn:l,fallbackRoot:r,fallbackFormat:i,modifiers:u,pluralRules:p,postTranslation:d,warnHtmlMessage:c,escapeParameter:v,messageResolver:e.messageResolver,inheritLocale:m,__i18n:S,__root:$,__injectWithOption:T}}function Ei(e={}){const t=Ci(U2(e)),{__extender:n}=e,o={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return ct(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=ct(a)?!a:a},get silentFallbackWarn(){return ct(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=ct(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){return Reflect.apply(t.t,t,[...a])},rt(...a){return Reflect.apply(t.rt,t,[...a])},te(a,l){return t.te(a,l)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,l){t.setLocaleMessage(a,l)},mergeLocaleMessage(a,l){t.mergeLocaleMessage(a,l)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,l){t.setDateTimeFormat(a,l)},mergeDateTimeFormat(a,l){t.mergeDateTimeFormat(a,l)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,l){t.setNumberFormat(a,l)},mergeNumberFormat(a,l){t.mergeNumberFormat(a,l)}};return o.__extender=n,o}function V2(e,t,n){return{beforeCreate(){const o=Zo();if(!o)throw Sn(_n.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const l=a.i18n;if(a.__i18n&&(l.__i18n=a.__i18n),l.__root=t,this===this.$root)this.$i18n=Sp(e,l);else{l.__injectWithOption=!0,l.__extender=n.__vueI18nExtend,this.$i18n=Ei(l);const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=Sp(e,a);else{this.$i18n=Ei({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&hp(t,a,a),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$te=(l,r)=>this.$i18n.te(l,r),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=Zo();if(!o)throw Sn(_n.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),n.__deleteInstance(o),delete this.$i18n}}}function Sp(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[gp](t.pluralizationRules||e.pluralizationRules);const n=ki(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(o=>e.mergeLocaleMessage(o,n[o])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o])),t.numberFormats&&Object.keys(t.numberFormats).forEach(o=>e.mergeNumberFormat(o,t.numberFormats[o])),e}const $i={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function W2({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((o,a)=>[...o,...a.type===De?a.children:[a]],[]):t.reduce((n,o)=>{const a=e[o];return a&&(n[o]=a()),n},St())}function Tp(){return De}const kp=Hr({name:"i18n-t",props:qt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Bt(e)||!isNaN(e)}},$i),setup(e,t){const{slots:n,attrs:o}=t,a=e.i18n||ht({useScope:e.scope,__useComponent:!0});return()=>{const l=Object.keys(n).filter(c=>c!=="_"),r=St();e.locale&&(r.locale=e.locale),e.plural!==void 0&&(r.plural=Ne(e.plural)?+e.plural:e.plural);const i=W2(t,l),u=a[wi](e.keypath,i,r),p=qt(St(),o),d=Ne(e.tag)||pt(e.tag)?e.tag:Tp();return ut(d,p,u)}}});function z2(e){return Ut(e)&&!Ne(e[0])}function Cp(e,t,n,o){const{slots:a,attrs:l}=t;return()=>{const r={part:!0};let i=St();e.locale&&(r.locale=e.locale),Ne(e.format)?r.key=e.format:pt(e.format)&&(Ne(e.format.key)&&(r.key=e.format.key),i=Object.keys(e.format).reduce((v,m)=>n.includes(m)?qt(St(),v,{[m]:e.format[m]}):v,St()));const u=o(e.value,r,i);let p=[r.key];Ut(u)?p=u.map((v,m)=>{const y=a[v.type],S=y?y({[v.type]:v.value,index:m,parts:u}):[v.value];return z2(S)&&(S[0].key=`${v.type}-${m}`),S}):Ne(u)&&(p=[u]);const d=qt(St(),l),c=Ne(e.tag)||pt(e.tag)?e.tag:Tp();return ut(c,d,p)}}const Ep=Hr({name:"i18n-n",props:qt({value:{type:Number,required:!0},format:{type:[String,Object]}},$i),setup(e,t){const n=e.i18n||ht({useScope:e.scope,__useComponent:!0});return Cp(e,t,rp,(...o)=>n[Si](...o))}});function H2(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const o=n.__getInstance(t);return o!=null?o.__composer:e.global.__composer}}function j2(e){const t=r=>{const{instance:i,value:u}=r;if(!i||!i.$)throw Sn(_n.UNEXPECTED_ERROR);const p=H2(e,i.$),d=$p(u);return[Reflect.apply(p.t,p,[...Lp(d)]),p]};return{created:(r,i)=>{const[u,p]=t(i);Ts&&e.global===p&&(r.__i18nWatcher=ot(p.locale,()=>{i.instance&&i.instance.$forceUpdate()})),r.__composer=p,r.textContent=u},unmounted:r=>{Ts&&r.__i18nWatcher&&(r.__i18nWatcher(),r.__i18nWatcher=void 0,delete r.__i18nWatcher),r.__composer&&(r.__composer=void 0,delete r.__composer)},beforeUpdate:(r,{value:i})=>{if(r.__composer){const u=r.__composer,p=$p(i);r.textContent=Reflect.apply(u.t,u,[...Lp(p)])}},getSSRProps:r=>{const[i]=t(r);return{textContent:i}}}}function $p(e){if(Ne(e))return{path:e};if(et(e)){if(!("path"in e))throw Sn(_n.REQUIRED_VALUE,"path");return e}else throw Sn(_n.INVALID_VALUE)}function Lp(e){const{path:t,locale:n,args:o,choice:a,plural:l}=e,r={},i=o||{};return Ne(n)&&(r.locale=n),Bt(a)&&(r.plural=a),Bt(l)&&(r.plural=l),[t,i,r]}function G2(e,t,...n){const o=et(n[0])?n[0]:{};(ct(o.globalInstall)?o.globalInstall:!0)&&([kp.name,"I18nT"].forEach(l=>e.component(l,kp)),[Ep.name,"I18nN"].forEach(l=>e.component(l,Ep)),[Mp.name,"I18nD"].forEach(l=>e.component(l,Mp))),e.directive("t",j2(t))}const q2=Io("global-vue-i18n");function K2(e={}){const t=__VUE_I18N_LEGACY_API__&&ct(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=ct(e.globalInjection)?e.globalInjection:!0,o=new Map,[a,l]=Y2(e,t),r=Io("");function i(c){return o.get(c)||null}function u(c,v){o.set(c,v)}function p(c){o.delete(c)}const d={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(c,...v){if(c.__VUE_I18N_SYMBOL__=r,c.provide(c.__VUE_I18N_SYMBOL__,d),et(v[0])){const S=v[0];d.__composerExtend=S.__composerExtend,d.__vueI18nExtend=S.__vueI18nExtend}let m=null;!t&&n&&(m=o_(c,d.global)),__VUE_I18N_FULL_INSTALL__&&G2(c,d,...v),__VUE_I18N_LEGACY_API__&&t&&c.mixin(V2(l,l.__composer,d));const y=c.unmount;c.unmount=()=>{m&&m(),d.dispose(),y()}},get global(){return l},dispose(){a.stop()},__instances:o,__getInstance:i,__setInstance:u,__deleteInstance:p};return d}function ht(e={}){const t=Zo();if(t==null)throw Sn(_n.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Sn(_n.NOT_INSTALLED);const n=J2(t),o=Q2(n),a=vp(t),l=X2(e,a);if(l==="global")return hp(o,e,a),o;if(l==="parent"){let u=Z2(n,t,e.__useComponent);return u==null&&(u=o),u}const r=n;let i=r.__getInstance(t);if(i==null){const u=qt({},e);"__i18n"in a&&(u.__i18n=a.__i18n),o&&(u.__root=o),i=Ci(u),r.__composerExtend&&(i[Ti]=r.__composerExtend(i)),t_(r,t,i),r.__setInstance(t,i)}return i}function Y2(e,t){const n=kr(),o=__VUE_I18N_LEGACY_API__&&t?n.run(()=>Ei(e)):n.run(()=>Ci(e));if(o==null)throw Sn(_n.UNEXPECTED_ERROR);return[n,o]}function J2(e){const t=ha(e.isCE?q2:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Sn(e.isCE?_n.NOT_INSTALLED_WITH_PROVIDE:_n.UNEXPECTED_ERROR);return t}function X2(e,t){return ks(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function Q2(e){return e.mode==="composition"?e.global:e.global.__composer}function Z2(e,t,n=!1){let o=null;const a=t.root;let l=e_(t,n);for(;l!=null;){const r=e;if(e.mode==="composition")o=r.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const i=r.__getInstance(l);i!=null&&(o=i.__composer,n&&o&&!o[mp]&&(o=null))}if(o!=null||a===l)break;l=l.parent}return o}function e_(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function t_(e,t,n){mt(()=>{},t),Mn(()=>{const o=n;e.__deleteInstance(t);const a=o[Ti];a&&(a(),delete o[Ti])},t)}const n_=["locale","fallbackLocale","availableLocales"],Ap=["t","rt","d","n","tm","te"];function o_(e,t){const n=Object.create(null);return n_.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l)throw Sn(_n.UNEXPECTED_ERROR);const r=Ot(l.value)?{get(){return l.value.value},set(i){l.value.value=i}}:{get(){return l.get&&l.get()}};Object.defineProperty(n,a,r)}),e.config.globalProperties.$i18n=n,Ap.forEach(a=>{const l=Object.getOwnPropertyDescriptor(t,a);if(!l||!l.value)throw Sn(_n.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,l)}),()=>{delete e.config.globalProperties.$i18n,Ap.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}const Mp=Hr({name:"i18n-d",props:qt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},$i),setup(e,t){const n=e.i18n||ht({useScope:e.scope,__useComponent:!0});return Cp(e,t,ap,(...o)=>n[xi](...o))}});if(P2(),m2(Jh),v2(p2),h2(jd),__INTLIFY_PROD_DEVTOOLS__){const e=ta();e.__INTLIFY__=!0,Xh(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const _t=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},a_={class:"weilin_prompt_ui_window-title"},l_=["title"],Tn=_t({__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const n=e,{t:o}=ht(),a=t,l=h({x:0,y:0}),r=h({width:600,height:400});ot(()=>n.position,H=>{H&&(l.value={...H},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_position`},"*"))},{immediate:!0,deep:!0}),ot(()=>n.size,H=>{H&&(r.value={...H},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_size`},"*"))},{immediate:!0,deep:!0});const i=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${n.name}_scroll`},"*")};mt(()=>{var H;if(n.position){const j=window.innerWidth,K=window.innerHeight,X=100;let ye=n.position.x,se=n.position.y;ye=Math.max(X-(((H=n.size)==null?void 0:H.width)||r.value.width),ye),ye=Math.min(ye,j-100),se=Math.max(100,se),se=Math.min(se,K-100),l.value={x:ye,y:se}}n.size&&(r.value={...n.size})});const u=h(!1),p=h({x:0,y:0}),d=H=>{u.value=!0,p.value={x:H.clientX-l.value.x,y:H.clientY-l.value.y},document.addEventListener("mousemove",c),document.addEventListener("mouseup",v)},c=H=>{if(u.value){const j=window.innerWidth,K=window.innerHeight,X=100;let ye=H.clientX-p.value.x,se=H.clientY-p.value.y;ye=Math.max(X-r.value.width,ye),ye=Math.min(ye,j-100),se=Math.max(100,se),se=Math.min(se,K-100);const N={x:ye,y:se};l.value=N,a("update:position",N)}},v=()=>{u.value=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",v)},m=h(!1),y=h({x:0,y:0}),S=h({width:0,height:0}),$=H=>{m.value=!0,y.value={x:H.clientX,y:H.clientY},S.value={...r.value},document.addEventListener("mousemove",T),document.addEventListener("mouseup",D)},T=H=>{if(m.value){const j=H.clientX-y.value.x,K=H.clientY-y.value.y,X={width:Math.max(200,S.value.width+j),height:Math.max(200,S.value.height+K)};r.value=X,a("update:size",X)}},D=()=>{m.value=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",D)},Y=()=>{a("active")},x=()=>{a("close")},P=H=>{Y(),d(H)};return(H,j)=>(w(),xt(dc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[s("div",{class:"weilin_prompt_ui_draggable-window",style:dt({left:`${l.value.x}px`,top:`${l.value.y}px`,width:`${r.value.width}px`,height:`${r.value.height}px`,zIndex:e.zIndex}),onMousedown:Y},[s("div",{class:"weilin_prompt_ui_window-header",onMousedown:Je(P,["stop"])},[s("div",a_,g(e.title),1),s("button",{class:"weilin_prompt_ui_close-btn",onClick:x},"")],32),s("div",{class:"weilin_prompt_ui_window-content",onScroll:i},[ol(H.$slots,"default",{},void 0,!0)],32),s("div",{class:"weilin_prompt_ui_resize-handle",title:f(o)("common.windowSize"),onMousedown:Je($,["stop"])},null,40,l_)],36)]))}},[["__scopeId","data-v-5d02be5b"]]),go="v0.0.70",s_={promptBox:{placeholder:"...",delete:"",newline:"",tab:"",windowTitle:"WeiLinUI "+go,windowTitleGlobal:"WeiLinUI "+go,translate:"",translatePlaceholder:",",weight:"",weightPlaceholder:"",addBracket:"",removeLayer:"",hiddenHint:"",tagTips:"Tag<br>Tag<br>Tag",oneClickRandomTag:"Tag",oneClickCleanAll:"",oneClickClearDisabled:"",clearDisabledSuccess:"",randomTagSettings:"Tag",oneClickTranslate:"Tag",showDeleteButton:"",hideDeleteButton:"",modelWeight:"",textWeight:"",favour:"",lineToken:"",addLineToken:"",settings:{title:"",cancel:"",save:"",translator:"",sourceLanguage:"",targetLanguage:"",chinese_simplified:"",english:"",close:"",auto_detect:"",setting_function_toggles:"",setting_function_toggles_full:"",enableClearAll:"",enableDeleteButton:"",enableRandomTag:"",enableRandomTagSettings:"",enableTranslateTag:"",enableClearDisabled:"",setting_floating_ball:"",setting_prompt_box:"",enablePromptCommaShow:"",floatingBallCount:"",floatingBallCountPlaceholder:"",floatingBallSize:"",floatingBallSizePlaceholder:"",floatingBallHeight:"",floatingBallHeightPlaceholder:"",enableFloatingBall:"",enableCommaConversion:"",enablePeriodConversion:"",enableBracketConversion:"",enableAngleBracketConversion:"",enableUnderscoreToBracket:"",enableBracketEscape:"\\",enableCommaCloseAutocomplete:"",setting_openai_box:"OpenAI",openai_api_key:"API Key",openai_api_key_placeholder:"API Key",openai_api_key_save:"",openaiSettings:"OpenAI",openai_base_url:"Base URL",openai_base_url_placeholder:"Base URL",openai_model:"",openai_model_placeholder:"",not_set:"",edit:"",delete:"",selectedOpenaiConfig:"OpenAI",addNewConfig:"OpenAI",setting_sponsor_me:"",sponsorMe:"",sponsorMeTip:"",sponsorMeLink:" https://afdian.com/a/weilin9999",setting_start_panel:"",startPanel:"",startPanelTip:"",selectTranslater:"",selectOptionNetworkTranslater:"",selectOptionPythonTranslater:"",apply:"",selectOptionNetworkTranslaterTitle:"",selectOptionPythonTranslaterTitle:"",selectOptionNetworkTranslaterInfo:"",selectOptionPythonTranslaterInfo:"translators",install:"",nowTranlaterPackageState:"",tranlaterPackageStateTrue:"",tranlaterPackageStateFlase:"",installed:"...",installTranslaterPackageInfo:"",translaterSetting:"",chooseTranslaterSetting:"",translaterLangSourceSetting:"",translaterLangTargeSetting:"",saveTranslaterSetting:"",testTranslaterTitle:"",inputTestTranslater:"",outPutTestTranslater:"",testingTranslater:"",inputTestTranslaterPlaceholder:"",outPutTestTranslaterPlaceholder:"",errorPrompt:"",setting_auto_complete_limit:"",show_auto_limit:"",showAutoLimitPlaceholder:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:"",skinSetting:"",defaultSkin:"",customSkin:"",uploadSkin:"",bgSetting:"",gradientBg:"",transparentBg:"",gradientColor:"",borderRadius:"",resetToDefault:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:""}},controls:{language:"",settings:"",switchTheme:"",darkMode:"",lightMode:"",tagManager:"",loraStack:"Lora",loraManager:"Lora",history:"",addLora:"Lora",removeLora:"Lora",lookOnLora:"Lora",aiChat:"AI",github:"Github",shareCloudData:"",tutorialVideo:"",sponsor:"",danbooruManager:"Danbooru"},theme:{toggle:""},common:{confirmDelete:"",delete:"",cancel:"",confirm:"",edit:"",save:"",refresh:"",copy:"",copySuccess:"",copyFailed:"",windowSize:"",showMore:"",showLess:""},cloudWindow:{windowTitle:"",back:"",currentPath:"",tagDatabase:"Tag ",danbooruDatabase:"Danbooru ",open:"",installed:"",install:"",installing:"..."},nodeListWindow:{windowTitle:"",openPromptUI:""},lora:{title:"Lora ",rawTitle:"LoraRaw",file:"",hash:"Hash",civitai:"Civitai",viewOnCivitai:" Civitai ",fetchFromCivitai:" Civitai ",modelNotFound:"",modelNotFoundTip:" Civitai ",name:"",nameTip:"",type:"",baseModel:"",trainedWords:"",trainedWordsTip:"",selectedWords:" {count} ",strengthMin:"",strengthMinTip:"",strengthMax:"",strengthMaxTip:"",promptWords:"",promptWordsTip:"",loraWorks:"Lora",strWeight:"",hideLora:"Lora",showLora:"Lora",baseModel:"",skipClip:"",seeLoraRaw:"LoraRaw",addDiyFiled:"",getCivitData:"Civitai",copy:""},tagManager:{deletePrimaryCategoryConfirm:" {name} ",deleteGroupConfirm:" {name} ",deleteTagConfirm:" {name} ",windowTitle:"",categories:"",groups:"",selectCategory:"",selectGroup:"",addPrimaryCategory:"",addGroup:"",editPrimaryCategory:"",editGroup:"",editTag:"",categoryName:"",categoryNamePlaceholder:"",categoryNameRequired:"",groupName:"",groupNamePlaceholder:"",groupNameRequired:"",addTag:"Tag",text:"Tag",textPlaceholder:"Tag",description:"Tag",descriptionPlaceholder:"Tag",textRequired:"TagTag",favourRequired:"TagTag",backgroundColor:"",colorPickerTitle:"",opacity:"",searchPlaceholder:"Tag...",noResults:"",searchInCategory:"",searchInTag:"Tag",save:"",cancel:"",confirm:"",delete:"",addSubCategory:"",editSubCategory:"",subCategoryName:"",subCategoryNamePlaceholder:"",subCategoryNameRequired:"",deleteConfirmTitle:"",deleteConfirmMessage:"{type}",deleteSuccess:"",deleteFailed:"",saveSuccess:"",saveFailed:"",colorPickerAlpha:"",colorPickerHex:"",colorPreview:"",dragToSort:"",searchTags:"",noTagsFound:"",noGroupsFound:"",noCategoriesFound:"",refresh:"",refreshing:"...",refreshSuccess:"",refreshFailed:"",search:"",searching:"...",searchResult:"",searchInPath:": {path}",category:"",group:"",tag:"",resultType:{category:"",group:"",tag:""},hasDeleteAction:"",deleteSelected:"",confirmDeleteSelected:"",cancelDelete:"",moveTag:"",targetTag:"",movePosition:"",moveBefore:"",moveAfter:"",editTag:"",deleteTag:"",editGroupMode:"",exitEditMode:"",autoAddSearchTag:"Tag",importTags:"Tag",share:"",delete:"",edit:"",outputSuccess:"",noTagsSelected:"Tag",shareSelected:"Tag",batchShare:"Tag",cancelShare:"",moveGroup:"",targetGroup:"",moveGroupBefore:"",moveGroupAfter:"",importDanbooru:"",modifyTabSize:"",tabSizeConfig:"",primaryTabConfig:"",groupTabConfig:"",tabWidth:"",tabHeight:"",fontSize:"",fitContent:"",customWidth:"",resetDefault:"",tabSizeConfigSaved:"",tabSizeConfigSaveFailed:""},loraManager:{windowTitle:"Lora",modelWeight:"",textEncoderWeight:"",all:"",root:"",refresh:"",cacheAll:"Lora",searchPlaceholder:"Lora...",prevPage:"",nextPage:"",noResults:"",loadingMore:"...",noMoreData:""},message:{copySuccess:"",copyFailed:"",saveSuccess:"",saveFailed:"",deleteSuccess:"",deleteFailed:"",operationSuccess:"",operationFailed:"",networkError:"",unknownError:"",refreshSuccess:"",refreshFailed:"",loadingData:"...",dataLoaded:"",editSuccess:"",editFailed:"",addSuccess:"",addFailed:"",addFavoriteSuccess:"",addFavoriteIsExist:"",error:"",editNameExist:"",moveSuccess:"",moveFailed:"",setLanguageSuccess:"",setLanguageFailed:"",startPanelSuccess:"",startPanelFailed:"",isLoading:"",loaddingPrc:" {name}%",loaddingSuccess:"",noFinishKuo:"",getTranslaterFail:"",applyTranslaterFail:"",applyToTranslaterFail:"",applyTranslaterSuccess:"",tranlaterPackageInstallFail:"",tranlaterPackageInstallSuccess:"",translaterTestFail:"",installPackageSuccess:"",installPackageFail:"",loadFailed:"",jsonErrorMesg:"JSON",pleaseAddSub:"",pleaseAddMainCeb:"",pleaseSelectGroup:"",isLoadingPleaseWait:"",shareGroupError:"",shareTagError:"Tag"},history:{title:"",search_placeholder:"...",search:"",windowTitle:"",favorites:"",history:"",refresh:"",refresh_history:"",refresh_favorites:"",add_to_favorites:"",delete_history:"",use_item:"",add_new:"",bulk_delete:"",deleteHistoryConfirm:" {name} ",deleteFavoriteConfirm:" {name} ",confirmDeleteSelected:"",cancel_delete:"",sure_delete:"",deleteSelected:"",dialog:{add_tag:"",edit_tag:"",name:"",name_placeholder:"",tag:"",tag_placeholder:"",background_color:"",background_color_placeholder:"",edit_favorite:"",delete_favorite:""},edit_favorite:"",delete_favorite:"",use_favorite:""},floatingBall:{promptBox:"",tagManager:"",loraManager:"Lora",aiWindow:"AI",restoreWindow:"",openNodeListWindow:"",tranToWeb:"",openSetting:""},aiWindow:{windowTitle:"AI",newChat:"",chatName:"",thinking:"...",send:"",inputMessage:"..."},translaterService:{niutrans:"",mymemory:"MyMemory",alibaba:"",baidu:"",modernmt:"ModernMT",volcengine:"",iciba:"",iflytek:"",google:"",bing:"",lingvanex:"Lingvanex",yandex:"Yandex",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos",apertium:"Apertium",reverso:"Reverso",deepl:"DeepL",cloudtranslation:"",qqtransmart:"",translatecom:"Translate.com",sogou:"",tilde:"Tilde",caiyun:"",qqfanyi:"",translateme:"TranslateMe",papago:"Papago",mirai:"",youdao:"",iflyrec:"",hujiang:"",yeekit:"",languagewire:"LanguageWire",elia:"Elia",judic:"Judic",mglip:"",utibet:""},translaterLanguage:{english:"",chinese:"",arabic:"",russian:"",french:"",german:"",spanish:"",portuguese:"",italian:"",japanese:"",korean:"",greek:"",dutch:"",hindi:"",turkish:"",malay:"",thai:"",vietnamese:"",indonesian:"",hebrew:"",polish:"",mongolian:"",czech:"",hungarian:"",estonian:"",bulgarian:"",danish:"",finnish:"",romanian:"",swedish:"",slovenian:"","persian/farsi":"/",bosnian:"",serbian:"",fijian:"",filipino:"",haitiancreole:"",catalan:"",croatian:"",latvian:"",lithuanian:"",urdu:"",ukrainian:"",welsh:"",tahiti:"",tongan:"",swahili:"",samoan:"",slovak:"",afrikaans:"",norwegian:"",bengali:"",malagasy:"",maltese:"","queretaro otomi":"","klingon/tlhingan hol":"",gujarati:"",tamil:"",telugu:"",punjabi:"",amharic:"",azerbaijani:"",bashkir:"",belarusian:"",cebuano:"",chuvash:"",esperanto:"",basque:"",irish:""},utils:{tranToWeb:"HTML",dropOrPasteImage:"",downloadHtml:"HTML",copyHtml:"HTML",copySuccess:"HTML",copyFailed:"HTML",clear:""},importDialog:{title:"Tag",sure:"",cleanAll:"",dumpSQL:"SQL",uploadSQL:"SQL",setMainCeb:"",setSubCeb:"",addTag:"Tag",fromJSONImput:"JSONTag",fromTxtInput:"TXTTag",fromYmalInput:"YAMLTag",selectMainCeb:"",selectSubCeb:"",selectGroup:"",sureSelect:"",pleaseAddGroupName:"",pleaseAddSubGroupName:"",pleaseFullRequest:"",successImport:"",importFail:"",dumpOnlySQL:"TagSQL",settingOutputName:"",sureYes:"",cancel:"",edit:"",delete:"",add:"Tag",pleaseMainCebUuid:"UUID",pleaseSubGroupUuid:"UUID",pleaseSubGroup:"",pleaseMainCeb:"",translater:"",tips1:"",tips1text:"B",tips2:"Tag",tips2text:"GitHub",tips3:"",tips3text:"",selectTitle:"",selectedCategories:"",clearAll:"",primaryCategories:"",subCategories:"",noSelectedCategories:"",selectCategory:"",selectSubcategory:"",sureSelect:""},randomUtils:{title:"Tag",generalSettings:"",totalTags:"Tag",rules:"",addRule:"",rule:"",range:"",tagType:"",category:"Tag",specificTags:"",selectCategory:"",addTagPlaceholder:"",addTag:"",testRandom:"",generatedTags:"",selectTagGroup:"Tag",ruleTemplates:"",saveAsTemplate:"",selectTemplate:"",applyTemplate:"",templateNamePlaceholder:"",templateNameRequired:"",templateSaved:"",templateApplied:"",errorSavingTemplates:"",save:"",cancel:"",editTemplate:"",deleteTemplate:"",confirmDeleteTemplate:"",templateDeleted:"",templateUpdated:"",errorUpdatingTemplate:"",errorLoadingTemplate:"",errorDeletingTemplate:"",errorApplyingTemplate:"",pleaseChooseTemplate:"",errorSavingTemplate:"",newTemplate:"",rulesReminder:"1"},danbooruManager:{title:"Danbooru",controle:"",translatePlaceholder:"",searchPlaceholder:"Danbooru...",pageShow:":",pageLimit:"",hot:"",aliases:"",sureBatchDelete:"",sureBatchDeleteTips1:"",sureBatchDeleteTips2:"",sureDelete:"",import:"Danbooru",importBatchTitle:"Danbooru",importTitle:"Danbooru ",add:"Danbooru",edit:"Danbooru"}},r_={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+go,windowTitleGlobal:"WeiLin Global Prompt UI Window "+go,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",oneClickCleanAll:"one Click Clean All",oneClickClearDisabled:"Clear All Disabled",clearDisabledSuccess:"All disabled tags cleared",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",showDeleteButton:"Show Delete Button",hideDeleteButton:"Hide Delete Button",modelWeight:"Model Weight",textWeight:"Text Weight",favour:"Favour",lineToken:"Line Break",addLineToken:"Add Line Break Token",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",setting_function_toggles:"Function Toggle Settings",setting_function_toggles_full:"Function Toggle Settings (Reopen window to take effect)",enableClearDisabled:"Enable Clear Disabled",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",favourRequired:"Tag and Tag description cannot be empty, and a group must be selected",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ip;const Is=e=>Ip=e,Dp=Symbol();function Li(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var bl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(bl||(bl={}));function i_(){const e=kr(!0),t=e.run(()=>h({}));let n=[],o=[];const a=Pr({install(l){Is(a),a._a=l,l.provide(Dp,a),l.config.globalProperties.$pinia=a,o.forEach(r=>n.push(r)),o=[]},use(l){return this._a?n.push(l):o.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return a}const Rp=()=>{};function Op(e,t,n,o=Rp){e.push(t);const a=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),o())};return!n&&Au()&&Mm(a),a}function Ta(e,...t){e.slice().forEach(n=>{n(...t)})}const u_=e=>e(),Np=Symbol(),Ai=Symbol();function Mi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],a=e[n];Li(a)&&Li(o)&&e.hasOwnProperty(n)&&!Ot(o)&&!So(o)?e[n]=Mi(a,o):e[n]=o}return e}const c_=Symbol();function d_(e){return!Li(e)||!e.hasOwnProperty(c_)}const{assign:No}=Object;function p_(e){return!!(Ot(e)&&e.effect)}function f_(e,t,n,o){const{state:a,actions:l,getters:r}=t,i=n.state.value[e];let u;function p(){i||(n.state.value[e]=a?a():{});const d=t1(n.state.value[e]);return No(d,l,Object.keys(r||{}).reduce((c,v)=>(c[v]=Pr(vt(()=>{Is(n);const m=n._s.get(e);return r[v].call(m,m)})),c),{}))}return u=Pp(e,p,t,n,o,!0),u}function Pp(e,t,n={},o,a,l){let r;const i=No({actions:{}},n),u={deep:!0};let p,d,c=[],v=[],m;const y=o.state.value[e];!l&&!y&&(o.state.value[e]={}),h({});let S;function $(K){let X;p=d=!1,typeof K=="function"?(K(o.state.value[e]),X={type:bl.patchFunction,storeId:e,events:m}):(Mi(o.state.value[e],K),X={type:bl.patchObject,payload:K,storeId:e,events:m});const ye=S=Symbol();qe().then(()=>{S===ye&&(p=!0)}),d=!0,Ta(c,X,o.state.value[e])}const T=l?function(){const{state:X}=n,ye=X?X():{};this.$patch(se=>{No(se,ye)})}:Rp;function D(){r.stop(),c=[],v=[],o._s.delete(e)}const Y=(K,X="")=>{if(Np in K)return K[Ai]=X,K;const ye=function(){Is(o);const se=Array.from(arguments),N=[],Z=[];function te(oe){N.push(oe)}function z(oe){Z.push(oe)}Ta(v,{args:se,name:ye[Ai],store:P,after:te,onError:z});let ne;try{ne=K.apply(this&&this.$id===e?this:P,se)}catch(oe){throw Ta(Z,oe),oe}return ne instanceof Promise?ne.then(oe=>(Ta(N,oe),oe)).catch(oe=>(Ta(Z,oe),Promise.reject(oe))):(Ta(N,ne),ne)};return ye[Np]=!0,ye[Ai]=X,ye},x={_p:o,$id:e,$onAction:Op.bind(null,v),$patch:$,$reset:T,$subscribe(K,X={}){const ye=Op(c,K,X.detached,()=>se()),se=r.run(()=>ot(()=>o.state.value[e],N=>{(X.flush==="sync"?d:p)&&K({storeId:e,type:bl.direct,events:m},N)},No({},u,X)));return ye},$dispose:D},P=ts(x);o._s.set(e,P);const j=(o._a&&o._a.runWithContext||u_)(()=>o._e.run(()=>(r=kr()).run(()=>t({action:Y}))));for(const K in j){const X=j[K];if(Ot(X)&&!p_(X)||So(X))l||(y&&d_(X)&&(Ot(X)?X.value=y[K]:Mi(X,y[K])),o.state.value[e][K]=X);else if(typeof X=="function"){const ye=Y(X,K);j[K]=ye,i.actions[K]=X}}return No(P,j),No(nt(P),j),Object.defineProperty(P,"$state",{get:()=>o.state.value[e],set:K=>{$(X=>{No(X,K)})}}),o._p.forEach(K=>{No(P,r.run(()=>K({store:P,app:o._a,pinia:o,options:i})))}),y&&l&&n.hydrate&&n.hydrate(P.$state,y),p=!0,d=!0,P}/*! #__NO_SIDE_EFFECTS__ */function g_(e,t,n){let o;const a=typeof t=="function";o=a?n:t;function l(r,i){const u=B1();return r=r||(u?ha(Dp,null):null),r&&Is(r),r=Ip,r._s.has(e)||(a?Pp(e,t,o,r):f_(e,o,r)),r._s.get(e)}return l.$id=e,l}const Ds=g_("tag",()=>{const e=h([]),t=h({user_lang:"zh_CN"}),n=h(0);return{categories:e,setCategories:r=>{e.value=r},userSetting:t,setUserSetting:r=>{t.value=r},isFirstLoading:n,setisFirstLoading:r=>{n.value=r}}});function Fp(e,t){return function(){return e.apply(t,arguments)}}const{toString:m_}=Object.prototype,{getPrototypeOf:Ii}=Object,Rs=(e=>t=>{const n=m_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Un=e=>(e=e.toLowerCase(),t=>Rs(t)===e),Os=e=>t=>typeof t===e,{isArray:ka}=Array,wl=Os("undefined");function v_(e){return e!==null&&!wl(e)&&e.constructor!==null&&!wl(e.constructor)&&kn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bp=Un("ArrayBuffer");function h_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bp(e.buffer),t}const __=Os("string"),kn=Os("function"),Up=Os("number"),Ns=e=>e!==null&&typeof e=="object",y_=e=>e===!0||e===!1,Ps=e=>{if(Rs(e)!=="object")return!1;const t=Ii(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},b_=Un("Date"),w_=Un("File"),x_=Un("Blob"),S_=Un("FileList"),T_=e=>Ns(e)&&kn(e.pipe),k_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||kn(e.append)&&((t=Rs(e))==="formdata"||t==="object"&&kn(e.toString)&&e.toString()==="[object FormData]"))},C_=Un("URLSearchParams"),[E_,$_,L_,A_]=["ReadableStream","Request","Response","Headers"].map(Un),M_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,a;if(typeof e!="object"&&(e=[e]),ka(e))for(o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),r=l.length;let i;for(o=0;o<r;o++)i=l[o],t.call(null,e[i],i,e)}}function Vp(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wp=e=>!wl(e)&&e!==na;function Di(){const{caseless:e}=Wp(this)&&this||{},t={},n=(o,a)=>{const l=e&&Vp(t,a)||a;Ps(t[l])&&Ps(o)?t[l]=Di(t[l],o):Ps(o)?t[l]=Di({},o):ka(o)?t[l]=o.slice():t[l]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&xl(arguments[o],n);return t}const I_=(e,t,n,{allOwnKeys:o}={})=>(xl(t,(a,l)=>{n&&kn(a)?e[l]=Fp(a,n):e[l]=a},{allOwnKeys:o}),e),D_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),R_=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},O_=(e,t,n,o)=>{let a,l,r;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)r=a[l],(!o||o(r,e,t))&&!i[r]&&(t[r]=e[r],i[r]=!0);e=n!==!1&&Ii(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},N_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},P_=e=>{if(!e)return null;if(ka(e))return e;let t=e.length;if(!Up(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},F_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ii(Uint8Array)),B_=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=o.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},U_=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},V_=Un("HTMLFormElement"),W_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),zp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),z_=Un("RegExp"),Hp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};xl(n,(a,l)=>{let r;(r=t(a,l,e))!==!1&&(o[l]=r||a)}),Object.defineProperties(e,o)},H_=e=>{Hp(e,(t,n)=>{if(kn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(kn(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},j_=(e,t)=>{const n={},o=a=>{a.forEach(l=>{n[l]=!0})};return ka(e)?o(e):o(String(e).split(t)),n},G_=()=>{},q_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function K_(e){return!!(e&&kn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Y_=e=>{const t=new Array(10),n=(o,a)=>{if(Ns(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[a]=o;const l=ka(o)?[]:{};return xl(o,(r,i)=>{const u=n(r,a+1);!wl(u)&&(l[i]=u)}),t[a]=void 0,l}}return o};return n(e,0)},J_=Un("AsyncFunction"),X_=e=>e&&(Ns(e)||kn(e))&&kn(e.then)&&kn(e.catch),jp=((e,t)=>e?setImmediate:t?((n,o)=>(na.addEventListener("message",({source:a,data:l})=>{a===na&&l===n&&o.length&&o.shift()()},!1),a=>{o.push(a),na.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",kn(na.postMessage)),Q_=typeof queueMicrotask<"u"?queueMicrotask.bind(na):typeof process<"u"&&process.nextTick||jp,Te={isArray:ka,isArrayBuffer:Bp,isBuffer:v_,isFormData:k_,isArrayBufferView:h_,isString:__,isNumber:Up,isBoolean:y_,isObject:Ns,isPlainObject:Ps,isReadableStream:E_,isRequest:$_,isResponse:L_,isHeaders:A_,isUndefined:wl,isDate:b_,isFile:w_,isBlob:x_,isRegExp:z_,isFunction:kn,isStream:T_,isURLSearchParams:C_,isTypedArray:F_,isFileList:S_,forEach:xl,merge:Di,extend:I_,trim:M_,stripBOM:D_,inherits:R_,toFlatObject:O_,kindOf:Rs,kindOfTest:Un,endsWith:N_,toArray:P_,forEachEntry:B_,matchAll:U_,isHTMLForm:V_,hasOwnProperty:zp,hasOwnProp:zp,reduceDescriptors:Hp,freezeMethods:H_,toObjectSet:j_,toCamelCase:W_,noop:G_,toFiniteNumber:q_,findKey:Vp,global:na,isContextDefined:Wp,isSpecCompliantForm:K_,toJSONObject:Y_,isAsyncFn:J_,isThenable:X_,setImmediate:jp,asap:Q_};function Ye(e,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}Te.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Gp=Ye.prototype,qp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qp[e]={value:e}}),Object.defineProperties(Ye,qp),Object.defineProperty(Gp,"isAxiosError",{value:!0}),Ye.from=(e,t,n,o,a,l)=>{const r=Object.create(Gp);return Te.toFlatObject(e,r,function(u){return u!==Error.prototype},i=>i!=="isAxiosError"),Ye.call(r,e.message,t,n,o,a),r.cause=e,r.name=e.name,l&&Object.assign(r,l),r};const Z_=null;function Ri(e){return Te.isPlainObject(e)||Te.isArray(e)}function Kp(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function Yp(e,t,n){return e?e.concat(t).map(function(a,l){return a=Kp(a),!n&&l?"["+a+"]":a}).join(n?".":""):t}function e0(e){return Te.isArray(e)&&!e.some(Ri)}const t0=Te.toFlatObject(Te,{},null,function(t){return/^is[A-Z]/.test(t)});function Fs(e,t,n){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,$){return!Te.isUndefined($[S])});const o=n.metaTokens,a=n.visitor||d,l=n.dots,r=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(a))throw new TypeError("visitor must be a function");function p(y){if(y===null)return"";if(Te.isDate(y))return y.toISOString();if(!u&&Te.isBlob(y))throw new Ye("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(y)||Te.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,S,$){let T=y;if(y&&!$&&typeof y=="object"){if(Te.endsWith(S,"{}"))S=o?S:S.slice(0,-2),y=JSON.stringify(y);else if(Te.isArray(y)&&e0(y)||(Te.isFileList(y)||Te.endsWith(S,"[]"))&&(T=Te.toArray(y)))return S=Kp(S),T.forEach(function(Y,x){!(Te.isUndefined(Y)||Y===null)&&t.append(r===!0?Yp([S],x,l):r===null?S:S+"[]",p(Y))}),!1}return Ri(y)?!0:(t.append(Yp($,S,l),p(y)),!1)}const c=[],v=Object.assign(t0,{defaultVisitor:d,convertValue:p,isVisitable:Ri});function m(y,S){if(!Te.isUndefined(y)){if(c.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));c.push(y),Te.forEach(y,function(T,D){(!(Te.isUndefined(T)||T===null)&&a.call(t,T,Te.isString(D)?D.trim():D,S,v))===!0&&m(T,S?S.concat(D):[D])}),c.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Jp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Oi(e,t){this._pairs=[],e&&Fs(e,this,t)}const Xp=Oi.prototype;Xp.append=function(t,n){this._pairs.push([t,n])},Xp.toString=function(t){const n=t?function(o){return t.call(this,o,Jp)}:Jp;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function n0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qp(e,t,n){if(!t)return e;const o=n&&n.encode||n0;Te.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(t,n):l=Te.isURLSearchParams(t)?t.toString():new Oi(t,n).toString(o),l){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Zp{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Te.forEach(this.handlers,function(o){o!==null&&t(o)})}}const ef={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o0={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Oi,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Ni=typeof window<"u"&&typeof document<"u",Pi=typeof navigator=="object"&&navigator||void 0,a0=Ni&&(!Pi||["ReactNative","NativeScript","NS"].indexOf(Pi.product)<0),l0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s0=Ni&&window.location.href||"http://localhost",ln={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ni,hasStandardBrowserEnv:a0,hasStandardBrowserWebWorkerEnv:l0,navigator:Pi,origin:s0},Symbol.toStringTag,{value:"Module"})),...o0};function r0(e,t){return Fs(e,new ln.classes.URLSearchParams,Object.assign({visitor:function(n,o,a,l){return ln.isNode&&Te.isBuffer(n)?(this.append(o,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function i0(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u0(e){const t={},n=Object.keys(e);let o;const a=n.length;let l;for(o=0;o<a;o++)l=n[o],t[l]=e[l];return t}function tf(e){function t(n,o,a,l){let r=n[l++];if(r==="__proto__")return!0;const i=Number.isFinite(+r),u=l>=n.length;return r=!r&&Te.isArray(a)?a.length:r,u?(Te.hasOwnProp(a,r)?a[r]=[a[r],o]:a[r]=o,!i):((!a[r]||!Te.isObject(a[r]))&&(a[r]=[]),t(n,o,a[r],l)&&Te.isArray(a[r])&&(a[r]=u0(a[r])),!i)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const n={};return Te.forEachEntry(e,(o,a)=>{t(i0(o),a,n,0)}),n}return null}function c0(e,t,n){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Sl={transitional:ef,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,l=Te.isObject(t);if(l&&Te.isHTMLForm(t)&&(t=new FormData(t)),Te.isFormData(t))return a?JSON.stringify(tf(t)):t;if(Te.isArrayBuffer(t)||Te.isBuffer(t)||Te.isStream(t)||Te.isFile(t)||Te.isBlob(t)||Te.isReadableStream(t))return t;if(Te.isArrayBufferView(t))return t.buffer;if(Te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return r0(t,this.formSerializer).toString();if((i=Te.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Fs(i?{"files[]":t}:t,u&&new u,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),c0(t)):t}],transformResponse:[function(t){const n=this.transitional||Sl.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Te.isResponse(t)||Te.isReadableStream(t))return t;if(t&&Te.isString(t)&&(o&&!this.responseType||a)){const r=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(r)throw i.name==="SyntaxError"?Ye.from(i,Ye.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ln.classes.FormData,Blob:ln.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{Sl.headers[e]={}});const d0=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p0=e=>{const t={};let n,o,a;return e&&e.split(`
`).forEach(function(r){a=r.indexOf(":"),n=r.substring(0,a).trim().toLowerCase(),o=r.substring(a+1).trim(),!(!n||t[n]&&d0[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},nf=Symbol("internals");function Tl(e){return e&&String(e).trim().toLowerCase()}function Bs(e){return e===!1||e==null?e:Te.isArray(e)?e.map(Bs):String(e)}function f0(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const g0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fi(e,t,n,o,a){if(Te.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!Te.isString(t)){if(Te.isString(o))return t.indexOf(o)!==-1;if(Te.isRegExp(o))return o.test(t)}}function m0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function v0(e,t){const n=Te.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(a,l,r){return this[o].call(this,t,a,l,r)},configurable:!0})})}let yn=class{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function l(i,u,p){const d=Tl(u);if(!d)throw new Error("header name must be a non-empty string");const c=Te.findKey(a,d);(!c||a[c]===void 0||p===!0||p===void 0&&a[c]!==!1)&&(a[c||u]=Bs(i))}const r=(i,u)=>Te.forEach(i,(p,d)=>l(p,d,u));if(Te.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(Te.isString(t)&&(t=t.trim())&&!g0(t))r(p0(t),n);else if(Te.isHeaders(t))for(const[i,u]of t.entries())l(u,i,o);else t!=null&&l(n,t,o);return this}get(t,n){if(t=Tl(t),t){const o=Te.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return f0(a);if(Te.isFunction(n))return n.call(this,a,o);if(Te.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Tl(t),t){const o=Te.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Fi(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function l(r){if(r=Tl(r),r){const i=Te.findKey(o,r);i&&(!n||Fi(o,o[i],i,n))&&(delete o[i],a=!0)}}return Te.isArray(t)?t.forEach(l):l(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const l=n[o];(!t||Fi(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const n=this,o={};return Te.forEach(this,(a,l)=>{const r=Te.findKey(o,l);if(r){n[r]=Bs(a),delete n[l];return}const i=t?m0(l):String(l).trim();i!==l&&delete n[l],n[i]=Bs(a),o[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Te.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&Te.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[nf]=this[nf]={accessors:{}}).accessors,a=this.prototype;function l(r){const i=Tl(r);o[i]||(v0(a,r),o[i]=!0)}return Te.isArray(t)?t.forEach(l):l(t),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Te.reduceDescriptors(yn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}}),Te.freezeMethods(yn);function Bi(e,t){const n=this||Sl,o=t||n,a=yn.from(o.headers);let l=o.data;return Te.forEach(e,function(i){l=i.call(n,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function of(e){return!!(e&&e.__CANCEL__)}function Ca(e,t,n){Ye.call(this,e??"canceled",Ye.ERR_CANCELED,t,n),this.name="CanceledError"}Te.inherits(Ca,Ye,{__CANCEL__:!0});function af(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _0(e,t){e=e||10;const n=new Array(e),o=new Array(e);let a=0,l=0,r;return t=t!==void 0?t:1e3,function(u){const p=Date.now(),d=o[l];r||(r=p),n[a]=u,o[a]=p;let c=l,v=0;for(;c!==a;)v+=n[c++],c=c%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),p-r<t)return;const m=d&&p-d;return m?Math.round(v*1e3/m):void 0}}function y0(e,t){let n=0,o=1e3/t,a,l;const r=(p,d=Date.now())=>{n=d,a=null,l&&(clearTimeout(l),l=null),e.apply(null,p)};return[(...p)=>{const d=Date.now(),c=d-n;c>=o?r(p,d):(a=p,l||(l=setTimeout(()=>{l=null,r(a)},o-c)))},()=>a&&r(a)]}const Us=(e,t,n=3)=>{let o=0;const a=_0(50,250);return y0(l=>{const r=l.loaded,i=l.lengthComputable?l.total:void 0,u=r-o,p=a(u),d=r<=i;o=r;const c={loaded:r,total:i,progress:i?r/i:void 0,bytes:u,rate:p||void 0,estimated:p&&i&&d?(i-r)/p:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(c)},n)},lf=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},sf=e=>(...t)=>Te.asap(()=>e(...t)),b0=ln.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ln.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ln.origin),ln.navigator&&/(msie|trident)/i.test(ln.navigator.userAgent)):()=>!0,w0=ln.hasStandardBrowserEnv?{write(e,t,n,o,a,l){const r=[e+"="+encodeURIComponent(t)];Te.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),Te.isString(o)&&r.push("path="+o),Te.isString(a)&&r.push("domain="+a),l===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function S0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rf(e,t,n){let o=!x0(t);return e&&o||n==!1?S0(e,t):t}const uf=e=>e instanceof yn?{...e}:e;function oa(e,t){t=t||{};const n={};function o(p,d,c,v){return Te.isPlainObject(p)&&Te.isPlainObject(d)?Te.merge.call({caseless:v},p,d):Te.isPlainObject(d)?Te.merge({},d):Te.isArray(d)?d.slice():d}function a(p,d,c,v){if(Te.isUndefined(d)){if(!Te.isUndefined(p))return o(void 0,p,c,v)}else return o(p,d,c,v)}function l(p,d){if(!Te.isUndefined(d))return o(void 0,d)}function r(p,d){if(Te.isUndefined(d)){if(!Te.isUndefined(p))return o(void 0,p)}else return o(void 0,d)}function i(p,d,c){if(c in t)return o(p,d);if(c in e)return o(void 0,p)}const u={url:l,method:l,data:l,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:i,headers:(p,d,c)=>a(uf(p),uf(d),c,!0)};return Te.forEach(Object.keys(Object.assign({},e,t)),function(d){const c=u[d]||a,v=c(e[d],t[d],d);Te.isUndefined(v)&&c!==i||(n[d]=v)}),n}const cf=e=>{const t=oa({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:l,headers:r,auth:i}=t;t.headers=r=yn.from(r),t.url=Qp(rf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&r.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let u;if(Te.isFormData(n)){if(ln.hasStandardBrowserEnv||ln.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((u=r.getContentType())!==!1){const[p,...d]=u?u.split(";").map(c=>c.trim()).filter(Boolean):[];r.setContentType([p||"multipart/form-data",...d].join("; "))}}if(ln.hasStandardBrowserEnv&&(o&&Te.isFunction(o)&&(o=o(t)),o||o!==!1&&b0(t.url))){const p=a&&l&&w0.read(l);p&&r.set(a,p)}return t},T0=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,o){const a=cf(e);let l=a.data;const r=yn.from(a.headers).normalize();let{responseType:i,onUploadProgress:u,onDownloadProgress:p}=a,d,c,v,m,y;function S(){m&&m(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let $=new XMLHttpRequest;$.open(a.method.toUpperCase(),a.url,!0),$.timeout=a.timeout;function T(){if(!$)return;const Y=yn.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),P={data:!i||i==="text"||i==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:Y,config:e,request:$};af(function(j){n(j),S()},function(j){o(j),S()},P),$=null}"onloadend"in $?$.onloadend=T:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(T)},$.onabort=function(){$&&(o(new Ye("Request aborted",Ye.ECONNABORTED,e,$)),$=null)},$.onerror=function(){o(new Ye("Network Error",Ye.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let x=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||ef;a.timeoutErrorMessage&&(x=a.timeoutErrorMessage),o(new Ye(x,P.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,e,$)),$=null},l===void 0&&r.setContentType(null),"setRequestHeader"in $&&Te.forEach(r.toJSON(),function(x,P){$.setRequestHeader(P,x)}),Te.isUndefined(a.withCredentials)||($.withCredentials=!!a.withCredentials),i&&i!=="json"&&($.responseType=a.responseType),p&&([v,y]=Us(p,!0),$.addEventListener("progress",v)),u&&$.upload&&([c,m]=Us(u),$.upload.addEventListener("progress",c),$.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(d=Y=>{$&&(o(!Y||Y.type?new Ca(null,e,$):Y),$.abort(),$=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const D=h0(a.url);if(D&&ln.protocols.indexOf(D)===-1){o(new Ye("Unsupported protocol "+D+":",Ye.ERR_BAD_REQUEST,e));return}$.send(l||null)})},k0=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,a;const l=function(p){if(!a){a=!0,i();const d=p instanceof Error?p:this.reason;o.abort(d instanceof Ye?d:new Ca(d instanceof Error?d.message:d))}};let r=t&&setTimeout(()=>{r=null,l(new Ye(`timeout ${t} of ms exceeded`,Ye.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),e=null)};e.forEach(p=>p.addEventListener("abort",l));const{signal:u}=o;return u.unsubscribe=()=>Te.asap(i),u}},C0=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,a;for(;o<n;)a=o+t,yield e.slice(o,a),o=a},E0=async function*(e,t){for await(const n of $0(e))yield*C0(n,t)},$0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},df=(e,t,n,o)=>{const a=E0(e,t);let l=0,r,i=u=>{r||(r=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:p,value:d}=await a.next();if(p){i(),u.close();return}let c=d.byteLength;if(n){let v=l+=c;n(v)}u.enqueue(new Uint8Array(d))}catch(p){throw i(p),p}},cancel(u){return i(u),a.return()}},{highWaterMark:2})},Vs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pf=Vs&&typeof ReadableStream=="function",L0=Vs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ff=(e,...t)=>{try{return!!e(...t)}catch{return!1}},A0=pf&&ff(()=>{let e=!1;const t=new Request(ln.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),gf=64*1024,Ui=pf&&ff(()=>Te.isReadableStream(new Response("").body)),Ws={stream:Ui&&(e=>e.body)};Vs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ws[t]&&(Ws[t]=Te.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Ye(`Response type '${t}' is not supported`,Ye.ERR_NOT_SUPPORT,o)})})})(new Response);const M0=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(ln.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await L0(e)).byteLength},I0=async(e,t)=>{const n=Te.toFiniteNumber(e.getContentLength());return n??M0(t)},Vi={http:Z_,xhr:T0,fetch:Vs&&(async e=>{let{url:t,method:n,data:o,signal:a,cancelToken:l,timeout:r,onDownloadProgress:i,onUploadProgress:u,responseType:p,headers:d,withCredentials:c="same-origin",fetchOptions:v}=cf(e);p=p?(p+"").toLowerCase():"text";let m=k0([a,l&&l.toAbortSignal()],r),y;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let $;try{if(u&&A0&&n!=="get"&&n!=="head"&&($=await I0(d,o))!==0){let P=new Request(t,{method:"POST",body:o,duplex:"half"}),H;if(Te.isFormData(o)&&(H=P.headers.get("content-type"))&&d.setContentType(H),P.body){const[j,K]=lf($,Us(sf(u)));o=df(P.body,gf,j,K)}}Te.isString(c)||(c=c?"include":"omit");const T="credentials"in Request.prototype;y=new Request(t,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:T?c:void 0});let D=await fetch(y);const Y=Ui&&(p==="stream"||p==="response");if(Ui&&(i||Y&&S)){const P={};["status","statusText","headers"].forEach(X=>{P[X]=D[X]});const H=Te.toFiniteNumber(D.headers.get("content-length")),[j,K]=i&&lf(H,Us(sf(i),!0))||[];D=new Response(df(D.body,gf,j,()=>{K&&K(),S&&S()}),P)}p=p||"text";let x=await Ws[Te.findKey(Ws,p)||"text"](D,e);return!Y&&S&&S(),await new Promise((P,H)=>{af(P,H,{data:x,headers:yn.from(D.headers),status:D.status,statusText:D.statusText,config:e,request:y})})}catch(T){throw S&&S(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,e,y),{cause:T.cause||T}):Ye.from(T,T&&T.code,e,y)}})};Te.forEach(Vi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mf=e=>`- ${e}`,D0=e=>Te.isFunction(e)||e===null||e===!1,vf={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let n,o;const a={};for(let l=0;l<t;l++){n=e[l];let r;if(o=n,!D0(n)&&(o=Vi[(r=String(n)).toLowerCase()],o===void 0))throw new Ye(`Unknown adapter '${r}'`);if(o)break;a[r||"#"+l]=o}if(!o){const l=Object.entries(a).map(([i,u])=>`adapter ${i} `+(u===!1?"is not supported by the environment":"is not available in the build"));let r=t?l.length>1?`since :
`+l.map(mf).join(`
`):" "+mf(l[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return o},adapters:Vi};function Wi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ca(null,e)}function hf(e){return Wi(e),e.headers=yn.from(e.headers),e.data=Bi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vf.getAdapter(e.adapter||Sl.adapter)(e).then(function(o){return Wi(e),o.data=Bi.call(e,e.transformResponse,o),o.headers=yn.from(o.headers),o},function(o){return of(o)||(Wi(e),o&&o.response&&(o.response.data=Bi.call(e,e.transformResponse,o.response),o.response.headers=yn.from(o.response.headers))),Promise.reject(o)})}const _f="1.8.3",zs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zs[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const yf={};zs.transitional=function(t,n,o){function a(l,r){return"[Axios v"+_f+"] Transitional option '"+l+"'"+r+(o?". "+o:"")}return(l,r,i)=>{if(t===!1)throw new Ye(a(r," has been removed"+(n?" in "+n:"")),Ye.ERR_DEPRECATED);return n&&!yf[r]&&(yf[r]=!0,console.warn(a(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,r,i):!0}},zs.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function R0(e,t,n){if(typeof e!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let a=o.length;for(;a-- >0;){const l=o[a],r=t[l];if(r){const i=e[l],u=i===void 0||r(i,l,e);if(u!==!0)throw new Ye("option "+l+" must be "+u,Ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ye("Unknown option "+l,Ye.ERR_BAD_OPTION)}}const Hs={assertOptions:R0,validators:zs},Qn=Hs.validators;let aa=class{constructor(t){this.defaults=t,this.interceptors={request:new Zp,response:new Zp}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?l&&!String(o.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+l):o.stack=l}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=oa(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:l}=n;o!==void 0&&Hs.assertOptions(o,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),a!=null&&(Te.isFunction(a)?n.paramsSerializer={serialize:a}:Hs.assertOptions(a,{encode:Qn.function,serialize:Qn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Hs.assertOptions(n,{baseUrl:Qn.spelling("baseURL"),withXsrfToken:Qn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=l&&Te.merge(l.common,l[n.method]);l&&Te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete l[y]}),n.headers=yn.concat(r,l);const i=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,i.unshift(S.fulfilled,S.rejected))});const p=[];this.interceptors.response.forEach(function(S){p.push(S.fulfilled,S.rejected)});let d,c=0,v;if(!u){const y=[hf.bind(this),void 0];for(y.unshift.apply(y,i),y.push.apply(y,p),v=y.length,d=Promise.resolve(n);c<v;)d=d.then(y[c++],y[c++]);return d}v=i.length;let m=n;for(c=0;c<v;){const y=i[c++],S=i[c++];try{m=y(m)}catch($){S.call(this,$);break}}try{d=hf.call(this,m)}catch(y){return Promise.reject(y)}for(c=0,v=p.length;c<v;)d=d.then(p[c++],p[c++]);return d}getUri(t){t=oa(this.defaults,t);const n=rf(t.baseURL,t.url,t.allowAbsoluteUrls);return Qp(n,t.params,t.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(t){aa.prototype[t]=function(n,o){return this.request(oa(o||{},{method:t,url:n,data:(o||{}).data}))}}),Te.forEach(["post","put","patch"],function(t){function n(o){return function(l,r,i){return this.request(oa(i||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:r}))}}aa.prototype[t]=n(),aa.prototype[t+"Form"]=n(!0)});let O0=class _m{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const o=this;this.promise.then(a=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](a);o._listeners=null}),this.promise.then=a=>{let l;const r=new Promise(i=>{o.subscribe(i),l=i}).then(a);return r.cancel=function(){o.unsubscribe(l)},r},t(function(l,r,i){o.reason||(o.reason=new Ca(l,r,i),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new _m(function(a){t=a}),cancel:t}}};function N0(e){return function(n){return e.apply(null,n)}}function P0(e){return Te.isObject(e)&&e.isAxiosError===!0}const zi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zi).forEach(([e,t])=>{zi[t]=e});function bf(e){const t=new aa(e),n=Fp(aa.prototype.request,t);return Te.extend(n,aa.prototype,t,{allOwnKeys:!0}),Te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return bf(oa(e,a))},n}const Nt=bf(Sl);Nt.Axios=aa,Nt.CanceledError=Ca,Nt.CancelToken=O0,Nt.isCancel=of,Nt.VERSION=_f,Nt.toFormData=Fs,Nt.AxiosError=Ye,Nt.Cancel=Nt.CanceledError,Nt.all=function(t){return Promise.all(t)},Nt.spread=N0,Nt.isAxiosError=P0,Nt.mergeConfig=oa,Nt.AxiosHeaders=yn,Nt.formToJSON=e=>tf(Te.isHTMLForm(e)?new FormData(e):e),Nt.getAdapter=vf.getAdapter,Nt.HttpStatusCode=zi,Nt.default=Nt;const{Axios:vI,AxiosError:hI,CanceledError:_I,isCancel:yI,CancelToken:bI,VERSION:wI,all:xI,Cancel:SI,isAxiosError:TI,spread:kI,toFormData:CI,AxiosHeaders:EI,HttpStatusCode:$I,formToJSON:LI,getAdapter:AI,mergeConfig:MI}=Nt,Ie=Nt.create({baseURL:"/weilin/prompt_ui/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>e,e=>Promise.reject(e)),Ie.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const js={getUserSetting:async()=>await Ie({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await Ie({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await Ie({url:"/panel/start",method:"post"})},wf=()=>Ds(),kl=K2({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN:s_,en_US:r_}}),F0=()=>{const e=wf();js.getUserSetting().then(t=>{var o;e.setUserSetting(t.data);const n=((o=e.userSetting)==null?void 0:o.user_lang)||"zh_CN";kl.global.locale.value=n})},B0=e=>{kl.global.locale.value=e,wf().setUserSetting({user_lang:e})},U0=()=>{F0()},V0={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:""}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=h(!1);return mt(()=>{t.value=!0}),{style:e,visible:t}}},W0={class:"text"};function z0(e,t,n,o,a,l){return he((w(),E("div",{class:"pop-message",style:dt(o.style[n.type])},[s("i",{class:Le(["icon",[o.style[n.type].icon]])},null,2),s("span",W0,g(n.str),1)],4)),[[fl,o.visible]])}const H0=_t(V0,[["render",z0],["__scopeId","data-v-ccb6bb2b"]]),Hi=document.createElement("div");document.body.appendChild(Hi);let ji=null;const J=({str:e,type:t,name:n=""})=>{let o=kl.global.t(e);n.length>0&&(o=kl.global.t(e,{name:n}));const a=Ve(H0,{str:o,type:t});Nd(a,Hi),ji&&clearTimeout(ji),ji=setTimeout(()=>{Nd(null,Hi)},2e3)},j0={class:"language-selector-content"},G0=["onClick"],q0={class:"lang-name"},K0=_t({__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(null),l=Ds(),r=vt(()=>l.userSetting.user_lang),i=[{code:"zh_CN",name:""},{code:"en_US",name:"English"}],u=n,p=v=>{d(v),u("close",{})},d=v=>{js.setUserLanguage(v).then(m=>{B0(v),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.setLanguageSuccess"})}).catch(m=>{J({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:v=>{if(!a.value)return;const m=a.value;m.style.position="fixed",m.style.top=`${v.bottom}px`}}),(v,m)=>(w(),E("div",{class:"language-selector",ref_key:"selectorRef",ref:a},[s("div",j0,[(w(),E(De,null,ze(i,(y,S)=>s("div",{style:dt({"margin-top":S===0?"0":"2px"}),key:y.code,class:Le(["language-option",{active:r.value===y.code}]),onClick:$=>p(y.code)},[s("span",q0,g(y.name),1)],14,G0)),64))])],512))}},[["__scopeId","data-v-1a0e3baa"]]),mo="weilin_prompt_ui_",Ea=_t({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=()=>{o("update:modelValue",!1)},l=()=>{n.closeOnClickOverlay&&a()};return(r,i)=>(w(),xt(dc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[Ve(ys,{name:`${mo}dialog-fade`},{default:it(()=>[e.modelValue?(w(),E("div",{key:0,class:Le(`${mo}dialog-overlay`),onClick:l},[Ve(ys,{name:`${mo}dialog-slide`},{default:it(()=>[s("div",{style:dt({width:e.width}),class:Le(`${mo}dialog`),onClick:i[0]||(i[0]=Je(()=>{},["stop"]))},[s("div",{class:Le(`${mo}dialog-header`)},[s("h3",{class:Le(`${mo}dialog-title`)},g(e.title),3),s("button",{class:Le(`${mo}dialog-close`),onClick:a},i[1]||(i[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)],2),s("div",{class:Le(`${mo}dialog-content`)},[ol(r.$slots,"default")],2),r.$slots.footer?(w(),E("div",{key:0,class:Le(`${mo}dialog-footer`)},[ol(r.$slots,"footer")],2)):de("",!0)],6)]),_:3},8,["name"])],2)):de("",!0)]),_:3},8,["name"])]))}},[["__scopeId","data-v-d2e9c495"]]),en={getTranslateLocal:async e=>await Ie({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslateSetting:async()=>await Ie({url:"/translate/get/setting",method:"post",data:{}}),applyTranslateSetting:async e=>await Ie({url:"/translate/apply_setting",method:"post",data:{setting:e}}),getTranslateBuktSetting:async()=>await Ie({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,n)=>await Ie({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:n}}),translaterText:async(e,t)=>await Ie({url:"/translate/tran/text",method:"post",timeout:0,data:{str_object:e,text:t}}),translaterInputText:async(e,t)=>await Ie({url:"/translate/tran/input",method:"post",timeout:0,data:{str_object:e,text:t}})},Gi={getAutocomplete:async e=>await Ie({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await Ie({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await Ie({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},Cl={updateOpenAiSetting:async e=>await Ie({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await Ie({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await Ie({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await Ie({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await Ie({url:"/prompt/openai/get_settings",method:"get"})},Y0=["alibaba","bing","youdao"],El=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],qi={getAiServerSetting:async e=>await Ie({url:"/ai_server/get_settings",method:"post",data:{}}),updateAiServerSetting:async e=>await Ie({url:"/ai_server/update_settings",method:"post",data:e}),getAiModels:async()=>await Ie({url:"/ai_server/get_ai_models",method:"post",data:{}})},J0={class:"ai-server-setting-panel"},X0={class:"weilin-comfyui-translater-setting-box"},Q0={class:"weilin-comfyui-setting-item"},Z0={class:"weilin-comfyui-setting-item"},ey={class:"weilin-comfyui-setting-item"},ty={style:{display:"flex",gap:"10px"}},ny=["value"],oy={class:"weilin-comfyui-translater-setting-box"},ay={class:"weilin-comfyui-setting-small-titile"},ly={class:"weilin-comfyui-language-selectors"},sy={class:"weilin-comfyui-setting-item"},ry=["index","value"],iy={class:"weilin-comfyui-setting-item"},uy=["index","value"],cy={class:"weilin-comfyui-translater-setting-box"},dy={class:"weilin-comfyui-setting-small-titile"},py={class:"weilin-comfyui-setting-item"},fy=["placeholder"],gy={class:"weilin-comfyui-setting-item"},my=["placeholder"],vy=_t({__name:"ai_server_setting",setup(e){const{t}=ht(),n=h(""),o=h(""),a=h(""),l=h(""),r=h(""),i=h({api_key:"",base_url:"https://api.siliconflow.cn/v1",model:"",temperature:0,top_p:.7,max_tokens:4096}),u=h({object:"list",data:[]}),p=()=>{qi.updateAiServerSetting(i.value).then(S=>{S.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(S=>{J({type:"warn",str:"message.saveFailed"})})},d=()=>{qi.getAiServerSetting().then(S=>{i.value=S.data}).catch(S=>{J({type:"warn",str:"message.getTranslaterFail"})})},c=()=>{qi.getAiModels().then(S=>{u.value=S.data}).catch(S=>{J({type:"warn",str:"message.getTranslaterFail"})})},v=()=>{en.getTranslateBuktSetting().then(S=>{n.value=S.data.translate_service,o.value=S.data.translate_source_lang,a.value=S.data.translate_target_lang}).catch(S=>{J({type:"warn",str:"message.getTranslaterFail"})})},m=()=>{en.saveTranslateSetting(n.value,o.value,a.value).then(S=>{S.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(S=>{J({type:"warn",str:"message.saveFailed"})})},y=()=>{l.value="";let S={text:r.value,translate:""};const $=JSON.stringify(S);en.translaterInputText($,"").then(T=>{if(T&&T.data){const D=JSON.parse(T.data);l.value=D.translate}}).catch(T=>{J({type:"warn",str:"message.translaterTestFail"})})};return mt(()=>{d(),c(),v()}),(S,$)=>(w(),E("div",J0,[s("div",X0,[s("div",Q0,[$[7]||($[7]=s("label",null,"API Key",-1)),he(s("input",{type:"text","onUpdate:modelValue":$[0]||($[0]=T=>i.value.api_key=T),placeholder:"API Key",class:"weilin-comfyui-common-select"},null,512),[[Ae,i.value.api_key]])]),s("div",Z0,[$[9]||($[9]=s("label",null,"AI",-1)),he(s("select",{"onUpdate:modelValue":$[1]||($[1]=T=>i.value.base_url=T),disabled:"",class:"weilin-comfyui-common-select"},$[8]||($[8]=[s("option",{value:"https://api.siliconflow.cn/v1"},"AI",-1)]),512),[[Gt,i.value.base_url]])]),s("div",ey,[$[10]||($[10]=s("label",null,"ModelAPI Key",-1)),s("div",ty,[he(s("select",{"onUpdate:modelValue":$[2]||($[2]=T=>i.value.model=T),class:"weilin-comfyui-common-select",style:{flex:"1"}},[(w(!0),E(De,null,ze(u.value.data,T=>(w(),E("option",{key:T.id,value:T.id},g(T.id),9,ny))),128))],512),[[Gt,i.value.model]]),s("button",{type:"button",class:"weilin-comfyui-install-button",style:{width:"auto","min-width":"120px"},onClick:c},"  ")])]),s("button",{class:"weilin-comfyui-save-button",onClick:p},"AI")]),s("div",oy,[s("div",ay,g(f(t)("promptBox.settings.translaterSetting")),1),s("div",ly,[s("div",sy,[s("label",null,g(f(t)("promptBox.settings.translaterLangSourceSetting")),1),he(s("select",{"onUpdate:modelValue":$[3]||($[3]=T=>o.value=T)},[(w(!0),E(De,null,ze(f(El),(T,D)=>(w(),E("option",{index:D,key:"lan-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,ry))),128))],512),[[Gt,o.value]])]),s("div",iy,[s("label",null,g(f(t)("promptBox.settings.translaterLangTargeSetting")),1),he(s("select",{"onUpdate:modelValue":$[4]||($[4]=T=>a.value=T)},[(w(!0),E(De,null,ze(f(El),(T,D)=>(w(),E("option",{index:D,key:"lan-mu-item_"+D,value:T.translator},g(f(t)("translaterLanguage."+T.language)),9,uy))),128))],512),[[Gt,a.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:m},g(f(t)("promptBox.settings.saveTranslaterSetting")),1)]),s("div",cy,[s("div",dy,g(f(t)("promptBox.settings.testTranslaterTitle")),1),s("div",py,[s("label",null,g(f(t)("promptBox.settings.inputTestTranslater")),1),he(s("input",{type:"text","onUpdate:modelValue":$[5]||($[5]=T=>r.value=T),placeholder:f(t)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,fy),[[Ae,r.value]])]),s("div",gy,[s("label",null,g(f(t)("promptBox.settings.outPutTestTranslater")),1),he(s("input",{type:"text","onUpdate:modelValue":$[6]||($[6]=T=>l.value=T),readonly:"",placeholder:f(t)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,my),[[Ae,l.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:y},g(f(t)("promptBox.settings.testingTranslater")),1)])]))}},[["__scopeId","data-v-731441c6"]]),hy={class:"weilin-comfyui-settings-content"},_y={class:"weilin-comfyui-settings-sidebar"},yy={class:"weilin-comfyui-settings-main"},by={key:0},wy={class:"weilin-comfyui-setting-select"},xy={value:"translater"},Sy={class:"weilin-comfyui-translator-settings"},Ty={key:0,class:"weilin-comfyui-group-box"},ky={key:1,class:"weilin-comfyui-group-box"},Cy={class:"weilin-comfyui-group-title"},Ey={class:"weilin-comfyui-note-top"},$y={class:"weilin-comfyui-setting-item"},Ly={value:"auto"},Ay={value:"chinese_simplified"},My={value:"english"},Iy={class:"weilin-comfyui-setting-item"},Dy={value:"chinese_simplified"},Ry={value:"english"},Oy={key:2,class:"weilin-comfyui-group-box"},Ny={class:"weilin-comfyui-group-title"},Py={class:"weilin-comfyui-translater-setting-box"},Fy={class:"weilin-comfyui-setting-small-titile"},By={class:"weilin-comfyui-setting-item"},Uy=["index","value"],Vy={class:"weilin-comfyui-language-selectors"},Wy={class:"weilin-comfyui-setting-item"},zy=["index","value"],Hy={class:"weilin-comfyui-setting-item"},jy=["index","value"],Gy={class:"weilin-comfyui-tranlater-text-box"},qy={class:"weilin-comfyui-setting-small-titile"},Ky={class:"weilin-comfyui-setting-item"},Yy=["placeholder"],Jy={class:"weilin-comfyui-setting-item"},Xy=["placeholder"],Qy={key:1},Zy={class:"weilin-comfyui-floating-ball-settings"},e4={class:"weilin-comfyui-setting-item"},t4=["placeholder"],n4={class:"weilin-comfyui-setting-item"},o4=["placeholder"],a4={class:"weilin-comfyui-setting-item"},l4=["placeholder"],s4={key:2},r4={class:"weilin-comfyui-floating-ball-settings"},i4={class:"weilin-comfyui-setting-item"},u4={class:"weilin-comfyui-setting-item"},c4={class:"weilin-comfyui-setting-item"},d4={class:"weilin-comfyui-setting-item"},p4={class:"weilin-comfyui-setting-item"},f4={class:"weilin-comfyui-setting-item"},g4={key:3},m4={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},v4={class:"weilin-comfyui-settings-column"},h4={class:"weilin-comfyui-setting-item"},_4={class:"weilin-comfyui-setting-item"},y4=["placeholder"],b4={class:"weilin-comfyui-setting-item"},w4=["placeholder"],x4={class:"weilin-comfyui-setting-item"},S4=["placeholder"],T4={class:"weilin-comfyui-settings-column"},k4={class:"weilin-comfyui-setting-item"},C4={value:"default"},E4={value:"custom"},$4={key:0,class:"weilin-comfyui-setting-item"},L4={key:0,class:"weilin-comfyui-skin-preview"},A4=["src"],M4={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},I4={value:"gradient"},D4={value:"transparent"},R4={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},O4={style:{display:"flex",gap:"10px","align-items":"center"}},N4={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},P4={key:4},F4={class:"weilin-comfyui-floating-ball-settings"},B4={class:"weilin-comfyui-setting-item"},U4={class:"weilin-comfyui-setting-item"},V4={class:"weilin-comfyui-setting-item"},W4={class:"weilin-comfyui-setting-item"},z4={class:"weilin-comfyui-setting-item"},H4={class:"weilin-comfyui-setting-item"},j4={class:"weilin-comfyui-setting-item"},G4={key:5},q4={class:"weilin-comfyui-openai-settings"},K4={class:"weilin-comfyui-setting-item"},Y4=["value"],J4={class:"weilin-comfyui-config-list"},X4={class:"weilin-comfyui-config-header"},Q4={class:"weilin-comfyui-config-actions"},Z4=["onClick"],eb=["onClick"],tb={key:0,class:"weilin-comfyui-config-form"},nb={class:"weilin-comfyui-form-group"},ob=["placeholder"],ab={class:"weilin-comfyui-form-group"},lb=["placeholder"],sb={class:"weilin-comfyui-form-group"},rb=["placeholder"],ib={class:"weilin-comfyui-form-actions"},ub=["onClick"],cb={key:1,class:"weilin-comfyui-config-details"},db={key:0,class:"weilin-comfyui-config-form"},pb={class:"weilin-comfyui-form-group"},fb=["placeholder"],gb={class:"weilin-comfyui-form-group"},mb=["placeholder"],vb={class:"weilin-comfyui-form-group"},hb=["placeholder"],_b={class:"weilin-comfyui-form-actions"},yb={key:6},bb={class:"weilin-comfyui-sponsor-me-settings"},wb={key:7},xb={class:"weilin-comfyui-start-panel-settings"},xf=_t({__name:"setting_dialog",emits:["functionTogglesUpdated"],setup(e,{expose:t,emit:n}){const o=n,{t:a}=ht(),l=h(!1),r=h("translator"),i=h("baidu"),u=h(""),p=h(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),d=h(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),c=h(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),v=h(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),m=h(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||v.value),y=h(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),S=h(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),$=h(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),T=h(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),D=h(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),Y=h(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),x=h(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),P=h(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),H=h(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),j=h(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),K=h(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),X=h(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),ye=h(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),se=h(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),N=h(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),Z=h(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),te=h(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),z=h(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),ne=h(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),oe=h(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false"),F=h(""),B=h(""),ie=h(""),Ce=h(0),re=h([]),ge=h(!1),ce=h({api_key:"",base_url:"https://api.openai.com/v1",model:""}),ae=h(!1),G=h(-1),L=h("");h(!1),h(!1);const U=h(""),V=h(""),I=h(25),W=h(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),C=h(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),b=Fe=>{r.value=Fe,Fe=="setting_auto_complete_limit"&&Qt()},O=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",p.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",d.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),J({type:"success",str:"message.saveSuccess"})},Q=()=>{localStorage.setItem("weilin_function_toggles_clearAll",N.value),localStorage.setItem("weilin_function_toggles_deleteButton",Z.value),localStorage.setItem("weilin_function_toggles_randomTag",te.value),localStorage.setItem("weilin_function_toggles_randomTagSettings",z.value),localStorage.setItem("weilin_function_toggles_translateTag",ne.value),localStorage.setItem("weilin_function_toggles_clearDisabled",oe.value),o("functionTogglesUpdated",{clearAll:N.value,deleteButton:Z.value,randomTag:te.value,randomTagSettings:z.value,translateTag:ne.value,clearDisabled:oe.value}),J({type:"success",str:"message.saveSuccess"})},pe=Fe=>{const ke=Fe.target.files[0];if(ke){const Ee=new FileReader;Ee.onload=wt=>{$.value=wt.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",wt.target.result)},Ee.readAsDataURL(ke)}},be=()=>{D.value="#6a11cb",Y.value="#2575fc"},A=()=>{if(c.value<1||v.value<5||m.value<5){J({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",y.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",c.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",v.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",S.value),localStorage.setItem("weilin_prompt_ui_bgType",T.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",D.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",Y.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",x.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",m.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),J({type:"success",str:"message.saveSuccess"})},_=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",P.value),localStorage.setItem("weilin_prompt_ui_period_conversion",H.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",j.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",K.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",X.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",ye.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",se.value),J({type:"success",str:"message.saveSuccess"})},R=()=>{js.getUserSetting().then(Fe=>{re.value=Fe.data.openai_settings,Ce.value=Fe.data.select_openai})},q=()=>{ce.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},ae.value=!1,ge.value=!0},Se=Fe=>{Cl.deleteOpenAiSetting({index:Fe}).then(ke=>{R(),J({type:"success",str:"message.deleteSuccess"})}).catch(ke=>{J({type:"warn",str:"message.networkError"})})},we=Fe=>{G.value===Fe?G.value=-1:(ce.value={...re.value[Fe]},G.value=Fe)},ee=Fe=>{Cl.updateOpenAiSetting({index:Fe,...ce.value}).then(ke=>{R(),G.value=-1,J({type:"success",str:"message.saveSuccess"})}).catch(ke=>{J({type:"warn",str:"message.networkError"})})},me=()=>{Cl.addOpenAiSetting({...ce.value}).then(Fe=>{R(),ge.value=!1,G.value=-1,J({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{J({type:"warn",str:"message.networkError"})})},Re=()=>{ge.value=!1,G.value=-1},Pe=()=>{Cl.setOpenAiSelect({index:Ce.value}).then(Fe=>{J({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{J({type:"warn",str:"message.networkError"})})},He=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},Xe=()=>{js.startPanel().then(Fe=>{J({type:"success",str:"message.startPanelSuccess"})}).catch(Fe=>{J({type:"warn",str:"message.startPanelFailed"})})},at=()=>{en.getTranslateSetting().then(Fe=>{localStorage.setItem("weilin_prompt_ui_translater_setting",Fe.data),L.value=Fe.data}).catch(Fe=>{J({type:"warn",str:"message.getTranslaterFail"})})},bt=()=>{en.applyTranslateSetting(L.value).then(Fe=>{Fe.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",L.value),J({type:"success",str:"message.applyTranslaterSuccess"})):J({type:"warn",str:"message.applyToTranslaterFail"})}).catch(Fe=>{J({type:"warn",str:"message.applyTranslaterFail"})})},Dt=()=>{en.getTranslateBuktSetting().then(Fe=>{F.value=Fe.data.translate_service,B.value=Fe.data.translate_source_lang,ie.value=Fe.data.translate_target_lang}).catch(Fe=>{J({type:"warn",str:"message.getTranslaterFail"})})},Wn=()=>{en.saveTranslateSetting(F.value,B.value,ie.value).then(Fe=>{Fe.info=="ok"?J({type:"success",str:"message.saveSuccess"}):J({type:"warn",str:"message.saveFailed"})}).catch(Fe=>{J({type:"warn",str:"message.saveFailed"})})},Vo=()=>{L.value=="translater"?en.translaterInputText("",U.value).then(Fe=>{V.value=Fe.data}).catch(Fe=>{J({type:"warn",str:"message.translaterTestFail"})}):en.translaterInputText(U.value).then(Fe=>{V.value=Fe.text}).catch(Fe=>{J({type:"warn",str:"message.translaterTestFail"})})},zt=h(null),Qt=async()=>{await Gi.getAutocompleteLimit().then(Fe=>{I.value=Fe.data}).catch(Fe=>{console.error(Fe),J({type:"warn",str:"message.networkError"})})},Rn=async()=>{await Gi.updateAutocompleteLimit(I.value).then(Fe=>{J({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",W.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",C.value)}).catch(Fe=>{console.error(Fe),J({type:"warn",str:"message.networkError"})})},Pa=Fe=>{const ke=El.find(Ee=>Ee.translator===Fe);return ke?ke.language:Fe};return mt(()=>{Dt(),at(),R()}),Mn(()=>{zt.value&&clearInterval(zt.value)}),t({open:()=>{r.value="translator",i.value="baidu",u.value="",p.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",d.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",c.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,v.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,y.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",P.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",H.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",j.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",K.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",X.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",ye.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",l.value=!0}}),(Fe,ke)=>(w(),xt(Ea,{modelValue:l.value,"onUpdate:modelValue":ke[48]||(ke[48]=Ee=>l.value=Ee),title:f(a)("promptBox.settings.title")},{footer:it(()=>[s("button",{onClick:ke[47]||(ke[47]=Ee=>l.value=!1)},g(f(a)("promptBox.settings.close")),1)]),default:it(()=>[s("div",hy,[s("div",_y,[s("ul",null,[s("li",{class:Le({"weilin-comfyui-active":r.value==="translator"}),onClick:ke[0]||(ke[0]=Ee=>b("translator"))},g(f(a)("promptBox.settings.translator")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_function_toggles"}),onClick:ke[1]||(ke[1]=Ee=>b("setting_function_toggles"))},g(f(a)("promptBox.settings.setting_function_toggles")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_auto_complete_limit"}),onClick:ke[2]||(ke[2]=Ee=>b("setting_auto_complete_limit"))},g(f(a)("promptBox.settings.setting_auto_complete_limit")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_floating_ball"}),onClick:ke[3]||(ke[3]=Ee=>b("setting_floating_ball"))},g(f(a)("promptBox.settings.setting_floating_ball")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_prompt_box"}),onClick:ke[4]||(ke[4]=Ee=>b("setting_prompt_box"))},g(f(a)("promptBox.settings.setting_prompt_box")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_openai_box"}),onClick:ke[5]||(ke[5]=Ee=>b("setting_openai_box"))},g(f(a)("promptBox.settings.setting_openai_box")),3),s("li",{class:Le({"weilin-comfyui-active":r.value==="setting_sponsor_me"}),onClick:ke[6]||(ke[6]=Ee=>b("setting_sponsor_me"))},g(f(a)("promptBox.settings.setting_sponsor_me")),3)])]),s("div",yy,[r.value==="translator"?(w(),E("div",by,[s("h3",null,g(f(a)("promptBox.settings.translator")),1),s("div",wy,[s("label",null,g(f(a)("promptBox.settings.selectTranslater")),1),he(s("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":ke[7]||(ke[7]=Ee=>L.value=Ee),class:"weilin-comfyui-common-select"},[s("option",xy,g(f(a)("promptBox.settings.selectOptionPythonTranslater")),1),ke[49]||(ke[49]=s("option",{value:"other_ai_plate"},"AI",-1)),ke[50]||(ke[50]=s("option",{value:"openai"},"OpenAI API ",-1))],512),[[Gt,L.value]]),s("button",{class:"weilin-comfyui-install-button",onClick:bt},g(f(a)("promptBox.settings.apply")),1)]),s("div",Sy,[L.value=="other_ai_plate"?(w(),E("div",Ty,[Ve(vy)])):de("",!0),L.value=="network"?(w(),E("div",ky,[s("div",Cy,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),s("div",Ey,g(f(a)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"https://github.com/xnx3/translate",1),s("div",$y,[s("label",null,g(f(a)("promptBox.settings.sourceLanguage")),1),he(s("select",{"onUpdate:modelValue":ke[8]||(ke[8]=Ee=>p.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Ly,g(f(a)("promptBox.settings.auto_detect")),1),s("option",Ay,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",My,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,p.value]])]),s("div",Iy,[s("label",null,g(f(a)("promptBox.settings.targetLanguage")),1),he(s("select",{"onUpdate:modelValue":ke[9]||(ke[9]=Ee=>d.value=Ee),class:"weilin-comfyui-common-select"},[s("option",Dy,g(f(a)("promptBox.settings.chinese_simplified")),1),s("option",Ry,g(f(a)("promptBox.settings.english")),1)],512),[[Gt,d.value]])]),s("button",{class:"weilin-comfyui-save-button",onClick:O},g(f(a)("promptBox.settings.save")),1)])):de("",!0),L.value=="translater"?(w(),E("div",Oy,[s("div",Ny,g(f(a)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),s("div",Py,[s("div",Fy,g(f(a)("promptBox.settings.translaterSetting")),1),s("div",By,[s("label",null,g(f(a)("promptBox.settings.chooseTranslaterSetting")),1),he(s("select",{"onUpdate:modelValue":ke[10]||(ke[10]=Ee=>F.value=Ee)},[(w(!0),E(De,null,ze(f(Y0),(Ee,wt)=>(w(),E("option",{index:wt,key:"tran-item_"+wt,value:Ee},g(f(a)("translaterService."+Ee)),9,Uy))),128))],512),[[Gt,F.value]])]),s("div",Vy,[s("div",Wy,[s("label",null,g(f(a)("promptBox.settings.translaterLangSourceSetting")),1),he(s("select",{"onUpdate:modelValue":ke[11]||(ke[11]=Ee=>B.value=Ee)},[(w(!0),E(De,null,ze(f(El),(Ee,wt)=>(w(),E("option",{index:wt,key:"lan-item_"+wt,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,zy))),128))],512),[[Gt,B.value]])]),s("div",Hy,[s("label",null,g(f(a)("promptBox.settings.translaterLangTargeSetting")),1),he(s("select",{"onUpdate:modelValue":ke[12]||(ke[12]=Ee=>ie.value=Ee)},[(w(!0),E(De,null,ze(f(El),(Ee,wt)=>(w(),E("option",{index:wt,key:"lan-mu-item_"+wt,value:Ee.translator},g(f(a)("translaterLanguage."+Ee.language)),9,jy))),128))],512),[[Gt,ie.value]])])]),s("button",{class:"weilin-comfyui-install-button",onClick:Wn},g(f(a)("promptBox.settings.saveTranslaterSetting")),1)]),s("div",Gy,[s("div",qy,g(f(a)("promptBox.settings.testTranslaterTitle")),1),s("div",Ky,[s("label",null,g(f(a)("promptBox.settings.inputTestTranslater"))+" - "+g(f(a)("translaterLanguage."+Pa(ie.value))),1),he(s("input",{type:"text","onUpdate:modelValue":ke[13]||(ke[13]=Ee=>U.value=Ee),placeholder:f(a)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,Yy),[[Ae,U.value]])]),s("div",Jy,[s("label",null,g(f(a)("promptBox.settings.outPutTestTranslater"))+" - "+g(f(a)("translaterLanguage."+Pa(B.value))),1),he(s("input",{type:"text","onUpdate:modelValue":ke[14]||(ke[14]=Ee=>V.value=Ee),readonly:"",placeholder:f(a)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,Xy),[[Ae,V.value]])]),s("button",{class:"weilin-comfyui-install-button",onClick:Vo},g(f(a)("promptBox.settings.testingTranslater")),1)])])):de("",!0)])])):de("",!0),r.value==="setting_auto_complete_limit"?(w(),E("div",Qy,[s("h3",null,g(f(a)("promptBox.settings.setting_auto_complete_limit")),1),s("div",Zy,[s("div",e4,[s("label",null,g(f(a)("promptBox.settings.show_auto_limit")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[15]||(ke[15]=Ee=>I.value=Ee),min:"1",max:"99999999",style:{width:"100px"},placeholder:f(a)("promptBox.settings.showAutoLimitPlaceholder")},null,8,t4),[[Ae,I.value,void 0,{number:!0}]])]),s("div",n4,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteWidth")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[16]||(ke[16]=Ee=>W.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,o4),[[Ae,W.value,void 0,{number:!0}]])]),s("div",a4,[s("label",null,g(f(a)("promptBox.settings.settingAutoCompleteHeight")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[17]||(ke[17]=Ee=>C.value=Ee),min:"5",style:{width:"100px"},placeholder:f(a)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,l4),[[Ae,C.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",onClick:Rn},g(f(a)("promptBox.settings.save")),1)])])):de("",!0),r.value==="setting_function_toggles"?(w(),E("div",s4,[s("h3",null,g(f(a)("promptBox.settings.setting_function_toggles_full")),1),s("div",r4,[s("div",i4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[18]||(ke[18]=Ee=>N.value=Ee)},null,512),[[Lt,N.value]]),je(" "+g(f(a)("promptBox.settings.enableClearAll")),1)])]),s("div",u4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[19]||(ke[19]=Ee=>Z.value=Ee)},null,512),[[Lt,Z.value]]),je(" "+g(f(a)("promptBox.settings.enableDeleteButton")),1)])]),s("div",c4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[20]||(ke[20]=Ee=>te.value=Ee)},null,512),[[Lt,te.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTag")),1)])]),s("div",d4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[21]||(ke[21]=Ee=>z.value=Ee)},null,512),[[Lt,z.value]]),je(" "+g(f(a)("promptBox.settings.enableRandomTagSettings")),1)])]),s("div",p4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[22]||(ke[22]=Ee=>ne.value=Ee)},null,512),[[Lt,ne.value]]),je(" "+g(f(a)("promptBox.settings.enableTranslateTag")),1)])]),s("div",f4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[23]||(ke[23]=Ee=>oe.value=Ee)},null,512),[[Lt,oe.value]]),je(" "+g(f(a)("promptBox.settings.enableClearDisabled")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:Q},g(f(a)("promptBox.settings.save")),1)])])):de("",!0),r.value==="setting_floating_ball"?(w(),E("div",g4,[s("h3",null,g(f(a)("promptBox.settings.setting_floating_ball")),1),s("div",m4,[s("div",v4,[s("div",h4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[24]||(ke[24]=Ee=>y.value=Ee)},null,512),[[Lt,y.value]]),je(" "+g(f(a)("promptBox.settings.enableFloatingBall")),1)])]),s("div",_4,[s("label",null,g(f(a)("promptBox.settings.floatingBallCount")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[25]||(ke[25]=Ee=>c.value=Ee),min:"1",max:"100",placeholder:f(a)("promptBox.settings.floatingBallCountPlaceholder")},null,8,y4),[[Ae,c.value,void 0,{number:!0}]])]),s("div",b4,[s("label",null,g(f(a)("promptBox.settings.floatingBallSize")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[26]||(ke[26]=Ee=>v.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallSizePlaceholder")},null,8,w4),[[Ae,v.value,void 0,{number:!0}]])]),s("div",x4,[s("label",null,g(f(a)("promptBox.settings.floatingBallHeight")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[27]||(ke[27]=Ee=>m.value=Ee),min:"5",max:"999999",placeholder:f(a)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,S4),[[Ae,m.value,void 0,{number:!0}]])])]),s("div",T4,[s("div",k4,[s("label",null,g(f(a)("promptBox.settings.skinSetting")),1),he(s("select",{"onUpdate:modelValue":ke[28]||(ke[28]=Ee=>S.value=Ee)},[s("option",C4,g(f(a)("promptBox.settings.defaultSkin")),1),s("option",E4,g(f(a)("promptBox.settings.customSkin")),1)],512),[[Gt,S.value]])]),S.value==="custom"?(w(),E("div",$4,[s("label",null,g(f(a)("promptBox.settings.uploadSkin")),1),s("input",{type:"file",accept:"image/*",onChange:pe,ref:"skinUploader"},null,544),$.value?(w(),E("div",L4,[s("img",{src:$.value,alt:"Custom Skin Preview"},null,8,A4)])):de("",!0)])):de("",!0)]),s("div",M4,[s("label",null,g(f(a)("promptBox.settings.bgSetting")),1),he(s("select",{"onUpdate:modelValue":ke[29]||(ke[29]=Ee=>T.value=Ee)},[s("option",I4,g(f(a)("promptBox.settings.gradientBg")),1),s("option",D4,g(f(a)("promptBox.settings.transparentBg")),1)],512),[[Gt,T.value]])]),T.value==="gradient"?(w(),E("div",R4,[s("label",null,g(f(a)("promptBox.settings.gradientColor")),1),s("div",O4,[he(s("input",{type:"color","onUpdate:modelValue":ke[30]||(ke[30]=Ee=>D.value=Ee)},null,512),[[Ae,D.value]]),he(s("input",{type:"color","onUpdate:modelValue":ke[31]||(ke[31]=Ee=>Y.value=Ee)},null,512),[[Ae,Y.value]]),s("button",{onClick:be,style:{"margin-left":"10px",width:"200px"}},g(f(a)("promptBox.settings.resetToDefault")),1)])])):de("",!0),s("div",N4,[s("label",null,g(f(a)("promptBox.settings.borderRadius")),1),he(s("input",{type:"number","onUpdate:modelValue":ke[32]||(ke[32]=Ee=>x.value=Ee),min:"0",max:"50"},null,512),[[Ae,x.value,void 0,{number:!0}]])]),s("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:A},g(f(a)("promptBox.settings.save")),1)])])):de("",!0),r.value==="setting_prompt_box"?(w(),E("div",P4,[s("h3",null,g(f(a)("promptBox.settings.setting_prompt_box")),1),s("div",F4,[s("div",B4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[33]||(ke[33]=Ee=>P.value=Ee)},null,512),[[Lt,P.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaConversion")),1)])]),s("div",U4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[34]||(ke[34]=Ee=>H.value=Ee)},null,512),[[Lt,H.value]]),je(" "+g(f(a)("promptBox.settings.enablePeriodConversion")),1)])]),s("div",V4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[35]||(ke[35]=Ee=>j.value=Ee)},null,512),[[Lt,j.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketConversion")),1)])]),s("div",W4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[36]||(ke[36]=Ee=>K.value=Ee)},null,512),[[Lt,K.value]]),je(" "+g(f(a)("promptBox.settings.enableAngleBracketConversion")),1)])]),s("div",z4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[37]||(ke[37]=Ee=>X.value=Ee)},null,512),[[Lt,X.value]]),je(" "+g(f(a)("promptBox.settings.enableUnderscoreToBracket")),1)])]),s("div",H4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[38]||(ke[38]=Ee=>ye.value=Ee)},null,512),[[Lt,ye.value]]),je(" "+g(f(a)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),s("div",j4,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ke[39]||(ke[39]=Ee=>se.value=Ee)},null,512),[[Lt,se.value]]),je(" "+g(f(a)("promptBox.settings.enableBracketEscape")),1)])]),s("button",{class:"weilin-comfyui-save-button",onClick:_},g(f(a)("promptBox.settings.save")),1)])])):de("",!0),r.value==="setting_openai_box"?(w(),E("div",G4,[s("h3",null,g(f(a)("promptBox.settings.openaiSettings")),1),s("div",q4,[s("div",K4,[s("label",null,g(f(a)("promptBox.settings.selectedOpenaiConfig")),1),he(s("select",{"onUpdate:modelValue":ke[40]||(ke[40]=Ee=>Ce.value=Ee),onChange:Pe},[(w(!0),E(De,null,ze(re.value,(Ee,wt)=>(w(),E("option",{key:wt,value:wt},g(Ee.model)+" ("+g(Ee.base_url)+") ",9,Y4))),128))],544),[[Gt,Ce.value]])]),s("div",J4,[(w(!0),E(De,null,ze(re.value,(Ee,wt)=>(w(),E("div",{key:wt,class:"weilin-comfyui-config-item"},[s("div",X4,[s("span",null,g(Ee.model),1),s("div",Q4,[s("button",{onClick:rn=>we(wt)},g(G.value===wt?f(a)("promptBox.settings.cancel"):f(a)("promptBox.settings.edit")),9,Z4),s("button",{onClick:rn=>Se(wt)},g(f(a)("promptBox.settings.delete")),9,eb)])]),G.value===wt?(w(),E("div",tb,[s("div",nb,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[41]||(ke[41]=rn=>ce.value.api_key=rn),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,ob),[[Ae,ce.value.api_key]])]),s("div",ab,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[42]||(ke[42]=rn=>ce.value.base_url=rn),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,lb),[[Ae,ce.value.base_url]])]),s("div",sb,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[43]||(ke[43]=rn=>ce.value.model=rn),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,rb),[[Ae,ce.value.model]])]),s("div",ib,[s("button",{onClick:rn=>ee(wt)},g(f(a)("promptBox.settings.save")),9,ub)])])):(w(),E("div",cb,[s("div",null,g(f(a)("promptBox.settings.openai_api_key"))+": "+g(Ee.api_key?"******":f(a)("promptBox.settings.not_set")),1),s("div",null,g(f(a)("promptBox.settings.openai_base_url"))+": "+g(Ee.base_url),1)]))]))),128))]),ge.value?(w(),E("div",db,[s("div",pb,[s("label",null,g(f(a)("promptBox.settings.openai_api_key"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[44]||(ke[44]=Ee=>ce.value.api_key=Ee),placeholder:f(a)("promptBox.settings.openai_api_key_placeholder")},null,8,fb),[[Ae,ce.value.api_key]])]),s("div",gb,[s("label",null,g(f(a)("promptBox.settings.openai_base_url"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[45]||(ke[45]=Ee=>ce.value.base_url=Ee),placeholder:f(a)("promptBox.settings.openai_base_url_placeholder")},null,8,mb),[[Ae,ce.value.base_url]])]),s("div",vb,[s("label",null,g(f(a)("promptBox.settings.openai_model"))+":",1),he(s("input",{type:"text","onUpdate:modelValue":ke[46]||(ke[46]=Ee=>ce.value.model=Ee),placeholder:f(a)("promptBox.settings.openai_model_placeholder")},null,8,hb),[[Ae,ce.value.model]])]),s("div",_b,[s("button",{onClick:Re},g(f(a)("promptBox.settings.cancel")),1),s("button",{onClick:me},g(f(a)("promptBox.settings.save")),1)])])):de("",!0),ge.value?de("",!0):(w(),E("button",{key:1,class:"weilin-comfyui-add-button",onClick:q},g(f(a)("promptBox.settings.addNewConfig")),1))])])):de("",!0),r.value==="setting_sponsor_me"?(w(),E("div",yb,[s("h3",null,g(f(a)("promptBox.settings.setting_sponsor_me")),1),s("div",bb,[s("h1",null,g(f(a)("promptBox.settings.sponsorMeTip")),1),s("h2",null,g(f(a)("promptBox.settings.sponsorMeLink")),1),s("button",{class:"weilin-comfyui-sponsor-me-button",onClick:He},g(f(a)("promptBox.settings.sponsorMe")),1)])])):de("",!0),r.value==="setting_start_panel"?(w(),E("div",wb,[s("h3",null,g(f(a)("promptBox.settings.setting_start_panel")),1),s("div",xb,[s("h4",null,g(f(a)("promptBox.settings.startPanelTip")),1),s("button",{class:"weilin-comfyui-start-panel-button",onClick:Xe},g(f(a)("promptBox.settings.startPanel")),1)])])):de("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-f5f5223b"]]),Sb=["title"],Tb={class:"switch-icon"},kb={key:0,class:"moon",viewBox:"0 0 24 24"},Cb={key:1,class:"sun",viewBox:"0 0 24 24"},Eb="weilin_tools_",$b=_t({__name:"ThemeSwitch",setup(e){const{t}=ht(),n=`${Eb}theme`,o=h(localStorage.getItem(n)==="dark"),a=()=>{o.value=!o.value;const l=document.getElementById("weilin_comfyui_tools_prompt_ui_div");l&&l.setAttribute("data-theme",o.value?"dark":"light"),localStorage.setItem(n,o.value?"dark":"light")};return(l,r)=>(w(),E("button",{class:"theme-switch",onClick:a,title:f(t)("theme.toggle")},[s("div",Tb,[o.value?(w(),E("svg",kb,r[0]||(r[0]=[s("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)]))):(w(),E("svg",Cb,r[1]||(r[1]=[s("circle",{cx:"12",cy:"12",r:"5"},null,-1),s("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])))]),ol(l.$slots,"default",{isDark:o.value},void 0,!0)],8,Sb))}},[["__scopeId","data-v-43d9cf91"]]),bn="weilin_tools_",It={getTagsList:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await Ie({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await Ie({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await Ie({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await Ie({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await Ie({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await Ie({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const Gs="0123456789abcdef";class la{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new la(t)}static fromFieldsV7(t,n,o,a){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(o)||!Number.isInteger(a)||t<0||n<0||o<0||a<0||t>0xffffffffffff||n>4095||o>1073741823||a>4294967295)throw new RangeError("invalid field value");const l=new Uint8Array(16);return l[0]=t/2**40,l[1]=t/2**32,l[2]=t/2**24,l[3]=t/2**16,l[4]=t/2**8,l[5]=t,l[6]=112|n>>>8,l[7]=n,l[8]=128|o>>>24,l[9]=o>>>16,l[10]=o>>>8,l[11]=o,l[12]=a>>>24,l[13]=a>>>16,l[14]=a>>>8,l[15]=a,new la(l)}static parse(t){var n,o,a,l;let r;switch(t.length){case 32:r=(n=/^[0-9a-f]{32}$/i.exec(t))===null||n===void 0?void 0:n[0];break;case 36:r=(o=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||o===void 0?void 0:o.slice(1,6).join("");break;case 38:r=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:r=(l=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||l===void 0?void 0:l.slice(1,6).join("");break}if(r){const i=new Uint8Array(16);for(let u=0;u<16;u+=4){const p=parseInt(r.substring(2*u,2*u+8),16);i[u+0]=p>>>24,i[u+1]=p>>>16,i[u+2]=p>>>8,i[u+3]=p}return new la(i)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let n=0;n<this.bytes.length;n++)t+=Gs.charAt(this.bytes[n]>>>4),t+=Gs.charAt(this.bytes[n]&15),(n===3||n===5||n===7||n===9)&&(t+="-");return t}toHex(){let t="";for(let n=0;n<this.bytes.length;n++)t+=Gs.charAt(this.bytes[n]>>>4),t+=Gs.charAt(this.bytes[n]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(n=>n===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(n=>n===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new la(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let n=0;n<16;n++){const o=this.bytes[n]-t.bytes[n];if(o!==0)return Math.sign(o)}return 0}}class Lb{constructor(t){this.timestamp=0,this.counter=0,this.random=t??Ab()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,n){let o=this.generateOrAbortCore(t,n);return o===void 0&&(this.timestamp=0,o=this.generateOrAbortCore(t,n)),o}generateOrAbortCore(t,n){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(n<0||n>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+n>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return la.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,la.ofInner(t)}}const Ab=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new Mb;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class Mb{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Sf;const Po=()=>Ib().toString(),Ib=()=>(Sf||(Sf=new Lb)).generate(),Db={class:"tag-manager"},Rb={class:"category-tabs"},Ob={class:"tabs-wrapper primary-tabs"},Nb={class:"tabs-scroll"},Pb=["onClick"],Fb={class:"tab-text"},Bb={key:0,class:"tabs-wrapper group-tabs"},Ub={class:"tabs-scroll"},Vb=["onClick"],Wb={class:"tab-text"},Tf=_t({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=n,l=h([]),r=h(null),i=h(null),u=h([]),p=h(!1),d=h(!1),c=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},v=async()=>{try{const D=await It.getTagsGroupList();if(l.value=D.info,i.value){const Y=l.value.flatMap(x=>x.groups).find(x=>x.p_uuid===i.value.p_uuid);Y?i.value=Y:i.value=null}if(r.value){const Y=l.value.find(x=>x.p_uuid===r.value.p_uuid);Y?r.value=Y:r.value=null}}catch(D){console.error(":",D)}},m=D=>{if(!D||D==="transparent")return"var(--primary-text)";let Y,x,P,H=1;if(D.startsWith("rgba")){const K=D.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);K&&([,Y,x,P,H]=K.map(Number))}else if(D.startsWith("rgb")){const K=D.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);K&&([,Y,x,P]=K.map(Number))}return H<.5?"var(--primary-text)":(Y*299+x*587+P*114)/1e3>128?"#000000":"#ffffff"};mt(()=>{window.addEventListener("message",$)}),Co(()=>{window.removeEventListener("message",$)});const y=D=>{r.value=D,i.value=null,p.value=!1,u.value=[]},S=D=>{i.value=D,p.value=!1,u.value=[]},$=D=>{D.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&v()},T=()=>{if(i.value==null||r.value==null){J({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{group:r.value,sub:i.value}),d.value=!1};return t({open:()=>{c(),d.value=!0}}),(D,Y)=>(w(),xt(Ea,{modelValue:d.value,"onUpdate:modelValue":Y[1]||(Y[1]=x=>d.value=x),title:f(o)("importDialog.selectTitle")},{footer:it(()=>[s("button",{onClick:Y[0]||(Y[0]=x=>d.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:T},g(f(o)("importDialog.sureSelect")),1)]),default:it(()=>[s("div",Db,[s("div",Rb,[s("div",Ob,[s("div",Nb,[(w(!0),E(De,null,ze(l.value,(x,P)=>{var H,j,K;return w(),E("div",{key:"Tabss-"+P,class:Le(["tab-item",{active:((H=r.value)==null?void 0:H.name)===x.name}]),style:dt({backgroundColor:((j=r.value)==null?void 0:j.name)===x.name?"var(--primary-color)":x.color,color:((K=r.value)==null?void 0:K.name)===x.name?"#ffffff":m(x.color)}),onClick:X=>y(x)},[s("span",Fb,g(x.name),1)],14,Pb)}),128))])]),r.value?(w(),E("div",Bb,[s("div",Ub,[(w(!0),E(De,null,ze(r.value.groups,(x,P)=>{var H,j,K;return w(),E("div",{key:"TabsSw-"+P,class:Le(["tab-item",{active:((H=i.value)==null?void 0:H.name)===x.name}]),style:dt({backgroundColor:((j=i.value)==null?void 0:j.name)===x.name?"var(--primary-color)":x.color,color:((K=i.value)==null?void 0:K.name)===x.name?"#ffffff":m(x.color)}),onClick:X=>S(x)},[s("span",Wb,g(x.name),1)],14,Vb)}),128))])])):de("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-f6c0f177"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function kf(e){return typeof e>"u"||e===null}function zb(e){return typeof e=="object"&&e!==null}function Hb(e){return Array.isArray(e)?e:kf(e)?[]:[e]}function jb(e,t){var n,o,a,l;if(t)for(l=Object.keys(t),n=0,o=l.length;n<o;n+=1)a=l[n],e[a]=t[a];return e}function Gb(e,t){var n="",o;for(o=0;o<t;o+=1)n+=e;return n}function qb(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Kb=kf,Yb=zb,Jb=Hb,Xb=Gb,Qb=qb,Zb=jb,Kt={isNothing:Kb,isObject:Yb,toArray:Jb,repeat:Xb,isNegativeZero:Qb,extend:Zb};function Cf(e,t){var n="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),o+" "+n):o}function $l(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Cf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}$l.prototype=Object.create(Error.prototype),$l.prototype.constructor=$l,$l.prototype.toString=function(t){return this.name+": "+Cf(this,t)};var vn=$l;function Ki(e,t,n,o,a){var l="",r="",i=Math.floor(a/2)-1;return o-t>i&&(l=" ... ",t=o-i+l.length),n-o>i&&(r=" ...",n=o+i-r.length),{str:l+e.slice(t,n).replace(/\t/g,"")+r,pos:o-t+l.length}}function Yi(e,t){return Kt.repeat(" ",t-e.length)+e}function e3(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,o=[0],a=[],l,r=-1;l=n.exec(e.buffer);)a.push(l.index),o.push(l.index+l[0].length),e.position<=l.index&&r<0&&(r=o.length-2);r<0&&(r=o.length-1);var i="",u,p,d=Math.min(e.line+t.linesAfter,a.length).toString().length,c=t.maxLength-(t.indent+d+3);for(u=1;u<=t.linesBefore&&!(r-u<0);u++)p=Ki(e.buffer,o[r-u],a[r-u],e.position-(o[r]-o[r-u]),c),i=Kt.repeat(" ",t.indent)+Yi((e.line-u+1).toString(),d)+" | "+p.str+`
`+i;for(p=Ki(e.buffer,o[r],a[r],e.position,c),i+=Kt.repeat(" ",t.indent)+Yi((e.line+1).toString(),d)+" | "+p.str+`
`,i+=Kt.repeat("-",t.indent+d+3+p.pos)+`^
`,u=1;u<=t.linesAfter&&!(r+u>=a.length);u++)p=Ki(e.buffer,o[r+u],a[r+u],e.position-(o[r]-o[r+u]),c),i+=Kt.repeat(" ",t.indent)+Yi((e.line+u+1).toString(),d)+" | "+p.str+`
`;return i.replace(/\n$/,"")}var t3=e3,n3=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],o3=["scalar","sequence","mapping"];function a3(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(o){t[String(o)]=n})}),t}function l3(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(n3.indexOf(n)===-1)throw new vn('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=a3(t.styleAliases||null),o3.indexOf(this.kind)===-1)throw new vn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var tn=l3;function Ef(e,t){var n=[];return e[t].forEach(function(o){var a=n.length;n.forEach(function(l,r){l.tag===o.tag&&l.kind===o.kind&&l.multi===o.multi&&(a=r)}),n[a]=o}),n}function s3(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function o(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(o);return e}function Ji(e){return this.extend(e)}Ji.prototype.extend=function(t){var n=[],o=[];if(t instanceof tn)o.push(t);else if(Array.isArray(t))o=o.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(o=o.concat(t.explicit));else throw new vn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof tn))throw new vn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new vn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new vn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(l){if(!(l instanceof tn))throw new vn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Ji.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(o),a.compiledImplicit=Ef(a,"implicit"),a.compiledExplicit=Ef(a,"explicit"),a.compiledTypeMap=s3(a.compiledImplicit,a.compiledExplicit),a};var $f=Ji,Lf=new tn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Af=new tn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Mf=new tn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),If=new $f({explicit:[Lf,Af,Mf]});function r3(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function i3(){return null}function u3(e){return e===null}var Df=new tn("tag:yaml.org,2002:null",{kind:"scalar",resolve:r3,construct:i3,predicate:u3,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function c3(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function d3(e){return e==="true"||e==="True"||e==="TRUE"}function p3(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Rf=new tn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c3,construct:d3,predicate:p3,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function f3(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function g3(e){return 48<=e&&e<=55}function m3(e){return 48<=e&&e<=57}function v3(e){if(e===null)return!1;var t=e.length,n=0,o=!1,a;if(!t)return!1;if(a=e[n],(a==="-"||a==="+")&&(a=e[++n]),a==="0"){if(n+1===t)return!0;if(a=e[++n],a==="b"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;o=!0}return o&&a!=="_"}if(a==="x"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!f3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}if(a==="o"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!g3(e.charCodeAt(n)))return!1;o=!0}return o&&a!=="_"}}if(a==="_")return!1;for(;n<t;n++)if(a=e[n],a!=="_"){if(!m3(e.charCodeAt(n)))return!1;o=!0}return!(!o||a==="_")}function h3(e){var t=e,n=1,o;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),o=t[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),t=t.slice(1),o=t[0]),t==="0")return 0;if(o==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function _3(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Kt.isNegativeZero(e)}var Of=new tn("tag:yaml.org,2002:int",{kind:"scalar",resolve:v3,construct:h3,predicate:_3,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),y3=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function b3(e){return!(e===null||!y3.test(e)||e[e.length-1]==="_")}function w3(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var x3=/^[-+]?[0-9]+e/;function S3(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kt.isNegativeZero(e))return"-0.0";return n=e.toString(10),x3.test(n)?n.replace("e",".e"):n}function T3(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kt.isNegativeZero(e))}var Nf=new tn("tag:yaml.org,2002:float",{kind:"scalar",resolve:b3,construct:w3,predicate:T3,represent:S3,defaultStyle:"lowercase"}),Pf=If.extend({implicit:[Df,Rf,Of,Nf]}),Ff=Pf,Bf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Uf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function k3(e){return e===null?!1:Bf.exec(e)!==null||Uf.exec(e)!==null}function C3(e){var t,n,o,a,l,r,i,u=0,p=null,d,c,v;if(t=Bf.exec(e),t===null&&(t=Uf.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],o=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,o,a));if(l=+t[4],r=+t[5],i=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(d=+t[10],c=+(t[11]||0),p=(d*60+c)*6e4,t[9]==="-"&&(p=-p)),v=new Date(Date.UTC(n,o,a,l,r,i,u)),p&&v.setTime(v.getTime()-p),v}function E3(e){return e.toISOString()}var Vf=new tn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:k3,construct:C3,instanceOf:Date,represent:E3});function $3(e){return e==="<<"||e===null}var Wf=new tn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$3}),Xi=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function L3(e){if(e===null)return!1;var t,n,o=0,a=e.length,l=Xi;for(n=0;n<a;n++)if(t=l.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;o+=6}return o%8===0}function A3(e){var t,n,o=e.replace(/[\r\n=]/g,""),a=o.length,l=Xi,r=0,i=[];for(t=0;t<a;t++)t%4===0&&t&&(i.push(r>>16&255),i.push(r>>8&255),i.push(r&255)),r=r<<6|l.indexOf(o.charAt(t));return n=a%4*6,n===0?(i.push(r>>16&255),i.push(r>>8&255),i.push(r&255)):n===18?(i.push(r>>10&255),i.push(r>>2&255)):n===12&&i.push(r>>4&255),new Uint8Array(i)}function M3(e){var t="",n=0,o,a,l=e.length,r=Xi;for(o=0;o<l;o++)o%3===0&&o&&(t+=r[n>>18&63],t+=r[n>>12&63],t+=r[n>>6&63],t+=r[n&63]),n=(n<<8)+e[o];return a=l%3,a===0?(t+=r[n>>18&63],t+=r[n>>12&63],t+=r[n>>6&63],t+=r[n&63]):a===2?(t+=r[n>>10&63],t+=r[n>>4&63],t+=r[n<<2&63],t+=r[64]):a===1&&(t+=r[n>>2&63],t+=r[n<<4&63],t+=r[64],t+=r[64]),t}function I3(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var zf=new tn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:L3,construct:A3,predicate:I3,represent:M3}),D3=Object.prototype.hasOwnProperty,R3=Object.prototype.toString;function O3(e){if(e===null)return!0;var t=[],n,o,a,l,r,i=e;for(n=0,o=i.length;n<o;n+=1){if(a=i[n],r=!1,R3.call(a)!=="[object Object]")return!1;for(l in a)if(D3.call(a,l))if(!r)r=!0;else return!1;if(!r)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function N3(e){return e!==null?e:[]}var Hf=new tn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:O3,construct:N3}),P3=Object.prototype.toString;function F3(e){if(e===null)return!0;var t,n,o,a,l,r=e;for(l=new Array(r.length),t=0,n=r.length;t<n;t+=1){if(o=r[t],P3.call(o)!=="[object Object]"||(a=Object.keys(o),a.length!==1))return!1;l[t]=[a[0],o[a[0]]]}return!0}function B3(e){if(e===null)return[];var t,n,o,a,l,r=e;for(l=new Array(r.length),t=0,n=r.length;t<n;t+=1)o=r[t],a=Object.keys(o),l[t]=[a[0],o[a[0]]];return l}var jf=new tn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:F3,construct:B3}),U3=Object.prototype.hasOwnProperty;function V3(e){if(e===null)return!0;var t,n=e;for(t in n)if(U3.call(n,t)&&n[t]!==null)return!1;return!0}function W3(e){return e!==null?e:{}}var Gf=new tn("tag:yaml.org,2002:set",{kind:"mapping",resolve:V3,construct:W3}),Qi=Ff.extend({implicit:[Vf,Wf],explicit:[zf,Hf,jf,Gf]}),Fo=Object.prototype.hasOwnProperty,qs=1,qf=2,Kf=3,Ks=4,Zi=1,z3=2,Yf=3,H3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,j3=/[\x85\u2028\u2029]/,G3=/[,\[\]\{\}]/,Jf=/^(?:!|!!|![a-z\-]+!)$/i,Xf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Qf(e){return Object.prototype.toString.call(e)}function Zn(e){return e===10||e===13}function sa(e){return e===9||e===32}function wn(e){return e===9||e===32||e===10||e===13}function $a(e){return e===44||e===91||e===93||e===123||e===125}function q3(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function K3(e){return e===120?2:e===117?4:e===85?8:0}function Y3(e){return 48<=e&&e<=57?e-48:-1}function Zf(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function J3(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var eg=new Array(256),tg=new Array(256),La=0;La<256;La++)eg[La]=Zf(La)?1:0,tg[La]=Zf(La);function X3(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Qi,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ng(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=t3(n),new vn(t,n)}function Be(e,t){throw ng(e,t)}function Ys(e,t){e.onWarning&&e.onWarning.call(null,ng(e,t))}var og={YAML:function(t,n,o){var a,l,r;t.version!==null&&Be(t,"duplication of %YAML directive"),o.length!==1&&Be(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(o[0]),a===null&&Be(t,"ill-formed argument of the YAML directive"),l=parseInt(a[1],10),r=parseInt(a[2],10),l!==1&&Be(t,"unacceptable YAML version of the document"),t.version=o[0],t.checkLineBreaks=r<2,r!==1&&r!==2&&Ys(t,"unsupported YAML version of the document")},TAG:function(t,n,o){var a,l;o.length!==2&&Be(t,"TAG directive accepts exactly two arguments"),a=o[0],l=o[1],Jf.test(a)||Be(t,"ill-formed tag handle (first argument) of the TAG directive"),Fo.call(t.tagMap,a)&&Be(t,'there is a previously declared suffix for "'+a+'" tag handle'),Xf.test(l)||Be(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{Be(t,"tag prefix is malformed: "+l)}t.tagMap[a]=l}};function Bo(e,t,n,o){var a,l,r,i;if(t<n){if(i=e.input.slice(t,n),o)for(a=0,l=i.length;a<l;a+=1)r=i.charCodeAt(a),r===9||32<=r&&r<=1114111||Be(e,"expected valid JSON character");else H3.test(i)&&Be(e,"the stream contains non-printable characters");e.result+=i}}function ag(e,t,n,o){var a,l,r,i;for(Kt.isObject(n)||Be(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n),r=0,i=a.length;r<i;r+=1)l=a[r],Fo.call(t,l)||(t[l]=n[l],o[l]=!0)}function Aa(e,t,n,o,a,l,r,i,u){var p,d;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),p=0,d=a.length;p<d;p+=1)Array.isArray(a[p])&&Be(e,"nested arrays are not supported inside keys"),typeof a=="object"&&Qf(a[p])==="[object Object]"&&(a[p]="[object Object]");if(typeof a=="object"&&Qf(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(p=0,d=l.length;p<d;p+=1)ag(e,t,l[p],n);else ag(e,t,l,n);else!e.json&&!Fo.call(n,a)&&Fo.call(t,a)&&(e.line=r||e.line,e.lineStart=i||e.lineStart,e.position=u||e.position,Be(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:l}):t[a]=l,delete n[a];return t}function eu(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Be(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Vt(e,t,n){for(var o=0,a=e.input.charCodeAt(e.position);a!==0;){for(;sa(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Zn(a))for(eu(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return n!==-1&&o!==0&&e.lineIndent<n&&Ys(e,"deficient indentation"),o}function Js(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||wn(n)))}function tu(e,t){t===1?e.result+=" ":t>1&&(e.result+=Kt.repeat(`
`,t-1))}function Q3(e,t,n){var o,a,l,r,i,u,p,d,c=e.kind,v=e.result,m;if(m=e.input.charCodeAt(e.position),wn(m)||$a(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(a=e.input.charCodeAt(e.position+1),wn(a)||n&&$a(a)))return!1;for(e.kind="scalar",e.result="",l=r=e.position,i=!1;m!==0;){if(m===58){if(a=e.input.charCodeAt(e.position+1),wn(a)||n&&$a(a))break}else if(m===35){if(o=e.input.charCodeAt(e.position-1),wn(o))break}else{if(e.position===e.lineStart&&Js(e)||n&&$a(m))break;if(Zn(m))if(u=e.line,p=e.lineStart,d=e.lineIndent,Vt(e,!1,-1),e.lineIndent>=t){i=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=r,e.line=u,e.lineStart=p,e.lineIndent=d;break}}i&&(Bo(e,l,r,!1),tu(e,e.line-u),l=r=e.position,i=!1),sa(m)||(r=e.position+1),m=e.input.charCodeAt(++e.position)}return Bo(e,l,r,!1),e.result?!0:(e.kind=c,e.result=v,!1)}function Z3(e,t){var n,o,a;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,o=a=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Bo(e,o,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)o=e.position,e.position++,a=e.position;else return!0;else Zn(n)?(Bo(e,o,a,!0),tu(e,Vt(e,!1,t)),o=a=e.position):e.position===e.lineStart&&Js(e)?Be(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Be(e,"unexpected end of the stream within a single quoted scalar")}function ew(e,t){var n,o,a,l,r,i;if(i=e.input.charCodeAt(e.position),i!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(i=e.input.charCodeAt(e.position))!==0;){if(i===34)return Bo(e,n,e.position,!0),e.position++,!0;if(i===92){if(Bo(e,n,e.position,!0),i=e.input.charCodeAt(++e.position),Zn(i))Vt(e,!1,t);else if(i<256&&eg[i])e.result+=tg[i],e.position++;else if((r=K3(i))>0){for(a=r,l=0;a>0;a--)i=e.input.charCodeAt(++e.position),(r=q3(i))>=0?l=(l<<4)+r:Be(e,"expected hexadecimal character");e.result+=J3(l),e.position++}else Be(e,"unknown escape sequence");n=o=e.position}else Zn(i)?(Bo(e,n,o,!0),tu(e,Vt(e,!1,t)),n=o=e.position):e.position===e.lineStart&&Js(e)?Be(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}Be(e,"unexpected end of the stream within a double quoted scalar")}function tw(e,t){var n=!0,o,a,l,r=e.tag,i,u=e.anchor,p,d,c,v,m,y=Object.create(null),S,$,T,D;if(D=e.input.charCodeAt(e.position),D===91)d=93,m=!1,i=[];else if(D===123)d=125,m=!0,i={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),D=e.input.charCodeAt(++e.position);D!==0;){if(Vt(e,!0,t),D=e.input.charCodeAt(e.position),D===d)return e.position++,e.tag=r,e.anchor=u,e.kind=m?"mapping":"sequence",e.result=i,!0;n?D===44&&Be(e,"expected the node content, but found ','"):Be(e,"missed comma between flow collection entries"),$=S=T=null,c=v=!1,D===63&&(p=e.input.charCodeAt(e.position+1),wn(p)&&(c=v=!0,e.position++,Vt(e,!0,t))),o=e.line,a=e.lineStart,l=e.position,Ma(e,t,qs,!1,!0),$=e.tag,S=e.result,Vt(e,!0,t),D=e.input.charCodeAt(e.position),(v||e.line===o)&&D===58&&(c=!0,D=e.input.charCodeAt(++e.position),Vt(e,!0,t),Ma(e,t,qs,!1,!0),T=e.result),m?Aa(e,i,y,$,S,T,o,a,l):c?i.push(Aa(e,null,y,$,S,T,o,a,l)):i.push(S),Vt(e,!0,t),D=e.input.charCodeAt(e.position),D===44?(n=!0,D=e.input.charCodeAt(++e.position)):n=!1}Be(e,"unexpected end of the stream within a flow collection")}function nw(e,t){var n,o,a=Zi,l=!1,r=!1,i=t,u=0,p=!1,d,c;if(c=e.input.charCodeAt(e.position),c===124)o=!1;else if(c===62)o=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)Zi===a?a=c===43?Yf:z3:Be(e,"repeat of a chomping mode identifier");else if((d=Y3(c))>=0)d===0?Be(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):r?Be(e,"repeat of an indentation width identifier"):(i=t+d-1,r=!0);else break;if(sa(c)){do c=e.input.charCodeAt(++e.position);while(sa(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!Zn(c)&&c!==0)}for(;c!==0;){for(eu(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!r||e.lineIndent<i)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!r&&e.lineIndent>i&&(i=e.lineIndent),Zn(c)){u++;continue}if(e.lineIndent<i){a===Yf?e.result+=Kt.repeat(`
`,l?1+u:u):a===Zi&&l&&(e.result+=`
`);break}for(o?sa(c)?(p=!0,e.result+=Kt.repeat(`
`,l?1+u:u)):p?(p=!1,e.result+=Kt.repeat(`
`,u+1)):u===0?l&&(e.result+=" "):e.result+=Kt.repeat(`
`,u):e.result+=Kt.repeat(`
`,l?1+u:u),l=!0,r=!0,u=0,n=e.position;!Zn(c)&&c!==0;)c=e.input.charCodeAt(++e.position);Bo(e,n,e.position,!1)}return!0}function lg(e,t){var n,o=e.tag,a=e.anchor,l=[],r,i=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),!(u!==45||(r=e.input.charCodeAt(e.position+1),!wn(r))));){if(i=!0,e.position++,Vt(e,!0,-1)&&e.lineIndent<=t){l.push(null),u=e.input.charCodeAt(e.position);continue}if(n=e.line,Ma(e,t,Kf,!1,!0),l.push(e.result),Vt(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&u!==0)Be(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return i?(e.tag=o,e.anchor=a,e.kind="sequence",e.result=l,!0):!1}function ow(e,t,n){var o,a,l,r,i,u,p=e.tag,d=e.anchor,c={},v=Object.create(null),m=null,y=null,S=null,$=!1,T=!1,D;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),D=e.input.charCodeAt(e.position);D!==0;){if(!$&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),l=e.line,(D===63||D===58)&&wn(o))D===63?($&&(Aa(e,c,v,m,y,null,r,i,u),m=y=S=null),T=!0,$=!0,a=!0):$?($=!1,a=!0):Be(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,D=o;else{if(r=e.line,i=e.lineStart,u=e.position,!Ma(e,n,qf,!1,!0))break;if(e.line===l){for(D=e.input.charCodeAt(e.position);sa(D);)D=e.input.charCodeAt(++e.position);if(D===58)D=e.input.charCodeAt(++e.position),wn(D)||Be(e,"a whitespace character is expected after the key-value separator within a block mapping"),$&&(Aa(e,c,v,m,y,null,r,i,u),m=y=S=null),T=!0,$=!1,a=!1,m=e.tag,y=e.result;else if(T)Be(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=d,!0}else if(T)Be(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=d,!0}if((e.line===l||e.lineIndent>t)&&($&&(r=e.line,i=e.lineStart,u=e.position),Ma(e,t,Ks,!0,a)&&($?y=e.result:S=e.result),$||(Aa(e,c,v,m,y,S,r,i,u),m=y=S=null),Vt(e,!0,-1),D=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&D!==0)Be(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return $&&Aa(e,c,v,m,y,null,r,i,u),T&&(e.tag=p,e.anchor=d,e.kind="mapping",e.result=c),T}function aw(e){var t,n=!1,o=!1,a,l,r;if(r=e.input.charCodeAt(e.position),r!==33)return!1;if(e.tag!==null&&Be(e,"duplication of a tag property"),r=e.input.charCodeAt(++e.position),r===60?(n=!0,r=e.input.charCodeAt(++e.position)):r===33?(o=!0,a="!!",r=e.input.charCodeAt(++e.position)):a="!",t=e.position,n){do r=e.input.charCodeAt(++e.position);while(r!==0&&r!==62);e.position<e.length?(l=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):Be(e,"unexpected end of the stream within a verbatim tag")}else{for(;r!==0&&!wn(r);)r===33&&(o?Be(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),Jf.test(a)||Be(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),G3.test(l)&&Be(e,"tag suffix cannot contain flow indicator characters")}l&&!Xf.test(l)&&Be(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{Be(e,"tag name is malformed: "+l)}return n?e.tag=l:Fo.call(e.tagMap,a)?e.tag=e.tagMap[a]+l:a==="!"?e.tag="!"+l:a==="!!"?e.tag="tag:yaml.org,2002:"+l:Be(e,'undeclared tag handle "'+a+'"'),!0}function lw(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Be(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!wn(n)&&!$a(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function sw(e){var t,n,o;if(o=e.input.charCodeAt(e.position),o!==42)return!1;for(o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!wn(o)&&!$a(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Fo.call(e.anchorMap,n)||Be(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Vt(e,!0,-1),!0}function Ma(e,t,n,o,a){var l,r,i,u=1,p=!1,d=!1,c,v,m,y,S,$;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=r=i=Ks===n||Kf===n,o&&Vt(e,!0,-1)&&(p=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;aw(e)||lw(e);)Vt(e,!0,-1)?(p=!0,i=l,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):i=!1;if(i&&(i=p||a),(u===1||Ks===n)&&(qs===n||qf===n?S=t:S=t+1,$=e.position-e.lineStart,u===1?i&&(lg(e,$)||ow(e,$,S))||tw(e,S)?d=!0:(r&&nw(e,S)||Z3(e,S)||ew(e,S)?d=!0:sw(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&Be(e,"alias node should not have any properties")):Q3(e,S,qs===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(d=i&&lg(e,$))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Be(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,v=e.implicitTypes.length;c<v;c+=1)if(y=e.implicitTypes[c],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Fo.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,m=e.typeMap.multi[e.kind||"fallback"],c=0,v=m.length;c<v;c+=1)if(e.tag.slice(0,m[c].tag.length)===m[c].tag){y=m[c];break}y||Be(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&Be(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Be(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function rw(e){var t=e.position,n,o,a,l=!1,r;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(r=e.input.charCodeAt(e.position))!==0&&(Vt(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||r!==37));){for(l=!0,r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!wn(r);)r=e.input.charCodeAt(++e.position);for(o=e.input.slice(n,e.position),a=[],o.length<1&&Be(e,"directive name must not be less than one character in length");r!==0;){for(;sa(r);)r=e.input.charCodeAt(++e.position);if(r===35){do r=e.input.charCodeAt(++e.position);while(r!==0&&!Zn(r));break}if(Zn(r))break;for(n=e.position;r!==0&&!wn(r);)r=e.input.charCodeAt(++e.position);a.push(e.input.slice(n,e.position))}r!==0&&eu(e),Fo.call(og,o)?og[o](e,o,a):Ys(e,'unknown document directive "'+o+'"')}if(Vt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Vt(e,!0,-1)):l&&Be(e,"directives end mark is expected"),Ma(e,e.lineIndent-1,Ks,!1,!0),Vt(e,!0,-1),e.checkLineBreaks&&j3.test(e.input.slice(t,e.position))&&Ys(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Js(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Vt(e,!0,-1));return}if(e.position<e.length-1)Be(e,"end of the stream or a document separator is expected");else return}function sg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new X3(e,t),o=e.indexOf("\0");for(o!==-1&&(n.position=o,Be(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)rw(n);return n.documents}function iw(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var o=sg(e,n);if(typeof t!="function")return o;for(var a=0,l=o.length;a<l;a+=1)t(o[a])}function uw(e,t){var n=sg(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new vn("expected a single document in the stream, but found more")}}var cw=iw,dw=uw,rg={loadAll:cw,load:dw},ig=Object.prototype.toString,ug=Object.prototype.hasOwnProperty,nu=65279,pw=9,Ll=10,fw=13,gw=32,mw=33,vw=34,ou=35,hw=37,_w=38,yw=39,bw=42,cg=44,ww=45,Xs=58,xw=61,Sw=62,Tw=63,kw=64,dg=91,pg=93,Cw=96,fg=123,Ew=124,gg=125,sn={};sn[0]="\\0",sn[7]="\\a",sn[8]="\\b",sn[9]="\\t",sn[10]="\\n",sn[11]="\\v",sn[12]="\\f",sn[13]="\\r",sn[27]="\\e",sn[34]='\\"',sn[92]="\\\\",sn[133]="\\N",sn[160]="\\_",sn[8232]="\\L",sn[8233]="\\P";var $w=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Lw=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Aw(e,t){var n,o,a,l,r,i,u;if(t===null)return{};for(n={},o=Object.keys(t),a=0,l=o.length;a<l;a+=1)r=o[a],i=String(t[r]),r.slice(0,2)==="!!"&&(r="tag:yaml.org,2002:"+r.slice(2)),u=e.compiledTypeMap.fallback[r],u&&ug.call(u.styleAliases,i)&&(i=u.styleAliases[i]),n[r]=i;return n}function Mw(e){var t,n,o;if(t=e.toString(16).toUpperCase(),e<=255)n="x",o=2;else if(e<=65535)n="u",o=4;else if(e<=4294967295)n="U",o=8;else throw new vn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Kt.repeat("0",o-t.length)+t}var Iw=1,Al=2;function Dw(e){this.schema=e.schema||Qi,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Kt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Aw(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Al:Iw,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mg(e,t){for(var n=Kt.repeat(" ",t),o=0,a=-1,l="",r,i=e.length;o<i;)a=e.indexOf(`
`,o),a===-1?(r=e.slice(o),o=i):(r=e.slice(o,a+1),o=a+1),r.length&&r!==`
`&&(l+=n),l+=r;return l}function au(e,t){return`
`+Kt.repeat(" ",e.indent*t)}function Rw(e,t){var n,o,a;for(n=0,o=e.implicitTypes.length;n<o;n+=1)if(a=e.implicitTypes[n],a.resolve(t))return!0;return!1}function Qs(e){return e===gw||e===pw}function Ml(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==nu||65536<=e&&e<=1114111}function vg(e){return Ml(e)&&e!==nu&&e!==fw&&e!==Ll}function hg(e,t,n){var o=vg(e),a=o&&!Qs(e);return(n?o:o&&e!==cg&&e!==dg&&e!==pg&&e!==fg&&e!==gg)&&e!==ou&&!(t===Xs&&!a)||vg(t)&&!Qs(t)&&e===ou||t===Xs&&a}function Ow(e){return Ml(e)&&e!==nu&&!Qs(e)&&e!==ww&&e!==Tw&&e!==Xs&&e!==cg&&e!==dg&&e!==pg&&e!==fg&&e!==gg&&e!==ou&&e!==_w&&e!==bw&&e!==mw&&e!==Ew&&e!==xw&&e!==Sw&&e!==yw&&e!==vw&&e!==hw&&e!==kw&&e!==Cw}function Nw(e){return!Qs(e)&&e!==Xs}function Il(e,t){var n=e.charCodeAt(t),o;return n>=55296&&n<=56319&&t+1<e.length&&(o=e.charCodeAt(t+1),o>=56320&&o<=57343)?(n-55296)*1024+o-56320+65536:n}function _g(e){var t=/^\n* /;return t.test(e)}var yg=1,lu=2,bg=3,wg=4,Ia=5;function Pw(e,t,n,o,a,l,r,i){var u,p=0,d=null,c=!1,v=!1,m=o!==-1,y=-1,S=Ow(Il(e,0))&&Nw(Il(e,e.length-1));if(t||r)for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Il(e,u),!Ml(p))return Ia;S=S&&hg(p,d,i),d=p}else{for(u=0;u<e.length;p>=65536?u+=2:u++){if(p=Il(e,u),p===Ll)c=!0,m&&(v=v||u-y-1>o&&e[y+1]!==" ",y=u);else if(!Ml(p))return Ia;S=S&&hg(p,d,i),d=p}v=v||m&&u-y-1>o&&e[y+1]!==" "}return!c&&!v?S&&!r&&!a(e)?yg:l===Al?Ia:lu:n>9&&_g(e)?Ia:r?l===Al?Ia:lu:v?wg:bg}function Fw(e,t,n,o,a){e.dump=function(){if(t.length===0)return e.quotingType===Al?'""':"''";if(!e.noCompatMode&&($w.indexOf(t)!==-1||Lw.test(t)))return e.quotingType===Al?'"'+t+'"':"'"+t+"'";var l=e.indent*Math.max(1,n),r=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),i=o||e.flowLevel>-1&&n>=e.flowLevel;function u(p){return Rw(e,p)}switch(Pw(t,i,e.indent,r,u,e.quotingType,e.forceQuotes&&!o,a)){case yg:return t;case lu:return"'"+t.replace(/'/g,"''")+"'";case bg:return"|"+xg(t,e.indent)+Sg(mg(t,l));case wg:return">"+xg(t,e.indent)+Sg(mg(Bw(t,r),l));case Ia:return'"'+Uw(t)+'"';default:throw new vn("impossible error: invalid scalar style")}}()}function xg(e,t){var n=_g(e)?String(t):"",o=e[e.length-1]===`
`,a=o&&(e[e.length-2]===`
`||e===`
`),l=a?"+":o?"":"-";return n+l+`
`}function Sg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Bw(e,t){for(var n=/(\n+)([^\n]*)/g,o=function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,n.lastIndex=p,Tg(e.slice(0,p),t)}(),a=e[0]===`
`||e[0]===" ",l,r;r=n.exec(e);){var i=r[1],u=r[2];l=u[0]===" ",o+=i+(!a&&!l&&u!==""?`
`:"")+Tg(u,t),a=l}return o}function Tg(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,o,a=0,l,r=0,i=0,u="";o=n.exec(e);)i=o.index,i-a>t&&(l=r>a?r:i,u+=`
`+e.slice(a,l),a=l+1),r=i;return u+=`
`,e.length-a>t&&r>a?u+=e.slice(a,r)+`
`+e.slice(r+1):u+=e.slice(a),u.slice(1)}function Uw(e){for(var t="",n=0,o,a=0;a<e.length;n>=65536?a+=2:a++)n=Il(e,a),o=sn[n],!o&&Ml(n)?(t+=e[a],n>=65536&&(t+=e[a+1])):t+=o||Mw(n);return t}function Vw(e,t,n){var o="",a=e.tag,l,r,i;for(l=0,r=n.length;l<r;l+=1)i=n[l],e.replacer&&(i=e.replacer.call(n,String(l),i)),(vo(e,t,i,!1,!1)||typeof i>"u"&&vo(e,t,null,!1,!1))&&(o!==""&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function kg(e,t,n,o){var a="",l=e.tag,r,i,u;for(r=0,i=n.length;r<i;r+=1)u=n[r],e.replacer&&(u=e.replacer.call(n,String(r),u)),(vo(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&vo(e,t+1,null,!0,!0,!1,!0))&&((!o||a!=="")&&(a+=au(e,t)),e.dump&&Ll===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function Ww(e,t,n){var o="",a=e.tag,l=Object.keys(n),r,i,u,p,d;for(r=0,i=l.length;r<i;r+=1)d="",o!==""&&(d+=", "),e.condenseFlow&&(d+='"'),u=l[r],p=n[u],e.replacer&&(p=e.replacer.call(n,u,p)),vo(e,t,u,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),vo(e,t,p,!1,!1)&&(d+=e.dump,o+=d));e.tag=a,e.dump="{"+o+"}"}function zw(e,t,n,o){var a="",l=e.tag,r=Object.keys(n),i,u,p,d,c,v;if(e.sortKeys===!0)r.sort();else if(typeof e.sortKeys=="function")r.sort(e.sortKeys);else if(e.sortKeys)throw new vn("sortKeys must be a boolean or a function");for(i=0,u=r.length;i<u;i+=1)v="",(!o||a!=="")&&(v+=au(e,t)),p=r[i],d=n[p],e.replacer&&(d=e.replacer.call(n,p,d)),vo(e,t+1,p,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&Ll===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,c&&(v+=au(e,t)),vo(e,t+1,d,!0,c)&&(e.dump&&Ll===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,a+=v));e.tag=l,e.dump=a||"{}"}function Cg(e,t,n){var o,a,l,r,i,u;for(a=n?e.explicitTypes:e.implicitTypes,l=0,r=a.length;l<r;l+=1)if(i=a[l],(i.instanceOf||i.predicate)&&(!i.instanceOf||typeof t=="object"&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(n?i.multi&&i.representName?e.tag=i.representName(t):e.tag=i.tag:e.tag="?",i.represent){if(u=e.styleMap[i.tag]||i.defaultStyle,ig.call(i.represent)==="[object Function]")o=i.represent(t,u);else if(ug.call(i.represent,u))o=i.represent[u](t,u);else throw new vn("!<"+i.tag+'> tag resolver accepts not "'+u+'" style');e.dump=o}return!0}return!1}function vo(e,t,n,o,a,l,r){e.tag=null,e.dump=n,Cg(e,n,!1)||Cg(e,n,!0);var i=ig.call(e.dump),u=o,p;o&&(o=e.flowLevel<0||e.flowLevel>t);var d=i==="[object Object]"||i==="[object Array]",c,v;if(d&&(c=e.duplicates.indexOf(n),v=c!==-1),(e.tag!==null&&e.tag!=="?"||v||e.indent!==2&&t>0)&&(a=!1),v&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(d&&v&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),i==="[object Object]")o&&Object.keys(e.dump).length!==0?(zw(e,t,e.dump,a),v&&(e.dump="&ref_"+c+e.dump)):(Ww(e,t,e.dump),v&&(e.dump="&ref_"+c+" "+e.dump));else if(i==="[object Array]")o&&e.dump.length!==0?(e.noArrayIndent&&!r&&t>0?kg(e,t-1,e.dump,a):kg(e,t,e.dump,a),v&&(e.dump="&ref_"+c+e.dump)):(Vw(e,t,e.dump),v&&(e.dump="&ref_"+c+" "+e.dump));else if(i==="[object String]")e.tag!=="?"&&Fw(e,e.dump,t,l,u);else{if(i==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new vn("unacceptable kind of an object to dump "+i)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function Hw(e,t){var n=[],o=[],a,l;for(su(e,n,o),a=0,l=o.length;a<l;a+=1)t.duplicates.push(n[o[a]]);t.usedDuplicates=new Array(l)}function su(e,t,n){var o,a,l;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)n.indexOf(a)===-1&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,l=e.length;a<l;a+=1)su(e[a],t,n);else for(o=Object.keys(e),a=0,l=o.length;a<l;a+=1)su(e[o[a]],t,n)}function jw(e,t){t=t||{};var n=new Dw(t);n.noRefs||Hw(e,n);var o=e;return n.replacer&&(o=n.replacer.call({"":o},"",o)),vo(n,0,o,!0,!0)?n.dump+`
`:""}var Gw=jw,qw={dump:Gw};function ru(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Kw=tn,Yw=$f,Jw=If,Xw=Pf,Qw=Ff,Zw=Qi,e5=rg.load,t5=rg.loadAll,n5=qw.dump,o5=vn,a5={binary:zf,float:Nf,map:Mf,null:Df,pairs:jf,set:Gf,timestamp:Vf,bool:Rf,int:Of,merge:Wf,omap:Hf,seq:Af,str:Lf},l5=ru("safeLoad","load"),s5=ru("safeLoadAll","loadAll"),r5=ru("safeDump","dump"),Eg={Type:Kw,Schema:Yw,FAILSAFE_SCHEMA:Jw,JSON_SCHEMA:Xw,CORE_SCHEMA:Qw,DEFAULT_SCHEMA:Zw,load:e5,loadAll:t5,dump:n5,YAMLException:o5,types:a5,safeLoad:l5,safeLoadAll:s5,safeDump:r5};const i5={key:0,class:"loading-overlay"},u5={class:"settings-content"},c5={class:"info-links"},d5={class:"info-link-item"},p5={class:"info-link-label"},f5={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},g5={class:"info-link-item"},m5={class:"info-link-label"},v5={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},h5={class:"info-link-item"},_5={class:"info-link-label"},y5={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},b5={style:{"margin-bottom":"16px"}},w5=["placeholder"],x5={style:{"margin-bottom":"16px"}},S5=["placeholder"],T5=["placeholder"],k5={style:{"margin-bottom":"16px"}},C5=["placeholder"],E5=["placeholder"],$5={style:{"margin-bottom":"16px"}},L5=["placeholder"],A5={class:"data-container"},M5={key:0},I5={key:0},D5={class:"tag-group-container"},R5={style:{display:"flex","align-items":"center"}},O5={key:0},N5=["placeholder"],P5=["onClick"],F5=["onClick"],B5=["onClick"],U5=_t({__name:"import_tag",setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(""),l=h(""),r=h(""),i=h(""),u=h(""),p=h(""),d=h(""),c=h(""),v=h(""),m=h([]),y=h(-1),S=h(""),$=h(""),T=h(null),D=h(null),Y=h(null),x=h(!1),P=h(""),H=h(null);function j(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}H.value.click()}function K(){a.value="",l.value="",r.value="",i.value="",u.value="",p.value="",d.value="",c.value="",v.value="",m.value=[],y.value=-1,S.value="",$.value="",x.value=!1}function X(b){const O=b.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{const A=pe.target.result.split(`
`).filter(R=>R.trim());let _=0;A.forEach(R=>{const[q,Se]=R.split(",");if(q&&Se){const we=q.trim().replace(/'/g,"''"),ee=Se.trim().replace(/'/g,"''"),me=Po();_=_+1;const Re=parseInt(new Date().getTime()/1e3)+_,Pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${we}', '${ee}', 'rgba(255, 123, 2, .4)', ${Re}, '${v.value}', '${me}');`;m.value.push(Pe)}})},Q.readAsText(O)}b.target.value=""}function ye(b){const O=b.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{try{const be=JSON.parse(pe.target.result);let A=0;Object.entries(be).forEach(([_,R])=>{const q=_.replace(/'/g,"''"),Se=R.replace(/'/g,"''"),we=Po();A=A+1;const ee=parseInt(new Date().getTime()/1e3)+A,me=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${q}', '${Se}', 'rgba(255, 123, 2, .4)', ${ee}, '${v.value}', '${we}');`;m.value.push(me)})}catch{J({type:"warn",str:"message.jsonErrorMesg"})}},Q.readAsText(O)}b.target.value=""}function se(b){const O=b.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{try{const be=Eg.load(pe.target.result);let A=0;Object.entries(be).forEach(([_,R])=>{const q=_.replace(/'/g,"''"),Se=String(R).replace(/'/g,"''"),we=Po();A=A+1;const ee=parseInt(new Date().getTime()/1e3)+A,me=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${q}', '${Se}', 'rgba(255, 123, 2, .4)', ${ee}, '${v.value}', '${we}');`;m.value.push(me)})}catch{J({type:"warn",str:"message.yamlErrorMesg"})}},Q.readAsText(O)}b.target.value=""}function N(b){K();const O=b.target.files[0];if(O){const Q=new FileReader;Q.onload=pe=>{pe.target.result.split(";").filter(_=>_.trim()).forEach(_=>{if((_.includes("tag_groups")||_.includes("tag_subgroups"))&&_.includes("p_uuid"))if(_.includes("g_uuid")){u.value=_+";";const q=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);q&&(v.value=q[1]);const Se=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Se&&(d.value=Se[1].replace(/''/g,"'"))}else{i.value=_+";";const q=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);q&&(c.value=q[1]);const Se=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Se&&(p.value=Se[1].replace(/''/g,"'"))}else _.includes("tag_tags")&&m.value.push(_+";")})},Q.readAsText(O)}b.target.value=""}function Z(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}Y.value.click()}function te(){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}D.value.click()}function z(){T.value.click()}function ne(){const b=[i.value,u.value,...m.value].join(`
`),O=new Blob([b],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(O),P.value.length<=0){const pe=parseInt(new Date().getTime()/1e3);Q.download="export_"+pe+".sql"}else Q.download=P.value+".sql";Q.click()}const oe=()=>{const b=[...m.value].join(`
`),O=new Blob([b],{type:"text/sql"}),Q=document.createElement("a");if(Q.href=URL.createObjectURL(O),P.value.length<=0){const pe=parseInt(new Date().getTime()/1e3);Q.download="export_tags_"+pe+".sql"}else Q.download=P.value+".sql";Q.click()};function F(b){const O=b.match(/VALUES\s*\([^']*'([^']+)'/),Q=b.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:O?O[1].replace(/''/g,"'"):"",desc:Q?Q[1].replace(/''/g,"'"):""}}function B(b){m.value.splice(b,1)}function ie(b){const O=m.value[b],Q=F(O);S.value=Q.text,$.value=Q.desc,y.value=b}function Ce(b){const O=S.value.replace(/'/g,"''"),Q=$.value.replace(/'/g,"''");m.value[b]=m.value[b].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${O}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${Q}'`),y.value=-1}function re(){y.value=-1}function ge(){if(!v.value){J({type:"warn",str:"message.pleaseAddSub"});return}const b=a.value.replace(/'/g,"''"),O=l.value.replace(/'/g,"''"),Q=Po(),pe=parseInt(new Date().getTime()/1e3);r.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${b}', '${O}', 'rgba(255, 123, 2, .4)', ${pe}, '${v.value}', '${Q}');`,m.value.push(r.value)}function ce(){if(p.value.length<=0){J({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const b=p.value.replace(/'/g,"''");c.value.length<=0&&(c.value=Po());const O=parseInt(new Date().getTime()/1e3);i.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${b}', 'rgba(255, 123, 2, .4)', ${O}, '${c.value}');`}function ae(){if(d.value.length<=0){J({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!c.value){J({type:"warn",str:"message.pleaseAddMainCeb"});return}const b=d.value.replace(/'/g,"''");v.value.length<=0&&(v.value=Po());const O=parseInt(new Date().getTime()/1e3);u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${b}', 'rgba(255, 123, 2, .4)', ${O}, '${c.value}', '${v.value}');`}const G=h(null),L=()=>{G.value.open()},U=b=>{x.value=!0,p.value=b.group.name,d.value=b.sub.name,c.value=b.group.p_uuid,v.value=b.sub.g_uuid;const O=b.group.name.replace(/'/g,"''"),Q=b.sub.name.replace(/'/g,"''");i.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${O}', '${b.group.color}', ${b.group.create_time}, '${b.group.p_uuid}');`,u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${Q}', '${b.sub.color}', ${b.sub.create_time}, '${b.group.p_uuid}', '${b.sub.g_uuid}');`},V=h(!1),I=async b=>{V.value=!0;try{await It.runSQLToServer(b).then(O=>{if(O.code!=200){J({type:"warn",str:O.message});return}else W(),J({type:"success",str:"importDialog.successImport"})}).catch(O=>{console.error(O),J({type:"warn",str:"importDialog.importFail"})})}catch(O){console.error(O),J({type:"warn",str:"importDialog.importFail"})}finally{V.value=!1}},W=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},C=async()=>{if(x.value){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const b=[...m.value];await I(b)}else{if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const b=[i.value,u.value,...m.value];await I(b)}};return ot(i,(b,O)=>{var be,A;if(!b||b===O)return;const Q=(be=b.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:be[1],pe=(A=O==null?void 0:O.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:A[1];Q&&pe&&u.value&&(u.value=u.value.replace(new RegExp(`'${pe}'`,"g"),`'${Q}'`))}),ot(u,(b,O)=>{var be,A;if(!b||b===O)return;const Q=(be=b.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:be[1],pe=(A=O==null?void 0:O.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:A[1];Q&&pe&&m.value.length>0&&(m.value=m.value.map(_=>_.replace(new RegExp(`'${pe}'`,"g"),`'${Q}'`)))}),t({open:()=>{o.value=!0}}),(b,O)=>(w(),E(De,null,[V.value?(w(),E("div",i5,O[11]||(O[11]=[s("div",{class:"loading-spinner"},null,-1)]))):de("",!0),Ve(Ea,{modelValue:o.value,"onUpdate:modelValue":O[10]||(O[10]=Q=>o.value=Q),title:f(n)("importDialog.title")},{footer:it(()=>[s("button",{onClick:O[9]||(O[9]=Q=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:C},g(f(n)("importDialog.sure")),1)]),default:it(()=>[s("div",u5,[s("div",c5,[s("div",d5,[s("span",p5,g(f(n)("importDialog.tips1")),1),s("a",f5,g(f(n)("importDialog.tips1text")),1)]),s("div",g5,[s("span",m5,g(f(n)("importDialog.tips2")),1),s("a",v5,g(f(n)("importDialog.tips2text")),1)]),s("div",h5,[s("span",_5,g(f(n)("importDialog.tips3")),1),s("a",y5,g(f(n)("importDialog.tips3text")),1)])]),s("div",b5,[s("button",{onClick:K,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:z,class:"upload-btn"},g(f(n)("importDialog.uploadSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:L},g(f(n)("importDialog.selectGroup")),1),s("button",{style:{"margin-left":"10px"},onClick:ne},g(f(n)("importDialog.dumpSQL")),1),s("button",{style:{"margin-left":"10px"},onClick:oe},g(f(n)("importDialog.dumpOnlySQL")),1),he(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[0]||(O[0]=Q=>P.value=Q),placeholder:f(n)("importDialog.settingOutputName")},null,8,w5),[[Ae,P.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:N,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"jsonFileInput",ref:D,onChange:ye,accept:".json",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"txtFileInput",ref:Y,onChange:X,accept:".txt",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"yamlFileInput",ref:H,onChange:se,accept:".yaml,.yml",style:{display:"none"}},null,544)]),s("div",x5,[he(s("input",{"onUpdate:modelValue":O[1]||(O[1]=Q=>p.value=Q),placeholder:f(n)("importDialog.pleaseMainCeb")},null,8,S5),[[Ae,p.value]]),s("button",{onClick:ce},g(f(n)("importDialog.setMainCeb")),1),he(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[2]||(O[2]=Q=>c.value=Q),placeholder:f(n)("importDialog.pleaseMainCebUuid")},null,8,T5),[[Ae,c.value]])]),s("div",k5,[he(s("input",{"onUpdate:modelValue":O[3]||(O[3]=Q=>d.value=Q),placeholder:f(n)("importDialog.pleaseSubGroup")},null,8,C5),[[Ae,d.value]]),s("button",{onClick:ae},g(f(n)("importDialog.setSubCeb")),1),he(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":O[4]||(O[4]=Q=>v.value=Q),placeholder:f(n)("importDialog.pleaseSubGroupUuid")},null,8,E5),[[Ae,v.value]])]),s("div",$5,[he(s("input",{"onUpdate:modelValue":O[5]||(O[5]=Q=>a.value=Q),placeholder:"Tag"},null,512),[[Ae,a.value]]),he(s("input",{"onUpdate:modelValue":O[6]||(O[6]=Q=>l.value=Q),placeholder:f(n)("importDialog.translater")},null,8,L5),[[Ae,l.value]]),s("button",{onClick:ge},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:te,class:"upload-btn"},g(f(n)("importDialog.fromJSONImput")),1),s("button",{style:{"margin-left":"10px"},onClick:Z,class:"upload-btn"},g(f(n)("importDialog.fromTxtInput")),1),s("button",{style:{"margin-left":"10px"},onClick:j,class:"upload-btn"},g(f(n)("importDialog.fromYmalInput")),1)]),s("div",A5,[i.value?(w(),E("div",M5,[s("h3",null,g(F(i.value).text),1),u.value?(w(),E("div",I5,[s("h4",null,g(F(u.value).text),1),s("div",D5,[(w(!0),E(De,null,ze(m.value,(Q,pe)=>(w(),E("div",{key:pe,style:{display:"flex","flex-direction":"column","align-items":"center"}},[s("p",null,g(F(Q).text)+" - "+g(F(Q).desc),1),s("div",R5,[y.value===pe?(w(),E("div",O5,[he(s("input",{"onUpdate:modelValue":O[7]||(O[7]=be=>S.value=be),placeholder:"Tag"},null,512),[[Ae,S.value]]),he(s("input",{"onUpdate:modelValue":O[8]||(O[8]=be=>$.value=be),placeholder:f(n)("importDialog.translater")},null,8,N5),[[Ae,$.value]]),s("button",{onClick:be=>Ce(pe)},g(f(n)("importDialog.sureYes")),9,P5),s("button",{style:{"margin-left":"10px"},onClick:re},g(f(n)("importDialog.cancel")),1)])):(w(),E("button",{key:1,onClick:be=>ie(pe)},g(f(n)("importDialog.edit")),9,F5)),s("button",{style:{"margin-left":"10px"},onClick:be=>B(pe)},g(f(n)("importDialog.delete")),9,B5)])]))),128))])])):de("",!0)])):de("",!0)])])]),_:1},8,["modelValue","title"]),Ve(Tf,{ref_key:"tagGroupSelectDialogItem",ref:G,onSureSelect:U},null,512)],64))}},[["__scopeId","data-v-1971f07a"]]),V5={class:"tag-manager"},W5={class:"toolbar"},z5={class:"toolbar-top"},H5={class:"search-container"},j5=["placeholder"],G5={key:0,class:"no-results"},q5=["onClick"],K5={class:"result-content"},Y5={class:"result-text"},J5={class:"result-path"},X5={class:"toolbar-bottom"},Q5={class:"group-edit-mode"},Z5={class:"category-tabs"},e6={class:"tabs-wrapper primary-tabs"},t6={class:"tabs-scroll"},n6=["onClick","onMouseenter","onMouseleave"],o6={class:"tab-text"},a6={key:0,class:"tab-actions"},l6=["onClick","title"],s6=["onClick","title"],r6=["onClick","title"],i6=["onClick","title"],u6={class:"group-edit-mode"},c6={key:0,class:"tabs-wrapper group-tabs"},d6={class:"tabs-scroll"},p6=["onClick","onMouseenter","onMouseleave"],f6={class:"tab-text"},g6={key:0,class:"tab-actions"},m6=["onClick","title"],v6=["onClick","title"],h6=["onClick","title"],_6=["onClick","title"],y6={class:"group-edit-mode"},b6={class:"tags-content"},w6={class:"tags-header"},x6={class:"tags-title"},S6={class:"tags-actions"},T6=["disabled"],k6=["disabled"],C6=["disabled"],E6=["disabled"],$6=["disabled"],L6={key:0,class:"tags-grid"},A6=["onClick"],M6={class:"tag-actions"},I6=["onClick","title"],D6=["onClick","title"],R6=["onClick","title"],O6={class:"tag-desc"},N6=["value"],P6={key:0,class:"weilin-tools-dialog-overlay"},F6={class:"weilin-tools-dialog-header"},B6={class:"weilin-tools-dialog-body"},U6={key:0,class:"form-group"},V6=["placeholder"],W6={key:1,class:"form-group"},z6=["placeholder"],H6={class:"form-group"},j6={class:"color-picker"},G6={class:"color-controls"},q6={class:"alpha-control"},K6={class:"alpha-value"},Y6={class:"weilin-tools-dialog-footer"},J6={key:1,class:"weilin-tools-dialog-overlay"},X6={class:"weilin-tools-dialog-header"},Q6={class:"weilin-tools-dialog-body"},Z6={class:"form-group"},e8=["placeholder"],t8={class:"form-group"},n8=["placeholder"],o8={class:"form-group"},a8={class:"color-picker"},l8={class:"color-controls"},s8={class:"alpha-control"},r8={class:"alpha-value"},i8={class:"weilin-tools-dialog-footer"},u8={key:2,class:"weilin-tools-dialog-overlay"},c8={class:"weilin-tools-dialog-header"},d8={class:"weilin-tools-dialog-body"},p8={class:"confirm-message"},f8={class:"weilin-tools-dialog-footer"},g8={key:3,class:"weilin-tools-dialog-overlay"},m8={class:"weilin-tools-dialog-content"},v8={class:"weilin-tools-dialog-header"},h8={class:"weilin-tools-dialog-body"},_8={class:"form-group"},y8=["value"],b8={class:"form-group"},w8={class:"radio-group"},x8={class:"weilin-tools-dialog-footer"},S8={key:4,class:"weilin-tools-dialog-overlay"},T8={class:"weilin-tools-dialog-content"},k8={class:"weilin-tools-dialog-header"},C8={class:"weilin-tools-dialog-body"},E8={class:"form-group"},$8=["value"],L8={class:"form-group"},A8={class:"radio-group"},M8={class:"weilin-tools-dialog-footer"},I8={key:5,class:"weilin-tools-dialog-overlay"},D8={class:"weilin-tools-dialog-header"},R8={class:"weilin-tools-dialog-body"},O8={class:"config-section"},N8={class:"form-group"},P8={class:"width-control"},F8={class:"radio-label"},B8={class:"radio-label"},U8={class:"form-group"},V8={class:"form-group"},W8={class:"config-section"},z8={class:"form-group"},H8={class:"width-control"},j8={class:"radio-label"},G8={class:"radio-label"},q8={class:"form-group"},K8={class:"form-group"},Y8={class:"weilin-tools-dialog-footer"},$g=_t({__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){Ds();const{t}=ht(),n=h([]),o=h(null),a=h([]),l=h([]),r=h(null),i=h(!1),u=h(!1),p=h(!1),d=h(!1),c=h("primary"),v=h([]),m=h(!1),y=h(!1),S=h("None"),$=h("None"),T=h(0),D=h(0),Y=h(null),x=h(0),P=h(!1),H=h(null),j=h("before"),K=h(null),X=h("before"),ye=h(null),se=h(null),N=h(!1),Z=h(!1),te=h(!1),z=h({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),ne={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},oe=e,F=h({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),B=h({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),ie=h({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),Ce=fe=>{const ue=fe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(ue){const[,xe,Ke,Pt,Jt]=ue,rt=`#${((1<<24)+(parseInt(xe)<<16)+(parseInt(Ke)<<8)+parseInt(Pt)).toString(16).slice(1)}`,Ft=Jt?Math.round(parseFloat(Jt)*100):100;return{hex:rt,alpha:Ft}}return{hex:"#FFFFFF",alpha:100}},re=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ge=async()=>{try{await It.getTagMainGroup().then(fe=>{n.value=fe}).catch(fe=>{console.error(fe),J({type:"warn",str:"message.networkError"})}),o.value&&await ce(o.value.p_uuid),r.value&&await ae(r.value.g_uuid)}catch(fe){console.error("Tag:",fe)}},ce=async fe=>{try{await It.getTagSubGroup(fe).then(ue=>{a.value=ue}).catch(ue=>{console.error(ue),J({type:"warn",str:"message.networkError"})})}catch(ue){console.error(":",ue)}},ae=async fe=>{try{await It.getTagList(fe).then(ue=>{l.value=ue}).catch(ue=>{console.error(ue),J({type:"warn",str:"message.networkError"})})}catch(ue){console.error("Tag:",ue)}};mt(()=>{Yt(),window.addEventListener("click",Pl),window.addEventListener("resize",Yt),window.addEventListener("message",ir),window.addEventListener("keydown",yo),Bl(),re()}),Co(()=>{window.removeEventListener("click",Pl),window.removeEventListener("resize",Yt),window.removeEventListener("message",ir),window.removeEventListener("keydown",yo)});const G=async fe=>{o.value=fe,r.value=null,m.value=!1,v.value=[],await ce(fe.p_uuid)},L=async fe=>{r.value=fe,m.value=!1,v.value=[],await ae(fe.g_uuid)},U=fe=>{c.value=fe,p.value=!1,A.value=Ce("rgba(255, 123, 2, .4)"),fe==="primary"?F.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:B.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},i.value=!0},V=fe=>{p.value=!0,c.value="primary",F.value={...fe},A.value=Ce(fe.color),i.value=!0},I=fe=>{p.value=!0,c.value="group",B.value={...fe},A.value=Ce(fe.color),i.value=!0},W=()=>{if(c.value==="primary"){if(!F.value.name){J({type:"warn",str:"tagManager.categoryNameRequired"});return}p.value?n.value.findIndex(ue=>ue.id_index===F.value.id_index)!==-1&&It.editPrimaryCategory({id_index:F.value.id_index,name:F.value.name,color:F.value.color}).then(ue=>{ue.code===200?(re(),J({type:"success",str:"message.editSuccess"})):ue.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(ue=>{J({type:"warn",str:"message.networkError"})}):It.addPrimaryCategory({name:F.value.name,color:F.value.color}).then(fe=>{fe.code===200?(re(),J({type:"success",str:"message.addSuccess"})):fe.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.addFailed"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})})}else{if(!B.value.name){J({type:"warn",str:"tagManager.groupNameRequired"});return}p.value?It.editSubCategory({id_index:B.value.id_index,name:B.value.name,color:B.value.color}).then(fe=>{fe.code===200?(re(),J({type:"success",str:"message.editSuccess"})):fe.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})}):It.addSubCategory({name:B.value.name,color:B.value.color,key:o.value.id_index,p_uuid:o.value.p_uuid}).then(fe=>{fe.code===200?(re(),J({type:"success",str:"message.addSuccess"})):fe.code===201?J({type:"error",str:"message.editNameExist"}):J({type:"error",str:"message.editFailed"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})})}b()},C=()=>p.value?c.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):c.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),b=()=>{i.value=!1,F.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},A.value={hex:"#FFFFFF",alpha:0}},O=()=>{r.value&&(d.value=!1,ie.value={id:"",text:"",desc:"",categoryId:r.value.id,g_uuid:r.value.g_uuid,backgroundColor:B.value.color},A.value=Ce(B.value.color),u.value=!0)},Q=fe=>{d.value=!0,ie.value={...fe},A.value=Ce(fe.color),u.value=!0},pe=()=>{if(!ie.value.text||!ie.value.desc){J({type:"warn",str:"tagManager.textRequired"});return}d.value&&r.value?It.editTags({id_index:ie.value.id_index,text:ie.value.text,desc:ie.value.desc,color:ie.value.color}).then(fe=>{re(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.editSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})}):r.value&&It.addNewTags({id_index:r.value.id_index,g_uuid:r.value.g_uuid,text:ie.value.text,desc:ie.value.desc,color:ie.value.color?ie.value.color:"rgba(255, 123, 2, .4)"}).then(fe=>{re(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})}),be()},be=()=>{u.value=!1,ie.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},d.value=!1},A=h({hex:"#FFFFFF",alpha:100}),_=vt(()=>q(A.value.hex,A.value.alpha)),R=()=>{const fe=q(A.value.hex,A.value.alpha);i.value?c.value==="primary"?F.value.color=fe:B.value.color=fe:u.value&&(ie.value.color=fe)},q=(fe,ue)=>{const xe=parseInt(fe.slice(1,3),16),Ke=parseInt(fe.slice(3,5),16),Pt=parseInt(fe.slice(5,7),16);return`rgba(${xe}, ${Ke}, ${Pt}, ${ue/100})`},Se=h(""),we=h([]),ee=h(!1),me=async()=>{ee.value=Se.value.trim().length>0;const fe=Se.value.trim().toLowerCase();if(!fe){we.value=[];return}we.value=[],await It.searchTag(fe).then(ue=>{we.value=ue}).catch(ue=>{J({type:"warn",str:"message.networkError"})})};ot(Se,()=>{me()});const Re=async fe=>{const ue=n.value.find(xe=>xe.p_uuid===fe.p_uuid);ue&&await G(ue).then(async()=>{await qe(async()=>{const xe=a.value.find(Ke=>Ke.g_uuid===fe.g_uuid);xe&&await L(xe).then(async()=>{await qe(()=>{x.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:fe.text},"*"),Y.value=fe.id_index,setTimeout(()=>{const Ke=document.querySelector(".tag-wrapper.highlight");Ke&&Ke.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{Y.value=null},5e3)})})})}),Se.value=""},Pe=fe=>{if(!fe||fe==="transparent")return"var(--primary-text)";let ue,xe,Ke,Pt=1;if(fe.startsWith("rgba")){const rt=fe.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);rt&&([,ue,xe,Ke,Pt]=rt.map(Number))}else if(fe.startsWith("rgb")){const rt=fe.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);rt&&([,ue,xe,Ke]=rt.map(Number))}return Pt<.5?"var(--primary-text)":(ue*299+xe*587+Ke*114)/1e3>128?"#000000":"#ffffff"},He=fe=>{oe.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:fe.text},"*")},Xe=h(!1),at=h(""),bt=h(null),Dt=vt(()=>{if(!bt.value)return"";switch(at.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:bt.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:bt.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:bt.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),Wn=fe=>{at.value="category",bt.value=fe,Xe.value=!0},Vo=fe=>{at.value="group",bt.value=fe,Xe.value=!0},zt=fe=>{at.value="tag",bt.value=fe,Xe.value=!0},Qt=async()=>{try{switch(at.value){case"category":It.deletePrimaryCategory({p_uuid:bt.value.p_uuid}).then(fe=>{re(),J({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})});break;case"group":It.deleteSubCategory({g_uuid:bt.value.g_uuid}).then(fe=>{re(),J({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})});break;case"tag":It.deleteTags({id_index:bt.value.id_index}).then(fe=>{re(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelected":It.batchDeleteTags({id_indexs:v.value}).then(fe=>{re(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(fe=>{J({type:"warn",str:"message.networkError"})});break}Ba()}catch(fe){console.error(":",fe)}},Rn=async fe=>{const ue=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${fe.name.replace(/'/g,"''")}', '${fe.color}', ${fe.create_time}, '${fe.p_uuid}');`;try{const xe=await It.getTagSubGroup(fe.p_uuid);let Ke=[];Ke.push(ue);for(const rt of xe){const Ft=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${rt.name.replace(/'/g,"''")}', '${rt.color}', ${rt.create_time}, '${rt.p_uuid}', '${rt.g_uuid}');`;Ke.push(Ft);try{(await It.getTagList(rt.g_uuid)).forEach(zn=>{const Wa=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${zn.text!=null&&zn.text.length>0?zn.text.replace(/'/g,"''"):""}', '${zn.desc!=null&&zn.desc.length>0?zn.desc.replace(/'/g,"''"):""}', '${zn.color}', ${zn.create_time}, '${zn.g_uuid}', '${Po()}');`;Ke.push(Wa)})}catch(pr){console.error("Tag:",pr),J({type:"warn",str:"message.shareTagError"})}}const Pt=new Blob([Ke.join(`
`)],{type:"text/sql"}),Jt=document.createElement("a");Jt.href=URL.createObjectURL(Pt),Jt.download=`${fe.name}_export_${Date.now()}.sql`,Jt.click(),J({type:"success",str:"tagManager.outputSuccess"})}catch(xe){console.error(":",xe),J({type:"warn",str:"message.shareGroupError"})}},Pa=async fe=>{try{let ue=[];const xe=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${fe.name.replace(/'/g,"''")}', '${fe.color}', ${fe.create_time}, '${fe.p_uuid}', '${fe.g_uuid}');`;ue.push(xe);try{(await It.getTagList(fe.g_uuid)).forEach(rt=>{const Ft=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${rt.text!=null&&rt.text.length>0?rt.text.replace(/'/g,"''"):""}', '${rt.desc!=null&&rt.desc.length>0?rt.desc.replace(/'/g,"''"):""}', '${rt.color}', ${rt.create_time}, '${rt.g_uuid}', '${Po()}');`;ue.push(Ft)})}catch(Jt){console.error("Tag:",Jt),J({type:"warn",str:"message.shareTagError"})}const Ke=new Blob([ue.join(`
`)],{type:"text/sql"}),Pt=document.createElement("a");Pt.href=URL.createObjectURL(Ke),Pt.download=`${fe.name}_export_${Date.now()}.sql`,Pt.click(),J({type:"success",str:"tagManager.outputSuccess"})}catch(ue){console.error(":",ue),J({type:"warn",str:"message.shareGroupError"})}},Fe=fe=>{K.value=fe.id_index,P.value=!0},ke=async()=>{try{It.moveTag({id_index:K.value,reference_id_index:H.value,position:j.value}).then(fe=>{re(),P.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{J({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),J({type:"error",str:t("message.moveFailed")})}},Ee=h([]),wt=h(1),rn=(fe,ue)=>{wt.value=ue,ue===1?(Ee.value=n.value,ye.value=fe.id_index,y.value=!0):(Ee.value=a.value,ye.value=fe.id_index,y.value=!0)},sr=async()=>{if(wt.value===1)try{It.moveMainGroup({id_index:ye.value,reference_id_index:se.value,position:X.value}).then(fe=>{re(),y.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{J({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),J({type:"error",str:t("message.moveFailed")})}else try{It.moveSubGroup({id_index:ye.value,reference_id_index:se.value,position:X.value}).then(fe=>{re(),y.value=!1,J({type:"success",str:t("message.moveSuccess")})}).catch(fe=>{J({type:"error",str:t("message.moveFailed")})})}catch(fe){console.error(":",fe),J({type:"error",str:t("message.moveFailed")})}},Rl=()=>{m.value=!0,N.value=!0},Ol=()=>{m.value=!1,N.value=!1,v.value=[]},gu=()=>{v.value.length!==0&&(at.value="deleteSelected",bt.value={},Xe.value=!0)},mu=()=>{m.value=!0,Z.value=!0},Nl=()=>{m.value=!1,Z.value=!1,v.value=[]},Fa=()=>{if(v.value.length===0){J({type:"warn",str:"tagManager.noTagsSelected"});return}const fe={};v.value.forEach(Ke=>{fe[Ke.text]=Ke.desc});const ue=new Blob([Eg.dump(fe)],{type:"text/yaml"}),xe=document.createElement("a");xe.href=URL.createObjectURL(ue),xe.download=`selected_tags_export_${Date.now()}.yaml`,xe.click(),J({type:"success",str:"tagManager.outputSuccess"}),Nl()},Ba=()=>{Xe.value=!1,at.value="",bt.value=null},rr=async()=>{try{await re()}catch(fe){console.error(":",fe)}},_o=h(),Ua=h({}),Yt=()=>{if(_o.value){const fe=_o.value.getBoundingClientRect();Ua.value={position:"fixed",top:`${fe.bottom}px`,left:`${fe.left}px`,width:`${fe.width}px`,zIndex:1e3}}},ir=fe=>{fe.data.type==="weilin_prompt_ui_window_change_tagManager_position"||fe.data.type==="weilin_prompt_ui_window_change_tagManager_size"||fe.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_position"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_size"||fe.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?Yt():fe.data.type==="weilin_prompt_ui_window_change_click_outside"||fe.data.type==="weilin_prompt_ui_tag_manager_refresh"&&ge()},Pl=fe=>{ee.value&&!_o.value.contains(fe.target)&&(ee.value=!1)},yo=fe=>{fe.key==="Escape"&&(ee.value=!1)},On=fe=>{D.value==1&&(S.value="TabID-"+fe)},ra=fe=>{S.value="None"},Fl=fe=>{T.value==1&&($.value="TabID-"+fe)},ur=fe=>{$.value="None"},eo=h(),Va=()=>{eo.value.open()},Bl=()=>{const fe=JSON.parse(JSON.stringify(ne));try{const ue=localStorage.getItem("weilin_tag_manager_tab_size_config");if(ue){const xe=JSON.parse(ue);z.value={...fe,...xe}}else z.value={...fe}}catch(ue){console.error(":",ue),z.value={...fe}}},vu=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(z.value)),J({type:"success",str:"tagManager.tabSizeConfigSaved"}),te.value=!1}catch(fe){console.error(":",fe),J({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},hu=()=>{te.value=!0},cr=()=>{te.value=!1,Bl()},dr=()=>{const fe=JSON.parse(JSON.stringify(ne));z.value={...fe}};return(fe,ue)=>(w(),E("div",V5,[s("div",W5,[s("div",z5,[s("button",{class:"refresh-btn",onClick:rr},ue[40]||(ue[40]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),s("div",H5,[he(s("input",{type:"text","onUpdate:modelValue":ue[0]||(ue[0]=xe=>Se.value=xe),placeholder:f(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:_o,onInput:ue[1]||(ue[1]=xe=>ee.value=Se.value.trim().length>0)},null,40,j5),[[Ae,Se.value]]),ee.value?(w(),E("div",{key:0,class:"search-results",style:dt(Ua.value)},[we.value.length===0?(w(),E("div",G5,g(f(t)("tagManager.noResults")),1)):(w(!0),E(De,{key:1},ze(we.value,(xe,Ke)=>(w(),E("div",{key:`${Ke}-search_item`,class:"search-result-item",onClick:Pt=>Re(xe)},[s("div",K5,[s("span",Y5,g(xe.name||xe.text),1),s("span",J5,g(xe.where),1)])],8,q5))),128))],4)):de("",!0)]),s("button",{class:"import-btn",onClick:Va},g(f(t)("tagManager.importTags")),1)]),s("div",X5,[s("div",Q5,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ue[2]||(ue[2]=xe=>x.value=xe),"true-value":1,"false-value":0},null,512),[[Lt,x.value]]),je(" "+g(f(t)("tagManager.autoAddSearchTag")),1)])]),s("button",{class:"tab-size-btn",onClick:hu},g(f(t)("tagManager.modifyTabSize")),1)])]),s("div",Z5,[s("div",e6,[s("div",t6,[(w(!0),E(De,null,ze(n.value,(xe,Ke)=>{var Pt,Jt,rt;return w(),E("div",{key:"Tabss-"+Ke,class:Le(["tab-item",{active:((Pt=o.value)==null?void 0:Pt.name)===xe.name}]),style:dt({backgroundColor:((Jt=o.value)==null?void 0:Jt.name)===xe.name?"var(--primary-color)":xe.color,color:((rt=o.value)==null?void 0:rt.name)===xe.name?"#ffffff":Pe(xe.color),width:z.value.primaryTab.width==="fit-content"?"fit-content":z.value.primaryTab.width+"px",height:z.value.primaryTab.height+"px",fontSize:z.value.primaryTab.fontSize+"px"}),onClick:Ft=>G(xe),onMouseenter:Ft=>On(Ke),onMouseleave:Ft=>ra()},[s("span",o6,g(xe.name),1),S.value=="TabID-"+Ke?(w(),E("div",a6,[s("button",{class:"action-btn move",onClick:Je(Ft=>rn(xe,1),["stop"]),title:f(t)("tagManager.moveGroup")},ue[41]||(ue[41]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,l6),s("button",{class:"action-btn edit",onClick:Je(Ft=>V(xe),["stop"]),title:f(t)("tagManager.edit")},ue[42]||(ue[42]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,s6),s("button",{class:"action-btn share",onClick:Je(Ft=>Rn(xe),["stop"]),title:f(t)("tagManager.share")},ue[43]||(ue[43]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,r6),s("button",{class:"action-btn delete",onClick:Je(Ft=>Wn(xe),["stop"]),title:f(t)("tagManager.delete")},ue[44]||(ue[44]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,i6)])):de("",!0)],46,n6)}),128)),s("button",{class:"add-tab",onClick:ue[3]||(ue[3]=xe=>U("primary"))},[ue[45]||(ue[45]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addPrimaryCategory")),1)]),s("div",u6,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ue[4]||(ue[4]=xe=>D.value=xe),"true-value":1,"false-value":0},null,512),[[Lt,D.value]]),je(" "+g(D.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])]),o.value?(w(),E("div",c6,[s("div",d6,[(w(!0),E(De,null,ze(a.value,(xe,Ke)=>{var Pt,Jt,rt;return w(),E("div",{key:"TabsSw-"+Ke,class:Le(["tab-item",{active:((Pt=r.value)==null?void 0:Pt.name)===xe.name}]),style:dt({backgroundColor:((Jt=r.value)==null?void 0:Jt.name)===xe.name?"var(--primary-color)":xe.color,color:((rt=r.value)==null?void 0:rt.name)===xe.name?"#ffffff":Pe(xe.color),width:z.value.groupTab.width==="fit-content"?"fit-content":z.value.groupTab.width+"px",height:z.value.groupTab.height+"px",fontSize:z.value.groupTab.fontSize+"px"}),onClick:Ft=>L(xe),onMouseenter:Ft=>Fl(Ke),onMouseleave:Ft=>ur()},[s("span",f6,g(xe.name),1),$.value=="TabID-"+Ke?(w(),E("div",g6,[s("button",{class:"action-btn move",onClick:Je(Ft=>rn(xe,2),["stop"]),title:f(t)("tagManager.moveGroup")},ue[46]||(ue[46]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,m6),s("button",{class:"action-btn edit",onClick:Je(Ft=>I(xe),["stop"]),title:f(t)("tagManager.edit")},ue[47]||(ue[47]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,v6),s("button",{class:"action-btn delete",onClick:Je(Ft=>Vo(xe),["stop"]),title:f(t)("tagManager.delete")},ue[48]||(ue[48]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,h6),s("button",{class:"action-btn share",onClick:Je(Ft=>Pa(xe),["stop"]),title:f(t)("tagManager.share")},ue[49]||(ue[49]=[s("svg",{viewBox:"0 0 24 24",class:"action-icon"},[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,_6)])):de("",!0)],46,p6)}),128)),o.value?(w(),E("button",{key:0,class:"add-tab",onClick:ue[5]||(ue[5]=xe=>U("group"))},[ue[50]||(ue[50]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addGroup")),1)])):de("",!0),s("div",y6,[s("label",null,[he(s("input",{type:"checkbox","onUpdate:modelValue":ue[6]||(ue[6]=xe=>T.value=xe),"true-value":1,"false-value":0},null,512),[[Lt,T.value]]),je(" "+g(T.value==1?f(t)("tagManager.exitEditMode"):f(t)("tagManager.editGroupMode")),1)])])])])):de("",!0)]),s("div",b6,[s("div",w6,[s("div",x6,g(r.value?r.value.name:f(t)("tagManager.selectCategory")),1),s("div",S6,[s("button",{class:"add-btn",onClick:O,disabled:!r.value},[ue[51]||(ue[51]=s("span",{class:"plus-icon"},"+",-1)),je(" "+g(f(t)("tagManager.addTag")),1)],8,T6),Z.value?(w(),E("button",{key:0,class:"share-selected-btn",onClick:Fa,disabled:!v.value.length},g(f(t)("tagManager.shareSelected")),9,k6)):(w(),E("button",{key:1,class:"share-btn",onClick:mu,disabled:!r.value},g(f(t)("tagManager.batchShare")),9,C6)),Z.value?(w(),E("button",{key:2,class:"cancel-delete-btn",onClick:Nl},g(f(t)("tagManager.cancelShare")),1)):de("",!0),N.value?(w(),E("button",{key:3,class:"delete-btn",onClick:gu,disabled:!v.value.length},g(f(t)("tagManager.deleteSelected")),9,E6)):(w(),E("button",{key:4,class:"delete-action-btn",onClick:Rl,disabled:!r.value},g(f(t)("tagManager.hasDeleteAction")),9,$6)),N.value?(w(),E("button",{key:5,class:"cancel-delete-btn",onClick:Ol},g(f(t)("tagManager.cancelDelete")),1)):de("",!0)])]),r.value?(w(),E("div",L6,[(w(!0),E(De,null,ze(l.value,xe=>(w(),E("div",{key:"tag-grid-"+xe.id_index,class:Le(Y.value===xe.id_index?"tag-wrapper highlight":"tag-wrapper")},[s("div",{class:"tag-content",onClick:Ke=>He(xe)},[s("div",{class:"tag-main",style:dt({backgroundColor:xe.color||"transparent"})},[je(g(xe.desc)+" ",1),s("div",M6,[s("button",{class:"action-btn move",onClick:Je(Ke=>Fe(xe),["stop"]),title:f(t)("tagManager.moveTag")},ue[52]||(ue[52]=[s("svg",{viewBox:"0 0 24 24",class:"move-icon"},[s("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,I6),s("button",{class:"action-btn edit",onClick:Je(Ke=>Q(xe),["stop"]),title:f(t)("tagManager.editTag")},ue[53]||(ue[53]=[s("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[s("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,D6),s("button",{class:"action-btn delete",onClick:Je(Ke=>zt(xe),["stop"]),title:f(t)("tagManager.deleteTag")},ue[54]||(ue[54]=[s("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,R6)])],4),s("div",O6,g(xe.text),1)],8,A6),m.value?he((w(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":ue[7]||(ue[7]=Ke=>v.value=Ke),value:xe,class:"tag-checkbox"},null,8,N6)),[[Lt,v.value]]):de("",!0)],2))),128))])):de("",!0)]),i.value?(w(),E("div",P6,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ue[12]||(ue[12]=Je(()=>{},["stop"]))},[s("div",F6,[s("h2",null,g(C()),1),s("button",{class:"close-btn",onClick:b},"")]),s("div",B6,[c.value=="primary"?(w(),E("div",U6,[s("label",null,g(f(t)("tagManager.categoryName")),1),he(s("input",{type:"text","onUpdate:modelValue":ue[8]||(ue[8]=xe=>F.value.name=xe),placeholder:f(t)("tagManager.categoryNamePlaceholder"),onKeyup:an(W,["enter"])},null,40,V6),[[Ae,F.value.name]])])):de("",!0),c.value=="group"?(w(),E("div",W6,[s("label",null,g(f(t)("tagManager.groupName")),1),he(s("input",{type:"text","onUpdate:modelValue":ue[9]||(ue[9]=xe=>B.value.name=xe),placeholder:f(t)("tagManager.groupNamePlaceholder"),onKeyup:an(W,["enter"])},null,40,z6),[[Ae,B.value.name]])])):de("",!0),s("div",H6,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",j6,[s("div",{class:"color-preview",style:dt({backgroundColor:_.value})},null,4),s("div",G6,[he(s("input",{type:"color","onUpdate:modelValue":ue[10]||(ue[10]=xe=>A.value.hex=xe),onInput:R,class:"color-input"},null,544),[[Ae,A.value.hex]]),s("div",q6,[he(s("input",{type:"range","onUpdate:modelValue":ue[11]||(ue[11]=xe=>A.value.alpha=xe),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,A.value.alpha,void 0,{number:!0}]]),s("span",K6,g(A.value.alpha)+"%",1)])])])])]),s("div",Y6,[s("button",{class:"cancel-btn",onClick:b},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:W},g(f(t)("common.confirm")),1)])],32)])):de("",!0),u.value?(w(),E("div",J6,[s("div",{class:"weilin-tools-dialog-content",onMousedown:ue[17]||(ue[17]=Je(()=>{},["stop"]))},[s("div",X6,[s("h2",null,g(d.value?f(t)("tagManager.editTag"):f(t)("tagManager.addTag")),1),s("button",{class:"close-btn",onClick:be},"")]),s("div",Q6,[s("div",Z6,[s("label",null,g(f(t)("tagManager.text")),1),he(s("input",{type:"text","onUpdate:modelValue":ue[13]||(ue[13]=xe=>ie.value.desc=xe),placeholder:f(t)("tagManager.textPlaceholder")},null,8,e8),[[Ae,ie.value.desc]])]),s("div",t8,[s("label",null,g(f(t)("tagManager.description")),1),he(s("textarea",{"onUpdate:modelValue":ue[14]||(ue[14]=xe=>ie.value.text=xe),placeholder:f(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,n8),[[Ae,ie.value.text]])]),s("div",o8,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),s("div",a8,[s("div",{class:"color-preview",style:dt({backgroundColor:_.value})},null,4),s("div",l8,[he(s("input",{type:"color","onUpdate:modelValue":ue[15]||(ue[15]=xe=>A.value.hex=xe),onInput:R,class:"color-input"},null,544),[[Ae,A.value.hex]]),s("div",s8,[he(s("input",{type:"range","onUpdate:modelValue":ue[16]||(ue[16]=xe=>A.value.alpha=xe),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,A.value.alpha,void 0,{number:!0}]]),s("span",r8,g(A.value.alpha)+"%",1)])])])])]),s("div",i8,[s("button",{class:"cancel-btn",onClick:be},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:pe},g(f(t)("common.confirm")),1)])],32)])):de("",!0),Xe.value?(w(),E("div",u8,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:ue[18]||(ue[18]=Je(()=>{},["stop"]))},[s("div",c8,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:Ba},"")]),s("div",d8,[s("p",p8,g(Dt.value),1)]),s("div",f8,[s("button",{class:"cancel-btn",onClick:Ba},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:Qt},g(f(t)("common.delete")),1)])],32)])):de("",!0),P.value?(w(),E("div",g8,[s("div",m8,[s("div",v8,[s("h2",null,g(f(t)("tagManager.moveTag")),1),s("button",{class:"close-btn",onClick:ue[19]||(ue[19]=xe=>P.value=!1)},"")]),s("div",h8,[s("div",_8,[s("label",null,g(f(t)("tagManager.targetTag")),1),he(s("select",{"onUpdate:modelValue":ue[20]||(ue[20]=xe=>H.value=xe),class:"form-select"},[(w(!0),E(De,null,ze(l.value,xe=>(w(),E("option",{key:xe.id_index,value:xe.id_index},g(xe.desc+" --> "+xe.text),9,y8))),128))],512),[[Gt,H.value]])]),s("div",b8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",w8,[s("label",null,[he(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[21]||(ue[21]=xe=>j.value=xe),value:"before"},null,512),[[uo,j.value]]),je(" "+g(f(t)("tagManager.moveBefore")),1)]),s("label",null,[he(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[22]||(ue[22]=xe=>j.value=xe),value:"after"},null,512),[[uo,j.value]]),je(" "+g(f(t)("tagManager.moveAfter")),1)])])])]),s("div",x8,[s("button",{class:"cancel-btn",onClick:ue[23]||(ue[23]=xe=>P.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:ke},g(f(t)("common.confirm")),1)])])])):de("",!0),y.value?(w(),E("div",S8,[s("div",T8,[s("div",k8,[s("h2",null,g(f(t)("tagManager.moveGroup")),1),s("button",{class:"close-btn",onClick:ue[24]||(ue[24]=xe=>y.value=!1)},"")]),s("div",C8,[s("div",E8,[s("label",null,g(f(t)("tagManager.targetGroup")),1),he(s("select",{"onUpdate:modelValue":ue[25]||(ue[25]=xe=>se.value=xe),class:"form-select"},[(w(!0),E(De,null,ze(Ee.value,(xe,Ke)=>(w(),E("option",{key:"group_move_id"+Ke,value:xe.id_index},g(xe.name),9,$8))),128))],512),[[Gt,se.value]])]),s("div",L8,[s("label",null,g(f(t)("tagManager.movePosition")),1),s("div",A8,[s("label",null,[he(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[26]||(ue[26]=xe=>X.value=xe),value:"before"},null,512),[[uo,X.value]]),je(" "+g(f(t)("tagManager.moveGroupBefore")),1)]),s("label",null,[he(s("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ue[27]||(ue[27]=xe=>X.value=xe),value:"after"},null,512),[[uo,X.value]]),je(" "+g(f(t)("tagManager.moveGroupAfter")),1)])])])]),s("div",M8,[s("button",{class:"cancel-btn",onClick:ue[28]||(ue[28]=xe=>y.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:sr},g(f(t)("common.confirm")),1)])])])):de("",!0),te.value?(w(),E("div",I8,[s("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:ue[39]||(ue[39]=Je(()=>{},["stop"]))},[s("div",D8,[s("h2",null,g(f(t)("tagManager.tabSizeConfig")),1),s("button",{class:"close-btn",onClick:cr},"")]),s("div",R8,[s("div",O8,[s("h3",null,g(f(t)("tagManager.primaryTabConfig")),1),s("div",N8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",P8,[s("label",F8,[he(s("input",{type:"radio","onUpdate:modelValue":ue[29]||(ue[29]=xe=>z.value.primaryTab.width=xe),value:"fit-content"},null,512),[[uo,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",B8,[he(s("input",{type:"radio","onUpdate:modelValue":ue[30]||(ue[30]=xe=>z.value.primaryTab.width=xe),value:"custom"},null,512),[[uo,z.value.primaryTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.primaryTab.width!=="fit-content"?he((w(),E("input",{key:0,type:"number","onUpdate:modelValue":ue[31]||(ue[31]=xe=>z.value.primaryTab.width=xe),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.primaryTab.width,void 0,{number:!0}]]):de("",!0)])]),s("div",U8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.primaryTab.height)+"px)",1),he(s("input",{type:"range","onUpdate:modelValue":ue[32]||(ue[32]=xe=>z.value.primaryTab.height=xe),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.primaryTab.height,void 0,{number:!0}]])]),s("div",V8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.primaryTab.fontSize)+"px)",1),he(s("input",{type:"range","onUpdate:modelValue":ue[33]||(ue[33]=xe=>z.value.primaryTab.fontSize=xe),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.primaryTab.fontSize,void 0,{number:!0}]])])]),s("div",W8,[s("h3",null,g(f(t)("tagManager.groupTabConfig")),1),s("div",z8,[s("label",null,g(f(t)("tagManager.tabWidth")),1),s("div",H8,[s("label",j8,[he(s("input",{type:"radio","onUpdate:modelValue":ue[34]||(ue[34]=xe=>z.value.groupTab.width=xe),value:"fit-content"},null,512),[[uo,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.fitContent")),1)]),s("label",G8,[he(s("input",{type:"radio","onUpdate:modelValue":ue[35]||(ue[35]=xe=>z.value.groupTab.width=xe),value:"custom"},null,512),[[uo,z.value.groupTab.width]]),je(" "+g(f(t)("tagManager.customWidth")),1)]),z.value.groupTab.width!=="fit-content"?he((w(),E("input",{key:0,type:"number","onUpdate:modelValue":ue[36]||(ue[36]=xe=>z.value.groupTab.width=xe),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.groupTab.width,void 0,{number:!0}]]):de("",!0)])]),s("div",q8,[s("label",null,g(f(t)("tagManager.tabHeight"))+" ("+g(z.value.groupTab.height)+"px)",1),he(s("input",{type:"range","onUpdate:modelValue":ue[37]||(ue[37]=xe=>z.value.groupTab.height=xe),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.groupTab.height,void 0,{number:!0}]])]),s("div",K8,[s("label",null,g(f(t)("tagManager.fontSize"))+" ("+g(z.value.groupTab.fontSize)+"px)",1),he(s("input",{type:"range","onUpdate:modelValue":ue[38]||(ue[38]=xe=>z.value.groupTab.fontSize=xe),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.groupTab.fontSize,void 0,{number:!0}]])])])]),s("div",Y8,[s("button",{class:"reset-btn",onClick:dr},g(f(t)("tagManager.resetDefault")),1),s("button",{class:"cancel-btn",onClick:cr},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:vu},g(f(t)("common.confirm")),1)])],32)])):de("",!0),Ve(U5,{ref_key:"importTagDialogItem",ref:eo},null,512)]))}},[["__scopeId","data-v-c9c6726d"]]),Zs=100,Lg=h(""),ho=h({}),Ue={setActiveWindow(e){Lg.value!==e&&(Lg.value=e,Object.keys(ho.value).forEach(t=>{ho.value[t]=Zs}),ho.value[e]=Zs+10)},getZIndex(e){return ho.value[e]||(ho.value[e]=Zs),ho.value[e]},registerWindow(e){ho.value[e]||(ho.value[e]=Zs)},unregisterWindow(e){delete ho.value[e]}},Cn={getLoraList:async e=>await Ie({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await Ie({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await Ie({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await Ie({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await Ie({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,n)=>{const o=new FormData;return o.append("image",e),o.append("path",t),o.append("fileName",n),await Ie({url:"/lorainfo/api/loras/set/img",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const n=new FormData;return n.append("json",JSON.stringify(t)),await Ie({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await Ie({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await Ie({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await Ie({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await Ie({url:"/get_lora_list_by_search",method:"post",data:{search:e}})};function er(e){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(e)}var J8=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Ag={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,n=J8.test(t),o;return this.expand?(o={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},n?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),o.innerHTML='"'.concat(t.toString(),'"')):o.innerText='"'.concat(t.toString(),'"')):o={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},ut("span",{},[this.canExtend&&ut("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),ut("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),ut("span",o)])}};Ag.__file="src/Components/types/json-string.vue";var Mg={name:"JsonUndefined",functional:!0,props:{jsonValue:{type:Object,default:null}},render:function(){return ut("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:this.jsonValue===null?"null":"undefined"})}};Mg.__file="src/Components/types/json-undefined.vue";var Ig={name:"JsonNumber",functional:!0,props:{jsonValue:{type:Number,required:!0}},render:function(){var t=Number.isInteger(this.jsonValue);return ut("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:this.jsonValue.toString()})}};Ig.__file="src/Components/types/json-number.vue";var Dg={name:"JsonBoolean",functional:!0,props:{jsonValue:Boolean},render:function(){return ut("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:this.jsonValue.toString()})}};Dg.__file="src/Components/types/json-boolean.vue";var Rg={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},data:function(){return{value:{}}},computed:{ordered:function(){var t=this;if(!this.sort)return this.value;var n={};return Object.keys(this.value).sort().forEach(function(o){n[o]=t.value[o]}),n}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var n=this;setTimeout(function(){n.value=t},0)},toggle:function(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent:function(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=[];if(!this.previewMode&&!this.keyName&&t.push(ut("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),t.push(ut("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand){for(var n in this.ordered)if(this.ordered.hasOwnProperty(n)){var o=this.ordered[n];t.push(ut(tr,{key:n,style:{display:this.expand?void 0:"none"},sort:this.sort,keyName:n,depth:this.depth+1,value:o,previewMode:this.previewMode}))}}return!this.expand&&Object.keys(this.value).length&&t.push(ut("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal object content (keys: ".concat(Object.keys(this.ordered).join(", "),")"),innerText:"..."})),t.push(ut("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),ut("span",t)}};Rg.__file="src/Components/types/json-object.vue";var Og={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},data:function(){return{value:[]}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;o===0&&(this.value=[]),setTimeout(function(){t.length>o&&(n.value.push(t[o]),n.setValue(t,o+1))},0)},toggle:function(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,n=[];return!this.previewMode&&!this.keyName&&n.push(ut("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),n.push(ut("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach(function(o,a){n.push(ut(tr,{key:a,style:{display:t.expand?void 0:"none"},sort:t.sort,depth:t.depth+1,value:o,previewMode:t.previewMode}))}),!this.expand&&this.value.length&&n.push(ut("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal ".concat(this.value.length," hidden items"),innerText:"..."})),n.push(ut("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),ut("span",n)}};Og.__file="src/Components/types/json-array.vue";var Ng={name:"JsonFunction",functional:!0,props:{jsonValue:{type:Function,required:!0}},render:function(){return ut("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:this.jsonValue.toString()},innerHTML:"&lt;function&gt;"})}};Ng.__file="src/Components/types/json-function.vue";var Pg={name:"JsonDate",inject:["timeformat"],functional:!0,props:{jsonValue:{type:Date,required:!0}},render:function(){var t=this.jsonValue,n=this.timeformat;return ut("span",{class:{"jv-item":!0,"jv-string":!0},innerText:'"'.concat(n(t),'"')})}};Pg.__file="src/Components/types/json-date.vue";var X8=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Fg={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,n=X8.test(t),o;return this.expand?(o={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},n?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),o.innerHTML="".concat(t.toString())):o.innerText="".concat(t.toString())):o={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},ut("span",{},[this.canExtend&&ut("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),ut("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),ut("span",o)])}};Fg.__file="src/Components/types/json-regexp.vue";var tr={name:"JsonBox",inject:["expandDepth","keyClick"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},data:function(){return{expand:!0}},mounted:function(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)},methods:{toggle:function(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,n=[],o;this.value===null||this.value===void 0?o=Mg:Array.isArray(this.value)?o=Og:Object.prototype.toString.call(this.value)==="[object Date]"?o=Pg:er(this.value)==="object"?o=Rg:typeof this.value=="number"?o=Ig:typeof this.value=="string"?o=Ag:typeof this.value=="boolean"?o=Dg:typeof this.value=="function"&&(o=Ng),this.value.constructor===RegExp&&(o=Fg);var a=this.keyName&&this.value&&(Array.isArray(this.value)||er(this.value)==="object"&&Object.prototype.toString.call(this.value)!=="[object Date]");return!this.previewMode&&a&&n.push(ut("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),this.keyName&&n.push(ut("span",{class:{"jv-key":!0},onClick:function(){t.keyClick(t.keyName)},innerText:"".concat(this.keyName,":")})),n.push(ut(o,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,"onUpdate:expand":function(r){t.expand=r}})),ut("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!a,toggle:!this.previewMode&&a}},n)}};tr.__file="src/Components/json-box.vue";var Q8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bg={exports:{}};(function(e,t){(function(o,a){e.exports=a()})(Q8,function(){return function(){var n={686:function(l,r,i){i.d(r,{default:function(){return Ce}});var u=i(279),p=i.n(u),d=i(370),c=i.n(d),v=i(817),m=i.n(v);function y(re){try{return document.execCommand(re)}catch{return!1}}var S=function(ge){var ce=m()(ge);return y("cut"),ce},$=S;function T(re){var ge=document.documentElement.getAttribute("dir")==="rtl",ce=document.createElement("textarea");ce.style.fontSize="12pt",ce.style.border="0",ce.style.padding="0",ce.style.margin="0",ce.style.position="absolute",ce.style[ge?"right":"left"]="-9999px";var ae=window.pageYOffset||document.documentElement.scrollTop;return ce.style.top="".concat(ae,"px"),ce.setAttribute("readonly",""),ce.value=re,ce}var D=function(ge,ce){var ae=T(ge);ce.container.appendChild(ae);var G=m()(ae);return y("copy"),ae.remove(),G},Y=function(ge){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ae="";return typeof ge=="string"?ae=D(ge,ce):ge instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ge==null?void 0:ge.type)?ae=D(ge.value,ce):(ae=m()(ge),y("copy")),ae},x=Y;function P(re){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(ce){return typeof ce}:P=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},P(re)}var H=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=ge.action,ae=ce===void 0?"copy":ce,G=ge.container,L=ge.target,U=ge.text;if(ae!=="copy"&&ae!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(L!==void 0)if(L&&P(L)==="object"&&L.nodeType===1){if(ae==="copy"&&L.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ae==="cut"&&(L.hasAttribute("readonly")||L.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(U)return x(U,{container:G});if(L)return ae==="cut"?$(L):x(L,{container:G})},j=H;function K(re){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K=function(ce){return typeof ce}:K=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},K(re)}function X(re,ge){if(!(re instanceof ge))throw new TypeError("Cannot call a class as a function")}function ye(re,ge){for(var ce=0;ce<ge.length;ce++){var ae=ge[ce];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(re,ae.key,ae)}}function se(re,ge,ce){return ge&&ye(re.prototype,ge),ce&&ye(re,ce),re}function N(re,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(ge&&ge.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),ge&&Z(re,ge)}function Z(re,ge){return Z=Object.setPrototypeOf||function(ae,G){return ae.__proto__=G,ae},Z(re,ge)}function te(re){var ge=oe();return function(){var ae=F(re),G;if(ge){var L=F(this).constructor;G=Reflect.construct(ae,arguments,L)}else G=ae.apply(this,arguments);return z(this,G)}}function z(re,ge){return ge&&(K(ge)==="object"||typeof ge=="function")?ge:ne(re)}function ne(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(re){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},F(re)}function B(re,ge){var ce="data-clipboard-".concat(re);if(ge.hasAttribute(ce))return ge.getAttribute(ce)}var ie=function(re){N(ce,re);var ge=te(ce);function ce(ae,G){var L;return X(this,ce),L=ge.call(this),L.resolveOptions(G),L.listenClick(ae),L}return se(ce,[{key:"resolveOptions",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof G.action=="function"?G.action:this.defaultAction,this.target=typeof G.target=="function"?G.target:this.defaultTarget,this.text=typeof G.text=="function"?G.text:this.defaultText,this.container=K(G.container)==="object"?G.container:document.body}},{key:"listenClick",value:function(G){var L=this;this.listener=c()(G,"click",function(U){return L.onClick(U)})}},{key:"onClick",value:function(G){var L=G.delegateTarget||G.currentTarget,U=this.action(L)||"copy",V=j({action:U,container:this.container,target:this.target(L),text:this.text(L)});this.emit(V?"success":"error",{action:U,text:V,trigger:L,clearSelection:function(){L&&L.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(G){return B("action",G)}},{key:"defaultTarget",value:function(G){var L=B("target",G);if(L)return document.querySelector(L)}},{key:"defaultText",value:function(G){return B("text",G)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(G){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(G,L)}},{key:"cut",value:function(G){return $(G)}},{key:"isSupported",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],L=typeof G=="string"?[G]:G,U=!!document.queryCommandSupported;return L.forEach(function(V){U=U&&!!document.queryCommandSupported(V)}),U}}]),ce}(p()),Ce=ie},828:function(l){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function u(p,d){for(;p&&p.nodeType!==r;){if(typeof p.matches=="function"&&p.matches(d))return p;p=p.parentNode}}l.exports=u},438:function(l,r,i){var u=i(828);function p(v,m,y,S,$){var T=c.apply(this,arguments);return v.addEventListener(y,T,$),{destroy:function(){v.removeEventListener(y,T,$)}}}function d(v,m,y,S,$){return typeof v.addEventListener=="function"?p.apply(null,arguments):typeof y=="function"?p.bind(null,document).apply(null,arguments):(typeof v=="string"&&(v=document.querySelectorAll(v)),Array.prototype.map.call(v,function(T){return p(T,m,y,S,$)}))}function c(v,m,y,S){return function($){$.delegateTarget=u($.target,m),$.delegateTarget&&S.call(v,$)}}l.exports=d},879:function(l,r){r.node=function(i){return i!==void 0&&i instanceof HTMLElement&&i.nodeType===1},r.nodeList=function(i){var u=Object.prototype.toString.call(i);return i!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in i&&(i.length===0||r.node(i[0]))},r.string=function(i){return typeof i=="string"||i instanceof String},r.fn=function(i){var u=Object.prototype.toString.call(i);return u==="[object Function]"}},370:function(l,r,i){var u=i(879),p=i(438);function d(y,S,$){if(!y&&!S&&!$)throw new Error("Missing required arguments");if(!u.string(S))throw new TypeError("Second argument must be a String");if(!u.fn($))throw new TypeError("Third argument must be a Function");if(u.node(y))return c(y,S,$);if(u.nodeList(y))return v(y,S,$);if(u.string(y))return m(y,S,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(y,S,$){return y.addEventListener(S,$),{destroy:function(){y.removeEventListener(S,$)}}}function v(y,S,$){return Array.prototype.forEach.call(y,function(T){T.addEventListener(S,$)}),{destroy:function(){Array.prototype.forEach.call(y,function(T){T.removeEventListener(S,$)})}}}function m(y,S,$){return p(document.body,y,S,$)}l.exports=d},817:function(l){function r(i){var u;if(i.nodeName==="SELECT")i.focus(),u=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var p=i.hasAttribute("readonly");p||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),p||i.removeAttribute("readonly"),u=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var d=window.getSelection(),c=document.createRange();c.selectNodeContents(i),d.removeAllRanges(),d.addRange(c),u=d.toString()}return u}l.exports=r},279:function(l){function r(){}r.prototype={on:function(i,u,p){var d=this.e||(this.e={});return(d[i]||(d[i]=[])).push({fn:u,ctx:p}),this},once:function(i,u,p){var d=this;function c(){d.off(i,c),u.apply(p,arguments)}return c._=u,this.on(i,c,p)},emit:function(i){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[i]||[]).slice(),d=0,c=p.length;for(d;d<c;d++)p[d].fn.apply(p[d].ctx,u);return this},off:function(i,u){var p=this.e||(this.e={}),d=p[i],c=[];if(d&&u)for(var v=0,m=d.length;v<m;v++)d[v].fn!==u&&d[v].fn._!==u&&c.push(d[v]);return c.length?p[i]=c:delete p[i],this}},l.exports=r,l.exports.TinyEmitter=r}},o={};function a(l){if(o[l])return o[l].exports;var r=o[l]={exports:{}};return n[l](r,r.exports,a),r.exports}return function(){a.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(r,{a:r}),r}}(),function(){a.d=function(l,r){for(var i in r)a.o(r,i)&&!a.o(l,i)&&Object.defineProperty(l,i,{enumerable:!0,get:r[i]})}}(),function(){a.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)}}(),a(686)}().default})})(Bg);var e7=Z8(Bg.exports),t7=function(t,n){var o=Date.now(),a;return function(){for(var l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];Date.now()-o<n&&a&&clearTimeout(a),a=setTimeout(function(){t.apply(void 0,r)},n),o=Date.now()}},iu={name:"JsonViewer",components:{JsonBox:tr},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:function(t){return t.toLocaleString()}},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},provide:function(){return{expandDepth:this.expandDepth,timeformat:this.timeformat,keyClick:this.keyClick}},data:function(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},emits:["onKeyClick"],computed:{jvClass:function(){return"jv-container jv-"+this.theme+(this.boxed?" boxed":"")},copyText:function(){var t=this.copyable,n=t.copyText,o=t.copiedText,a=t.timeout,l=t.align;return{copyText:n||"copy",copiedText:o||"copied!",timeout:a||2e3,align:l}},parseValue:function(){if(!this.parse||typeof this.value!="string")return this.value;try{return JSON.parse(this.value)}catch{return this.value}}},watch:{value:function(){this.onResized()}},mounted:function(){var t=this;if(this.debounceResized=t7(this.debResized.bind(this),200),this.boxed&&this.$refs.jsonBox&&(this.onResized(),this.$refs.jsonBox.$el.addEventListener("resized",this.onResized,!0)),this.copyable){var n=new e7(this.$refs.clip,{text:function(){return JSON.stringify(t.value,null,2)}});n.on("success",function(o){t.onCopied(o)})}},methods:{onResized:function(){this.debounceResized()},debResized:function(){var t=this;this.$nextTick(function(){t.$refs.jsonBox&&(t.$refs.jsonBox.$el.clientHeight>=250?t.expandableCode=!0:t.expandableCode=!1)})},keyClick:function(t){this.$emit("onKeyClick",t)},onCopied:function(t){var n=this;this.copied||(this.copied=!0,setTimeout(function(){n.copied=!1},this.copyText.timeout),this.$emit("copied",t))},toggleExpandCode:function(){this.expandCode=!this.expandCode}}};function n7(e,t,n,o,a,l){var r=E1("json-box");return w(),E("div",{class:Le(l.jvClass)},[n.copyable?(w(),E("div",{key:0,class:Le("jv-tooltip ".concat(l.copyText.align||"right"))},[s("span",{ref:"clip",class:Le(["jv-button",{copied:a.copied}])},[ol(e.$slots,"copy",{copied:a.copied},function(){return[je(g(a.copied?l.copyText.copiedText:l.copyText.copyText),1)]})],2)],2)):de("v-if",!0),s("div",{class:Le(["jv-code",{open:a.expandCode,boxed:n.boxed}])},[Ve(r,{ref:"jsonBox",value:l.parseValue,sort:n.sort,"preview-mode":n.previewMode},null,8,["value","sort","preview-mode"])],2),a.expandableCode&&n.boxed?(w(),E("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=function(){return l.toggleExpandCode&&l.toggleExpandCode.apply(l,arguments)})},[s("span",{class:Le(["jv-toggle",{open:!!a.expandCode}])},null,2)])):de("v-if",!0)],2)}iu.render=n7,iu.__file="src/Components/json-viewer.vue";const o7={class:"lora-raw__content"},Ug="weilin_tools_",a7=_t({__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h({}),l=h(!1),r={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u=h((()=>{try{const m=localStorage.getItem(`${Ug}loraRawState`);if(m){const y=JSON.parse(m),S={...r};return y.loraRaw&&(S.loraRaw={...r.loraRaw,...y.loraRaw}),S}}catch(m){console.error("Error loading window states:",m)}return{...r}})());ot(u,m=>{try{localStorage.setItem(`${Ug}loraRawState`,JSON.stringify(m))}catch(y){console.error("Error saving window states:",y)}},{deep:!0}),mt(()=>{Ue.registerWindow("loraRaw")}),Mn(()=>{Ue.unregisterWindow("loraRaw")});const p=m=>{l.value=!1},d=(m,y)=>{u.value[m]&&(u.value[m].position={...y})},c=(m,y)=>{u.value[m]&&(u.value[m].size={...y})};return t({open:m=>{l.value=!0,Ue.setActiveWindow("loraRaw"),a.value=m}}),(m,y)=>l.value?(w(),xt(Tn,{key:0,title:f(o)("lora.rawTitle"),position:u.value.loraRaw.position,size:u.value.loraRaw.size,"z-index":f(Ue).getZIndex("loraRaw"),"onUpdate:position":y[0]||(y[0]=S=>d("loraRaw",S)),"onUpdate:size":y[1]||(y[1]=S=>c("loraRaw",S)),onActive:y[2]||(y[2]=S=>f(Ue).setActiveWindow("loraRaw")),onClose:y[3]||(y[3]=S=>p())},{default:it(()=>[s("div",o7,[Ve(f(iu),{value:a.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):de("",!0)}},[["__scopeId","data-v-378f8ede"]]),l7={key:0,class:"lora-detail__loading"},s7={class:"lora-detail__body"},r7={class:"lora-detail__tags"},i7=["title"],u7=["title"],c7={class:"lora-detail__table"},d7={class:"label"},p7={colspan:"2"},f7={colspan:"3"},g7={class:"label"},m7={colspan:"2",class:"hash"},v7={class:"label"},h7={colspan:"2"},_7=["href"],y7={key:1,class:"not-found"},b7=["title"],w7={class:"label"},x7=["title"],S7={key:1,class:"text"},T7={class:"actions"},k7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},C7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},E7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},$7={class:"label"},L7={colspan:"2"},A7={class:"label"},M7={colspan:"2"},I7={class:"label"},D7=["title"],R7=["onUpdate:modelValue","type","onKeyup"],O7={key:1,class:"text"},N7={class:"actions"},P7=["onClick","title"],F7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},B7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},U7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},V7={class:"label"},W7=["onUpdate:modelValue"],z7={key:1},H7=["onUpdate:modelValue","type","onKeyup"],j7={key:1,class:"text"},G7={class:"actions"},q7=["onClick","title"],K7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},Y7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},J7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},X7=["onClick","title"],Q7={class:"field-management"},Z7=["title"],e9={key:0},t9={class:"label"},n9=["title"],o9={key:0,class:"word-selection"},a9={colspan:"2"},l9={class:"word-list"},s9=["onClick"],r9={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},i9={key:1},u9={key:0,class:"lora-detail__images"},c9={class:"image-wrapper"},d9=["onClick"],p9=["src"],f9={class:"image-info"},g9={key:0,class:"info-item"},m9=["href"],v9={key:1,class:"info-item"},h9={key:2,class:"info-item"},_9={key:3,class:"info-item"},y9={key:4,class:"info-item"},b9={key:5,class:"info-item"},w9={key:6,class:"info-item"},x9={key:7,class:"info-item"},Vg="weilin_tools_",nr=_t({__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h({}),r=h(!1),i=h(),u=h({}),p={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c=h((()=>{try{const L=localStorage.getItem(`${Vg}loraDetailState`);if(L){const U=JSON.parse(L),V={...p};return U.loraDetail&&(V.loraDetail={...p.loraDetail,...U.loraDetail}),V}}catch(L){console.error("Error loading window states:",L)}return{...p}})());ot(c,L=>{try{localStorage.setItem(`${Vg}loraDetailState`,JSON.stringify(L))}catch(U){console.error("Error saving window states:",U)}},{deep:!0}),mt(()=>{Ue.registerWindow("loraDetail")}),Mn(()=>{Ue.unregisterWindow("loraDetail")});const v=L=>{r.value=!1},m=(L,U)=>{c.value[L]&&(c.value[L].position={...U})},y=(L,U)=>{c.value[L]&&(c.value[L].size={...U})};t({open:L=>{r.value=!0,Ue.setActiveWindow("loraDetail"),a.value=!0,l.value=L,qe(()=>{X()})}});const $=h(""),T=h(),D=L=>{T.value.open(L)},Y=h({}),x=h({}),P=h([]),H=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}],j=()=>{const L=`custom_${Date.now()}`;l.value.user_diy_fileds||(l.value.user_diy_fileds={}),u.value[L]={label:"",type:"text"},l.value.user_diy_fileds[L]={label:"",value:""},x.value[L]="",F(L)},K=async L=>{var U,V;delete u.value[L],delete x.value[L],(V=(U=l.value)==null?void 0:U.user_diy_fileds)!=null&&V[L]&&delete l.value.user_diy_fileds[L],await qe(async()=>{await Ce(L)})},X=()=>{$.value=l.value.name,l.value={},P.value=[],x.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Cn.getLoraDetail({file:$.value,refresh:!1,light:!1}).then(L=>{l.value=L.data,qe(function(){var U,V,I,W,C,b;l.value.name=l.value.name||((V=(U=l.value.raw)===null||U===void 0?void 0:U.metadata)===null||V===void 0?void 0:V.ss_output_name===void 0?V["modelspec.title"]:V.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(I=l.value.strengthMin)!==null&&I!==void 0?I:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(W=l.value.strengthMax)!==null&&W!==void 0?W:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(C=l.value.userNote)!==null&&C!==void 0?C:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(b=l.value.loraWorks)!==null&&b!==void 0?b:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1})}).catch(L=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},ye=L=>{let V=new URL(L).pathname.split("/").pop();return V=V.split("?")[0],decodeURIComponent(V)},se=async L=>{try{const U=await fetch(L),V=ye(L),I=await U.blob();Cn.postUplaodImg(I,l.value.file,V).then(W=>{J({type:"success",str:"message.saveSuccess"})}).catch(W=>{J({type:"warn",str:"message.unknownError"})})}catch{J({type:"warn",str:"message.unknownError"})}},N=vt(()=>{var L;return(L=l.value.links)==null?void 0:L.find(U=>U.includes("civitai.com/models"))}),Z=vt(()=>{var L,U;return((U=(L=l.value.raw)==null?void 0:L.civitai)==null?void 0:U.error)==="Model not found"}),te=vt(()=>l.value.trainedWords||[]),z=async()=>{var U;const L=((U=i.value)==null?void 0:U.scrollTop)||0;a.value=!0,Cn.getLoraRefresh({file:$.value}).then(V=>{l.value=V.data,qe(function(){var I,W,C,b,O,Q;l.value.name=l.value.name||((W=(I=l.value.raw)===null||I===void 0?void 0:I.metadata)===null||W===void 0?void 0:W.ss_output_name===void 0?W["modelspec.title"]:W.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(C=l.value.strengthMin)!==null&&C!==void 0?C:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(b=l.value.strengthMax)!==null&&b!==void 0?b:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(O=l.value.userNote)!==null&&O!==void 0?O:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(Q=l.value.loraWorks)!==null&&Q!==void 0?Q:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1}),qe(function(){a.value=!1}),i.value&&(i.value.scrollTop=L),J({type:"success",str:"message.dataLoaded"})}).catch(V=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},ne=L=>{Y.value[L]?F(L):oe(L)},oe=L=>{var U,V;Y.value[L]=!0,L in u.value?x.value[L]=((V=(U=l.value.user_diy_fileds)==null?void 0:U[L])==null?void 0:V.value)||"":x.value[L]=l.value[L],qe(()=>{L==="name"&&nameInput.value&&nameInput.value.focus()})},F=L=>{L in u.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[L]={label:u.value[L].label,value:x.value[L]}):l.value[L]=x.value[L],ie(l.value),Y.value[L]=!1},B=L=>{Y.value[L]=!1,x.value[L]=l.value[L]},ie=L=>{var V;const U=((V=i.value)==null?void 0:V.scrollTop)||0;a.value=!0,Cn.postLoraSave($.value,L).then(I=>{l.value=I.data,qe(function(){var W,C,b,O,Q,pe;l.value.name=l.value.name||((C=(W=l.value.raw)===null||W===void 0?void 0:W.metadata)===null||C===void 0?void 0:C.ss_output_name===void 0?C["modelspec.title"]:C.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(b=l.value.strengthMin)!==null&&b!==void 0?b:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(O=l.value.strengthMax)!==null&&O!==void 0?O:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(pe=l.value.loraWorks)!==null&&pe!==void 0?pe:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,qe(function(){i.value&&(i.value.scrollTop=U)})}),J({type:"success",str:"message.saveSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},Ce=async L=>{var V;const U=((V=i.value)==null?void 0:V.scrollTop)||0;a.value=!0,await Cn.postLoraDelet($.value,L).then(I=>{l.value=I.data,qe(function(){var W,C,b,O,Q,pe;l.value.name=l.value.name||((C=(W=l.value.raw)===null||W===void 0?void 0:W.metadata)===null||C===void 0?void 0:C.ss_output_name===void 0?C["modelspec.title"]:C.ss_output_name)||"",x.value.nameValue=l.value.name,l.value.strengthMin=(b=l.value.strengthMin)!==null&&b!==void 0?b:"",x.value.minValue=l.value.strengthMin,l.value.strengthMax=(O=l.value.strengthMax)!==null&&O!==void 0?O:"",x.value.maxValue=l.value.strengthMax,l.value.userNote=(Q=l.value.userNote)!==null&&Q!==void 0?Q:"",x.value.notesValue=l.value.userNote,l.value.loraWorks=(pe=l.value.loraWorks)!==null&&pe!==void 0?pe:"",x.value.loraWorksValue=l.value.loraWorks,l.value.user_diy_fileds&&(u.value=l.value.user_diy_fileds),a.value=!1,qe(function(){i.value&&(i.value.scrollTop=U)})}),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},re=L=>{const U=P.value.indexOf(L);U===-1?P.value.push(L):P.value.splice(U,1)},ge=L=>P.value.includes(L),ce=async()=>{P.value.length&&navigator.clipboard.writeText(P.value).then(L=>{J({type:"success",str:"message.copySuccess"})},L=>{J({type:"warn",str:"message.copyFailed"})})};h(!1),h(!1),vt(()=>a.value?o("common.loading"):o("common.ready"));const ae=h(!0),G=()=>{ae.value=!ae.value};return(L,U)=>(w(),E(De,null,[r.value?(w(),xt(Tn,{key:0,title:f(o)("lora.title"),position:c.value.loraDetail.position,size:c.value.loraDetail.size,"z-index":f(Ue).getZIndex("loraDetail"),"onUpdate:position":U[5]||(U[5]=V=>m("loraDetail",V)),"onUpdate:size":U[6]||(U[6]=V=>y("loraDetail",V)),onActive:U[7]||(U[7]=V=>f(Ue).setActiveWindow("loraDetail")),onClose:U[8]||(U[8]=V=>v())},{default:it(()=>{var V;return[s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:i},[a.value?(w(),E("div",l7,U[9]||(U[9]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):de("",!0),s("div",s7,[U[24]||(U[24]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",r7,[l.value.type?(w(),E("li",{key:0,class:Le(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,i7)):de("",!0),l.value.baseModel?(w(),E("li",{key:1,class:Le(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,u7)):de("",!0)]),s("table",c7,[s("tbody",null,[s("tr",null,[s("td",d7,g(f(o)("lora.file")),1),s("td",p7,g(l.value.file),1),s("td",f7,[s("button",{class:"fetch-btn",onClick:U[0]||(U[0]=I=>D(l.value.raw.metadata))},g(f(o)("lora.seeLoraRaw")),1)])]),s("tr",null,[s("td",g7,g(f(o)("lora.hash")),1),s("td",m7,g(l.value.sha256),1)]),s("tr",null,[s("td",v7,g(f(o)("lora.civitai")),1),s("td",h7,[N.value?(w(),E(De,{key:0},[s("a",{href:N.value,target:"_blank",class:"civitai-link"},[U[10]||(U[10]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,_7),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:z},g(f(o)("lora.getCivitData")),1)],64)):Z.value?(w(),E("div",y7,[s("i",null,g(f(o)("lora.modelNotFound")),1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},U[11]||(U[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,b7))])):(w(),E("button",{key:2,class:"fetch-btn",onClick:z},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:Le({"is-editing":Y.value.name})},[s("td",w7,[je(g(f(o)("lora.name"))+" ",1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},U[12]||(U[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,x7))]),s("td",null,[Y.value.name?he((w(),E("input",{key:0,"onUpdate:modelValue":U[1]||(U[1]=I=>x.value.name=I),type:"text",onKeyup:[U[2]||(U[2]=an(I=>F("name"),["enter"])),U[3]||(U[3]=an(I=>B("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,x.value.name]]):(w(),E("span",S7,g(l.value.name),1))]),s("td",T7,[s("button",{class:"edit-btn",onClick:U[4]||(U[4]=I=>ne("name"))},[(w(),E("svg",k7,[Y.value.name?(w(),E("path",C7)):(w(),E("path",E7))]))])])],2),s("tr",null,[s("td",$7,g(f(o)("lora.baseModel")),1),s("td",L7,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                    (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",A7,g(f(o)("lora.skipClip")),1),s("td",M7,g((L._t=(L._s=l.value.raw)===null||L._s===void 0?void 0:L._s.metadata)===null||L._t===void 0?void 0:L._t.ss_clip_skip),1)]),(w(),E(De,null,ze(H,I=>s("tr",{key:I.key,class:Le({"is-editing":Y.value[I.key]})},[s("td",I7,[je(g(I.label)+" ",1),I.tip?(w(),E("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:I.tip},U[13]||(U[13]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,D7)):de("",!0)]),s("td",null,[Y.value[I.key]?he((w(),E("input",{key:0,"onUpdate:modelValue":W=>x.value[I.key]=W,type:I.type||"text",onKeyup:[an(W=>F(I.key),["enter"]),an(W=>B(I.key),["esc"])]},null,40,R7)),[[Dd,x.value[I.key]]]):(w(),E("span",O7,g(l.value[I.key]),1))]),s("td",N7,[s("button",{class:"edit-btn",onClick:W=>ne(I.key),title:f(o)("promptBox.settings.edit")},[(w(),E("svg",F7,[Y.value[I.key]?(w(),E("path",B7)):(w(),E("path",U7))]))],8,P7)])],2)),64)),(w(!0),E(De,null,ze(u.value,(I,W)=>{var C;return w(),E("tr",{key:W,class:Le({"is-editing":Y.value[W]})},[s("td",V7,[Y.value[W]?he((w(),E("input",{key:0,"onUpdate:modelValue":b=>I.label=b,type:"text"},null,8,W7)),[[Ae,I.label]]):(w(),E("span",z7,g(I.label),1))]),s("td",null,[Y.value[W]?he((w(),E("input",{key:0,"onUpdate:modelValue":b=>x.value[W]=b,type:I.type||"text",onKeyup:[an(b=>F(W),["enter"]),an(b=>B(W),["esc"])]},null,40,H7)),[[Dd,x.value[W]]]):(w(),E("span",j7,g(l.value.user_diy_fileds?(C=l.value.user_diy_fileds[W])==null?void 0:C.value:""),1))]),s("td",G7,[s("button",{class:"edit-btn",onClick:b=>ne(W),title:f(o)("promptBox.settings.edit")},[(w(),E("svg",K7,[Y.value[W]?(w(),E("path",Y7)):(w(),E("path",J7))]))],8,q7),s("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:b=>K(W),class:"edit-btn",title:f(o)("promptBox.settings.delete")},g(f(o)("promptBox.settings.delete")),9,X7)])],2)}),128)),s("div",Q7,[s("button",{onClick:j,class:"add-btn",title:f(o)("lora.addDiyFiled")},g(f(o)("lora.addDiyFiled")),9,Z7)]),te.value.length?(w(),E("tr",e9,[s("td",t9,[je(g(f(o)("lora.trainedWords"))+" ",1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},U[14]||(U[14]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,n9)),P.value.length?(w(),E("div",o9,[je(g(f(o)("lora.selectedWords",{count:P.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:ce},g(f(o)("common.copy")),1)])):de("",!0)]),s("td",a9,[s("ul",l9,[(w(!0),E(De,null,ze(ae.value?te.value.slice(0,10):te.value,(I,W)=>(w(),E("li",{key:"words-"+W,class:Le(["word-item",{"is-selected":ge(I.word),"is-hidden":ae.value&&W>=10}]),onClick:C=>re(I.word)},[s("span",null,g(I.word),1),I.civitai?(w(),E("svg",r9,U[15]||(U[15]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):de("",!0),I.count!=null?(w(),E("small",i9,g(I.count),1)):de("",!0)],10,s9))),128)),te.value.length>10?(w(),E("li",{key:0,class:"toggle-btn",onClick:G},g(ae.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):de("",!0)])])])):de("",!0)])]),(V=l.value.images)!=null&&V.length?(w(),E("ul",u9,[(w(!0),E(De,null,ze(l.value.images,(I,W)=>(w(),E("li",{key:W,class:"lora-detail__image-item"},[s("figure",null,[s("div",c9,[s("div",{class:"image-action",onClick:C=>se(I.url)}," Lora ",8,d9),s("img",{src:I.url},null,8,p9)]),s("figcaption",f9,[I.civitaiUrl?(w(),E("span",g9,[s("a",{href:I.civitaiUrl,target:"_blank",class:"civitai-link"},U[16]||(U[16]=[je(" C civitai "),s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)]),8,m9)])):de("",!0),I.seed?(w(),E("span",v9,[U[17]||(U[17]=s("label",null," seed",-1)),je(" "+g(I.seed),1)])):de("",!0),I.steps?(w(),E("span",h9,[U[18]||(U[18]=s("label",null," steps",-1)),je(" "+g(I.steps),1)])):de("",!0),I.cfg?(w(),E("span",_9,[U[19]||(U[19]=s("label",null," cfg",-1)),je(" "+g(I.cfg),1)])):de("",!0),I.sampler?(w(),E("span",y9,[U[20]||(U[20]=s("label",null," sampler",-1)),je(" "+g(I.sampler),1)])):de("",!0),I.model?(w(),E("span",b9,[U[21]||(U[21]=s("label",null," model",-1)),je(" "+g(I.model),1)])):de("",!0),I.positive?(w(),E("span",w9,[U[22]||(U[22]=s("label",null," positive",-1)),je(" "+g(I.positive),1)])):de("",!0),I.negative?(w(),E("span",x9,[U[23]||(U[23]=s("label",null," negative",-1)),je(" "+g(I.negative),1)])):de("",!0)])])]))),128))])):de("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):de("",!0),Ve(a7,{ref_key:"loraRawRef",ref:T},null,512)],64))}},[["__scopeId","data-v-1b0da0a7"]]),S9={key:0,class:"lora-detail__loading"},T9={class:"lora-detail__body"},k9={class:"lora-detail__tags"},C9=["title"],E9=["title"],$9={class:"lora-detail__table"},L9={class:"label"},A9={colspan:"2"},M9={class:"label"},I9={colspan:"2",class:"hash"},D9={class:"label"},R9={colspan:"2"},O9=["href"],N9={key:1,class:"not-found"},P9=["title"],F9={class:"label"},B9=["title"],U9={key:1,class:"text"},V9={class:"label"},W9={colspan:"2"},z9={class:"label"},H9={colspan:"2"},j9={class:"label"},G9=["title"],q9={class:"text"},K9={class:"actions"},Y9=["onClick","title"],J9={class:"label"},X9=["onUpdate:modelValue"],Q9={key:1},Z9={class:"text"},ex={class:"actions"},tx=["onClick","title"],nx={key:0},ox={class:"label"},ax=["title"],lx={key:0,class:"word-selection"},sx={colspan:"2"},rx={class:"word-list"},ix=["onClick"],ux={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},cx={key:1},dx={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},px={class:"image-wrapper",style:{height:"200px"}},fx=["src"],uu=_t({__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h({}),r=h(),i=h({}),u=e,p=h(""),d=n,c=()=>{d("cardLeave")},v=()=>{d("cardenter")},m=h({}),y=h({}),S=h([]),$=[{key:"strengthMin",label:o("lora.strengthMin"),tip:o("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:o("lora.strengthMax"),tip:o("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:o("lora.strWeight"),tip:o("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:o("lora.promptWords"),tip:o("lora.promptWordsTip")}];mt(()=>{T()});const T=()=>{p.value=u.fileNmae,l.value={},S.value=[],y.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Cn.getLoraDetail({file:p.value,refresh:!1,light:!1}).then(ne=>{l.value=ne.data,qe(function(){var oe,F,B,ie,Ce,re;l.value.name=l.value.name||((F=(oe=l.value.raw)===null||oe===void 0?void 0:oe.metadata)===null||F===void 0?void 0:F.ss_output_name===void 0?F["modelspec.title"]:F.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(B=l.value.strengthMin)!==null&&B!==void 0?B:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(ie=l.value.strengthMax)!==null&&ie!==void 0?ie:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(Ce=l.value.userNote)!==null&&Ce!==void 0?Ce:"",y.value.notesValue=l.value.userNote,l.value.loraWorks=(re=l.value.loraWorks)!==null&&re!==void 0?re:"",y.value.loraWorksValue=l.value.loraWorks,i.value=l.value.user_diy_fileds,a.value=!1})}).catch(ne=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},D=ne=>{navigator.clipboard.writeText(ne).then(()=>{J({type:"success",str:""})}).catch(oe=>{J({type:"error",str:""})})},Y=vt(()=>{var ne;return(ne=l.value.links)==null?void 0:ne.find(oe=>oe.includes("civitai.com/models"))}),x=vt(()=>{var ne,oe;return((oe=(ne=l.value.raw)==null?void 0:ne.civitai)==null?void 0:oe.error)==="Model not found"}),P=vt(()=>l.value.trainedWords||[]),H=async()=>{var oe;const ne=((oe=r.value)==null?void 0:oe.scrollTop)||0;a.value=!0,Cn.getLoraRefresh({file:p.value}).then(F=>{l.value=F.data,qe(function(){var B,ie,Ce,re,ge;l.value.name=l.value.name||((ie=(B=l.value.raw)===null||B===void 0?void 0:B.metadata)===null||ie===void 0?void 0:ie.ss_output_name===void 0?ie["modelspec.title"]:ie.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(Ce=l.value.strengthMin)!==null&&Ce!==void 0?Ce:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(re=l.value.strengthMax)!==null&&re!==void 0?re:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(ge=l.value.userNote)!==null&&ge!==void 0?ge:"",y.value.notesValue=l.value.userNote,a.value=!1}),qe(function(){a.value=!1}),r.value&&(r.value.scrollTop=ne),J({type:"success",str:"message.dataLoaded"})}).catch(F=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},j=ne=>{ne in i.value?(l.value.user_diy_fileds||(l.value.user_diy_fileds={}),l.value.user_diy_fileds[ne]={label:i.value[ne].label,value:y.value[ne]}):l.value[ne]=y.value[ne],X(l.value),m.value[ne]=!1},K=ne=>{m.value[ne]=!1,y.value[ne]=l.value[ne]},X=ne=>{var F;const oe=((F=r.value)==null?void 0:F.scrollTop)||0;a.value=!0,Cn.postLoraSave(p.value,ne).then(B=>{l.value=B.data,qe(function(){var ie,Ce,re,ge,ce;l.value.name=l.value.name||((Ce=(ie=l.value.raw)===null||ie===void 0?void 0:ie.metadata)===null||Ce===void 0?void 0:Ce.ss_output_name===void 0?Ce["modelspec.title"]:Ce.ss_output_name)||"",y.value.nameValue=l.value.name,l.value.strengthMin=(re=l.value.strengthMin)!==null&&re!==void 0?re:"",y.value.minValue=l.value.strengthMin,l.value.strengthMax=(ge=l.value.strengthMax)!==null&&ge!==void 0?ge:"",y.value.maxValue=l.value.strengthMax,l.value.userNote=(ce=l.value.userNote)!==null&&ce!==void 0?ce:"",y.value.notesValue=l.value.userNote,a.value=!1,qe(function(){r.value&&(r.value.scrollTop=oe)})}),J({type:"success",str:"message.saveSuccess"})}).catch(B=>{J({type:"warn",str:"message.networkError"}),a.value=!1})},ye=ne=>{const oe=S.value.indexOf(ne);oe===-1?S.value.push(ne):S.value.splice(oe,1)},se=ne=>S.value.includes(ne),N=async()=>{S.value.length&&navigator.clipboard.writeText(S.value).then(ne=>{J({type:"success",str:"message.copySuccess"})},ne=>{J({type:"warn",str:"message.copyFailed"})})},Z=h(!0),te=()=>{Z.value=!Z.value};return t({refresh:()=>{T()}}),(ne,oe)=>{var F;return w(),E("div",{class:"lora_catd_content",style:dt(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:v,onMouseleave:c},[s("div",{class:"close-button",onClick:c,title:""},oe[3]||(oe[3]=[s("span",null,"",-1)])),s("div",{class:"lora-detail__content",ref_key:"loraContent",ref:r},[a.value?(w(),E("div",S9,oe[4]||(oe[4]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[s("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):de("",!0),s("div",T9,[oe[13]||(oe[13]=s("div",{class:"lora-detail__title"},"Lora ",-1)),s("ul",k9,[l.value.type?(w(),E("li",{key:0,class:Le(["lora-detail__tag",`-type-${l.value.type.toLowerCase()}`]),title:f(o)("lora.type")},g(l.value.type),11,C9)):de("",!0),l.value.baseModel?(w(),E("li",{key:1,class:Le(["lora-detail__tag",`-basemodel-${l.value.baseModel.toLowerCase()}`]),title:f(o)("lora.baseModel")},g(l.value.baseModel),11,E9)):de("",!0)]),s("table",$9,[s("tbody",null,[s("tr",null,[s("td",L9,g(f(o)("lora.file")),1),s("td",A9,g(l.value.file),1)]),s("tr",null,[s("td",M9,g(f(o)("lora.hash")),1),s("td",I9,g(l.value.sha256),1)]),s("tr",null,[s("td",D9,g(f(o)("lora.civitai")),1),s("td",R9,[Y.value?(w(),E(De,{key:0},[s("a",{href:Y.value,target:"_blank",class:"civitai-link"},[oe[5]||(oe[5]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),s("span",null,g(f(o)("lora.viewOnCivitai")),1)],8,O9),s("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:H},g(f(o)("lora.getCivitData")),1)],64)):x.value?(w(),E("div",N9,[s("i",null,g(f(o)("lora.modelNotFound")),1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.modelNotFoundTip")},oe[6]||(oe[6]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,P9))])):(w(),E("button",{key:2,class:"fetch-btn",onClick:H},g(f(o)("lora.fetchFromCivitai")),1))])]),s("tr",{class:Le({"is-editing":m.value.name})},[s("td",F9,[je(g(f(o)("lora.name"))+" ",1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.nameTip")},oe[7]||(oe[7]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,B9))]),s("td",null,[m.value.name?he((w(),E("input",{key:0,"onUpdate:modelValue":oe[0]||(oe[0]=B=>y.value.name=B),type:"text",onKeyup:[oe[1]||(oe[1]=an(B=>j("name"),["enter"])),oe[2]||(oe[2]=an(B=>K("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,y.value.name]]):(w(),E("span",U9,g(l.value.name),1))])],2),s("tr",null,[s("td",V9,g(f(o)("lora.baseModel")),1),s("td",W9,g(!l.value.baseModelFile&&!l.value.baseModelFile?"":(l.value.baseModel||"")+(l.value.baseModelFile?`
                                (${l.value.baseModelFile})`:"")),1)]),s("tr",null,[s("td",z9,g(f(o)("lora.skipClip")),1),s("td",H9,g((ne._t=(ne._s=l.value.raw)===null||ne._s===void 0?void 0:ne._s.metadata)===null||ne._t===void 0?void 0:ne._t.ss_clip_skip),1)]),(w(),E(De,null,ze($,B=>s("tr",{key:B.key,class:Le({"is-editing":m.value[B.key]})},[s("td",j9,[je(g(B.label)+" ",1),B.tip?(w(),E("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:B.tip},oe[8]||(oe[8]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,G9)):de("",!0)]),s("td",null,[s("span",q9,g(l.value[B.key]),1)]),s("td",K9,[s("button",{class:"copy-btn",onClick:ie=>D(l.value[B.key]),title:f(o)("lora.copy")},[oe[9]||(oe[9]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,Y9)])],2)),64)),(w(!0),E(De,null,ze(i.value,(B,ie)=>{var Ce;return w(),E("tr",{key:ie,class:Le({"is-editing":m.value[ie]})},[s("td",J9,[m.value[ie]?he((w(),E("input",{key:0,"onUpdate:modelValue":re=>B.label=re,type:"text"},null,8,X9)),[[Ae,B.label]]):(w(),E("span",Q9,g(B.label),1))]),s("td",null,[s("span",Z9,g(l.value.user_diy_fileds?(Ce=l.value.user_diy_fileds[ie])==null?void 0:Ce.value:""),1)]),s("td",ex,[s("button",{class:"copy-btn",onClick:re=>{var ge;return D((ge=l.value.user_diy_fileds[ie])==null?void 0:ge.value)},title:f(o)("lora.copy")},[oe[10]||(oe[10]=s("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),je(" "+g(f(o)("lora.copy")),1)],8,tx)])],2)}),128)),P.value.length?(w(),E("tr",nx,[s("td",ox,[je(g(f(o)("lora.trainedWords"))+" ",1),(w(),E("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:f(o)("lora.trainedWordsTip")},oe[11]||(oe[11]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,ax)),S.value.length?(w(),E("div",lx,[je(g(f(o)("lora.selectedWords",{count:S.value.length}))+" ",1),s("button",{class:"copy-btn",onClick:N},g(f(o)("common.copy")),1)])):de("",!0)]),s("td",sx,[s("ul",rx,[(w(!0),E(De,null,ze(Z.value?P.value.slice(0,10):P.value,(B,ie)=>(w(),E("li",{key:"words-"+ie,class:Le(["word-item",{"is-selected":se(B.word),"is-hidden":Z.value&&ie>=10}]),onClick:Ce=>ye(B.word)},[s("span",null,g(B.word),1),B.civitai?(w(),E("svg",ux,oe[12]||(oe[12]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):de("",!0),B.count!=null?(w(),E("small",cx,g(B.count),1)):de("",!0)],10,ix))),128)),P.value.length>10?(w(),E("li",{key:0,class:"toggle-btn",onClick:te},g(Z.value?f(o)("common.showMore"):f(o)("common.showLess")),1)):de("",!0)])])])):de("",!0)])]),(F=l.value.images)!=null&&F.length?(w(),E("ul",dx,[(w(!0),E(De,null,ze(l.value.images,(B,ie)=>(w(),E("li",{key:ie,class:"lora-detail__image-item"},[s("div",px,[s("img",{src:B.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,fx)])]))),128))])):de("",!0)])],512)],36)}}},[["__scopeId","data-v-b11ec087"]]),gx={class:"header-actions"},mx=["title"],vx=["onMouseover","onDragstart","onDrop"],hx={class:"lora-info"},_x={class:"lora-header"},yx=["title"],bx={class:"lora-actions"},wx=["onClick","title"],xx=["onClick","title"],Sx={class:"lora-weights-row"},Tx={class:"weight-item-col"},kx=["onUpdate:modelValue"],Cx={class:"weight-item-col"},Ex=["onUpdate:modelValue"],$x={class:"switch-item-col"},Lx={class:"switch"},Ax=["checked","onChange"],Uo="weilin_prompt_ui_",Mx=_t({__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(""),r=h(100),i=h(0),u=h(),p=h(!1),d=h(!1),c=h(),v=e,m=n,y=(se,N)=>{if(d.value=!0,l.value===se&&a.value)return;const te=N.currentTarget.getBoundingClientRect();let ne={left:te.left-450-10,top:te.top};ne.left<10&&(ne.left=te.right+10),ne.top=Math.max(10,Math.min(ne.top,window.innerHeight-310)),r.value=ne.left,i.value=ne.top,a.value=!0,l.value=se,qe(()=>{c.value.refresh()})},S=()=>{d.value=!1,setTimeout(()=>{!p.value&&!d.value&&(a.value=!1,l.value="",p.value=!1)},200)},$=()=>{p.value=!0,d.value=!0},T=()=>{a.value=!1,l.value="",p.value=!1},D=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},Y=se=>{se.hidden=!se.hidden},x=se=>{v.selectedLoras&&!v.selectedLoras.find(N=>N.name===se.name)&&(v.selectedLoras.push({name:se.name,weight:1,text_encoder_weight:1,...se}),m("update:selectedLoras",v.selectedLoras))},P=se=>{const N=v.selectedLoras.findIndex(Z=>Z.name===se.name);N>-1&&(v.selectedLoras.splice(N,1),m("update:selectedLoras",v.selectedLoras))},H=h(),j=se=>{H.value.open({name:se.lora})};window.addEventListener("message",se=>{se.data.type==="weilin_prompt_ui_selectLora"&&x(se.data.lora)});const K=h(null),X=se=>{K.value=se},ye=se=>{if(K.value===null||K.value===se)return;const N=v.selectedLoras.splice(K.value,1)[0];v.selectedLoras.splice(se,0,N),K.value=null,m("update:selectedLoras",v.selectedLoras)};return t({addLora:x,removeLora:P}),(se,N)=>(w(),E("div",{class:Le(`${Uo}lora-stack`),style:dt([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[s("div",{class:Le(`${Uo}lora-content`)},[s("div",{class:Le(`${Uo}lora-header`)},[s("h3",{class:Le(`${Uo}lora-title`)},g(f(o)("controls.loraStack")),3),s("div",gx,[s("button",{class:Le(`${Uo}add-btn`),onClick:D,title:f(o)("controls.addLora")},N[2]||(N[2]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,mx),s("button",{class:Le(`${Uo}close-btn`),onClick:N[0]||(N[0]=Z=>se.$emit("close"))},N[3]||(N[3]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)])],2),s("div",{class:Le(`${Uo}lora-body`)},[s("div",{class:Le(`${Uo}lora-list`)},[(w(!0),E(De,null,ze(e.selectedLoras,(Z,te)=>(w(),E("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:u,key:Z.name,class:Le(["lora-item",{"hidden-lora":Z.hidden}]),onMouseover:z=>y(Z.lora,z),onMouseleave:S,draggable:"true",onDragstart:z=>X(te),onDragover:N[1]||(N[1]=Je(()=>{},["prevent"])),onDrop:z=>ye(te)},[s("div",hx,[s("div",_x,[s("span",{class:"lora-name",title:Z.name},g(Z.name),9,yx),s("div",bx,[s("button",{class:"look-on-btn",onClick:z=>j(Z),title:f(o)("controls.lookOnLora")},N[4]||(N[4]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,wx),s("button",{class:"remove-btn",onClick:z=>P(Z),title:f(o)("controls.removeLora")},N[5]||(N[5]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,xx)])]),s("div",Sx,[s("div",Tx,[s("label",null,g(f(o)("loraManager.modelWeight")),1),he(s("input",{type:"number","onUpdate:modelValue":z=>Z.weight=z,class:"lora-weight",step:"0.1"},null,8,kx),[[Ae,Z.weight]])]),s("div",Cx,[s("label",null,g(f(o)("loraManager.textEncoderWeight")),1),he(s("input",{type:"number","onUpdate:modelValue":z=>Z.text_encoder_weight=z,class:"lora-weight",step:"0.1"},null,8,Ex),[[Ae,Z.text_encoder_weight]])]),s("div",$x,[s("label",null,g(Z.hidden?f(o)("lora.hideLora"):f(o)("lora.showLora")),1),s("label",Lx,[s("input",{type:"checkbox",checked:!Z.hidden,onChange:z=>Y(Z)},null,40,Ax),N[6]||(N[6]=s("span",{class:"slider"},null,-1))])])])])],42,vx))),128))],2)],2)],2),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:H},null,512),a.value?(w(),xt(uu,{key:0,ref_key:"loraCardItem",ref:c,fileNmae:l.value,paddingLeft:r.value,paddingTop:i.value,onCardLeave:T,onCardenter:$},null,8,["fileNmae","paddingLeft","paddingTop"])):de("",!0)],6))}},[["__scopeId","data-v-19f5b628"]]),Ix={class:"main-label-manager"},Dx={class:"mlm-header"},Rx={class:"mlm-grid"},Ox=["disabled"],Nx=["disabled"],Px=["onClick","title","onDragstart","onDragenter","onDrop"],Fx={class:"mlm-item-main"},Bx={key:0,class:"pin-badge"},Ux={class:"mlm-name"},Vx={class:"mlm-item-actions"},Wx=["title","onClick"],zx=["title","onClick"],Wg="/weilin/prompt_ui/api/",Hx="weilin_prompt_ui_main_labels_v1",jx=_t({__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:n}){const o=e,a=n,l=h(null),r=h(""),i=h([]),u=h(o.selectedId),p=h(!0),d=h(!0),c=h("time"),v=h(null),m=h(null);async function y(){const ae={items:i.value,settings:{sortMode:c.value,sortTimeDesc:p.value,sortNameAsc:d.value,selectedId:u.value}};try{await Nt.post(Wg+"labels/save",ae)}catch(G){console.error(":",G),alert(": "+G.message)}}async function S(){var ae;try{const L=(ae=(await Nt.get(Wg+"labels/get")).data)==null?void 0:ae.data;if(!L)throw new Error("no data");const U=Array.isArray(L)?L:(L==null?void 0:L.items)??[],V=Array.isArray(L)?{}:(L==null?void 0:L.settings)??{};i.value=U.map((I,W)=>({id:I.id??Y(),name:I.name??"",content:I.content??"",createdAt:I.createdAt??I.updatedAt??Date.now(),updatedAt:I.updatedAt??I.createdAt??Date.now(),pinned:!!I.pinned,highlighted:!!I.highlighted,order:typeof I.order=="number"?I.order:W})),V.sortMode&&(c.value=V.sortMode),typeof V.sortTimeDesc=="boolean"&&(p.value=V.sortTimeDesc),typeof V.sortNameAsc=="boolean"&&(d.value=V.sortNameAsc),(typeof V.selectedId=="string"||V.selectedId===null)&&(u.value=V.selectedId)}catch(G){console.error(":",G),i.value=[]}}mt(async()=>{await S()}),ot(()=>o.selectedId,ae=>{u.value=ae}),ot([c,p,d],()=>{y()}),ot(i,()=>{y()},{deep:!0}),ot(u,ae=>{y();const G=ae?x(ae):null;a("select",G?{...G}:null)});const $=vt(()=>{const ae=r.value.trim().toLowerCase();return ae?i.value.filter(G=>(G.name||"").toLowerCase().includes(ae)):i.value}),T=vt(()=>{const ae=[...$.value];if(c.value==="manual")return ae.sort((V,I)=>{const W=V.order??0,C=I.order??0;return W!==C?W-C:(V.createdAt??0)-(I.createdAt??0)});const G=(V,I)=>{const W=V.name||"",C=I.name||"";let b=W.localeCompare(C,void 0,{numeric:!0,sensitivity:"base"});return d.value||(b=-b),b},L=(V,I)=>{let W=V.createdAt-I.createdAt;return p.value&&(W=-W),W},U=V=>V.pinned?0:1;return ae.sort((V,I)=>{const W=U(V)-U(I);if(W!==0)return W;if(c.value==="name"){const b=G(V,I);return b!==0?b:L(V,I)}const C=L(V,I);return C!==0?C:G(V,I)}),ae}),D=vt(()=>x(u.value));function Y(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function x(ae){return i.value.find(G=>G.id===ae)||null}function P(ae){u.value=ae.id,a("select",{...ae})}function H(){const ae=window.prompt("","");if(!ae)return;ne(),c.value="manual";const G=Y(),L=Date.now(),U=i.value.reduce((I,W)=>typeof W.order=="number"?Math.min(I,W.order):I,0),V={id:G,name:ae.trim(),content:"",createdAt:L,updatedAt:L,pinned:!1,highlighted:!1,order:U-1};i.value.push(V),y(),u.value=G,a("select",{...V})}function j(){const ae=D.value;if(!ae)return;const G=window.prompt("",ae.name||"");G&&(ae.name=G.trim(),ae.updatedAt=Date.now(),y())}function K(){const ae=D.value;if(!ae||!window.confirm(`"${ae.name}"`))return;const G=i.value.findIndex(L=>L.id===ae.id);G>=0&&i.value.splice(G,1),y(),i.value.length?(u.value=i.value[0].id,a("select",{...i.value[0]})):(u.value=null,a("select",null))}function X(){c.value="time",p.value=!p.value}function ye(){c.value="name",d.value=!d.value}function se(ae){ae.pinned=!ae.pinned,ae.updatedAt=Date.now(),y()}function N(ae){ae.highlighted=!ae.highlighted,ae.updatedAt=Date.now(),y()}function Z(ae){const G=D.value;G&&(G.content=ae??"",G.updatedAt=Date.now(),clearTimeout(te),te=setTimeout(()=>y(),400))}let te=null;function z(ae){try{const G=new Date(ae);return`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}-${G.getDate().toString().padStart(2,"0")} ${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function ne(){T.value.forEach((G,L)=>{G.order=L})}function oe(ae,G,L){try{L.dataTransfer.effectAllowed="move"}catch{}v.value=ae.id,m.value=null,ne(),c.value="manual"}function F(ae){v.value&&(m.value=ae.id)}function B(ae){if(!v.value)return;const G=v.value,L=ae==null?void 0:ae.id;if(!L||G===L)return ie();const U=[...T.value],V=U.findIndex(C=>C.id===G),I=U.findIndex(C=>C.id===L);if(V<0||I<0)return ie();const[W]=U.splice(V,1);U.splice(I,0,W),U.forEach((C,b)=>{C.order=b}),y(),ie()}function ie(){v.value=null,m.value=null}async function Ce(){try{const ae=localStorage.getItem(Hx);if(!ae){alert("");return}const G=JSON.parse(ae),L=Array.isArray(G)?G:(G==null?void 0:G.items)??[],U=Array.isArray(G)?{}:(G==null?void 0:G.settings)??{};if(!Array.isArray(L)||L.length===0){alert("");return}if(!window.confirm(` ${L.length} 

""
`))return;const I=new Set(i.value.map(b=>b.id)),W=i.value.reduce((b,O)=>Math.max(b,typeof O.order=="number"?O.order:b),-1);let C=0;L.forEach((b,O)=>{let Q=b.id;I.has(Q)&&(Q=Y()),I.add(Q),i.value.push({id:Q,name:b.name??"",content:b.content??"",createdAt:b.createdAt??b.updatedAt??Date.now(),updatedAt:b.updatedAt??b.createdAt??Date.now(),pinned:!!b.pinned,highlighted:!!b.highlighted,order:(typeof b.order=="number",W+1+O)}),C++}),!c.value&&U.sortMode&&(c.value=U.sortMode),typeof p.value>"u"&&typeof U.sortTimeDesc=="boolean"&&(p.value=U.sortTimeDesc),typeof d.value>"u"&&typeof U.sortNameAsc=="boolean"&&(d.value=U.sortNameAsc),await y(),alert(`

 ${C} 
 ${i.value.length} `)}catch(ae){console.error(":",ae),alert(": "+ae.message)}}function re(){try{const ae={items:i.value,settings:{sortMode:c.value,sortTimeDesc:p.value,sortNameAsc:d.value,selectedId:u.value},exportTime:new Date().toISOString(),version:"v1"},G=JSON.stringify(ae,null,2),L=new Blob([G],{type:"application/json"}),U=URL.createObjectURL(L),V=document.createElement("a");V.href=U;const I=new Date,W=I.getFullYear()+(I.getMonth()+1).toString().padStart(2,"0")+I.getDate().toString().padStart(2,"0"),C=I.getHours().toString().padStart(2,"0")+I.getMinutes().toString().padStart(2,"0")+I.getSeconds().toString().padStart(2,"0");V.download=`weilin_prompt_labels_${W}_${C}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(U),alert(` ${i.value.length} `)}catch(ae){console.error(":",ae),alert(": "+ae.message)}}function ge(){var ae;(ae=l.value)==null||ae.click()}async function ce(ae){var U;const G=(U=ae.target.files)==null?void 0:U[0];if(!G)return;const L=new FileReader;L.onload=async V=>{var I,W;try{const C=(I=V.target)==null?void 0:I.result;if(typeof C!="string")throw new Error("");const b=JSON.parse(C);if(!b||typeof b!="object")throw new Error("JSON");const O=Array.isArray(b)?b:(b==null?void 0:b.items)??[],Q=Array.isArray(b)?{}:(b==null?void 0:b.settings)??{};if(!Array.isArray(O))throw new Error("items");const pe=window.confirm(` ${O.length} 

""
""`)?"replace":"merge";if(pe==="replace"){i.value=O.map((A,_)=>({id:A.id??Y(),name:A.name??"",content:A.content??"",createdAt:A.createdAt??A.updatedAt??Date.now(),updatedAt:A.updatedAt??A.createdAt??Date.now(),pinned:!!A.pinned,highlighted:!!A.highlighted,order:typeof A.order=="number"?A.order:_})),Q.sortMode&&(c.value=Q.sortMode),typeof Q.sortTimeDesc=="boolean"&&(p.value=Q.sortTimeDesc),typeof Q.sortNameAsc=="boolean"&&(d.value=Q.sortNameAsc);const be=Q.selectedId&&i.value.find(A=>A.id===Q.selectedId)?Q.selectedId:((W=i.value[0])==null?void 0:W.id)??null;u.value=be}else{const be=new Set(i.value.map(R=>R.id)),A=i.value.reduce((R,q)=>Math.max(R,typeof q.order=="number"?q.order:R),-1);let _=0;O.forEach((R,q)=>{let Se=R.id;be.has(Se)&&(Se=Y()),be.add(Se),i.value.push({id:Se,name:R.name??"",content:R.content??"",createdAt:R.createdAt??R.updatedAt??Date.now(),updatedAt:R.updatedAt??R.createdAt??Date.now(),pinned:!!R.pinned,highlighted:!!R.highlighted,order:(typeof R.order=="number",A+1+q)}),_++}),alert(` ${_}  ${i.value.length} `)}await y(),pe==="replace"&&alert(` ${i.value.length} `)}catch(C){console.error(":",C),alert(": "+C.message)}finally{l.value&&(l.value.value="")}},L.onerror=()=>{alert(""),l.value&&(l.value.value="")},L.readAsText(G)}return t({updateSelectedContent:Z}),(ae,G)=>(w(),E("div",Ix,[s("div",Dx,[he(s("input",{"onUpdate:modelValue":G[0]||(G[0]=L=>r.value=L),class:"mlm-search",type:"text",placeholder:""},null,512),[[Ae,r.value]]),s("button",{class:"mlm-add",onClick:H},"+ "),s("button",{class:"mlm-migrate",onClick:Ce,title:""},"   "),s("div",{class:"mlm-io-grid"},[s("button",{class:"mlm-export",onClick:re,title:"JSON"},""),s("button",{class:"mlm-import",onClick:ge,title:"JSON"},"")]),s("input",{ref_key:"fileInput",ref:l,type:"file",accept:".json",style:{display:"none"},onChange:ce},null,544),s("div",Rx,[s("button",{class:"mlm-sort",onClick:X},"  "+g(p.value?"":""),1),s("button",{class:"mlm-sort",onClick:ye},"  "+g(d.value?"AZ":"ZA"),1),s("button",{class:"mlm-edit",disabled:!D.value,onClick:j},"",8,Ox),s("button",{class:"mlm-delete",disabled:!D.value,onClick:K},"",8,Nx)])]),Ve(Uv,{name:"mlm",tag:"div",class:"mlm-list"},{default:it(()=>[(w(!0),E(De,null,ze(T.value,(L,U)=>(w(),E("div",{key:L.id,class:Le(["mlm-item",{active:L.id===u.value,pinned:!!L.pinned,highlighted:!!L.highlighted},{dragging:v.value===L.id,"drag-over":m.value===L.id}]),onClick:V=>P(L),title:L.updatedAt?z(L.updatedAt):"",draggable:"true",onDragstart:V=>oe(L,U,V),onDragenter:Je(V=>F(L),["prevent"]),onDragover:G[1]||(G[1]=Je(()=>{},["prevent"])),onDrop:Je(V=>B(L),["prevent"]),onDragend:ie},[s("div",Fx,[L.pinned?(w(),E("span",Bx,"")):de("",!0),s("span",Ux,g(L.name),1)]),s("div",Vx,[s("button",{class:Le(["mini-btn","pin",{active:L.pinned}]),title:L.pinned?"":"",onClick:Je(V=>se(L),["stop"])},G[2]||(G[2]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)]),10,Wx),s("button",{class:Le(["mini-btn","highlight",{active:L.highlighted}]),title:L.highlighted?"":"",onClick:Je(V=>N(L),["stop"])},G[3]||(G[3]=[s("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[s("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)]),10,zx)])],42,Px))),128))]),_:1})]))}},[["__scopeId","data-v-e9866347"]]),Vn={getHistory:async()=>await Ie({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await Ie({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await Ie({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await Ie({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await Ie({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await Ie({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await Ie({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await Ie({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await Ie({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},Gx={class:"lora-manager-top-bar"},qx=["placeholder"],Kx=["title"],Yx=["title"],Jx={class:"checkbox-container"},Xx=["onClick"],Qx=["onClick"],Zx={key:0,class:"loading-indicator"},eS={key:1,class:"empty-list"},tS=["onClick","onMouseover"],nS=["src","alt","title"],oS={key:0,class:"loading-more"},aS={key:1,class:"no-more-data"},Wt="weilin_prompt_ui_",zg=_t({__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(!1),l=h(!1),r=h(!1),i=h("all"),u=h(""),p=h(null),d=h(""),c=h(null),v=h(!1),m=h(""),y=h(100),S=h(0),$=h(),T=h(!1),D=h(!1),Y=h(),x=h(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),P=h(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(x.value===null||x.value===void 0||x.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),x.value=!0),(P.value===null||P.value===void 0||P.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),P.value=!1);const H=e;ot(x,_=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",_)}),ot(P,_=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",_)});const j=h(1),K=h(50),X=vt(()=>{if(i.value==="all"){const _=z.value;if(_){const R=Object.values(_);return Math.ceil(R.length/K.value)}}else{const _=z.value[u.value];if(_){const R=Object.values(_);return Math.ceil(R.length/K.value)}return 1}}),ye=()=>{T.value=!0,D.value=!0},se=(_,R)=>{if(!x.value||x.value=="false"||(D.value=!0,m.value===_&&v.value))return;const Se=R.currentTarget.getBoundingClientRect(),we=window.innerHeight,ee=450;let me={left:Se.left+(Se.width-ee)/2,top:Se.top+Se.height+10};me.top+310>we&&(me.top=Se.top-310),me.left=Math.max(10,Math.min(me.left,window.innerWidth-ee-10)),me.top=Math.max(10,Math.min(me.top,we-310)),y.value=me.left,S.value=me.top,v.value=!0,m.value=_,qe(()=>{Y.value.refresh()})},N=()=>{D.value=!1,setTimeout(()=>{!T.value&&!D.value&&(v.value=!1,m.value="",T.value=!1)},200)},Z=()=>{v.value=!1,m.value="",T.value=!1},te=h([]),z=h([]),ne=h(""),oe=h(0),F=(_,R)=>{oe.value=_,ne.value=R},B=async()=>{try{const _=await Cn.getLoraFolderList();te.value=_.data}catch(_){console.error("Failed to get folder list:",_),J({type:"error",str:"message.loadFailed"})}},ie=()=>{if(!c.value||l.value||r.value)return;const _=c.value;_.scrollHeight-_.scrollTop-_.clientHeight<100&&Q()},Ce=h(!1);let re=null;const ge=()=>{re&&clearTimeout(re),re=setTimeout(()=>{d.value.length>0?(Ce.value=!0,L()):(Ce.value=!1,O())},300)},ce=_=>{var R;return(R=_.local_info)!=null&&R.name&&_.local_info.name!==""&&_.local_info.name.length>0?_.local_info.name:_.name},ae=h(),G=_=>{H.loraManager==="addLora"?be(_):H.loraManager==="prompt_inner"&&P.value?A(_):ae.value.open(_)},L=async()=>{try{const _=await Cn.searchLoraGetFolderList(d.value);if(z.value=_.data,z.value.length>0){j.value=1;const R=Object.values(z.value),q=(j.value-1)*50,Se=q+50,we=R.slice(q,Se);W(we)}}catch(_){console.error("Failed to get folder list:",_),J({type:"error",str:"message.loadFailed"})}},U=h([]),V=_=>{if(_==="all"){U.value=[],i.value=_,u.value="/",z.value=te.value[_];const R=z.value;if(R){r.value=!1,j.value=1;const q=Object.values(R),Se=(j.value-1)*50,we=Se+50,ee=q.slice(Se,we);W(ee)}}else{U.value=[],i.value=_,u.value="/",z.value=te.value[_];const R=z.value["/"];if(R){r.value=!1,j.value=1;const q=Object.values(R),Se=(j.value-1)*50,we=Se+50,ee=q.slice(Se,we);W(ee)}}},I=_=>{if(_!=u.value){u.value=_,U.value=[];const R=z.value[u.value];if(R){r.value=!1,j.value=1;const q=Object.values(R),Se=(j.value-1)*50,we=Se+50,ee=q.slice(Se,we);W(ee)}}},W=async _=>{const R=await Cn.getLoraRangeList(_);j.value===1?U.value=R.data.loras:U.value=U.value.concat(R.data.loras)},C=async()=>{if(p.value!=null){J({type:"warn",str:"message.isLoading"});return}try{J({type:"success",str:"message.isLoadingPleaseWait"}),await Cn.getAllLoraList(),p.value=setInterval(async()=>{await b()},1e3)}catch(_){console.error("Failed to get all lora list:",_),J({type:"error",str:"message.loadFailed"})}},b=async()=>{try{const _=await Cn.getAllLoraStatus();_.data.isLoading===!1?(clearInterval(p.value),p.value=null,J({type:"success",str:"message.loaddingSuccess"}),await O()):J({type:"warn",str:"message.loaddingPrc",name:_.data.progress})}catch(_){console.error("Failed to get lora status:",_),clearInterval(p.value),p.value=null,J({type:"error",str:"message.loadFailed"})}},O=async()=>{if(!o.value){o.value=!0,j.value=1,r.value=!1,l.value=!1;try{await B(),qe(()=>{V("all")})}catch(_){console.error("Failed to refresh lora list:",_)}finally{o.value=!1}}},Q=async()=>{if(j.value>=X.value){r.value=!0;return}l.value=!0;try{if(j.value++,Ce.value){if(z.value=res.data,z.value.length>0){const _=Object.values(z.value),R=(j.value-1)*50,q=R+50,Se=_.slice(R,q);W(Se)}}else if(i.value==="all"){z.value=te.value[i.value];const _=z.value;if(_){const R=Object.values(_),q=(j.value-1)*50,Se=q+50,we=R.slice(q,Se);W(we)}}else{const _=z.value[u.value];if(_){const R=Object.values(_),q=(j.value-1)*50,Se=q+50,we=R.slice(q,Se);W(we)}}}finally{l.value=!1}},pe=()=>{j.value=1,r.value=!1,l.value=!1};ot([i,u,d],()=>{pe()}),mt(()=>{O()});const be=_=>{var R,q,Se,we,ee,me,Re,Pe,He;oe.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:_.model_name,display_name:ce(_),lora:_.name,weight:(R=_.local_info)!=null&&R.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(q=_.local_info)!=null&&q.strWeight?_.local_info.strWeight:1,loraWorks:(Se=_.local_info)!=null&&Se.loraWorks?_.local_info.loraWorks:""}},"*"):oe.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+ne.value,lora:{name:_.model_name,display_name:ce(_),lora:_.name,weight:(we=_.local_info)!=null&&we.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(ee=_.local_info)!=null&&ee.strWeight?_.local_info.strWeight:1,loraWorks:(me=_.local_info)!=null&&me.loraWorks?_.local_info.loraWorks:""}},"*"):oe.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+ne.value,lora:{name:_.model_name,display_name:ce(_),lora:_.name,weight:(Re=_.local_info)!=null&&Re.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(Pe=_.local_info)!=null&&Pe.strWeight?_.local_info.strWeight:1,loraWorks:(He=_.local_info)!=null&&He.loraWorks?_.local_info.loraWorks:""}},"*")},A=_=>{var R,q,Se;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${_.model_name}:${(R=_.local_info)!=null&&R.strengthMin?_.local_info.strengthMin:1}:${(q=_.local_info)!=null&&q.strWeight?_.local_info.strWeight:1}>`,loraWorks:(Se=_.local_info)!=null&&Se.loraWorks?_.local_info.loraWorks:""}},"*")};return t({openSetSeed:F}),(_,R)=>(w(),E("div",{class:Le(`${Wt}lora-manager`)},[s("div",Gx,[he(s("input",{"onUpdate:modelValue":R[0]||(R[0]=q=>d.value=q),class:Le(`${Wt}search-input`),placeholder:f(n)("loraManager.searchPlaceholder"),onInput:ge},null,42,qx),[[Ae,d.value]]),s("button",{class:Le(`${Wt}refresh-btn`),onClick:O,title:f(n)("loraManager.refresh")},[(w(),E("svg",{class:Le([`${Wt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},R[3]||(R[3]=[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)]),2))],10,Kx),s("button",{style:{"margin-left":"10px"},class:Le(`${Wt}refresh-btn`),onClick:C,title:f(n)("loraManager.cacheAll")},[(w(),E("svg",{class:Le([`${Wt}refresh-icon`,{"is-rotating":o.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},R[4]||(R[4]=[s("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)]),2))],10,Yx),s("div",Jx,[s("label",{class:Le(`${Wt}checkbox-label`)},[he(s("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=q=>x.value=q),class:Le(`${Wt}checkbox`)},null,2),[[Lt,x.value]]),R[5]||(R[5]=s("span",null,"",-1))],2),e.loraManager=="prompt_inner"?(w(),E("label",{key:0,class:Le(`${Wt}checkbox-label`)},[he(s("input",{type:"checkbox","onUpdate:modelValue":R[2]||(R[2]=q=>P.value=q),class:Le(`${Wt}checkbox`)},null,2),[[Lt,P.value]]),R[6]||(R[6]=s("span",null,"Tag",-1))],2)):de("",!0)])]),Ce.value?de("",!0):(w(),E("div",{key:0,class:Le(`${Wt}category-nav`)},[(w(!0),E(De,null,ze(Object.keys(te.value),q=>(w(),E("button",{key:q,class:Le([`${Wt}category-btn`,{active:i.value===q}]),onClick:Se=>V(q)},g(q==="/"?f(n)("loraManager.root"):q=="all"?f(n)("loraManager.all"):q),11,Xx))),128))],2)),i.value!="all"&&!Ce.value?(w(),E("div",{key:1,class:Le(`${Wt}subcategory-nav`)},[(w(!0),E(De,null,ze(Object.keys(z.value),q=>(w(),E("button",{key:q,class:Le([`${Wt}category-btn`,{active:u.value===q}]),onClick:Se=>I(q)},g(q==="/"?f(n)("loraManager.root"):q=="all"?f(n)("loraManager.all"):q),11,Qx))),128))],2)):de("",!0),s("div",{class:Le(`${Wt}lora-list-container`),ref_key:"scrollContainer",ref:c,onScroll:ie},[a.value&&!l.value?(w(),E("div",Zx,g(f(n)("loraManager.loading")),1)):U.value.length===0?(w(),E("div",eS,g(f(n)("loraManager.noResults")),1)):de("",!0),s("div",{class:Le(`${Wt}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(w(!0),E(De,null,ze(U.value,q=>(w(),E("div",{key:q.file_path,class:Le(`${Wt}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:$,onClick:Se=>G(q),onMouseover:Se=>se(q.name,Se),onMouseleave:N,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[s("div",{class:Le(`${Wt}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[q.preview?(w(),E("img",{key:0,src:q.preview,alt:q.model_name,title:q.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,nS)):(w(),E("div",{key:1,class:Le(`${Wt}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},R[7]||(R[7]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[s("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)]),2))],2),s("div",{class:Le(`${Wt}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},g(ce(q)),3)],42,tS))),128))],2),s("div",null,[l.value?(w(),E("div",oS,g(f(n)("loraManager.loadingMore")),1)):de("",!0),!l.value&&r.value?(w(),E("div",aS,g(f(n)("loraManager.noMoreData")),1)):de("",!0)])],34),Ve(nr,{ref_key:"loraDetailRef",ref:ae},null,512),v.value?(w(),xt(uu,{key:2,ref_key:"loraCardItem",ref:Y,fileNmae:m.value,paddingLeft:y.value,paddingTop:S.value,onCardLeave:Z,onCardenter:ye},null,8,["fileNmae","paddingLeft","paddingTop"])):de("",!0)],2))}},[["__scopeId","data-v-e5643d0b"]]),lS={class:"tag-manager"},sS={class:"selected-categories-container"},rS={class:"selected-categories-header"},iS={class:"selected-categories-content"},uS={key:0,class:"selected-category-section"},cS={class:"section-title"},dS={class:"selected-items"},pS={class:"category-name"},fS=["onClick"],gS={key:1,class:"selected-category-section"},mS={class:"section-title"},vS={class:"selected-items"},hS={class:"category-name"},_S={class:"subcategory-name"},yS=["onClick"],bS={key:2,class:"no-selected"},wS={class:"category-tabs"},xS={class:"tabs-wrapper primary-tabs"},SS={class:"tabs-scroll"},TS=["onClick"],kS={class:"tab-text"},CS=["onClick","title"],ES={key:0,class:"tabs-wrapper group-tabs"},$S={class:"tabs-scroll"},LS=["onClick"],AS={class:"tab-text"},MS=["onClick","disabled","title"],IS=_t({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=n,l=h([]),r=h(null),i=h(null),u=h([]),p=h(!1),d=h([]),c=h(!1),v=h(0),m=vt(()=>d.value.filter(Z=>!Z.sub)),y=vt(()=>d.value.filter(Z=>Z.sub)),S=Z=>d.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&!te.sub),$=Z=>d.value.findIndex(te=>te.group.p_uuid===Z.group.p_uuid&&te.sub&&te.sub.g_uuid===Z.sub.g_uuid),T=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},D=async()=>{try{const Z=await It.getTagsGroupList();if(l.value=Z.info,i.value){const te=l.value.flatMap(z=>z.groups).find(z=>z.p_uuid===i.value.p_uuid);te?i.value=te:i.value=null}if(r.value){const te=l.value.find(z=>z.p_uuid===r.value.p_uuid);te?r.value=te:r.value=null}}catch(Z){console.error(":",Z)}},Y=Z=>{if(!Z||Z==="transparent")return"var(--primary-text)";let te,z,ne,oe=1;if(Z.startsWith("rgba")){const B=Z.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);B&&([,te,z,ne,oe]=B.map(Number))}else if(Z.startsWith("rgb")){const B=Z.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);B&&([,te,z,ne]=B.map(Number))}return oe<.5?"var(--primary-text)":(te*299+z*587+ne*114)/1e3>128?"#000000":"#ffffff"};mt(()=>{window.addEventListener("message",se)}),Co(()=>{window.removeEventListener("message",se)});const x=Z=>{r.value=Z,i.value=null,p.value=!1,u.value=[]},P=Z=>{H(r.value)||(i.value=Z,p.value=!1,u.value=[])},H=Z=>Z?d.value.some(te=>te.group.p_uuid===Z.p_uuid&&!te.sub):!1,j=Z=>{const te=d.value.findIndex(z=>z.group.p_uuid===Z.p_uuid&&!z.sub);te!==-1?d.value.splice(te,1):(d.value=d.value.filter(z=>z.group.p_uuid!==Z.p_uuid),d.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:null}))},K=(Z,te)=>{if(H(Z))return;const z=d.value.findIndex(ne=>ne.group.p_uuid===Z.p_uuid&&ne.sub&&ne.sub.g_uuid===te.g_uuid);if(z!==-1)d.value.splice(z,1);else{const ne=d.value.findIndex(oe=>oe.group.p_uuid===Z.p_uuid&&!oe.sub);ne!==-1&&d.value.splice(ne,1),d.value.push({group:{p_uuid:Z.p_uuid,name:Z.name},sub:te?{g_uuid:te.g_uuid,name:te.name}:null})}},X=Z=>{d.value.splice(Z,1)},ye=()=>{d.value=[]},se=Z=>{Z.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&D()},N=()=>{if(d.value.length===0){J({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{data:d.value,index:v.value}),c.value=!1};return t({open:(Z,te)=>{T(),v.value=Z,d.value=te,c.value=!0}}),(Z,te)=>(w(),xt(Ea,{modelValue:c.value,"onUpdate:modelValue":te[1]||(te[1]=z=>c.value=z),title:f(o)("importDialog.selectTitle")},{footer:it(()=>[s("button",{onClick:te[0]||(te[0]=z=>c.value=!1)},g(f(o)("promptBox.settings.close")),1),s("button",{onClick:N},g(f(o)("importDialog.sureSelect")),1)]),default:it(()=>[s("div",lS,[s("div",sS,[s("div",rS,[s("span",null,g(f(o)("importDialog.selectedCategories")),1),d.value.length>0?(w(),E("button",{key:0,class:"clear-all-btn",onClick:ye},g(f(o)("importDialog.clearAll")),1)):de("",!0)]),s("div",iS,[m.value.length>0?(w(),E("div",uS,[s("div",cS,g(f(o)("importDialog.primaryCategories")),1),s("div",dS,[(w(!0),E(De,null,ze(m.value,(z,ne)=>(w(),E("div",{key:"primary-"+ne,class:"selected-item"},[s("span",pS,g(z.group.name),1),s("button",{class:"remove-selected-btn",onClick:oe=>X(S(z))},"",8,fS)]))),128))])])):de("",!0),y.value.length>0?(w(),E("div",gS,[s("div",mS,g(f(o)("importDialog.subCategories")),1),s("div",vS,[(w(!0),E(De,null,ze(y.value,(z,ne)=>(w(),E("div",{key:"sub-"+ne,class:"selected-item"},[s("span",hS,g(z.group.name),1),te[2]||(te[2]=s("span",{class:"separator"},">",-1)),s("span",_S,g(z.sub.name),1),s("button",{class:"remove-selected-btn",onClick:oe=>X($(z))},"",8,yS)]))),128))])])):de("",!0),d.value.length===0?(w(),E("div",bS,g(f(o)("importDialog.noSelectedCategories")),1)):de("",!0)])]),s("div",wS,[s("div",xS,[s("div",SS,[(w(!0),E(De,null,ze(l.value,(z,ne)=>{var oe,F,B;return w(),E("div",{key:"Tabss-"+ne,class:Le(["tab-item",{active:((oe=r.value)==null?void 0:oe.p_uuid)===z.p_uuid}]),style:dt({backgroundColor:((F=r.value)==null?void 0:F.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((B=r.value)==null?void 0:B.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-text)":Y(z.color)}),onClick:ie=>x(z)},[s("span",kS,g(z.name),1),s("button",{class:"select-tab-btn",onClick:Je(ie=>j(z),["stop"]),title:f(o)("importDialog.selectCategory")},te[3]||(te[3]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,CS)],14,TS)}),128))])]),r.value?(w(),E("div",ES,[s("div",$S,[(w(!0),E(De,null,ze(r.value.groups,(z,ne)=>{var oe,F,B;return w(),E("div",{key:"TabsSw-"+ne,class:Le(["tab-item",{active:((oe=i.value)==null?void 0:oe.g_uuid)===z.g_uuid,disabled:H(r.value)}]),style:dt({backgroundColor:((F=i.value)==null?void 0:F.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((B=i.value)==null?void 0:B.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-text)":Y(z.color),opacity:H(r.value)?"0.5":"1",cursor:H(r.value)?"not-allowed":"pointer"}),onClick:ie=>H(r.value)?null:P(z)},[s("span",AS,g(z.name),1),H(r.value)?de("",!0):(w(),E("button",{key:0,class:"select-tab-btn",onClick:Je(ie=>K(r.value,z),["stop"]),disabled:H(r.value),title:f(o)("importDialog.selectSubcategory")},te[4]||(te[4]=[s("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[s("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,MS))],14,LS)}),128))])])):de("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-eb6b9225"]]),hn={getTemplateList:async()=>await Ie({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await Ie({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await Ie({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await Ie({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await Ie({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await Ie({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await Ie({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await Ie({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await Ie({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},DS={class:"random-rule-container"},RS={class:"settings-section template-section"},OS={class:"section-header"},NS={class:"template-controls"},PS={class:"template-select-group"},FS={class:"template-select-with-apply"},BS={value:""},US=["value"],VS=["disabled"],WS={class:"template-bottom-buttons"},zS=["disabled"],HS=["disabled"],jS={key:0,class:"template-name-input"},GS=["placeholder"],qS={class:"template-actions"},KS={key:0},YS={class:"settings-section"},JS={class:"section-header"},XS={class:"rules-reminder"},QS={class:"rules-list"},ZS={class:"rule-header"},eT=["onClick"],tT={class:"rule-content"},nT={class:"form-group"},oT={class:"range-inputs"},aT=["onUpdate:modelValue"],lT=["onUpdate:modelValue"],sT={class:"form-group"},rT=["onUpdate:modelValue"],iT={value:"category"},uT={value:"specific"},cT={key:0,class:"form-group"},dT={class:"selected-categories-container"},pT={class:"selected-categories-header"},fT={class:"selected-categories-content"},gT={key:0,class:"selected-category-section"},mT={class:"section-title"},vT={class:"selected-items"},hT={class:"category-name"},_T={key:1,class:"selected-category-section"},yT={class:"section-title"},bT={class:"selected-items"},wT={class:"category-name"},xT={class:"subcategory-name"},ST={key:2,class:"no-selected"},TT=["onClick"],kT={key:1,class:"form-group"},CT={class:"tags-input-container"},ET=["onClick"],$T=["onUpdate:modelValue","onKeydown","placeholder"],LT=["onClick"],AT={class:"actions-section"},MT=["disabled"],Hg="weilin_tools_",IT=_t({__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(null),r=h(!1),i=h(""),u=h(""),p={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},c=h({});async function v(){try{i.value=="prompt_global"?await hn.getRandomTemplateApple().then(async V=>{V.data==""?c.value=d:await hn.getTemplateData(V.data).then(async I=>{z.value=V.data,c.value=I.data,r.value=!0}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(V=>{console.error(V),J({type:"warn",str:"message.networkError"})}):u.value==""?c.value=d:await hn.getTemplateData(u.value).then(async V=>{z.value=u.value,c.value=V.data,r.value=!0}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(V){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",V)}}function m(){try{const V=JSON.parse(JSON.stringify(c.value));V.rules&&V.rules.forEach(I=>{delete I.tagInput}),hn.updateTemplateData(z.value,V).then(async I=>{await hn.getTemplateData(I.path_name).then(async W=>{c.value=W.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(W=>{console.error(":",W),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(V){console.error("Error saving random tag settings:",V),J({type:"warn",str:"randomUtils.errorSavingSettings"})}}function y(){c.value.rules.push({range:{min:c.value.rules.length>0?c.value.rules[c.value.rules.length-1].range.max+1:1,max:c.value.rules.length>0?c.value.rules[c.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function S(V){c.value.rules.splice(V,1)}function $(V){V.tagInput&&V.tagInput.trim()&&(V.specificTags.push(V.tagInput.trim()),V.tagInput="")}function T(V,I){V.specificTags.splice(I,1)}function D(){}const x=h((()=>{try{const V=localStorage.getItem(`${Hg}randomRuleSettingState`);if(V){const I=JSON.parse(V),W={...p};return I.randomRuleSetting&&(W.randomRuleSetting={...p.randomRuleSetting,...I.randomRuleSetting}),W}}catch(V){console.error("Error loading window states:",V)}return{...p}})());ot(x,V=>{try{localStorage.setItem(`${Hg}randomRuleSettingState`,JSON.stringify(V))}catch(I){console.error("Error saving window states:",I)}},{deep:!0});const P=V=>{a.value=!1},H=(V,I)=>{x.value[V]&&(x.value[V].position={...I})},j=(V,I)=>{x.value[V]&&(x.value[V].size={...I})},K=V=>{a.value=!0,i.value=V,Ue.registerWindow("randomRuleSetting"),qe(()=>{Ue.setActiveWindow("randomRuleSetting"),V=="prompt_global"?B(1):L()})},X=(V,I)=>{l.value.open(V,I)},ye=()=>void 0,se=V=>!V||!Array.isArray(V)||V.length<=0?[]:V.filter(I=>!I.sub),N=V=>!V||!Array.isArray(V)||V.length<=0?[]:V.filter(I=>I.sub),Z=V=>{V&&V.data&&Array.isArray(V.data)?c.value.rules[V.index].tagGroupList=V.data:c.value.rules[V.index].tagGroupList=[]},te=h([]),z=h(""),ne=h(""),oe=h(!1),F=h(!1);async function B(V=0){try{await hn.getTemplateList().then(I=>{te.value=I.data,V==1&&v()}).catch(I=>{console.error(I),J({type:"warn",str:"message.networkError"})})}catch(I){J({type:"warn",str:"message.networkError"}),console.error("RandomTemplate:",I)}}function ie(){oe.value=!0,ne.value=""}function Ce(){oe.value=!1,ne.value=""}function re(){if(!z.value){J.warm(o("randomUtils.pleaseChooseTemplate"));return}i.value=="prompt_global"?hn.updateRandomTemplateApple(z.value).then(V=>{J({type:"success",str:"randomUtils.templateApplied"})}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:z.value},"*"),J({type:"success",str:"randomUtils.templateApplied"}))}function ge(){z.value&&hn.deleteTemplateData(z.value).then(()=>{J({type:"success",str:"randomUtils.templateDeleted"}),B(),z.value=""}).catch(V=>{console.error(":",V),J({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function ce(){if(!z.value)return;const V=te.value.find(I=>I.path_name===z.value);V&&(oe.value=!0,ne.value=V.file_name,F.value=!0)}function ae(){if(!ne.value.trim()){J({type:"warn",str:"randomUtils.templateNameRequired"});return}if(c.value.file_name=ne.value.trim(),F.value){const V=te.value.find(I=>I.path_name===z.value);if(V){V.file_name=ne.value.trim();const I=JSON.parse(JSON.stringify(c.value));I.rules&&I.rules.forEach(W=>{delete W.tagInput}),hn.updateTemplateData(V.path_name,I).then(async W=>{J({type:"success",str:"randomUtils.templateSaved"}),await B().then(async()=>{await hn.getTemplateData(W.path_name).then(async C=>{z.value=W.path_name,c.value=C.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(C=>{console.error(":",C),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(W=>{console.error(":",W),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{c.value=d,c.value.file_name=ne.value.trim();const V=JSON.parse(JSON.stringify(c.value));V.rules&&V.rules.forEach(I=>{delete I.tagInput}),hn.saveTemplateData(V).then(async I=>{await B().then(async()=>{await hn.getTemplateData(I.path_name).then(async W=>{z.value=I.path_name,c.value=W.data,J({type:"success",str:"randomUtils.templateSaved"})}).catch(W=>{console.error(":",W),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorSavingTemplate"})})}oe.value=!1,ne.value="",F.value=!1}const G=async V=>{if(V.target.value!="")try{await hn.getTemplateData(V.target.value).then(async I=>{z.value=I.path_name,c.value=I.data,r.value=!0}).catch(I=>{console.error(":",I),J({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(I){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",I)}},L=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},U=V=>{V.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(u.value=V.data.data,B(1))};return mt(()=>{window.addEventListener("message",U)}),Mn(()=>{Ue.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",U)}),t({open:K,getRandomTags:ye}),(V,I)=>(w(),E(De,null,[a.value?(w(),xt(Tn,{key:0,title:f(o)("randomUtils.title"),position:x.value.randomRuleSetting.position,size:x.value.randomRuleSetting.size,"z-index":f(Ue).getZIndex("randomRuleSetting"),"onUpdate:position":I[2]||(I[2]=W=>H("randomRuleSetting",W)),"onUpdate:size":I[3]||(I[3]=W=>j("randomRuleSetting",W)),onActive:I[4]||(I[4]=W=>f(Ue).setActiveWindow("randomRuleSetting")),onClose:I[5]||(I[5]=W=>P())},{default:it(()=>[s("div",DS,[s("div",RS,[s("div",OS,[s("h3",null,g(f(o)("randomUtils.ruleTemplates")),1)]),s("div",NS,[s("div",PS,[s("div",FS,[he(s("select",{"onUpdate:modelValue":I[0]||(I[0]=W=>z.value=W),onChange:G,class:"form-select template-select"},[s("option",BS,g(f(o)("randomUtils.selectTemplate")),1),(w(!0),E(De,null,ze(te.value,(W,C)=>(w(),E("option",{key:C,value:W.path_name},g(W.file_name),9,US))),128))],544),[[Gt,z.value]]),s("button",{class:"apply-template-btn",onClick:re,disabled:!z.value},g(f(o)("randomUtils.applyTemplate")),9,VS)]),s("div",WS,[s("button",{class:"new-template-btn",onClick:ie},g(f(o)("randomUtils.newTemplate")),1),s("button",{class:"edit-template-btn",onClick:ce,disabled:!z.value},g(f(o)("randomUtils.editTemplate")),9,zS),s("button",{class:"delete-template-btn",onClick:ge,disabled:!z.value},g(f(o)("randomUtils.deleteTemplate")),9,HS)])]),oe.value?(w(),E("div",jS,[he(s("input",{type:"text","onUpdate:modelValue":I[1]||(I[1]=W=>ne.value=W),class:"form-input",placeholder:f(o)("randomUtils.templateNamePlaceholder")},null,8,GS),[[Ae,ne.value]]),s("div",qS,[s("button",{class:"save-template-btn",onClick:ae},g(f(o)("randomUtils.save")),1),s("button",{class:"cancel-template-btn",onClick:Ce},g(f(o)("randomUtils.cancel")),1)])])):de("",!0)])]),z.value&&r.value?(w(),E("div",KS,[s("div",YS,[s("div",JS,[s("h3",null,g(f(o)("randomUtils.rules")),1),s("button",{class:"add-rule-btn",onClick:y},[I[6]||(I[6]=s("span",null,"+",-1)),je(" "+g(f(o)("randomUtils.addRule")),1)])]),s("div",XS,[s("p",null,g(f(o)("randomUtils.rulesReminder")),1)]),s("div",QS,[(w(!0),E(De,null,ze(c.value.rules,(W,C)=>(w(),E("div",{key:C,class:"rule-item"},[s("div",ZS,[s("h4",null,g(f(o)("randomUtils.rule"))+" #"+g(C+1),1),s("button",{class:"delete-rule-btn",onClick:b=>S(C)},"",8,eT)]),s("div",tT,[s("div",nT,[s("label",null,g(f(o)("randomUtils.range")),1),s("div",oT,[he(s("input",{type:"number","onUpdate:modelValue":b=>W.range.min=b,min:"1",class:"form-input range-input"},null,8,aT),[[Ae,W.range.min,void 0,{number:!0}]]),I[7]||(I[7]=s("span",null,"-",-1)),he(s("input",{type:"number","onUpdate:modelValue":b=>W.range.max=b,min:"1",class:"form-input range-input"},null,8,lT),[[Ae,W.range.max,void 0,{number:!0}]])])]),s("div",sT,[s("label",null,g(f(o)("randomUtils.tagType")),1),he(s("select",{"onUpdate:modelValue":b=>W.type=b,class:"form-select"},[s("option",iT,g(f(o)("randomUtils.category")),1),s("option",uT,g(f(o)("randomUtils.specificTags")),1)],8,rT),[[Gt,W.type]])]),W.type==="category"?(w(),E("div",cT,[s("div",dT,[s("div",pT,[s("span",null,g(f(o)("importDialog.selectedCategories")),1)]),s("div",fT,[se(W.tagGroupList).length>0?(w(),E("div",gT,[s("div",mT,g(f(o)("importDialog.primaryCategories")),1),s("div",vT,[(w(!0),E(De,null,ze(se(W.tagGroupList),(b,O)=>(w(),E("div",{key:"primary-"+O,class:"selected-item"},[s("span",hT,g(b.group.name),1)]))),128))])])):de("",!0),N(W.tagGroupList).length>0?(w(),E("div",_T,[s("div",yT,g(f(o)("importDialog.subCategories")),1),s("div",bT,[(w(!0),E(De,null,ze(N(W.tagGroupList),(b,O)=>(w(),E("div",{key:"sub-"+O,class:"selected-item"},[s("span",wT,g(b.group.name),1),I[8]||(I[8]=s("span",{class:"separator"},">",-1)),s("span",xT,g(b.sub.name),1)]))),128))])])):de("",!0),!W.tagGroupList||W.tagGroupList.length===0?(w(),E("div",ST,g(f(o)("importDialog.noSelectedCategories")),1)):de("",!0)])]),s("button",{class:"add-tag-btn",onClick:b=>X(C,W.tagGroupList)},g(f(o)("randomUtils.selectTagGroup")),9,TT)])):de("",!0),W.type==="specific"?(w(),E("div",kT,[s("label",null,g(f(o)("randomUtils.specificTags")),1),s("div",CT,[(w(!0),E(De,null,ze(W.specificTags,(b,O)=>(w(),E("div",{key:O,class:"tag-chip"},[je(g(b)+" ",1),s("button",{class:"remove-tag-btn",onClick:Q=>T(W,O)},"",8,ET)]))),128)),he(s("input",{type:"text","onUpdate:modelValue":b=>W.tagInput=b,onKeydown:an(Je(b=>$(W),["prevent"]),["enter"]),class:"tag-input",placeholder:f(o)("randomUtils.addTagPlaceholder")},null,40,$T),[[Ae,W.tagInput]])]),s("button",{class:"add-tag-btn",onClick:b=>$(W)},g(f(o)("randomUtils.addTag")),9,LT)])):de("",!0)])]))),128))])])])):de("",!0)]),s("div",AT,[s("button",{class:"save-btn",onClick:m,disabled:!z.value},g(f(o)("common.save")),9,MT)])]),_:1},8,["title","position","size","z-index"])):de("",!0),Ve(IS,{ref_key:"tagGroupSelectItem",ref:l,onSureSelect:Z},null,512)],64))}},[["__scopeId","data-v-71de91e1"]]);function Da(e){let t=e.length;for(;--t>=0;)e[t]=0}const DT=3,RT=258,jg=29,OT=256+1+jg,Gg=30,NT=512,PT=new Array((OT+2)*2);Da(PT);const FT=new Array(Gg*2);Da(FT);const BT=new Array(NT);Da(BT);const UT=new Array(RT-DT+1);Da(UT);const VT=new Array(jg);Da(VT);const WT=new Array(Gg);Da(WT);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const cu=new Uint8Array(256);for(let e=0;e<256;e++)cu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;cu[254]=cu[254]=1;const zT={class:"tag-manager"},HT={class:"form-group"},jT={class:"select-group-item"},GT=["value","placeholder"],qT={class:"form-group"},KT=["placeholder"],YT={class:"form-group"},JT=["placeholder"],XT={class:"form-group"},QT={class:"color-picker"},ZT={class:"color-controls"},ek={class:"alpha-control"},tk={class:"alpha-value"},nk=_t({__name:"favour",emits:["sureSelect"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(null),l=h(!1),r=h({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),i=h({group:{id_index:0,name:"",color:"",create_time:0,p_uuid:""},sub:{id_index:0,name:"",color:"",create_time:0,g_uuid:"",p_uuid:""}}),u=h({hex:"#ff7b02",alpha:40}),p=vt(()=>c(u.value.hex,u.value.alpha)),d=()=>{const $=c(u.value.hex,u.value.alpha);r.value.color=$},c=($,T)=>{const D=parseInt($.slice(1,3),16),Y=parseInt($.slice(3,5),16),x=parseInt($.slice(5,7),16);return`rgba(${D}, ${Y}, ${x}, ${T/100})`},v=()=>{a.value.open()},m=()=>{if(!r.value.text||!r.value.desc||!i.value.sub.id_index||!i.value.sub.g_uuid){J({type:"warn",str:"tagManager.textRequired"});return}It.addNewTags({id_index:i.value.sub.id_index,g_uuid:i.value.sub.g_uuid,text:r.value.text,desc:r.value.desc,color:r.value.color?r.value.color:"rgba(255, 123, 2, .4)"}).then($=>{window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"}),y()}).catch($=>{J({type:"warn",str:"message.networkError"})})},y=()=>{r.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},l.value=!1},S=$=>{i.value=$,r.value.id_index=$.sub.id_index};return t({open:($,T)=>{r.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},r.value.text=$,r.value.desc=T,l.value=!0}}),($,T)=>(w(),E(De,null,[Ve(Ea,{modelValue:l.value,"onUpdate:modelValue":T[5]||(T[5]=D=>l.value=D),title:f(o)("tagManager.addTag")},{footer:it(()=>[s("button",{onClick:T[4]||(T[4]=D=>l.value=!1)},g(f(o)("common.cancel")),1),s("button",{onClick:m},g(f(o)("common.confirm")),1)]),default:it(()=>[s("div",zT,[s("div",HT,[s("label",null,g(f(o)("importDialog.selectGroup")),1),s("div",jT,[s("input",{type:"text",value:r.value.id_index!=""?i.value.group.name+" -> "+i.value.sub.name:"",readonly:"",placeholder:f(o)("importDialog.selectGroup")},null,8,GT),s("button",{class:"add-tag-btn",style:{"margin-left":"10px","min-width":"fit-content"},onClick:v},g(f(o)("importDialog.selectGroup")),1)])]),s("div",qT,[s("label",null,g(f(o)("tagManager.text")),1),he(s("input",{type:"text","onUpdate:modelValue":T[0]||(T[0]=D=>r.value.desc=D),placeholder:f(o)("tagManager.textPlaceholder")},null,8,KT),[[Ae,r.value.desc]])]),s("div",YT,[s("label",null,g(f(o)("tagManager.description")),1),he(s("textarea",{"onUpdate:modelValue":T[1]||(T[1]=D=>r.value.text=D),placeholder:f(o)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,JT),[[Ae,r.value.text]])]),s("div",XT,[s("label",null,g(f(o)("tagManager.backgroundColor")),1),s("div",QT,[s("div",{class:"color-preview",style:dt({backgroundColor:p.value})},null,4),s("div",ZT,[he(s("input",{type:"color","onUpdate:modelValue":T[2]||(T[2]=D=>u.value.hex=D),onInput:d,class:"color-input"},null,544),[[Ae,u.value.hex]]),s("div",ek,[he(s("input",{type:"range","onUpdate:modelValue":T[3]||(T[3]=D=>u.value.alpha=D),min:"0",max:"100",onInput:d,class:"alpha-slider"},null,544),[[Ae,u.value.alpha,void 0,{number:!0}]]),s("span",tk,g(u.value.alpha)+"%",1)])])])])])]),_:1},8,["modelValue","title"]),Ve(Tf,{ref_key:"tagGroupSelectItem",ref:a,onSureSelect:S},null,512)],64))}},[["__scopeId","data-v-08abaad1"]]),ok={class:"weilin_prompt_ui_prompt-box"},ak={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},lk={class:"center-container"},sk={class:"action-item"},rk=["title"],ik={class:"action-text"},uk={class:"action-item"},ck=["title"],dk={class:"action-text"},pk={class:"action-item"},fk={class:"action-text"},gk={class:"action-item"},mk=["title"],vk={class:"action-text"},hk={class:"action-item"},_k=["title"],yk={class:"action-text"},bk={class:"action-item"},wk=["title"],xk={class:"action-text"},Sk={key:0,class:"action-item"},Tk=["title"],kk={class:"action-text"},Ck={class:"action-item"},Ek=["title"],$k={class:"action-text"},Lk={class:"action-item"},Ak=["title"],Mk={class:"action-text"},Ik={class:"action-item"},Dk=["title"],Rk={class:"action-text"},Ok={class:"action-item"},Nk=["title"],Pk={class:"action-text"},Fk={class:"action-item"},Bk=["title"],Uk={class:"action-text"},Vk={class:"action-item"},Wk=["title"],zk={class:"action-text"},Hk={class:"action-item"},jk=["title"],Gk={class:"action-text"},qk={class:"action-item weilin-comfyui-toolbar-right"},Kk=["disabled"],Yk=["placeholder"],Jk={class:"token-counter"},Xk=["onClick"],Qk={class:"tag"},Zk={class:"desc"},eC={class:"prompt-input-translate-area"},tC={style:{display:"flex","align-items":"center"}},nC=["placeholder"],oC=["title"],aC={style:{"margin-left":"5px"},class:"action-text"},lC=["title"],sC={class:"action-text"},rC=["title"],iC={class:"action-text"},uC=["title"],cC={class:"action-text"},dC=["title"],pC={class:"action-text"},fC=["title"],gC={class:"action-text"},mC={key:0,class:"tokens-container"},vC=["draggable","onDragstart","onDragover","onDrop","onDblclick"],hC={key:0,class:"newline-token"},_C=["title"],yC=["onMouseenter","onMouseleave"],bC=["title"],wC=["title","onMouseenter","onMouseleave"],xC={style:{"margin-left":"5px"}},SC=["onMouseenter","onMouseleave"],TC=["onClick"],kC=["value","onInput","onBlur","onKeyup"],CC=["onClick","title"],EC={key:4,class:"translation-result"},$C=["onClick","title"],LC={class:"translated-text"},AC={key:0,class:"line-break"},MC={class:"tag-tips-content"},IC=["innerHTML"],DC={key:0,class:"weight-control"},RC={class:"weight-label"},OC={key:1,class:"lora-weight-controls"},NC={class:"weight-control"},PC={class:"weight-label"},FC={class:"weight-control"},BC={class:"weight-label"},UC=["title"],VC=["title"],WC={key:2,class:"bracket-btn-group"},zC={class:"bracket-btn-container"},HC={class:"vertical-btn-group"},jC=["title"],GC=["title"],qC={class:"bracket-btn-container"},KC={class:"vertical-btn-group"},YC=["title"],JC=["title"],XC={class:"bracket-btn-container"},QC={class:"vertical-btn-group"},ZC=["title"],eE=["title"],tE=["title"],nE={class:"tag-manager-section"},oE={class:"weilin-comfyui-selection-actions-content"},aE={class:"weilin-comfyui-selection-actions-count"},lE={class:"header-left"},sE={class:"section-title"},rE={class:"header-right"},iE={class:"lora-manager-container"},uE={class:"tag-manager-section"},cE={class:"header-left"},dE={class:"section-title"},pE={class:"header-right"},fE={class:"tag-manager-container"},gE="weilin_prompt_ui_",Dl="weilin-selection-box",mE=16,qg="weilin_prompt_ui_sidebar_visible",vE="weilin_prompt_ui_main_labels_v1",hE=50,_E=_t({__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=h(null),{t:o}=ht(),a=h(),l=h(),r=h({top:0,left:0}),i=h(0),u=e,p=h(null),d=h(""),c=h([]),v={},m=h(null),y=h(!1),S=h({top:"0px",left:"0px"}),$=h(!1),T=h(null),D=h(null),Y=h(null),x=h([]),P=h(!1),H=h(!1),j=h([]),K=h(0),X=h(null),ye=h(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),se=h(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),N=h(""),Z=h(!1),te=h({x:0,y:0}),z=h({x:0,y:0}),ne=h([]),oe=h(null),F=h(!1),B=h(!1),ie=h(!1),Ce=h({top:"0px",left:"0px"}),re=h(!1),ge=h(!1),ce=h(0),ae=h(!1),G=h({top:"0px",left:"0px"}),L=h(localStorage.getItem("weilin_prompt_ui_show_delete_button")!=="false"),U=()=>{localStorage.setItem("weilin_prompt_ui_show_delete_button",String(L.value))},V=()=>{L.value=!L.value,U()},I=M=>{M.key==="weilin_prompt_ui_show_delete_button"&&(L.value=M.newValue!=="false")};mt(()=>{window.addEventListener("storage",I),window.addEventListener("storage",Se)}),Mn(()=>{window.removeEventListener("storage",I),window.removeEventListener("storage",Se)});const W=h(null),C=h(null),b=h(""),O=h(0),Q=h(!0),pe=h(localStorage.getItem("weilin_function_toggles_clearAll")!=="false"),be=h(localStorage.getItem("weilin_function_toggles_deleteButton")!=="false"),A=h(localStorage.getItem("weilin_function_toggles_randomTag")!=="false"),_=h(localStorage.getItem("weilin_function_toggles_randomTagSettings")!=="false"),R=h(localStorage.getItem("weilin_function_toggles_translateTag")!=="false"),q=h(localStorage.getItem("weilin_function_toggles_clearDisabled")!=="false");ot([pe,be,A,_,R,q],([M,k,le,ve,Oe,_e])=>{localStorage.setItem("weilin_function_toggles_clearAll",String(M)),localStorage.setItem("weilin_function_toggles_deleteButton",String(k)),localStorage.setItem("weilin_function_toggles_randomTag",String(le)),localStorage.setItem("weilin_function_toggles_randomTagSettings",String(ve)),localStorage.setItem("weilin_function_toggles_translateTag",String(Oe)),localStorage.setItem("weilin_function_toggles_clearDisabled",String(_e))});const Se=M=>{M.key==="weilin_function_toggles_clearAll"?pe.value=M.newValue!=="false":M.key==="weilin_function_toggles_deleteButton"?be.value=M.newValue!=="false":M.key==="weilin_function_toggles_randomTag"?A.value=M.newValue!=="false":M.key==="weilin_function_toggles_randomTagSettings"?_.value=M.newValue!=="false":M.key==="weilin_function_toggles_translateTag"?R.value=M.newValue!=="false":M.key==="weilin_function_toggles_clearDisabled"&&(q.value=M.newValue!=="false")},we=()=>{Q.value=!Q.value};ot(Q,M=>{localStorage.setItem(qg,String(M))}),mt(()=>{const M=localStorage.getItem(qg);Q.value=M!=="false"});const ee=()=>(O.value++,`token_${O.value}_${Date.now()}`),me=()=>{P.value=!P.value},Re=()=>{P.value=!1},Pe=h(null),He=h(null),Xe=h(!1),at=`weilin_prompt_ui_last_main_label_id_${u.promptManager||"default"}`,bt=vt(()=>{const M=Q.value?280:0;return`calc(100% - ${(P.value?300:0)+M}px)`});let Dt=!1;const Wn=M=>{if(!M){He.value=null,d.value="",qe(()=>{l.value&&(l.value.value="",_o({target:l.value}))}),Xe.value=!1;return}He.value=M.id,Dt=!0,d.value=M.content||"",qe(()=>{l.value&&(l.value.value=d.value,_o({target:l.value}))}),Xe.value=!1};ot(d,M=>{if(Dt){Dt=!1;return}Xe.value=!0}),ot(c,()=>{Dt||(Xe.value=!0)},{deep:!0}),ot(He,M=>{try{localStorage.setItem(at,M||"")}catch{}});function Vo(){try{const M=localStorage.getItem(at);if(!M)return;const k=localStorage.getItem(vE),le=k?JSON.parse(k):[],ve=Array.isArray(le)?le.find(Oe=>Oe&&Oe.id===M):null;if(!ve)return;He.value=M,Dt=!0,d.value=ve.content||"",qe(()=>{l.value&&(l.value.value=d.value,_o({target:l.value})),Dt=!1}),Xe.value=!1}catch{}}mt(()=>{Vo();const M=()=>{try{localStorage.setItem(at,He.value||"")}catch{}};window.addEventListener("beforeunload",M),Co(()=>window.removeEventListener("beforeunload",M))});function zt(){var M;He.value&&(M=Pe.value)!=null&&M.updateSelectedContent&&(Pe.value.updateSelectedContent(d.value),Xe.value=!1,Pa())}const Qt=h(!1);let Rn=null;function Pa(){Qt.value=!0,Rn&&clearTimeout(Rn),Rn=setTimeout(()=>{Qt.value=!1},1600)}Co(()=>{Rn&&clearTimeout(Rn)});const Fe=()=>{T.value.open()},ke=h(1),Ee=()=>{if(m.value===null)return;let k=c.value[m.value].text;if(!gu(k)){J({type:"warn",str:"message.noFinishKuo"});return}const le=$e=>$e.startsWith("(")&&$e.endsWith(")")&&!$e.slice(1,-1).includes("(")&&!$e.slice(1,-1).includes(")")&&!$e.slice(1,-1).includes("[")&&!$e.slice(1,-1).includes("]")&&!$e.slice(1,-1).includes("{")&&!$e.slice(1,-1).includes("}")&&!$e.slice(1,-1).includes("<")&&!$e.slice(1,-1).includes(">");let ve=k;const Oe=/:(-?\d+(\.\d+)?)$/.test(k),_e=k.match(/^\((.*?):(-?\d+(\.\d+)?)\)$/);if(Oe||_e)ke.value===1?k.startsWith("(")&&k.endsWith(")")?ve=k.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):ve=k.replace(/:(\d+(\.\d+)?)$/,""):_e?ve=`(${_e[1]}:${ke.value})`:ve=k.replace(/:(-?\d+(\.\d+)?)$/,`:${ke.value}`);else{const $e=k.match(/^([^_]+)_(\([^)]+\))$/);if($e&&!k.includes("\\(")&&!k.includes("\\)")){const[,Me,Qe]=$e;ke.value===1?ve=k:ve=`(${Me} ${Qe}:${ke.value})`}else k.includes("\\(")&&k.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test(k.replace(/\\[\(\)\[\]\{\}<>]/g,""))?ke.value===1?ve=k:k.startsWith("(")&&k.endsWith(")")?ve=k.replace(/\)$/,`:${ke.value})`):ve=`(${k}:${ke.value})`:/[\(\[\{\<\)\]\}\>]/.test(k)?ke.value===1&&le(k)?ve=k.slice(1,-1):ke.value===1?ve=k:k.startsWith("(")&&k.endsWith(")")?ve=k.replace(/\)$/,`:${ke.value})`):ve=`(${k}:${ke.value})`:ke.value===1?ve=k:ve=`(${k}:${ke.value})`}c.value[m.value].text=ve,En()},wt=h(.5),rn=h(.5);ot(m,M=>{var k;if(M!==null&&((k=c.value[M])!=null&&k.isLoraTag)){const ve=c.value[M].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);ve&&(wt.value=parseFloat(ve[2]),rn.value=parseFloat(ve[3]))}});const sr=()=>{var M;if(m.value!==null&&((M=c.value[m.value])!=null&&M.isLoraTag)){const k=c.value[m.value],le=k.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(le){const Oe=`<wlr:${le[1]}:${wt.value}:${rn.value}>`;k.text=Oe,En()}}},Rl=M=>{if(m.value===null)return;let le=c.value[m.value].text;const ve={"(":")","[":"]","{":"}","<":">"}[M];le=`${M}${le}${ve}`,c.value[m.value].text=le,On()},Ol=M=>{if(m.value===null)return;let le=c.value[m.value].text;const ve={"(":")","[":"]","{":"}","<":">"};le.startsWith(M)&&le.endsWith(ve[M])&&(le=le.slice(1,-1),c.value[m.value].text=le,On())},gu=M=>{const k=[],le={"(":")","[":"]","{":"}","<":">"};for(let ve of M)if(le[ve])k.push(ve);else if(Object.values(le).includes(ve)&&(k.length===0||le[k.pop()]!==ve))return!1;return k.length===0};wc(()=>{for(const M in v)delete v[M]}),h(!0),h(!1);const mu=M=>/[\p{L}]/u.test(M),Nl=M=>{const k=M.match(/([^:]+):[\d.]+/);return k?k[1]:M};let Fa=null;const Ba=async()=>{Fa&&clearTimeout(Fa),Fa=setTimeout(async()=>{if(!l.value)return;const M=l.value,k=M.selectionStart;await qe();const le=M.value.substring(0,k),ve=document.createElement("div");ve.style.position="absolute",ve.style.top="0",ve.style.left="0",ve.style.visibility="hidden",ve.style.whiteSpace="pre-wrap",ve.style.wordWrap="break-word",ve.style.width=window.getComputedStyle(M).width,ve.style.font=window.getComputedStyle(M).font,ve.style.padding=window.getComputedStyle(M).padding;const Oe=document.createTextNode(le),_e=document.createElement("span");_e.textContent="|",ve.appendChild(Oe),ve.appendChild(_e),M.parentNode.appendChild(ve);const $e=_e.getBoundingClientRect(),Me=M.parentNode.getBoundingClientRect();let Qe=$e.top-Me.top+$e.height,st=$e.left-Me.left;if(await qe(),a.value){const Mt=a.value.offsetWidth,jn=M.offsetWidth,Zt=M.getBoundingClientRect().left-Me.left;st+Mt>Zt+jn&&(st=Zt+jn-Mt),st<Zt&&(st=Zt),st=Math.max(0,Math.min(st,Me.width-Mt))}M.parentNode.removeChild(ve),r.value={top:Qe,left:st},Fa=null},50)},rr=h(null),_o=M=>{if(!(M!=null&&M.target)||!l.value)return;const k=M.target.value,le=M.target.selectionStart,ve=M.target.selectionEnd,Oe={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern://g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern://g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"["},{pattern://g,replace:"]"},{pattern://g,replace:"("},{pattern://g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"<"},{pattern://g,replace:">"}]}};let _e=k.substring(0,le),$e=k;Object.values(Oe).forEach(Ze=>{Ze.enabled&&(Ze.pattern?(_e=_e.replace(Ze.pattern,Ze.replace),$e=$e.replace(Ze.pattern,Ze.replace)):Ze.patterns&&Ze.patterns.forEach(({pattern:Et,replace:Tt})=>{_e=_e.replace(Et,Tt),$e=$e.replace(Et,Tt)}))}),d.value=$e;const Me=_e.length,Qe=ve-le,st=Me+Qe;qe(()=>{l.value&&(l.value.setSelectionRange(Me,st),l.value.focus())});const Mt=$e.substring(0,Me),jn=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",Zt=Me>0?Mt[Me-1]:"";if((Zt===","||Zt===" ")&&jn){H.value=!1,W.value&&clearTimeout(W.value),W.value=setTimeout(()=>{var zl;const Ze=((zl=l.value)==null?void 0:zl.selectionStart)||0,Tt=(d.value||"").substring(0,Ze);let un=Ze;for(;un>0&&!/[,\s]/.test(Tt[un-1]);)un--;const Wl=Tt.substring(un,Ze).trim();Wl&&cm(Wl),ra()},300),i.value=Ua(d.value);return}let ft=Me;for(;ft>0&&!/[,\s]/.test(Mt[ft-1]);)ft--;const tt=Mt.substring(ft,Me).trim();W.value&&clearTimeout(W.value),W.value=setTimeout(()=>{tt&&cm(tt),ra()},300),i.value=Ua(d.value)},Ua=M=>M?M.trim().split(/\s+/).length:0,Yt=async()=>{let M=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",k=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",le=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",ve=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),M=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),k=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),le=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),ve=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),M&&(d.value=d.value.replace(//g,",")),k&&(d.value=d.value.replace(//g,".")),le&&(d.value=d.value.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),ve&&(d.value=d.value.replace(//g,"<").replace(//g,">"));const Oe=d.value;let _e=[];const $e=c.value.map((lt,ft)=>({token:lt,originalIndex:ft,currentIndex:ft})).filter(({token:lt})=>lt.isHidden);_e=((lt,ft=0)=>{let tt=[],Ze=ft,Et="",Tt=[];for(;Ze<lt.length;){const un=lt[Ze];if(un===`
`){Et.trim()&&(tt.push(Et.trim()),Et=""),tt.push(`
`),Ze++;continue}Tt.length===0&&un===","?(Et.trim()&&tt.push(Et.trim()),Et=""):Et+=un,Ze++}return Et.trim()&&(Tt.length===0?tt.push(...Et.split(",").filter(Boolean).map(un=>un.trim())):tt.push(Et.trim())),tt})(Oe);const Qe=new Map;c.value.forEach((lt,ft)=>{lt.id||(lt.id=ee()),Qe.set(ft,lt)});const st=[];_e.forEach(lt=>{if(lt===`
`)st.push({id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(lt.trim()){const ft=lt.trim(),tt=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(ft);let Ze=!1;for(const[Et,Tt]of Qe)if(Tt.text===ft&&!Tt.isHidden&&!st.includes(Tt)){tt&&!Tt.isLoraTag&&(Tt.isLoraTag=!0),st.push(Tt),Qe.delete(Et),Ze=!0;break}if(!Ze){for(const[Et,Tt]of Qe)if(Tt.text===ft&&!st.includes(Tt)){tt&&!Tt.isLoraTag&&(Tt.isLoraTag=!0),st.push(Tt),Qe.delete(Et),Ze=!0;break}}Ze||st.push({id:ee(),text:ft,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:tt})}});const Mt=new Set;$e.forEach(({token:lt,originalIndex:ft})=>{if(Mt.has(lt.id)||(Mt.add(lt.id),st.some(Et=>Et.id===lt.id)))return;let Ze=ft;for(;Ze>st.length;)Ze--;Ze<0?st.push(lt):st.splice(Ze,0,lt)}),c.value=st,d.value=c.value.length>0?c.value.reduce((lt,ft,tt)=>{var zl,vm;if(ft.isHidden)return lt;if(ft.text===`
`){const bo=ja(tt);return bo!==-1&&c.value[bo],lt+ft.text}if(lt===""){let bo=tt+1;for(;bo<c.value.length&&((zl=c.value[bo])!=null&&zl.isHidden);)bo++;const XM=bo>=c.value.length,hm=bo<c.value.length?c.value[bo]:null,QM=XM||hm&&hm.text===`
`;return ft.text+(QM?",":"")}let Ze=tt+1;for(;Ze<c.value.length&&((vm=c.value[Ze])!=null&&vm.isHidden);)Ze++;const Et=Ze>=c.value.length,Tt=Ze<c.value.length?c.value[Ze]:null,un=Tt&&Tt.text===`
`||Et,Wl=ja(tt);return Wl!==-1&&c.value[Wl].text===`
`?lt+ft.text+(un?",":""):lt+", "+ft.text+(un?",":"")},""):"",C.value&&clearTimeout(C.value),C.value=setTimeout(()=>{On()},1e3),ra();const jn=20;let Zt=0;for(;Zt<c.value.length;){const lt=Math.min(Zt+jn,c.value.length),ft=[];for(let tt=Zt;tt<lt;tt++)if(c.value[tt].text.length>0&&!c.value[tt].translate){let Ze=c.value[tt].text;const Et=Nl(Ze.trim());ft.push(en.getTranslateLocal(Et).then(Tt=>{const un=Tt;c.value[tt].translate=un.translated.translate,c.value[tt].color=un.translated.color}))}await Promise.all(ft),Zt=lt}i.value=Ua(d.value)},ir=async()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="translater"){let k=0;for(;k<c.value.length;){const le=Math.min(k+20,c.value.length),ve=[];for(let Oe=k;Oe<le;Oe++){const _e=c.value[Oe];if(_e.translate&&(_e.translate===_e.text||/[a-zA-Z]/.test(_e.translate))&&!(typeof _e.text=="string"&&_e.text.startsWith("<wlr"))){const $e=_e.text,Me=new Promise(Qe=>{en.translaterText("",$e).then(st=>{st.data.length>0&&(c.value[Oe].translate=st.data),Qe()})});ve.push(Me)}}await Promise.all(ve),k=le}}else{let k=0;const le=20;for(;k<c.value.length;){let ve=[],Oe=[],_e=0;for(let $e=k;$e<c.value.length;$e++){const Me=c.value[$e];if(Me.translate&&/[a-zA-Z]/.test(Me.translate)&&!(typeof Me.text=="string"&&Me.text.startsWith("<wlr"))){const Qe=Me.text;if(Qe.length>le){const Mt=JSON.stringify([{index:Me.id,text:Qe,translate:""}]);await Pl(Mt,[Me.id]),k=$e+1;break}else ve.push({index:Me.id,text:Qe,translate:""}),Oe.push(Me.id),_e++}if(_e===2)break}if(ve.length>0){const $e=JSON.stringify(ve);await Pl($e)}k+=_e>0?_e:1}}},Pl=async(M,k)=>{let le=0;for(;le<2;)try{const ve=await en.translaterText(M,"");if(ve&&ve.data){const Oe=JSON.parse(ve.data);for(let _e=0;_e<Oe.length;_e++){const $e=Oe[_e],Me=c.value.findIndex(Qe=>Qe.id===$e.index);Me!==-1&&(c.value[Me].translate=$e.translate)}return!0}return!1}catch{if(le++,le>=2)return!1}return!1},yo=h(""),On=()=>{const M=d.value.replace(/[\s\t\n]+/g,"");if(x.value.length>0){if(M.length>0){const k=x.value.filter(Oe=>!Oe.hidden);let le={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:x.value};k.length>0&&(le.lora=k);const ve=JSON.stringify(le);yo.value!=ve&&(yo.value=ve,Vn.saveHistory({tag:ve}))}}else if(yo.value!=d.value){const k={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:""},le=JSON.stringify(k);M.length>0&&Vn.saveHistory({tag:le})}ra(),Dt||(Xe.value=!0)},ra=()=>{if(x.value.length>0){yo.value=d.value;const M=x.value.filter(ve=>!ve.hidden);let k={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:x.value};M.length>0&&(k.lora=M);const le=JSON.stringify(k);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:le},"*")}else{yo.value=d.value;const M={prompt:d.value,lora:"",temp_prompt:c.value,temp_lora:""},k=JSON.stringify(M);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:k},"*")}},Fl=(M,k)=>{if(F.value)return;eo.value&&(clearTimeout(eo.value),eo.value=null);const le=k.target.getBoundingClientRect();S.value={top:`${le.top-50}px`,left:`${le.left+le.width/2}px`},m.value=M;const ve=c.value[M].text;ke.value=ur(ve),G.value={top:`${le.bottom+window.scrollY+le.height+10}px`,left:`${le.left+le.width/2}px`},c.value[M].isLoraTag||(ae.value=!0)},ur=M=>{const k=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const ve of k)if(M.startsWith(ve.open)&&M.endsWith(ve.close))return ur(M.slice(1,-1));const le=M.match(/:(\d+(\.\d+)?)$/);return le?parseFloat(le[1]):1},eo=h(null),Va=M=>{eo.value&&clearTimeout(eo.value),eo.value=setTimeout(()=>{y.value||vu(),eo.value=null},100),ae.value=!1},Bl=()=>{y.value=!1,Va(m.value),setTimeout(()=>{y.value||(F.value=!1)},100)},vu=()=>{y.value||(m.value=null)},hu=()=>{if(m.value!==null){const M=m.value;dr(M),m.value=null,y.value=!1}},cr=()=>{if(m.value!==null){const M=m.value;c.value.splice(M+1,0,{id:ee(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),En()}},dr=M=>{const k=d.value;let le=c.value[M],ve=0,Oe=-1;for(let _e=0;_e<M;_e++){let $e=k.indexOf(c.value[_e].text,ve);$e!==-1&&(ve=$e+c.value[_e].text.length)}if(le.text===`
`||le.text==="	"){for(let _e=ve;_e<k.length;_e++)if(k[_e]===le.text){Oe=_e;break}}else Oe=k.indexOf(le.text,ve);if(Oe!==-1){const _e=le.text===`
`?" ":"",$e=k.substring(0,Oe)+_e+k.substring(Oe+le.text.length);d.value=$e}c.value.splice(M,1),d.value=c.value.length>0?c.value.reduce((_e,$e,Me)=>{var lt,ft;if($e.isHidden)return _e;if($e.text===`
`){const tt=ja(Me);return tt!==-1&&c.value[tt],_e+$e.text}if(_e===""){let tt=Me+1;for(;tt<c.value.length&&((lt=c.value[tt])!=null&&lt.isHidden);)tt++;const Ze=tt>=c.value.length,Et=tt<c.value.length?c.value[tt]:null,Tt=Ze||Et&&Et.text===`
`;return $e.text+(Tt?",":"")}let Qe=Me+1;for(;Qe<c.value.length&&((ft=c.value[Qe])!=null&&ft.isHidden);)Qe++;const st=Qe>=c.value.length,Mt=Qe<c.value.length?c.value[Qe]:null,jn=Mt&&Mt.text===`
`||st,Zt=ja(Me);return Zt!==-1&&c.value[Zt].text===`
`?_e+$e.text+(jn?",":""):_e+", "+$e.text+(jn?",":"")},""):"",On(),Xe.value=!0},fe=(M,k)=>{const le=d.value;let ve=0,Oe=-1;for(let $e=0;$e<M;$e++){let Me=le.indexOf(c.value[$e].text,ve);Me!==-1&&(ve=Me+c.value[$e].text.length)}const _e=c.value[M].text;if(Oe=le.indexOf(_e,ve),Oe!==-1){const $e=k.target.value,Me=le.substring(0,Oe)+$e+le.substring(Oe+_e.length);d.value=Me,c.value[M]={...c.value[M],text:$e},On()}},ue=M=>{c.value[M].isPunctuation||(c.value[M].isEditing=!0,setTimeout(()=>{const k=v[M];if(k){k.focus();const le=k.value.length;k.setSelectionRange(le,le),xe(k),k.addEventListener("input",()=>xe(k)),On(),Xe.value=!0}}))},xe=M=>{const k=document.createElement("span");k.style.visibility="hidden",k.style.position="absolute",k.style.whiteSpace="pre";const le=window.getComputedStyle(M);k.style.font=le.font,k.style.fontSize=le.fontSize,k.style.fontFamily=le.fontFamily,k.style.padding=le.padding,k.style.border=le.border,k.textContent=M.value||M.placeholder||"",document.body.appendChild(k);const ve=k.offsetWidth;M.style.width=`${Math.max(ve+4,20)}px`,document.body.removeChild(k)},Ke=M=>{c.value[M].isEditing=!1};ot(c,M=>{En()},{deep:!0}),ot(x,M=>{On(),Xe.value=!0},{deep:!0});const Pt=()=>{$.value=!$.value,$.value&&qe(()=>{var k;const M=D.value.getBoundingClientRect();(k=Y.value)==null||k.setPosition(M)})},Jt=()=>{$.value=!1},rt=M=>{var k,le;D.value&&!D.value.contains(M.target)&&Y.value&&!Y.value.$el.contains(M.target)&&Jt(),(k=a.value)!=null&&k.contains&&((le=l.value)!=null&&le.contains)&&!a.value.contains(M.target)&&!l.value.contains(M.target)&&(H.value=!1)},Ft=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},pr=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},zn=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},Wa=h(!0),_M=()=>{Wa.value=!Wa.value},fr=h(!1),yM=()=>{fr.value=!fr.value};h(null);const bM=()=>{const M=l.value;M&&(M.addEventListener("keyup",za),M.addEventListener("click",za),M.addEventListener("input",za))},za=()=>{H.value&&Ba()},nm=()=>{if(l.value){const M=l.value.style.height||`${l.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",M)}},wM=()=>{const M=localStorage.getItem("weilinPromptTextAreaHeight");M&&l.value&&(l.value.style.height=M)};mt(()=>{document.addEventListener("click",rt),window.addEventListener("message",rm),im(),bM(),qe(()=>{wM()}),setTimeout(()=>{oe.value||(oe.value=document.querySelector(".tokens-container")),oe.value?(oe.value.removeEventListener("mousedown",gr),oe.value.removeEventListener("mousemove",mr),oe.value.removeEventListener("mouseup",Wo),oe.value.removeEventListener("mouseleave",Wo),oe.value.addEventListener("mousedown",gr),oe.value.addEventListener("mousemove",mr),oe.value.addEventListener("mouseup",Wo),oe.value.addEventListener("mouseleave",Wo),oe.value.style.userSelect="none",oe.value.style.cursor="default",console.log("")):console.warn("tokens-container")},100)}),Co(()=>{oe.value&&(oe.value.removeEventListener("mousedown",gr),oe.value.removeEventListener("mousemove",mr),oe.value.removeEventListener("mouseup",Wo),oe.value.removeEventListener("mouseleave",Wo)),vr()});const gr=M=>{if(M.button===0&&!M.ctrlKey&&!M.metaKey){const k=M.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),le=oe.value;if(le&&!k){B.value=!1,Z.value=!1,re.value=!1,ge.value=!1,Ul(),vr();const ve=le.getBoundingClientRect();te.value={x:Math.max(M.clientX,ve.left),y:Math.max(M.clientY,ve.top)},z.value={x:Math.max(M.clientX,ve.left),y:Math.max(M.clientY,ve.top)},B.value=!0,console.log("")}}},mr=M=>{if(B.value&&oe.value&&!Z.value&&Math.sqrt(Math.pow(M.clientX-te.value.x,2)+Math.pow(M.clientY-te.value.y,2))>3&&(M.preventDefault(),M.stopPropagation(),Z.value=!0,F.value=!0,ne.value=[],om(),console.log("")),Z.value&&oe.value){M.preventDefault(),M.stopPropagation();const k=oe.value.getBoundingClientRect();z.value={x:Math.min(Math.max(M.clientX,k.left),k.right),y:Math.min(Math.max(M.clientY,k.top),k.bottom)};const le=5;Math.abs(z.value.x-te.value.x)<le&&(z.value.x=te.value.x+le),Math.abs(z.value.y-te.value.y)<le&&(z.value.y=te.value.y+le),(!re.value||Date.now()-ce.value>100)&&(re.value=!0,requestAnimationFrame(()=>{am(),re.value=!1}));const ve=Date.now();!ge.value&&ve-ce.value>mE&&(ce.value=ve,ge.value=!0,requestAnimationFrame(()=>{xM(),ge.value=!1}))}},Wo=()=>{if(B.value=!1,Z.value){const M=ne.value.length;Z.value=!1,F.value=!1,re.value=!1,ge.value=!1,vr(),M>0&&SM()}},om=()=>{try{let M=document.getElementById(Dl);M&&document.body.removeChild(M),M=document.createElement("div"),M.id=Dl,M.style.cssText=`
      position: fixed;
      background-color: rgba(66, 133, 244, 0.4);
      border: 2px dashed #4285f4;
      box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
      pointer-events: none;
      z-index: 99999;
      transition: none;
      opacity: 1;
      display: block;
    `,document.body.appendChild(M),console.log(""),am()}catch(M){console.error(":",M),re.value=!1}},am=()=>{try{let M=document.getElementById(Dl);if(!M&&Z.value&&(om(),M=document.getElementById(Dl),!M))return;const k=Math.min(te.value.x,z.value.x),le=Math.min(te.value.y,z.value.y),ve=Math.abs(z.value.x-te.value.x),Oe=Math.abs(z.value.y-te.value.y),_e=5,$e=Math.max(ve,_e),Me=Math.max(Oe,_e);M&&(M.style.left=`${k}px`,M.style.top=`${le}px`,M.style.width=`${$e}px`,M.style.height=`${Me}px`)}catch(M){console.error(":",M),re.value=!1}},vr=()=>{try{const M=document.getElementById(Dl);M&&document.body.removeChild(M)}catch(M){console.error(":",M)}},xM=()=>{ne.value=[];const M=Math.min(te.value.x,z.value.x),k=Math.min(te.value.y,z.value.y),le=Math.max(te.value.x,z.value.x),ve=Math.max(te.value.y,z.value.y);document.querySelectorAll(".token-item-box").forEach((_e,$e)=>{if(!_e.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const Qe=_e.getBoundingClientRect();Qe.right>=M&&Qe.left<=le&&Qe.bottom>=k&&Qe.top<=ve&&ne.value.push($e)}),lm()},lm=()=>{const M=document.querySelectorAll(".token-item-box"),k=[],le=[];M.forEach((ve,Oe)=>{ne.value.includes(Oe)?k.push(ve):le.push(ve)}),k.forEach(ve=>{ve.classList.add("token-item-box-selected")}),le.forEach(ve=>{ve.classList.remove("token-item-box-selected"),ve.style.border="",ve.style.boxShadow="",ve.style.backgroundColor=ve.dataset.originalBgColor||""})},SM=()=>{if(ne.value.length>0){const M=Math.min(te.value.x,z.value.x),k=Math.min(te.value.y,z.value.y),le=Math.max(te.value.x,z.value.x);Math.max(te.value.y,z.value.y),Ce.value={top:`${k-50}px`,left:`${(M+le)/2}px`},ie.value=!0,setTimeout(()=>{document.addEventListener("click",_u)},0)}},TM=()=>{if(ne.value.length===0)return;const le=[...ne.value].sort((ve,Oe)=>ve-Oe).map(ve=>c.value[ve].text).join(", ");navigator.clipboard.writeText(le).then(()=>{const ve=document.createElement("div");ve.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,ve.textContent="",document.body.appendChild(ve),setTimeout(()=>{document.body.removeChild(ve)},2e3)}),Ul()},kM=()=>{ne.value.length!==0&&(ne.value.forEach(M=>{c.value[M]&&!c.value[M].isHidden&&(c.value[M].isHidden=!0,c.value[M].hiddenHint=o("promptBox.hiddenHint"))}),En(),On(),Ul())},CM=()=>{ne.value.length!==0&&(ne.value.forEach(M=>{c.value[M]&&c.value[M].isHidden&&(c.value[M].isHidden=!1,c.value[M].hiddenHint="")}),En(),On(),Ul())},EM=()=>{ne.value.length>0&&(confirm(` ${ne.value.length} `)?$M():hr())},Ul=()=>{ie.value=!1,document.removeEventListener("click",_u),hr()},_u=M=>{const k=document.querySelector(".token-controls");k&&!k.contains(M.target)&&Ul()},$M=()=>{if(ne.value.length===0)return;[...ne.value].sort((k,le)=>le-k).forEach(k=>{c.value.splice(k,1)}),En(),On(),hr()},hr=()=>{document.querySelectorAll(".token-item-box-selected").forEach(k=>{k.classList.remove("token-item-box-selected"),k.style.border="",k.style.boxShadow="",k.style.backgroundColor=k.dataset.originalBgColor||""}),ne.value=[],ie.value&&(ie.value=!1,document.removeEventListener("click",_u))},sm=M=>{if(ne.value.length===0)return;const k=M.target.closest(".token-item-box, .token-item, .token-controls, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box"),le=oe.value;(M.target===l.value||!k&&(!le||!le.contains(M.target)))&&hr()};mt(()=>{document.addEventListener("click",sm)}),Mn(()=>{document.removeEventListener("click",rt),document.removeEventListener("click",sm),rr.value&&clearTimeout(rr.value),window.removeEventListener("message",rm);const M=l.value;M&&(M.removeEventListener("keyup",za),M.removeEventListener("click",za),M.removeEventListener("input",za)),oe.value&&(oe.value.removeEventListener("mousedown",gr),oe.value.removeEventListener("mousemove",mr),oe.value.removeEventListener("mouseup",Wo),oe.value.removeEventListener("mouseleave",Wo)),vr()});const rm=M=>{if(M.data.type==="weilin_prompt_ui_insertTag"){const k=d.value,le=M.data.tagText;k===""?d.value=le:(k.endsWith(" "),d.value=k+", "+le+","),b.value=d.value,Yt()}else if(M.data.type==="weilin_prompt_ui_user_history_tag"){const k=M.data.tagText;yo.value=k,gm(k)}else if(M.data.type!=="weilin_prompt_ui_refresh_all_data"){if(M.data.type==="weilin_prompt_ui_translate_setting")im();else if(M.data.type==="weilin_prompt_ui_selectLora"){if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const k=d.value,le=M.data.lora.loraWorks;k===""?d.value=le:(k.endsWith(" "),d.value=k+", "+le+","),b.value=d.value,Yt()}}else if(M.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")GM(M.data.data);else if(M.data.type==="weilin_prompt_ui_addLoraTag_inner")if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const k=d.value,le=M.data.lora.tag+(M.data.lora.loraWorks===""?"":", "+M.data.lora.loraWorks);k===""?d.value=le:(k.endsWith(" "),d.value=k+", "+le+","),b.value=d.value,Yt()}else{const k=d.value,le=M.data.lora.tag;k===""?d.value=le:(k.endsWith(" "),d.value=k+", "+le+","),b.value=d.value,Yt()}}},im=async()=>{const M=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",k=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",M),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",k),await qe()},LM=(M,k)=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network")translate.request.translateText(M,function(le){if(le.result>0){const ve=le.text.map(Oe=>Oe.replace(/[\[\]]/g,"")).join(", ");k.translate=ve}});else if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="translater")en.translaterText("",M).then(le=>{le.data.length>0&&(k.translate=le.data)});else{let le={index:k.id,text:k.text,translate:""};const ve=JSON.stringify(le);en.translaterText(ve,"").then(Oe=>{if(Oe&&Oe.data){const _e=JSON.parse(Oe.data);k.translate=_e.translate}})}},um=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")!="network")if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="translater")en.translaterInputText("",N.value).then(M=>{M.text.length>0&&(c.value.push({text:M.data,translate:N.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),N.value="",En())});else{let M={text:N.value,translate:""};const k=JSON.stringify(M);en.translaterInputText(k,"").then(le=>{if(le&&le.data){const ve=JSON.parse(le.data);c.value.push({text:ve.translate,translate:N.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),N.value="",En()}})}},AM=()=>{setTimeout(()=>{H.value||(b.value=d.value,Yt())},100)},cm=M=>{let k=M.replace(/[\[\]{}]/g,"").trim();const ve=Nl(k).trim();if(!ve){H.value=!1;return}if(ve.length>20){H.value=!1;return}try{const Oe=ve.toLowerCase();Gi.getAutocomplete(String(Oe)).then(async _e=>{j.value=_e.data,await Ba(),setTimeout(()=>{ye.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,se.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,H.value=j.value.length>0,K.value=0},50)})}catch(Oe){console.error("Autocomplete error:",Oe),H.value=!1}},MM=M=>{H.value&&(M.key==="ArrowDown"?(M.preventDefault(),K.value=Math.min(K.value+1,j.value.length-1),dm()):M.key==="ArrowUp"?(M.preventDefault(),K.value=Math.max(K.value-1,0),dm()):M.key==="Tab"||M.key==="Enter"?(M.preventDefault(),pm(K.value,null)):M.key==="Escape"&&(M.preventDefault(),fm()))},dm=()=>{qe(()=>{if(X.value&&a.value){const M=a.value,k=X.value,le=M.getBoundingClientRect(),ve=k.getBoundingClientRect(),Oe=ve.top<le.top,_e=ve.bottom>le.bottom;Oe?M.scrollTop=M.scrollTop+(ve.top-le.top):_e&&(M.scrollTop=M.scrollTop+(ve.bottom-le.bottom))}})},IM=vt(()=>{if(!p.value)return{left:r.value.left};const M=p.value.offsetWidth;ye.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const k=ye.value;let le=r.value.left;return le+k>M&&(le=M-k),le<0&&(le=0),{left:le}}),pm=(M,k)=>{if(k&&(k.preventDefault(),k.stopPropagation()),!j.value[M])return;H.value=!1;const le=l.value.selectionStart,ve=l.value.selectionEnd,Oe=d.value;let _e=j.value[M].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(_e=_e.replace(//g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(_e=_e.replace(//g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(_e=_e.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(_e=_e.replace(//g,"<").replace(//g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(_e=_e.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(_e=_e.replace(/\(([^)]+)\)/g,"\\($1\\)"));let $e=le,Me=ve;for(;$e>0&&!/[,\s]/.test(Oe[$e-1]);)$e--;for(;!1;)Me++;let Qe=Oe.substring(0,$e)+_e+", "+Oe.substring(Me);const st=$e+_e.length+2;d.value=Qe,b.value=Qe,Yt(),qe(()=>{l.value&&(l.value.selectionStart=st,l.value.selectionEnd=st)})},fm=()=>{H.value=!1},gm=M=>{if(M.length>0)try{const k=JSON.parse(M);if(d.value=k.prompt,b.value=d.value,k.lora&&k.lora!=""&&(x.value=k.lora),k.temp_prompt&&k.temp_prompt!=""){const le=k.temp_prompt;let ve=!1;le.tokens&&le.tokens.length>0&&le.tokens!=""&&(c.value=le.tokens,ve=!0),le.lora&&le.lora.length>0&&le.lora!=""&&(x.value=le.lora,ve=!0),!ve&&le.length>0&&le!=""&&(c.value=le)}if(k.temp_lora&&k.temp_lora.length>0&&k.temp_lora!=""){const le=k.temp_lora;x.value=le}Yt()}catch{J({type:"warn",str:"promptBox.settings.errorPrompt"})}},_r=h(!1),Vl=h(null),Hn=h([]);let Ha=null,zo=null;const DM=(M,k=!1)=>{_r.value=!0,Vl.value=null,Hn.value=[],k&&ne.value.length>1&&ne.value.includes(M)?Hn.value=[...ne.value].sort((le,ve)=>le-ve):(ne.value=[],Vl.value=M),zo={originalTokens:[...c.value],draggedItems:Hn.value.length>0?Hn.value.map(le=>c.value[le]):[c.value[M]]}},RM=(M,k)=>{if(F.value){k.preventDefault();return}DM(M,!0),k.dataTransfer.effectAllowed="move"},OM=(M,k,le)=>{const ve=k.filter($e=>$e<le).length;let Oe=Math.max(0,le-ve);const _e=M.length-k.length;return Oe=Math.min(Oe,_e),Oe},mm=M=>{if(!zo)return;const k=[...zo.originalTokens],le=Hn.value.length>0?Hn.value:[Vl.value],ve=le.map(_e=>zo.originalTokens[_e]);for(let _e=le.length-1;_e>=0;_e--){const $e=le[_e];$e<k.length&&k.splice($e,1)}const Oe=OM(zo.originalTokens,le,M);if(zo.draggedItems.forEach((_e,$e)=>{k.splice(Oe+$e,0,_e)}),c.value=k,En(),Hn.value.length>0&&ne.value.length>0){const _e=[];for(let $e=0;$e<k.length;$e++){const Me=k[$e];ve.some(Qe=>Qe.text===Me.text)&&_e.push($e)}ne.value=_e,setTimeout(()=>{lm()},0)}},NM=(M,k)=>{if(F.value){k.preventDefault();return}k.preventDefault(),_r.value&&(M<0||M>=c.value.length||Hn.value.length>0&&Hn.value.includes(M)||Hn.value.length===0&&Vl.value===M||(Ha&&clearTimeout(Ha),Ha=setTimeout(()=>{mm(M)},hE)))},PM=(M,k)=>{k.preventDefault(),Ha&&(clearTimeout(Ha),Ha=null),_r.value&&zo&&mm(M),_r.value=!1,Vl.value=null,Hn.value=[],zo=null},En=()=>{d.value=c.value.length>0?c.value.reduce((M,k,le)=>{var Qe,st;if(k.isHidden)return M;if(k.text===`
`){const Mt=ja(le);return Mt!==-1&&c.value[Mt],M+k.text}if(M===""){let Mt=le+1;for(;Mt<c.value.length&&((Qe=c.value[Mt])!=null&&Qe.isHidden);)Mt++;const jn=Mt>=c.value.length,Zt=Mt<c.value.length?c.value[Mt]:null,lt=jn||Zt&&Zt.text===`
`;return k.text+(lt?",":"")}let ve=le+1;for(;ve<c.value.length&&((st=c.value[ve])!=null&&st.isHidden);)ve++;const Oe=ve>=c.value.length,_e=ve<c.value.length?c.value[ve]:null,$e=_e&&_e.text===`
`||Oe,Me=ja(le);return Me!==-1&&c.value[Me].text===`
`?M+k.text+($e?",":""):M+", "+k.text+($e?",":"")},""):"",ra(),Dt||(Xe.value=!0)},FM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},BM=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},UM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},VM=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},WM=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},ja=M=>{for(let k=M-1;k>=0;k--)if(!c.value[k].isHidden)return k;return-1},zM=M=>{if(M>=0&&M<c.value.length){if(c.value[M].text===`
`||c.value[M].text==="	")return;c.value[M].isHidden=!c.value[M].isHidden,c.value[M].isHidden?c.value[M].hiddenHint=o("promptBox.hiddenHint"):c.value[M].hiddenHint="",En()}},HM=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},jM=async()=>{if(u.promptManager=="prompt_global")try{await hn.goRandomTemplate().then(M=>{M.code===200?(d.value=M.random_tags,qe(()=>{Yt()})):J({type:"warn",str:M.info})}).catch(M=>{console.error(M),J({type:"warn",str:"message.networkError"})})}catch(M){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",M)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},GM=async M=>{try{await hn.goRandomTemplatePath(M).then(k=>{k.code===200?(d.value=k.random_tags,qe(()=>{Yt()})):J({type:"warn",str:k.info})}).catch(k=>{console.error(k),J({type:"warn",str:"message.networkError"})})}catch(k){J({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",k)}},yu=h(null),qM=M=>{yu.value&&yu.value.open(M.text,M.translate)},KM=()=>{n.value.open(u.promptManager)},YM=()=>{d.value="",c.value=[],N.value="",x.value=[],b.value="",En()},JM=()=>{const M=c.value.filter(k=>!k.isHidden);c.value=M,En(),J({type:"success",str:o("promptBox.clearDisabledSuccess")||""})};return t({setPromptText:gm}),(M,k)=>{var le,ve,Oe;return w(),E(De,null,[s("div",ok,[Ve(ys,{name:"weilin-fade"},{default:it(()=>[Qt.value?(w(),E("div",ak,"")):de("",!0)]),_:1}),u.promptManager==="prompt"?(w(),xt(Mx,{key:0,"is-open":P.value,"selected-loras":x.value,onClose:Re},null,8,["is-open","selected-loras"])):de("",!0),Q.value?(w(),xt(jx,{key:1,ref_key:"mainLabelManagerRef",ref:Pe,"selected-id":He.value,onSelect:Wn},null,8,["selected-id"])):de("",!0),s("div",{class:Le(`${gE}main-content`),style:dt({width:bt.value})},[s("div",lk,[s("div",sk,[s("button",{class:"tag-manager-btn",onClick:we,title:Q.value?"":""},[(w(),E("svg",{class:Le(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!Q.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},k[16]||(k[16]=[s("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)]),2)),s("span",ik,g(Q.value?"":""),1)],8,rk)]),s("div",uk,[s("button",{class:"language-switch-btn",onClick:Je(Pt,["stop"]),ref_key:"langBtnRef",ref:D,title:f(o)("controls.language")},[k[17]||(k[17]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[s("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),s("span",dk,g(f(o)("controls.language")),1)],8,ck),Ve(ys,{name:"fade"},{default:it(()=>[$.value?(w(),xt(K0,{key:0,ref_key:"languageSwitcherRef",ref:Y,onClose:Jt},null,512)):de("",!0)]),_:1})]),s("div",pk,[Ve($b,{title:f(o)("controls.switchTheme")},{default:it(({isDark:_e})=>[s("span",fk,g(f(o)(_e?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),s("div",gk,[s("button",{class:"settings-btn",onClick:Fe,title:f(o)("controls.settings")},[k[18]||(k[18]=s("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),s("span",vk,g(f(o)("controls.settings")),1)],8,mk)]),s("div",hk,[s("button",{class:"tag-manager-btn",onClick:Ft,title:f(o)("controls.tagManager")},[k[19]||(k[19]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",yk,g(f(o)("controls.tagManager")),1)],8,_k)]),s("div",bk,[s("button",{class:"tag-manager-btn",onClick:VM,title:f(o)("controls.danbooruManager")},[k[20]||(k[20]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",xk,g(f(o)("controls.danbooruManager")),1)],8,wk)]),u.hasPromptLoraStack?(w(),E("div",Sk,[s("button",{class:"tag-manager-btn",onClick:me,title:f(o)("controls.loraStack")},[k[21]||(k[21]=s("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),s("span",kk,g(f(o)("controls.loraStack")),1)],8,Tk)])):de("",!0),s("div",Ck,[s("button",{class:"tag-manager-btn",onClick:pr,title:f(o)("controls.loraManager")},[k[22]||(k[22]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",$k,g(f(o)("controls.loraManager")),1)],8,Ek)]),s("div",Lk,[s("button",{class:"tag-manager-btn",onClick:zn,title:f(o)("controls.history")},[k[23]||(k[23]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),s("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),s("span",Mk,g(f(o)("controls.history")),1)],8,Ak)]),s("div",Ik,[s("button",{class:"tag-manager-btn",onClick:FM,title:f(o)("controls.aiChat")},[k[24]||(k[24]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),s("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),s("span",Rk,g(f(o)("controls.aiChat")),1)],8,Dk)]),s("div",Ok,[s("button",{class:"tag-manager-btn",onClick:BM,title:f(o)("controls.github")},[k[25]||(k[25]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),s("span",Pk,g(f(o)("controls.github")),1)],8,Nk)]),s("div",Fk,[s("button",{class:"tag-manager-btn",onClick:UM,title:f(o)("controls.shareCloudData")},[k[26]||(k[26]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),s("span",Uk,g(f(o)("controls.shareCloudData")),1)],8,Bk)]),s("div",Vk,[s("button",{class:"tag-manager-btn",onClick:HM,title:f(o)("controls.tutorialVideo")},[k[27]||(k[27]=s("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[s("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),s("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),s("span",zk,g(f(o)("controls.tutorialVideo")),1)],8,Wk)]),s("div",Hk,[s("button",{class:"tag-manager-btn",onClick:WM,title:f(o)("controls.sponsor")},[k[28]||(k[28]=s("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[s("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),s("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),s("span",Gk,g(f(o)("controls.sponsor")),1)],8,jk)]),Ve(xf,{ref_key:"settingDialog",ref:T},null,512),s("div",qk,[s("button",{class:Le(["update-label-btn",{"is-dirty":Xe.value}]),disabled:!He.value||!Xe.value,onClick:zt},"  ",10,Kk)])]),s("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:p},[he(s("textarea",{"onUpdate:modelValue":k[0]||(k[0]=_e=>d.value=_e),class:"input-area",onInput:_o,placeholder:f(o)("promptBox.placeholder"),onKeydown:MM,onBlur:AM,rows:"6",ref_key:"inputAreaRef",ref:l,onMouseup:nm,onResize:nm},null,40,Yk),[[Ae,d.value]]),s("div",Jk,g(i.value)+" tokens ",1),s("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:a,style:dt({top:`${r.value.top}px`,left:`${IM.value.left}px`,display:H.value?"block":"none",width:`${ye.value}px`,maxHeight:`${se.value}px`})},[s("button",{class:"close-autocomplete-btn",onClick:Je(fm,["stop"])},""),(w(!0),E(De,null,ze(j.value,(_e,$e)=>(w(),E("div",{key:$e,class:Le(["autocomplete-item",{selected:$e===K.value}]),onClick:Je(Me=>pm($e,Me),["stop"]),ref_for:!0,ref:Me=>{Me&&$e===K.value&&(X.value=Me)}},[s("span",Qk,g(_e.text),1),s("span",Zk,g(_e.desc),1)],10,Xk))),128))],4)],512),s("div",eC,[s("div",tC,[he(s("input",{type:"text","onUpdate:modelValue":k[1]||(k[1]=_e=>N.value=_e),class:"prompt-input-translate-area-textarea",onKeyup:k[2]||(k[2]=an(_e=>um(),["enter"])),placeholder:f(o)("promptBox.translatePlaceholder")},null,40,nC),[[Ae,N.value]]),s("button",{class:"translate-btn",style:{"margin-left":"8px"},onClick:k[3]||(k[3]=_e=>um())},"  ")]),R.value?(w(),E("button",{key:0,class:"translate-btn random-tag-settings-btn",onClick:ir,title:f(o)("promptBox.oneClickTranslate")},[k[29]||(k[29]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),s("span",aC,g(f(o)("promptBox.oneClickTranslate")),1)],8,oC)):de("",!0),_.value?(w(),E("button",{key:1,class:"translate-btn random-tag-settings-btn",onClick:KM,title:f(o)("promptBox.randomTagSettings")},[k[30]||(k[30]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),s("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),s("span",sC,g(f(o)("promptBox.randomTagSettings")),1)],8,lC)):de("",!0),A.value?(w(),E("button",{key:2,class:"translate-btn random-tag-btn",onClick:jM,title:f(o)("promptBox.oneClickRandomTag")},[k[31]||(k[31]=s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),s("span",iC,g(f(o)("promptBox.oneClickRandomTag")),1)],8,rC)):de("",!0),be.value?(w(),E("button",{key:3,class:Le(["translate-btn toggle-delete-btn",{active:L.value}]),onClick:V,title:L.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")},[k[32]||(k[32]=s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})],-1)),s("span",cC,g(L.value?f(o)("promptBox.hideDeleteButton"):f(o)("promptBox.showDeleteButton")),1)],10,uC)):de("",!0),pe.value?(w(),E("button",{key:4,class:"translate-btn clear-all-btn",onClick:YM,title:f(o)("promptBox.oneClickCleanAll")},[k[33]||(k[33]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",pC,g(f(o)("promptBox.oneClickCleanAll")),1)],8,dC)):de("",!0),q.value?(w(),E("button",{key:5,class:"translate-btn clear-disabled-btn",onClick:JM,title:f(o)("promptBox.oneClickClearDisabled")},[k[34]||(k[34]=s("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[s("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),s("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),s("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),s("span",gC,g(f(o)("promptBox.oneClickClearDisabled")),1)],8,fC)):de("",!0)]),c.value.length>0?(w(),E("div",mC,[(w(!0),E(De,null,ze(c.value,(_e,$e)=>(w(),E(De,{key:"tag-item-"+$e},[s("div",{class:Le(["token-item-box",{"token-item-box-disabled":_e.isHidden}]),draggable:!_e.isEditing,onDragstart:Me=>RM($e,Me),onDragover:Je(Me=>NM($e,Me),["prevent"]),onDrop:Me=>PM($e,Me),onDblclick:Me=>zM($e),style:dt({backgroundColor:_e.color})},[_e.text===`
`?(w(),E("div",hC,[s("span",{class:"token-symbol",title:f(o)("promptBox.newline")},"",8,_C)])):_e.text==="	"?(w(),E("div",{key:1,class:"token-item tab-token",onMouseenter:Me=>Fl($e,Me),onMouseleave:Me=>Va()},[s("span",{class:"token-symbol",title:f(o)("promptBox.tab")},"",8,bC)],40,yC)):_e.isLoraTag?(w(),E("div",{key:2,class:"lora-tag-icon",title:f(o)("promptBox.loraTag"),onMouseenter:Me=>Fl($e,Me),onMouseleave:Me=>Va()},[k[35]||(k[35]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[s("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),s("span",xC,g(_e.text),1)],40,wC)):_e.text&&!_e.isLoraTag?(w(),E("div",{key:3,class:Le(["token-item",{punctuation:_e.isPunctuation}]),onMouseenter:Me=>Fl($e,Me),onMouseleave:Me=>Va()},[!_e.isEditing||_e.isPunctuation?(w(),E("span",{key:0,onClick:Me=>!_e.isPunctuation&&ue($e)},g(_e.text),9,TC)):_e.isPunctuation?de("",!0):(w(),E("input",{key:1,value:_e.text,onInput:Me=>fe($e,Me),onBlur:Me=>Ke($e),onKeyup:an(Me=>Ke($e),["enter"]),ref_for:!0,ref:Me=>{Me&&(v[$e]=Me)}},null,40,kC)),L.value?(w(),E("button",{key:2,class:"quick-delete-btn",onClick:Je(Me=>dr($e),["stop"]),title:f(o)("promptBox.delete"),style:{"margin-left":"4px"}},k[36]||(k[36]=[s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#ff4d4f70"})],-1)]),8,CC)):de("",!0)],42,SC)):de("",!0),_e.text!==`
`&&_e.text!=="	"&&!_e.isLoraTag?(w(),E("div",EC,[mu(_e.text)?(w(),E("div",{key:0,onClick:Me=>LM(_e.text,_e),class:"translate-button",title:f(o)("promptBox.translate")},k[37]||(k[37]=[s("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[s("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),s("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)]),8,$C)):de("",!0),s("span",LC,g(_e.translate?_e.translate:""),1)])):de("",!0)],46,vC),_e.text===`
`?(w(),E("div",AC)):de("",!0)],64))),128))])):de("",!0),ae.value?(w(),E("div",{key:1,class:"tag-tips-box",style:dt(G.value)},[s("div",MC,[s("p",{innerHTML:f(o)("promptBox.tagTips")},null,8,IC)])],4)):de("",!0),he(s("div",{class:"token-controls",style:dt(S.value),onMouseenter:k[14]||(k[14]=_e=>y.value=!0),onMouseleave:Bl},[(le=c.value[m.value])!=null&&le.isLoraTag?de("",!0):(w(),E("div",DC,[he(s("input",{type:"number","onUpdate:modelValue":k[4]||(k[4]=_e=>ke.value=_e),step:"0.1",class:"weight-input",onChange:Ee},null,544),[[Ae,ke.value]]),s("span",RC,g(f(o)("promptBox.weight")),1)])),(ve=c.value[m.value])!=null&&ve.isLoraTag?(w(),E("div",OC,[s("div",NC,[he(s("input",{type:"number","onUpdate:modelValue":k[5]||(k[5]=_e=>wt.value=_e),step:"0.1",class:"weight-input",onChange:sr},null,544),[[Ae,wt.value]]),s("span",PC,g(f(o)("promptBox.modelWeight")),1)]),s("div",FC,[he(s("input",{type:"number","onUpdate:modelValue":k[6]||(k[6]=_e=>rn.value=_e),step:"0.1",class:"weight-input",onChange:sr},null,544),[[Ae,rn.value]]),s("span",BC,g(f(o)("promptBox.textWeight")),1)])])):de("",!0),s("button",{class:"favour-btn",onClick:k[7]||(k[7]=_e=>qM(c.value[m.value])),title:f(o)("promptBox.favour")},k[38]||(k[38]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:"#FFD700"})],-1)]),8,UC),s("button",{onClick:hu,class:"delete-btn",title:f(o)("promptBox.delete")},k[39]||(k[39]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,VC),(Oe=c.value[m.value])!=null&&Oe.isLoraTag?de("",!0):(w(),E("div",WC,[s("div",zC,[k[40]||(k[40]=s("div",{class:"bracket-btn"}," () ",-1)),s("div",HC,[s("button",{class:"vertical-btn",onClick:k[8]||(k[8]=_e=>Rl("(")),title:f(o)("promptBox.addBracket")}," + ",8,jC),s("button",{class:"vertical-btn",onClick:k[9]||(k[9]=_e=>Ol("(")),title:f(o)("promptBox.removeLayer")}," - ",8,GC)])]),s("div",qC,[k[41]||(k[41]=s("div",{class:"bracket-btn"}," [] ",-1)),s("div",KC,[s("button",{class:"vertical-btn",onClick:k[10]||(k[10]=_e=>Rl("[")),title:f(o)("promptBox.addBracket")}," + ",8,YC),s("button",{class:"vertical-btn",onClick:k[11]||(k[11]=_e=>Ol("[")),title:f(o)("promptBox.removeLayer")}," - ",8,JC)])]),s("div",XC,[k[42]||(k[42]=s("div",{class:"bracket-btn"}," {} ",-1)),s("div",QC,[s("button",{class:"vertical-btn",onClick:k[12]||(k[12]=_e=>Rl("{")),title:f(o)("promptBox.addBracket")}," + ",8,ZC),s("button",{class:"vertical-btn",onClick:k[13]||(k[13]=_e=>Ol("{")),title:f(o)("promptBox.removeLayer")}," - ",8,eE)])])])),s("button",{class:"line-token-btn",onClick:cr,title:f(o)("promptBox.addLineToken"),style:{"margin-left":"8px"}},k[43]||(k[43]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M5 19h14v-2H5v2zm0-7h14v-2H5v2zm0-7v2h14V5H5z",fill:"#888"}),s("path",{d:"M7 17v-2h2v2H7zm0-7V8h2v2H7zm0-7V3h2v2H7z",fill:"#4285f4"})],-1)]),8,tE)],36),[[fl,m.value!==null&&c.value[m.value]]]),s("div",nE,[he(s("div",{class:"token-controls",style:dt(Ce.value),onMouseenter:k[15]||(k[15]=_e=>y.value=!0),onMouseleave:Bl},[s("div",oE,[s("div",aE," "+g(ne.value.length)+" ",1),s("div",{class:"weilin-comfyui-selection-actions-buttons"},[s("button",{class:"delete-btn copy-btn",onClick:TM,title:""},k[44]||(k[44]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])),s("button",{class:"delete-btn",onClick:kM,title:""},k[45]||(k[45]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),s("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])),s("button",{class:"delete-btn enable-btn",onClick:CM,title:""},k[46]||(k[46]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])),s("button",{class:"delete-btn",onClick:EM,title:""},k[47]||(k[47]=[s("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))])])],36),[[fl,ie.value]]),s("div",{class:"tag-manager-header",onClick:yM},[s("div",lE,[k[48]||(k[48]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[s("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),s("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),s("span",sE,g(f(o)("controls.loraManager")),1)]),s("div",rE,[(w(),E("svg",{class:Le(["collapse-icon",{"is-collapsed":!fr.value}]),viewBox:"0 0 24 24"},k[49]||(k[49]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),he(s("div",iE,[Ve(zg,{loraManager:"prompt_inner"})],512),[[fl,fr.value]])]),s("div",uE,[s("div",{class:"tag-manager-header",onClick:_M},[s("div",cE,[k[50]||(k[50]=s("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",dE,g(f(o)("controls.tagManager")),1)]),s("div",pE,[(w(),E("svg",{class:Le(["collapse-icon",{"is-collapsed":!Wa.value}]),viewBox:"0 0 24 24"},k[51]||(k[51]=[s("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),he(s("div",fE,[Ve($g)],512),[[fl,Wa.value]])])],6)]),Ve(IT,{ref_key:"randomSettingItem",ref:n},null,512),Ve(nk,{ref_key:"favourItemRef",ref:yu},null,512)],64)}}},[["__scopeId","data-v-f00dcffd"]]),yE={class:"container"},bE={class:"tab-container"},wE={key:0},xE={class:"search-container"},SE=["placeholder"],TE=["title"],kE=["title","disabled"],CE=["title"],EE={class:"history-list"},$E={class:"action-buttons"},LE=["onClick","title"],AE=["onClick","title"],ME=["onClick","title"],IE=["value"],DE={key:1},RE={class:"search-container"},OE=["placeholder"],NE=["title"],PE=["title"],FE=["title","disabled"],BE=["title"],UE={class:"history-list"},VE={key:0,class:"favor-name"},WE={class:"action-buttons"},zE=["onClick","title"],HE=["onClick","title"],jE=["onClick","title"],GE=["value"],qE={key:2,class:"weilin-tools-dialog-overlay"},KE={class:"weilin-tools-dialog-header"},YE={class:"weilin-tools-dialog-body"},JE={class:"form-group"},XE=["placeholder"],QE={class:"form-group"},ZE=["placeholder"],e$={class:"form-group"},t$={class:"color-picker"},n$={class:"color-controls"},o$={class:"alpha-control"},a$={class:"alpha-value"},l$={class:"weilin-tools-dialog-footer"},s$={key:3,class:"weilin-tools-dialog-overlay"},r$={class:"weilin-tools-dialog-header"},i$={class:"weilin-tools-dialog-body"},u$={class:"confirm-message"},c$={class:"weilin-tools-dialog-footer"},d$=_t({__name:"history_index",setup(e){const{t}=ht(),n=h(""),o=h([]),a=h([]),l=h([]),r=h([]),i=h("history"),u=h([]),p=h(!1),d=h(!1),c=h(!1),v=h({hex:"rgba(255, 123, 2, .4)",alpha:100}),m=h({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),y=h(!1),S=h(0),$=I=>JSON.parse(I).prompt,T=I=>({hex:"#FFFFFF",alpha:0}),D=I=>{const{hex:W,alpha:C}=T();v.value={hex:W,alpha:C}},Y=()=>{c.value=!1,m.value={id:"",name:"",tag:"",backgroundColor:"transparent"},D(),p.value=!0},x=I=>{const W=I.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(W){const[,C,b,O,Q]=W,pe=`#${((1<<24)+(parseInt(C)<<16)+(parseInt(b)<<8)+parseInt(O)).toString(16).slice(1)}`,be=Q?Math.round(parseFloat(Q)*100):100;return{hex:pe,alpha:be}}return{hex:"#FF7B02",alpha:50}},P=I=>{c.value=!0,m.value={...I},v.value=x(I.color),p.value=!0},H=()=>{const I=oe(v.value.hex,v.value.alpha);m.value.color=I},j=()=>{p.value=!1,m.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},c.value=!1},K=h(""),X=h(null),ye=vt(()=>{if(!X.value)return"";switch(K.value){case"history":return t("history.deleteHistoryConfirm",{name:X.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:X.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),se=I=>{K.value="history",X.value=I,d.value=!0},N=I=>{K.value="favorite",X.value=I,d.value=!0},Z=()=>{y.value=!1,S.value=0,K.value="deleteSelected",X.value=u.value,d.value=!0},te=()=>{y.value=!1,S.value=0,K.value="deleteSelectedFavorite",X.value=u.value,d.value=!0},z=async()=>{try{switch(K.value){case"history":Vn.deleteHistory(X.value.id_index).then(I=>{ie(),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"favorite":Vn.deleteFavorite(X.value.id_index).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Vn.batchDeleteHistory(u.value).then(I=>{ie(),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":Vn.batchDeleteFavorite(X.value).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.deleteSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})});break}F()}catch{J({type:"warn",str:"message.networkError"})}},ne=I=>{I.target.checked?i.value==="history"?u.value=o.value.map(W=>W.id_index):u.value=l.value.map(W=>W.id_index):u.value=[]},oe=(I,W)=>{const C=parseInt(I.slice(1,3),16),b=parseInt(I.slice(3,5),16),O=parseInt(I.slice(5,7),16);return`rgba(${C}, ${b}, ${O}, ${W/100})`},F=()=>{d.value=!1,K.value="",X.value=null},B=()=>{if(!m.value.tag){J({type:"warn",str:"history.dialog.tag_placeholder"});return}c.value?Vn.editFavorite({id_index:m.value.id_index,name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.editSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})}):Vn.addFavorite({name:m.value.name,tag:m.value.tag,color:m.value.color}).then(I=>{Ce(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),J({type:"success",str:"message.addSuccess"})}).catch(I=>{J({type:"warn",str:"message.networkError"})}),j()},ie=()=>{Vn.getHistory({}).then(I=>{o.value=I.data,a.value=o.value}).catch(I=>{J({type:"warn",str:"message.networkError"})})},Ce=()=>{Vn.getFavorite().then(I=>{l.value=I.data,r.value=l.value}).catch(I=>{J({type:"warn",str:"message.networkError"})})},re=()=>{a.value=o.value.filter(I=>I.tag.includes(n.value))},ge=()=>{r.value=l.value.filter(I=>I.tag.includes(n.value))},ce=()=>{ie()},ae=()=>{Ce()},G=I=>{Vn.addFavorite({tag:I.tag}).then(W=>{W.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Ce(),J({type:"success",str:"message.addFavoriteSuccess"})):J({type:"success",str:"message.addFavoriteIsExist"})}).catch(W=>{J({type:"warn",str:"message.networkError"})})},L=I=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:I.tag},"*")},U=()=>{u.value=[],y.value=!0},V=()=>{u.value=[],y.value=!1,S.value=0};return mt(()=>{ie(),Ce()}),(I,W)=>(w(),E("div",yE,[s("h1",null,g(i.value==="history"?f(t)("history.title"):f(t)("history.favorites")),1),s("div",bE,[s("button",{class:Le([{active:i.value==="history"},"tab-button"]),onClick:W[0]||(W[0]=C=>i.value="history")},g(f(t)("history.history")),3),s("button",{class:Le([{active:i.value==="favorites"},"tab-button"]),onClick:W[1]||(W[1]=C=>i.value="favorites")},g(f(t)("history.favorites")),3)]),i.value==="history"?(w(),E("div",wE,[s("div",xE,[s("button",{class:"refresh-btn",onClick:ce},W[14]||(W[14]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),he(s("input",{type:"text","onUpdate:modelValue":W[2]||(W[2]=C=>n.value=C),placeholder:f(t)("history.search_placeholder"),onInput:re,class:"search-input"},null,40,SE),[[Ae,n.value]]),y.value?he((w(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":W[3]||(W[3]=C=>S.value=C),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[Lt,S.value]]):de("",!0),y.value?de("",!0):(w(),E("button",{key:1,class:"bulk-delete-btn",onClick:U,title:f(t)("history.bulk_delete")},W[15]||(W[15]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,TE)),y.value?(w(),E("button",{key:2,class:"bulk-delete-btn",onClick:Z,title:f(t)("history.sure_delete"),disabled:u.value.length===0},W[16]||(W[16]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,kE)):de("",!0),y.value?(w(),E("button",{key:3,class:"bulk-delete-btn",onClick:V,title:f(t)("history.cancel_delete")},W[17]||(W[17]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,CE)):de("",!0)]),s("ul",EE,[(w(!0),E(De,null,ze(a.value,C=>(w(),E("li",{key:C.id_index,class:"history-item"},[s("span",null,g($(C.tag)),1),s("div",$E,[s("button",{onClick:b=>G(C),class:"favorite-btn",title:f(t)("history.add_to_favorites")},W[18]||(W[18]=[s("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,LE),s("button",{onClick:b=>se(C),class:"delete-favorite-btn",title:f(t)("history.delete_history")},W[19]||(W[19]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,AE),s("button",{onClick:b=>L(C),class:"use-btn",title:f(t)("history.use_item")},W[20]||(W[20]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,ME),y.value?he((w(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":W[4]||(W[4]=b=>u.value=b),value:C.id_index,class:"tag-checkbox"},null,8,IE)),[[Lt,u.value]]):de("",!0)])]))),128))])])):(w(),E("div",DE,[s("div",RE,[s("button",{class:"refresh-btn",onClick:ae},W[21]||(W[21]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),he(s("input",{type:"text","onUpdate:modelValue":W[5]||(W[5]=C=>n.value=C),placeholder:f(t)("history.search_placeholder"),onInput:ge,class:"search-input"},null,40,OE),[[Ae,n.value]]),y.value?he((w(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":W[6]||(W[6]=C=>S.value=C),value:1,class:"tag-checkbox",onChange:ne},null,544)),[[Lt,S.value]]):de("",!0),s("button",{class:"add-his-btn",onClick:Y,title:f(t)("history.add_new")},W[22]||(W[22]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[s("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)]),8,NE),y.value?de("",!0):(w(),E("button",{key:1,class:"bulk-delete-btn",onClick:U,title:f(t)("history.bulk_delete")},W[23]||(W[23]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,PE)),y.value?(w(),E("button",{key:2,class:"bulk-delete-btn",onClick:te,title:f(t)("history.sure_delete"),disabled:u.value.length===0},W[24]||(W[24]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,FE)):de("",!0),y.value?(w(),E("button",{key:3,class:"bulk-delete-btn",onClick:V,title:f(t)("history.cancel_delete")},W[25]||(W[25]=[s("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[s("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),s("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,BE)):de("",!0)]),s("ul",UE,[(w(!0),E(De,null,ze(r.value,C=>(w(),E("li",{key:C.id_index,class:"history-item"},[s("div",{class:"favor-name-box",style:dt({backgroundColor:C.color||"transparent"})},[C.name.length>0?(w(),E("span",VE,g(C.name),1)):de("",!0)],4),s("span",null,g($(C.tag)),1),s("div",WE,[s("button",{onClick:b=>P(C),class:"delete-favorite-btn",title:f(t)("history.edit_favorite")},W[26]||(W[26]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)]),8,zE),s("button",{onClick:b=>N(C),class:"delete-favorite-btn",title:f(t)("history.delete_favorite")},W[27]||(W[27]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[s("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,HE),s("button",{onClick:b=>L(C),class:"use-btn",title:f(t)("history.use_favorite")},W[28]||(W[28]=[s("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[s("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,jE),y.value?he((w(),E("input",{key:0,type:"checkbox","onUpdate:modelValue":W[7]||(W[7]=b=>u.value=b),value:C.id_index,class:"tag-checkbox"},null,8,GE)),[[Lt,u.value]]):de("",!0)])]))),128))])])),p.value?(w(),E("div",qE,[s("div",{class:"weilin-tools-dialog-content",onMousedown:W[12]||(W[12]=Je(()=>{},["stop"]))},[s("div",KE,[s("h2",null,g(c.value?f(t)("history.dialog.edit_tag"):f(t)("history.dialog.add_tag")),1),s("button",{class:"close-btn",onClick:j},"")]),s("div",YE,[s("div",JE,[s("label",null,g(f(t)("history.dialog.name")),1),he(s("input",{type:"text","onUpdate:modelValue":W[8]||(W[8]=C=>m.value.name=C),placeholder:f(t)("history.dialog.name_placeholder")},null,8,XE),[[Ae,m.value.name]])]),s("div",QE,[s("label",null,g(f(t)("history.dialog.tag")),1),he(s("textarea",{"onUpdate:modelValue":W[9]||(W[9]=C=>m.value.tag=C),placeholder:f(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,ZE),[[Ae,m.value.tag]])]),s("div",e$,[s("label",null,g(f(t)("history.dialog.background_color")),1),s("div",t$,[s("div",{class:"color-preview",style:dt({backgroundColor:I.previewColor})},null,4),s("div",n$,[he(s("input",{type:"color","onUpdate:modelValue":W[10]||(W[10]=C=>v.value.hex=C),onInput:H,class:"color-input"},null,544),[[Ae,v.value.hex]]),s("div",o$,[he(s("input",{type:"range","onUpdate:modelValue":W[11]||(W[11]=C=>v.value.alpha=C),min:"0",max:"100",onInput:H,class:"alpha-slider"},null,544),[[Ae,v.value.alpha,void 0,{number:!0}]]),s("span",a$,g(v.value.alpha)+"%",1)])])])])]),s("div",l$,[s("button",{class:"cancel-btn",onClick:j},g(f(t)("common.cancel")),1),s("button",{class:"confirm-btn",onClick:B},g(f(t)("common.confirm")),1)])],32)])):de("",!0),d.value?(w(),E("div",s$,[s("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:W[13]||(W[13]=Je(()=>{},["stop"]))},[s("div",r$,[s("h2",null,g(f(t)("common.confirmDelete")),1),s("button",{class:"close-btn",onClick:F},"")]),s("div",i$,[s("p",u$,g(ye.value),1)]),s("div",c$,[s("button",{class:"cancel-btn",onClick:F},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("common.delete")),1)])],32)])):de("",!0)]))}},[["__scopeId","data-v-31204146"]]),p$={key:0,class:"drop-zone"},f$={key:1,class:"preview-container"},g$=["srcdoc"],m$={class:"action-buttons"},Kg="weilin_tools_",v$=_t({__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:n}){const{t:o}=ht(),a=h(!1),l=h(""),r=h(null),i={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},p=h((()=>{try{const K=localStorage.getItem(`${Kg}tranToWebState`);if(K){const X=JSON.parse(K),ye={...i};return X.tranToWeb&&(ye.tranToWeb={...i.tranToWeb,...X.tranToWeb}),ye}}catch(K){console.error("Error loading window states:",K)}return{...i}})());ot(p,K=>{try{localStorage.setItem(`${Kg}tranToWebState`,JSON.stringify(K))}catch(X){console.error("Error saving window states:",X)}},{deep:!0}),mt(()=>{Ue.registerWindow("tranToWeb")}),Mn(()=>{Ue.unregisterWindow("tranToWeb")});const d=K=>{a.value=!1},c=(K,X)=>{p.value[K]&&(p.value[K].position={...X})},v=(K,X)=>{p.value[K]&&(p.value[K].size={...X})},m=()=>{a.value=!0,Ue.setActiveWindow("tranToWeb")},y=K=>{K.dataTransfer.dropEffect="copy"},S=K=>{const X=K.dataTransfer.files[0];X&&X.type.startsWith("image/")&&T(X)},$=K=>{const X=K.clipboardData.items;for(let ye=0;ye<X.length;ye++)if(X[ye].type.startsWith("image/")){const se=X[ye].getAsFile();T(se);break}},T=K=>{const X=new FileReader;X.onload=ye=>{const se=ye.target.result,N=btoa(se);r.value=N,D()},X.readAsDataURL(K)},D=()=>{l.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 
                    try {
                        const encryptedData = "${r.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error(':', e);
                        document.body.innerHTML = '<p></p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},Y=()=>{const K=new Blob([l.value],{type:"text/html"}),X=URL.createObjectURL(K),ye=document.createElement("a");ye.href=X,ye.download="image-to-html.html",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(X)},x=()=>{l.value="",r.value=null},P=h(null),H=()=>{l.value||P.value.click()},j=K=>{const X=K.target.files[0];X&&X.type.startsWith("image/")&&T(X)};return t({open:m}),(K,X)=>a.value?(w(),xt(Tn,{key:0,title:f(o)("utils.tranToWeb"),position:p.value.tranToWeb.position,size:p.value.tranToWeb.size,"z-index":f(Ue).getZIndex("tranToWeb"),"onUpdate:position":X[0]||(X[0]=ye=>c("tranToWeb",ye)),"onUpdate:size":X[1]||(X[1]=ye=>v("tranToWeb",ye)),onActive:X[2]||(X[2]=ye=>f(Ue).setActiveWindow("tranToWeb")),onClose:X[3]||(X[3]=ye=>d())},{default:it(()=>[s("div",{class:"utils_tran_web__content",onDragover:Je(y,["prevent"]),onDrop:Je(S,["prevent"]),onPaste:$,onClick:H},[l.value?(w(),E("div",f$,[s("iframe",{srcdoc:l.value,class:"html-preview"},null,8,g$),s("div",m$,[s("button",{onClick:Y},g(f(o)("utils.downloadHtml")),1),s("button",{onClick:x},g(f(o)("utils.clear")),1)])])):(w(),E("div",p$,g(f(o)("utils.dropOrPasteImage")),1)),s("input",{type:"file",ref_key:"fileInput",ref:P,style:{display:"none"},accept:"image/*",onChange:j},null,544)],32)]),_:1},8,["title","position","size","z-index"])):de("",!0)}},[["__scopeId","data-v-3647b8ec"]]),h$=["onMouseenter","onMouseleave","onMousedown","onMouseup"],_$=_t({__name:"FloatingBall",setup(e){const{t}=ht(),n=h(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),o=h(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),a=h(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||o.value),l=h(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),r=h(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),i=h(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),u=h(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),p=h(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),d=h(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);n.value<1&&(n.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value)),o.value<5&&(o.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value)),a.value<5&&(a.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",a.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",o.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",o.value);const c=h([]),v=h([]),m=h([]),y=h([]),S=h(null),$=vt(()=>y.value.map(se=>{const N={...se};return l.value==="custom"&&r.value?(N.backgroundImage=`url(${r.value})`,N.backgroundSize="contain",N.backgroundRepeat="no-repeat",N.backgroundPosition="center",N.imageRendering="optimizeQuality"):i.value==="gradient"?N.background=`linear-gradient(135deg, ${u.value}, ${p.value})`:N.background="transparent",N.borderRadius=`${d.value}%`,N}));for(let se=0;se<n.value;se++){m.value[se]=!1,v.value[se]=!1;const N=window.innerWidth,Z=window.innerHeight,te=o.value,z=a.value,ne=10,oe=Math.floor(N/(te+ne)),F=Math.floor(se/oe);let ie=20+se%oe*(te+ne),Ce=Z-100-F*(z+ne);ie=Math.max(0,ie),ie=Math.min(ie,N-te),Ce=Math.max(0,Ce),Ce=Math.min(Ce,Z-z),c.value[se]={x:ie,y:Ce,width:te+"px",height:z+"px"},y.value[se]={left:`${c.value[se].x}px`,top:`${c.value[se].y}px`,width:`${te}px`,height:`${z}px`}}const T=(se,N)=>{se.target.closest(".weilin_prompt_ui_floating-ball")&&(v.value[N]=!0,document.addEventListener("mousemove",te=>D(te,N)),document.addEventListener("mouseup",te=>Y(te,N)))},D=(se,N)=>{if(v.value[N]){const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value;let oe=se.clientX-z/2,F=se.clientY-ne/2;oe=Math.max(0,oe),oe=Math.min(oe,Z-z),F=Math.max(0,F),F=Math.min(F,te-ne),c.value[N]={x:oe,y:F,width:z+"px",height:ne+"px"},y.value[N]={left:`${c.value[N].x}px`,top:`${c.value[N].y}px`,width:`${z}px`,height:`${ne}px`}}},Y=(se,N)=>{v.value[N]=!1,document.removeEventListener("mousemove",Z=>D(Z,N)),document.removeEventListener("mouseup",Z=>Y(Z,N))},x=()=>{},P=se=>{switch(se){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":j();break;case"item8":S.value.open();break}},H=h(),j=()=>{H.value.open()},K=se=>{if(se.data.type==="weilin_prompt_ui_floating_ball_setting"){n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||o.value,l.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",r.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",i.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",u.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",p.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",d.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,m.value=[],v.value=[],c.value=[],y.value=[];for(let N=0;N<n.value;N++){m.value[N]=!1,v.value[N]=!1;const Z=window.innerWidth,te=window.innerHeight,z=o.value,ne=a.value,oe=10,F=Math.floor(Z/(z+oe)),B=Math.floor(N/F);let Ce=20+N%F*(z+oe),re=te-100-B*(ne+oe);Ce=Math.max(0,Ce),Ce=Math.min(Ce,Z-z),re=Math.max(0,re),re=Math.min(re,te-ne),c.value[N]={x:Ce,y:re,width:z+"px",height:ne+"px"},y.value[N]={left:`${c.value[N].x}px`,top:`${c.value[N].y}px`,width:`${z}px`,height:`${ne}px`,...l.value==="custom"&&r.value?{backgroundImage:`url(${r.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:i.value==="gradient"?{background:`linear-gradient(135deg, ${u.value}, ${p.value})`}:{background:"transparent"},borderRadius:`${d.value}%`}}}},X=se=>{m.value[se]=!0},ye=se=>{m.value[se]=!1};return mt(()=>{window.addEventListener("message",K)}),Mn(()=>{window.removeEventListener("message",K),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",Y)}),(se,N)=>(w(),E(De,null,[(w(!0),E(De,null,ze(n.value,Z=>(w(),E("div",{class:"weilin_prompt_ui_floating-ball",style:dt($.value[Z-1]),onMouseenter:te=>X(Z-1),onMouseleave:te=>ye(Z-1),onMousedown:te=>T(te,Z-1),onMouseup:te=>Y(te,Z-1),key:"floating-ball-"+Z},[s("div",{class:"weilin_prompt_ui_ball-content",onClick:x},g(l.value==="default"?"WeiLin":""),1),m.value[Z-1]?(w(),E("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:N[8]||(N[8]=Je(()=>{},["stop"]))},[s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[0]||(N[0]=te=>P("item1"))},g(f(t)("floatingBall.promptBox")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[1]||(N[1]=te=>P("item2"))},g(f(t)("floatingBall.tagManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[2]||(N[2]=te=>P("item3"))},g(f(t)("floatingBall.loraManager")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[3]||(N[3]=te=>P("item4"))},g(f(t)("floatingBall.aiWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[4]||(N[4]=te=>P("item6"))},g(f(t)("floatingBall.openNodeListWindow")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[5]||(N[5]=te=>P("item7"))},g(f(t)("floatingBall.tranToWeb")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[6]||(N[6]=te=>P("item8"))},g(f(t)("floatingBall.openSetting")),1),s("div",{class:"weilin_prompt_ui_menu-item",onClick:N[7]||(N[7]=te=>P("item5"))},g(f(t)("floatingBall.restoreWindow")),1)],32)):de("",!0)],44,h$))),128)),Ve(v$,{ref_key:"tranToWebRef",ref:H},null,512),Ve(xf,{ref_key:"settingDialog",ref:S},null,512)],64))}},[["__scopeId","data-v-c0790e8c"]]),y$={class:"ai-chat-window"},b$={class:"history-sidebar"},w$={class:"history-list"},x$=["onClick"],S$={key:0},T$=["onKeyup","onBlur"],k$={class:"item-actions"},C$=["onClick"],E$=["onClick"],$$={class:"chat-main"},L$={class:"message-list"},A$={class:"message-content"},M$={key:0,class:"message assistant"},I$={class:"message-content"},D$={class:"input-area"},R$=["placeholder","onKeydown"],O$=["disabled"],N$=_t({__name:"ai_window",setup(e){const{t}=ht(),n=h([]),o=h(-1),a=h(""),l=h(!1),r=h({}),i=h(!1),u=h(""),p=P=>{var H;n.value[P]&&(i.value=!0,u.value=((H=n.value[P])==null?void 0:H.title)||` ${P+1}`,o.value=P)},d=P=>{n.value[P]&&(u.value.trim()&&(n.value[P].title=u.value.trim(),T()),i.value=!1)},c=()=>{i.value=!1},v=()=>{Cl.getOpenAiSetting().then(P=>{r.value=P.data}).catch(P=>{J({type:"warn",str:"message.networkError"})})};mt(()=>{v()});const m=vt(()=>n.value[o.value]||{messages:[]}),y=P=>{o.value=P},S=()=>{l.value=!0;const P={title:` ${n.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return n.value.push(P),o.value=n.value.length-1,T(),l.value=!1,P},$=()=>{const P=localStorage.getItem("aiChatHistory");P&&(n.value=JSON.parse(P))},T=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(n.value))};mt(()=>{v(),$()});const D=async()=>{if(!a.value.trim()||l.value)return;(n.value.length===0||o.value===-1)&&S();const P={role:"user",content:a.value,timestamp:new Date().toISOString()};m.value.messages.push(P),T(),a.value="";const H={role:"assistant",content:"",timestamp:new Date().toISOString()};m.value.messages.push(H),T(),l.value=!0;try{await x({messages:m.value.messages},j=>{const K=m.value.messages[m.value.messages.length-1];K.content+=j.content,T()},j=>{console.error("Error:",j);const K=m.value.messages[m.value.messages.length-1];K.content="",T()},()=>{l.value=!1,T()})}catch(j){console.error("Error:",j),l.value=!1;const K=m.value.messages[m.value.messages.length-1];K.content="",T()}},Y=P=>{n.value.splice(P,1),o.value===P&&(o.value=Math.max(0,P-1)),T()},x=async(P,H,j,K)=>{var X,ye;try{const se=await fetch(r.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.value.api_key}`},body:JSON.stringify({model:r.value.model,messages:P.messages,stream:!0})});if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);const N=se.body.getReader(),Z=new TextDecoder;let te="";for(;;){const{done:z,value:ne}=await N.read();if(z){K();break}te+=Z.decode(ne,{stream:!0});const oe=te.split(`
`);te=oe.pop();for(const F of oe)if(F.trim()!==""){if(F==="data: [DONE]"){K();return}try{const B=F.replace(/^data: /,""),Ce=((ye=(X=JSON.parse(B).choices[0])==null?void 0:X.delta)==null?void 0:ye.content)||"";Ce&&H({content:Ce})}catch{console.error("Failed to parse message:",F)}}}}catch(se){j(se)}};return(P,H)=>(w(),E("div",y$,[s("div",b$,[s("button",{class:"new-chat-btn",onClick:S},g(f(t)("aiWindow.newChat")),1),s("div",w$,[(w(!0),E(De,null,ze(n.value,(j,K)=>(w(),E("div",{key:K,class:Le(["history-item",{active:o.value===K}]),onClick:X=>y(K)},[!i.value||o.value!==K?(w(),E("span",S$,g((j==null?void 0:j.title)||f(t)("aiWindow.chatName")+` ${K+1}`),1)):he((w(),E("input",{key:1,"onUpdate:modelValue":H[0]||(H[0]=X=>u.value=X),onKeyup:[an(X=>d(K),["enter"]),an(c,["esc"])],onBlur:X=>d(K),class:"rename-input"},null,40,T$)),[[Ae,u.value]]),s("div",k$,[s("button",{class:"rename-btn",onClick:Je(X=>p(K),["stop"])},"",8,C$),i.value?de("",!0):(w(),E("button",{key:0,class:"delete-btn",onClick:Je(X=>Y(K),["stop"])},"",8,E$))])],10,x$))),128))])]),s("div",$$,[s("div",L$,[(w(!0),E(De,null,ze(m.value.messages,(j,K)=>(w(),E("div",{key:K,class:Le(["message",j.role])},[s("div",A$,[s("pre",null,g(j.content),1)])],2))),128)),l.value?(w(),E("div",M$,[s("div",I$,[s("pre",null,g(f(t)("aiWindow.thinking")),1)])])):de("",!0)]),s("div",D$,[he(s("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":H[1]||(H[1]=j=>a.value=j),placeholder:f(t)("aiWindow.inputMessage"),onKeydown:an(Je(D,["exact","prevent"]),["enter"])},null,40,R$),[[Ae,a.value]]),s("button",{class:"ai-chat-btn",onClick:D,disabled:l.value},g(f(t)("aiWindow.send")),9,O$)])])]))}},[["__scopeId","data-v-5271cf26"]]),P$={class:"lora-info"},F$={class:"lora-header"},B$=["title"],U$={class:"lora-weights"},V$={class:"weight-item"},W$=["title"],z$={class:"weight-item"},H$={class:"center-box"},j$=["onClick"],or="weilin_prompt_ui_",G$=_t({__name:"index",setup(e){const{t}=ht(),n=h([]);window.addEventListener("message",a=>{a.data.type==="weilin_prompt_ui_update_node_list_info"&&(n.value=a.data.nodeList)});const o=a=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:a},"*")};return mt(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(a,l)=>(w(),E("div",{class:Le(`${or}lora-stack`)},[s("div",{class:Le(`${or}lora-content`)},[s("div",{class:Le(`${or}lora-body`)},[s("div",{class:Le(`${or}lora-list`)},[(w(!0),E(De,null,ze(n.value,r=>(w(),E("div",{key:r.id,class:"lora-item"},[s("div",P$,[s("div",F$,[s("span",{class:"lora-name",title:r.title},"#"+g(r.id)+" - "+g(r.title),9,B$)]),s("div",U$,[s("div",V$,[s("div",{class:"text-label",title:r.text},g(r.text),9,W$)]),s("div",z$,[s("div",H$,[s("button",{onClick:i=>o(r.seed),class:"open-button"},g(f(t)("nodeListWindow.openPromptUI")),9,j$)])])])])]))),128))],2)],2)],2)],2))}},[["__scopeId","data-v-43ee045e"]]),du={getTreeFromCloud:async e=>await Ie({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await Ie({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await Ie({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},q$={class:"cloud-manager"},K$={class:"toolbar"},Y$={class:"current-path"},J$={class:"file-list"},X$={class:"file-info"},Q$={class:"file-name"},Z$={class:"file-type"},eL={class:"file-actions"},tL=["onClick"],nL={key:1,class:"install-container"},oL={key:0,class:"installed-badge"},aL=["onClick","disabled"],lL=_t({__name:"index",setup(e){const{t}=ht(),n=h([]),o=h("tags"),a=h("tags"),l=h([]),r=async S=>{try{const $=await du.getTreeFromCloud(S);n.value=$.data}catch($){console.error(":",$),J({type:"warn",str:"message.networkError"})}},i=async()=>{try{const S=await du.getLocalInstallPackage();l.value=S.data||[]}catch(S){console.error(":",S),J({type:"warn",str:"message.networkError"})}},u=S=>l.value.some($=>$===S),p=async S=>{try{const $=n.value.find(T=>T.path===S);$&&($.isInstalling=!0,await du.installSelectPackage(a.value,[S]).then(()=>{i(),J({type:"success",str:"message.installPackageSuccess"})}))}catch($){console.error(":",$),J({type:"warn",str:"message.installPackageFail"})}finally{const $=n.value.find(T=>T.path===S);$&&($.isInstalling=!1)}},d=()=>{const S=o.value.split("/");S.length>1&&(o.value=S.slice(0,-1).join("/"),r(o.value))},c=()=>{r(o.value),i()},v=S=>{o.value=S,r(S)},m=()=>{a.value="tags",o.value="tags",r(o.value)},y=()=>{a.value="danbooru",o.value="danbooru",r(o.value)};return mt(()=>{r(o.value),i()}),(S,$)=>(w(),E("div",q$,[s("div",K$,[s("button",{class:"refresh-btn",onClick:c},$[0]||($[0]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),s("button",{class:"database-btn",onClick:m},[$[1]||($[1]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),s("span",null,g(f(t)("cloudWindow.tagDatabase")),1)]),s("button",{class:"database-btn",onClick:y},[$[2]||($[2]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),s("span",null,g(f(t)("cloudWindow.danbooruDatabase")),1)]),s("div",Y$,[s("span",null,g(f(t)("cloudWindow.currentPath"))+": "+g(a.value=="tags"?f(t)("cloudWindow.tagDatabase"):f(t)("cloudWindow.danbooruDatabase")),1)])]),s("div",J$,[o.value!=="tags"&&o.value!=="danbooru"?(w(),E("button",{key:0,class:"back-btn",onClick:d},[$[3]||($[3]=s("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[s("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),je(" "+g(f(t)("cloudWindow.back")),1)])):de("",!0),(w(!0),E(De,null,ze(n.value,T=>(w(),E("div",{key:T.path,class:"file-item"},[s("div",X$,[s("span",Q$,g(T.name),1),s("span",Z$,g(T.type=="dir"?"":T.type=="file"?"":""),1)]),s("div",eL,[T.type==="dir"?(w(),E("button",{key:0,onClick:D=>v(T.path),class:"open-btn"},g(f(t)("cloudWindow.open")),9,tL)):T.type==="file"?(w(),E("div",nL,[u(T.path)?(w(),E("span",oL,g(f(t)("cloudWindow.installed")),1)):(w(),E("button",{key:1,onClick:D=>p(T.path),class:"install-btn",disabled:T.isInstalling},g(T.isInstalling?f(t)("cloudWindow.installing"):f(t)("cloudWindow.install")),9,aL))])):de("",!0)])]))),128))])]))}},[["__scopeId","data-v-026f0961"]]),sL={class:"header-actions"},rL=["title"],iL=["onMouseover","onDragstart","onDrop"],uL={class:"lora-info"},cL={class:"lora-header"},dL=["title"],pL={class:"lora-actions"},fL=["onClick","title"],gL=["onClick","title"],mL={class:"lora-weights-row"},vL={class:"weight-item-col"},hL=["onUpdate:modelValue"],_L={class:"weight-item-col"},yL=["onUpdate:modelValue"],bL={class:"switch-item-col"},wL={class:"switch"},xL=["checked","onChange"],Ra="weilin_prompt_ui_",SL=_t({__name:"lora_stack",setup(e,{expose:t}){const{t:n}=ht(),o=h([]),a=h(""),l=h(!1),r=h(""),i=h(100),u=h(0),p=h(),d=h(!1),c=h(!1),v=h(),m=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:a.value},"*")},y=N=>{N.hidden=!N.hidden},S=(N,Z)=>{if(c.value=!0,r.value===N&&l.value)return;const z=Z.currentTarget.getBoundingClientRect();let oe={left:z.left-450-10,top:z.top};oe.left<10&&(oe.left=z.right+10),oe.top=Math.max(10,Math.min(oe.top,window.innerHeight-310)),i.value=oe.left,u.value=oe.top,l.value=!0,r.value=N,qe(()=>{v.value.refresh()})},$=()=>{c.value=!1,setTimeout(()=>{!d.value&&!c.value&&(l.value=!1,r.value="",d.value=!1)},200)},T=()=>{d.value=!0,c.value=!0},D=()=>{l.value=!1,r.value="",d.value=!1},Y=N=>{o.value.find(Z=>Z.name===N.name)||o.value.push({name:N.name,weight:1,text_encoder_weight:1,...N})},x=N=>{const Z=o.value.findIndex(te=>te.name===N.name);Z>-1&&o.value.splice(Z,1)},P=h(),H=N=>{P.value.open({name:N.lora})};window.addEventListener("message",N=>{N.data.type==="weilin_prompt_ui_selectLora_stack_"+a.value&&Y(N.data.lora)});const j=(N,Z)=>{if(a.value=Z,N.length>0)try{const te=JSON.parse(N);if(te.lora&&te.lora!=""&&(o.value=te.lora),te.temp_lora&&te.temp_lora.length>0&&te.temp_lora!=""){const z=te.temp_lora;o.value=z}}catch{J({type:"warn",str:"promptBox.settings.errorPrompt"})}};ot(o,N=>{K()},{deep:!0});const K=()=>{if(o.value.length>0){const N=o.value.filter(z=>!z.hidden);let Z={lora:"",temp_lora:o.value};N.length>0&&(Z.lora=N);const te=JSON.stringify(Z);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:te},"*")}else{const Z=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:Z},"*")}},X=h(null),ye=N=>{X.value=N},se=N=>{if(X.value===null||X.value===N)return;const Z=o.value.splice(X.value,1)[0];o.value.splice(N,0,Z),X.value=null,K()};return t({initLoraStack:j}),(N,Z)=>(w(),E("div",{class:Le(`${Ra}lora-stack`)},[s("div",{class:Le(`${Ra}lora-content`)},[s("div",{class:Le(`${Ra}lora-header`)},[s("div",sL,[s("button",{class:Le(`${Ra}add-btn`),onClick:m,title:f(n)("controls.addLora")},Z[1]||(Z[1]=[s("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,rL)])],2),s("div",{class:Le(`${Ra}lora-body`)},[s("div",{class:Le(`${Ra}lora-list`)},[(w(!0),E(De,null,ze(o.value,(te,z)=>(w(),E("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:p,key:te.name,class:Le(["lora-item",{"hidden-lora":te.hidden}]),onMouseover:ne=>S(te.lora,ne),onMouseleave:$,draggable:"true",onDragstart:ne=>ye(z),onDragover:Z[0]||(Z[0]=Je(()=>{},["prevent"])),onDrop:ne=>se(z)},[s("div",uL,[s("div",cL,[s("span",{class:"lora-name",title:te.name},g(te.name),9,dL),s("div",pL,[s("button",{class:"look-on-btn",onClick:ne=>H(te),title:f(n)("controls.lookOnLora")},Z[2]||(Z[2]=[s("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[s("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),s("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),s("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),s("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,fL),s("button",{class:"remove-btn",onClick:ne=>x(te),title:f(n)("controls.removeLora")},Z[3]||(Z[3]=[s("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,gL)])]),s("div",mL,[s("div",vL,[s("label",null,g(f(n)("loraManager.modelWeight")),1),he(s("input",{type:"number","onUpdate:modelValue":ne=>te.weight=ne,class:"lora-weight",step:"0.1"},null,8,hL),[[Ae,te.weight]])]),s("div",_L,[s("label",null,g(f(n)("loraManager.textEncoderWeight")),1),he(s("input",{type:"number","onUpdate:modelValue":ne=>te.text_encoder_weight=ne,class:"lora-weight",step:"0.1"},null,8,yL),[[Ae,te.text_encoder_weight]])]),s("div",bL,[s("label",null,g(te.hidden?f(n)("lora.hideLora"):f(n)("lora.showLora")),1),s("label",wL,[s("input",{type:"checkbox",checked:!te.hidden,onChange:ne=>y(te)},null,40,xL),Z[4]||(Z[4]=s("span",{class:"slider"},null,-1))])])])])],42,iL))),128))],2)],2)],2),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:P},null,512),l.value?(w(),xt(uu,{key:0,ref_key:"loraCardItem",ref:v,fileNmae:r.value,paddingLeft:i.value,paddingTop:u.value,onCardLeave:D,onCardenter:T},null,8,["fileNmae","paddingLeft","paddingTop"])):de("",!0)],2))}},[["__scopeId","data-v-c2ab38ea"]]),Oa={searchDanbooru:async(e="",t=1,n=100)=>await Ie({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:n}}),addDanbooruTag:async e=>await Ie({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await Ie({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await Ie({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await Ie({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await Ie({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},TL={key:0,class:"loading-overlay"},kL={class:"settings-content"},CL={style:{"margin-bottom":"16px"}},EL=["placeholder"],$L={style:{"margin-bottom":"16px"}},LL=["placeholder"],AL=["placeholder"],ML=["placeholder"],IL={class:"data-container"},DL={key:0},RL={key:0},OL={class:"tag-group-container"},NL={key:0},PL={key:1},FL={style:{display:"flex","align-items":"center"}},BL={key:0},UL=["placeholder"],VL=["placeholder"],WL=["placeholder"],zL=["placeholder"],HL=["onClick"],jL=["onClick"],GL=["onClick"],qL={key:1},KL={class:"tag-group-container"},YL={key:0},JL={key:1},XL={style:{display:"flex","align-items":"center"}},QL={key:0},ZL=["placeholder"],eA=["placeholder"],tA=["placeholder"],nA=["placeholder"],oA=["onClick"],aA=["onClick"],lA=["onClick"],sA=_t({__name:"import_danbooru",setup(e,{expose:t}){const{t:n}=ht(),o=h(!1),a=h(""),l=h(""),r=h(""),i=h(""),u=h(""),p=h(""),d=h(""),c=h(""),v=h(""),m=h([]),y=h(-1),S=h(""),$=h(""),T=h(null);h(null);const D=h(null),Y=h(!1),x=h(""),P=h(0),H=h(0);function j(){a.value="",l.value="",P.value=0,H.value=0,r.value="",i.value="",u.value="",p.value="",d.value="",c.value="",v.value="",m.value=[],y.value=-1,S.value="",$.value="",Y.value=!1}function K(G){j();const L=G.target.files[0];if(L){const U=new FileReader;U.onload=V=>{V.target.result.split(";").filter(C=>C.trim()).forEach(C=>{if((C.includes("tag_groups")||C.includes("tag_subgroups"))&&C.includes("p_uuid"))if(C.includes("g_uuid")){u.value=C+";";const O=C.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);O&&(v.value=O[1]);const Q=C.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(d.value=Q[1].replace(/''/g,"'"))}else{i.value=C+";";const O=C.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);O&&(c.value=O[1]);const Q=C.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Q&&(p.value=Q[1].replace(/''/g,"'"))}else C.includes("tag_tags")&&m.value.push(C+";")})},U.readAsText(L)}G.target.value=""}function X(G){const L=G.target.files[0];if(L){const U=new FileReader;U.onload=V=>{V.target.result.split(`
`).filter(C=>C.trim()).forEach(C=>{const b=C.split(",");if(b.length>=2){let O,Q,pe,be;b.length===2?(O=b[0].trim(),be=b[1].trim(),Q=0,pe=0):b.length>=3&&(O=b[0].trim(),Q=parseInt(b[1].trim())||0,pe=parseInt(b[2].trim())||0,be=b.slice(3).join(",").trim(),be=be.replace(/^"(.*)"$/,"$1"));const A=O.replace(/'/g,"''"),_=be.replace(/'/g,"''"),R=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${A}', '', '${_}', ${pe}, ${Q});`;m.value.push(R)}})},U.readAsText(L)}G.target.value=""}function ye(){D.value.click()}function se(){let G;m.value.length>0&&Z(m.value[0])?G=[...m.value].join(`
`):G=[i.value,u.value,...m.value].join(`
`);const L=new Blob([G],{type:"text/sql"}),U=document.createElement("a");if(U.href=URL.createObjectURL(L),x.value.length<=0){const V=parseInt(new Date().getTime()/1e3);U.download="export_"+V+".sql"}else U.download=x.value+".sql";U.click()}function N(G){const L=G.match(/VALUES\s*\([^']*'([^']+)'/),U=G.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:L?L[1].replace(/''/g,"'"):"",desc:U?U[1].replace(/''/g,"'"):""}}function Z(G){return G.includes("danbooru_tag")}function te(G){const L=G.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return L?{tag:L[1].replace(/''/g,"'"),color_id:L[2],translate:L[3].replace(/''/g,"'"),hot:parseInt(L[4]),aliases:parseInt(L[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const z=h(0),ne=h(0);function oe(G){const L=m.value[G];if(Z(L)){const U=te(L);S.value=U.tag,$.value=U.translate,z.value=U.hot,ne.value=U.aliases}else{const U=N(L);S.value=U.text,$.value=U.desc}y.value=G}function F(G){const L=S.value.replace(/'/g,"''"),U=$.value.replace(/'/g,"''");if(Z(m.value[G])){const V=te(m.value[G]),I=parseInt(z.value)||0,W=parseInt(ne.value)||0;m.value[G]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${L}', '${V.color_id}', '${U}', ${I}, ${W});`}else m.value[G]=m.value[G].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${L}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${U}'`);y.value=-1}function B(){y.value=-1,S.value="",$.value="",z.value=0,ne.value=0}function ie(G){m.value.splice(G,1)}function Ce(){const G=a.value.replace(/'/g,"''"),L=l.value.replace(/'/g,"''"),U=parseInt(P.value)||0,V=parseInt(H.value)||0,I=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${G}', '', '${L}', ${U}, ${V});`;m.value.push(I),a.value="",l.value="",P.value=0,H.value=0}const re=h(!1),ge=async G=>{re.value=!0;try{await Oa.runSQLToServer(G).then(L=>{if(L.code!=200){J({type:"warn",str:L.message});return}else ce(),J({type:"success",str:"importDialog.successImport"})}).catch(L=>{console.error(L),J({type:"warn",str:"importDialog.importFail"})})}catch(L){console.error(L),J({type:"warn",str:"importDialog.importFail"})}finally{re.value=!1}},ce=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ae=async()=>{if(m.value.length>0&&Z(m.value[0])){const G=[...m.value];await ge(G)}else if(Y.value){if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const G=[...m.value];await ge(G)}else{if(i.value.length<=0||u.value.length<=0){J({type:"warn",str:"importDialog.pleaseFullRequest"});return}const G=[i.value,u.value,...m.value];await ge(G)}};return ot(i,(G,L)=>{var I,W;if(!G||G===L)return;const U=(I=G.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],V=(W=L==null?void 0:L.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:W[1];U&&V&&u.value&&(u.value=u.value.replace(new RegExp(`'${V}'`,"g"),`'${U}'`))}),ot(u,(G,L)=>{var I,W;if(!G||G===L)return;const U=(I=G.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:I[1],V=(W=L==null?void 0:L.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:W[1];U&&V&&m.value.length>0&&(m.value=m.value.map(C=>C.replace(new RegExp(`'${V}'`,"g"),`'${U}'`)))}),t({open:()=>{o.value=!0}}),(G,L)=>(w(),E(De,null,[re.value?(w(),E("div",TL,L[19]||(L[19]=[s("div",{class:"loading-spinner"},null,-1)]))):de("",!0),Ve(Ea,{modelValue:o.value,"onUpdate:modelValue":L[18]||(L[18]=U=>o.value=U),title:f(n)("danbooruManager.importBatchTitle")},{footer:it(()=>[s("button",{onClick:L[17]||(L[17]=U=>o.value=!1)},g(f(n)("promptBox.settings.close")),1),s("button",{onClick:ae},g(f(n)("importDialog.sure")),1)]),default:it(()=>[s("div",kL,[s("div",CL,[s("button",{onClick:j,class:"upload-btn"},g(f(n)("importDialog.cleanAll")),1),s("button",{style:{"margin-left":"10px"},onClick:se},g(f(n)("importDialog.dumpSQL")),1),he(s("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":L[0]||(L[0]=U=>x.value=U),placeholder:f(n)("importDialog.settingOutputName")},null,8,EL),[[Ae,x.value]]),s("input",{type:"file",ref_key:"fileInput",ref:T,onChange:K,accept:".sql",style:{display:"none"}},null,544),s("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:D,onChange:X,accept:".txt,.csv",style:{display:"none"}},null,544)]),s("div",$L,[he(s("input",{"onUpdate:modelValue":L[1]||(L[1]=U=>a.value=U),placeholder:"Tag"},null,512),[[Ae,a.value]]),he(s("input",{"onUpdate:modelValue":L[2]||(L[2]=U=>l.value=U),placeholder:f(n)("importDialog.translater")},null,8,LL),[[Ae,l.value]]),he(s("input",{"onUpdate:modelValue":L[3]||(L[3]=U=>P.value=U),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,AL),[[Ae,P.value]]),he(s("input",{"onUpdate:modelValue":L[4]||(L[4]=U=>H.value=U),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,ML),[[Ae,H.value]]),s("button",{onClick:Ce},g(f(n)("importDialog.add")),1),s("button",{style:{"margin-left":"10px"},onClick:ye,class:"upload-btn"},g(f(n)("danbooruManager.import")),1)]),s("div",IL,[i.value?(w(),E("div",DL,[s("h3",null,g(N(i.value).text),1),u.value?(w(),E("div",RL,[s("h4",null,g(N(u.value).text),1),s("div",OL,[(w(!0),E(De,null,ze(m.value,(U,V)=>(w(),E("div",{key:V,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(U)?(w(),E("p",NL,g(te(U).tag)+" - "+g(te(U).translate)+" ("+g(f(n)("danbooruManager.hot"))+": "+g(te(U).hot)+", "+g(f(n)("danbooruManager.aliases"))+": "+g(te(U).aliases)+")",1)):(w(),E("p",PL,g(N(U).text)+" - "+g(N(U).desc),1)),s("div",FL,[y.value===V?(w(),E("div",BL,[Z(U)?he((w(),E("input",{key:0,"onUpdate:modelValue":L[5]||(L[5]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]):he((w(),E("input",{key:1,"onUpdate:modelValue":L[6]||(L[6]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]),Z(U)?he((w(),E("input",{key:2,"onUpdate:modelValue":L[7]||(L[7]=I=>$.value=I),placeholder:f(n)("importDialog.translate")},null,8,UL)),[[Ae,$.value]]):he((w(),E("input",{key:3,"onUpdate:modelValue":L[8]||(L[8]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,VL)),[[Ae,$.value]]),Z(U)?he((w(),E("input",{key:4,"onUpdate:modelValue":L[9]||(L[9]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,WL)),[[Ae,z.value]]):de("",!0),Z(U)?he((w(),E("input",{key:5,"onUpdate:modelValue":L[10]||(L[10]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,zL)),[[Ae,ne.value]]):de("",!0),s("button",{onClick:I=>F(V)},g(f(n)("importDialog.sureYes")),9,HL),s("button",{style:{"margin-left":"10px"},onClick:B},g(f(n)("importDialog.cancel")),1)])):(w(),E("button",{key:1,onClick:I=>oe(V)},g(f(n)("importDialog.edit")),9,jL)),s("button",{style:{"margin-left":"10px"},onClick:I=>ie(V)},g(f(n)("importDialog.delete")),9,GL)])]))),128))])])):de("",!0)])):m.value.length>0?(w(),E("div",qL,[s("h3",null,g(f(n)("danbooruManager.importTitle")),1),s("div",KL,[(w(!0),E(De,null,ze(m.value,(U,V)=>(w(),E("div",{key:V,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Z(U)?(w(),E("p",YL,g(te(U).tag)+" - "+g(te(U).translate)+" (: "+g(te(U).hot)+", : "+g(te(U).aliases)+")",1)):(w(),E("p",JL,g(N(U).text)+" - "+g(N(U).desc),1)),s("div",XL,[y.value===V?(w(),E("div",QL,[Z(U)?he((w(),E("input",{key:0,"onUpdate:modelValue":L[11]||(L[11]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]):he((w(),E("input",{key:1,"onUpdate:modelValue":L[12]||(L[12]=I=>S.value=I),placeholder:"Tag"},null,512)),[[Ae,S.value]]),Z(U)?he((w(),E("input",{key:2,"onUpdate:modelValue":L[13]||(L[13]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,ZL)),[[Ae,$.value]]):he((w(),E("input",{key:3,"onUpdate:modelValue":L[14]||(L[14]=I=>$.value=I),placeholder:f(n)("importDialog.translater")},null,8,eA)),[[Ae,$.value]]),Z(U)?he((w(),E("input",{key:4,"onUpdate:modelValue":L[15]||(L[15]=I=>z.value=I),placeholder:f(n)("danbooruManager.hot"),type:"number"},null,8,tA)),[[Ae,z.value]]):de("",!0),Z(U)?he((w(),E("input",{key:5,"onUpdate:modelValue":L[16]||(L[16]=I=>ne.value=I),placeholder:f(n)("danbooruManager.aliases"),type:"number"},null,8,nA)),[[Ae,ne.value]]):de("",!0),s("button",{onClick:I=>F(V)},g(f(n)("importDialog.sureYes")),9,oA),s("button",{style:{"margin-left":"10px"},onClick:B},g(f(n)("importDialog.cancel")),1)])):(w(),E("button",{key:1,onClick:I=>oe(V)},g(f(n)("importDialog.edit")),9,aA)),s("button",{style:{"margin-left":"10px"},onClick:I=>ie(V)},g(f(n)("importDialog.delete")),9,lA)])]))),128))])])):de("",!0)])])]),_:1},8,["modelValue","title"])],64))}},[["__scopeId","data-v-d9630f57"]]),rA={class:"danbooru-manager"},iA={class:"title"},uA={class:"action-bar"},cA={class:"search-box"},dA=["placeholder"],pA=["disabled"],fA={class:"pagination"},gA=["disabled"],mA={class:"page-info"},vA=["disabled"],hA={class:"page-size-control"},_A={key:0,class:"tag-list"},yA={style:{"table-layout":"fixed",overflow:"auto"}},bA={class:"checkbox-column"},wA=["checked"],xA={class:"tag-column"},SA={class:"translate-column"},TA={class:"color-column"},kA={class:"hot-column"},CA={class:"aliases-column"},EA={class:"control-column"},$A=["value"],LA=["onClick"],AA=["onClick"],MA={key:1,class:"no-results"},IA={key:2,class:"weilin-tools-dialog"},DA={class:"weilin-tools-dialog-content"},RA={class:"form-group"},OA=["placeholder"],NA={class:"form-group"},PA=["placeholder"],FA={class:"form-group"},BA=["value"],UA={class:"form-group"},VA={key:0,class:"form-group"},WA={class:"weilin-tools-dialog-actions"},zA={key:3,class:"weilin-tools-dialog"},HA={class:"weilin-tools-dialog-content"},jA={class:"weilin-tools-dialog-actions"},GA={key:4,class:"weilin-tools-dialog"},qA={class:"weilin-tools-dialog-content"},KA={class:"weilin-tools-dialog-actions"},YA={key:5,class:"overlay"},JA=_t({__name:"danbooru_manager",setup(e){const{t}=ht(),n=h(""),o=h([]),a=h(1),l=h(1),r=h(100),i=h(!1),u=h(!1),p=h(!1),d=h(!1),c=h(!1),v=h(null),m=h({tag:"",translate:"",color_id:0,hot:0,aliases:0}),y=[{name:"",color:"#888888"},{name:"",color:"#FF6666"},{name:"",color:"#66FF66"},{name:"",color:"#6666FF"},{name:"",color:"#FFFF66"},{name:"",color:"#FF66FF"},{name:"",color:"#66FFFF"},{name:"",color:"#FF9966"},{name:"",color:"#FF99CC"},{name:"",color:"#996633"}],S=F=>y[F]?y[F].color:y[0].color;let $=null;const T=()=>{$&&clearTimeout($),$=setTimeout(()=>{a.value=1,D()},300)},D=async()=>{i.value=!0,se.value=[];try{const F=await Oa.searchDanbooru(n.value,a.value,r.value);F&&F.data?(o.value=F.data.data||[],l.value=F.data.total_pages||1):(o.value=[],l.value=1)}catch(F){console.error(":",F),J({type:"error",str:t("message.searchFailed")}),o.value=[]}finally{i.value=!1}},Y=F=>{F<1||F>l.value||(a.value=F,D())},x=()=>{r.value<10&&(r.value=10),r.value>500&&(r.value=500),a.value=1,se.value=[],D()},P=()=>{c.value=!1,m.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},u.value=!0},H=F=>{c.value=!0,v.value=F,m.value={id:F.id_index,tag:F.tag,translate:F.translate||"",color_id:F.color_id||0,hot:F.hot||0,aliases:F.aliases||0},u.value=!0},j=()=>{u.value=!1},K=async()=>{if(!m.value.tag){J({type:"error",str:t("tagManager.textRequired")});return}try{if(c.value){const F=await Oa.updateDanbooruTag({id:m.value.id,update_data:{tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases}});F&&F.code===200?(J({type:"success",str:t("message.editSuccess")}),D()):J({type:"error",str:t("message.editFailed")})}else{const F=await Oa.addDanbooruTag({tag:m.value.tag,translate:m.value.translate,color_id:m.value.color_id,hot:m.value.hot,aliases:m.value.aliases});F&&F.code===200?(J({type:"success",str:t("message.addSuccess")}),D()):J({type:"error",str:t("message.addFailed")})}j()}catch(F){console.error(":",F),J({type:"error",str:c.value?t("message.editFailed"):t("message.addFailed")})}},X=F=>{v.value=F,p.value=!0},ye=async()=>{if(!(!v.value||!v.value.id_index))try{const F=await Oa.deleteDanbooruTag(v.value.id_index);F&&F.code===200?(J({type:"success",str:t("message.deleteSuccess")}),D()):J({type:"error",str:t("message.deleteFailed")}),p.value=!1}catch(F){console.error(":",F),J({type:"error",str:t("message.deleteFailed")})}},se=h([]),N=vt(()=>o.value.length>0&&se.value.length===o.value.length),Z=()=>{N.value?se.value=[]:se.value=o.value.map(F=>F.id_index)},te=()=>{se.value.length!==0&&(d.value=!0)},z=async()=>{if(se.value.length!==0){try{const F=await Oa.batchDeleteDanbooruTags(se.value);F&&F.code===200?(J({type:"success",str:` ${se.value.length} `}),se.value=[],D()):J({type:"error",str:""})}catch(F){console.error(":",F),J({type:"error",str:""})}d.value=!1}},ne=h(),oe=()=>{ne.value.open()};return mt(()=>{D()}),(F,B)=>{var ie;return w(),E("div",rA,[s("h2",iA,g(f(t)("danbooruManager.title")),1),s("div",uA,[s("div",cA,[he(s("input",{"onUpdate:modelValue":B[0]||(B[0]=Ce=>n.value=Ce),type:"text",placeholder:f(t)("danbooruManager.searchPlaceholder"),onInput:T},null,40,dA),[[Ae,n.value]]),s("button",{class:"search-btn",onClick:D},g(f(t)("tagManager.search")),1)]),s("button",{class:"add-btn",onClick:P},g(f(t)("danbooruManager.add")),1),s("button",{class:"add-btn",onClick:oe},g(f(t)("tagManager.importDanbooru")),1),s("button",{class:Le(["batch-delete-btn",{disabled:se.value.length===0}]),disabled:se.value.length===0,onClick:te},g(f(t)("tagManager.hasDeleteAction"))+" ("+g(se.value.length)+") ",11,pA)]),s("div",fA,[s("button",{disabled:a.value<=1,onClick:B[1]||(B[1]=Ce=>Y(a.value-1)),class:"page-btn"},g(f(t)("loraManager.prevPage")),9,gA),s("span",mA,g(a.value)+" / "+g(l.value),1),s("button",{disabled:a.value>=l.value,onClick:B[2]||(B[2]=Ce=>Y(a.value+1)),class:"page-btn"},g(f(t)("loraManager.nextPage")),9,vA),s("div",hA,[s("label",null,g(f(t)("danbooruManager.pageShow")),1),he(s("input",{"onUpdate:modelValue":B[3]||(B[3]=Ce=>r.value=Ce),type:"number",min:"10",max:"500",onChange:x,class:"page-size-input"},null,544),[[Ae,r.value,void 0,{number:!0}]]),s("span",null,g(f(t)("danbooruManager.pageLimit")),1)])]),o.value.length>0?(w(),E("div",_A,[s("table",yA,[s("thead",null,[s("tr",null,[s("th",bA,[s("input",{type:"checkbox",checked:N.value,onChange:Z},null,40,wA)]),B[12]||(B[12]=s("th",{class:"id-column"},"ID",-1)),s("th",xA,g(f(t)("tagManager.description")),1),s("th",SA,g(f(t)("promptBox.translate")),1),s("th",TA,g(f(t)("tagManager.backgroundColor")),1),s("th",kA,g(f(t)("danbooruManager.hot")),1),s("th",CA,g(f(t)("danbooruManager.aliases")),1),s("th",EA,g(f(t)("danbooruManager.controle")),1)])]),s("tbody",null,[(w(!0),E(De,null,ze(o.value,Ce=>(w(),E("tr",{key:Ce.id_index},[s("td",null,[he(s("input",{type:"checkbox",value:Ce.id_index,"onUpdate:modelValue":B[4]||(B[4]=re=>se.value=re)},null,8,$A),[[Lt,se.value]])]),s("td",null,g(Ce.id_index),1),s("td",null,g(Ce.tag),1),s("td",null,g(Ce.translate),1),s("td",null,[s("div",{class:"color-box",style:dt({backgroundColor:S(Ce.color_id)})},null,4)]),s("td",null,g(Ce.hot),1),s("td",null,g(Ce.aliases),1),s("td",null,[s("button",{class:"edit-btn",onClick:re=>H(Ce)},g(f(t)("common.edit")),9,LA),s("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:re=>X(Ce)},g(f(t)("common.delete")),9,AA)])]))),128))])])])):(w(),E("div",MA,g(f(t)("tagManager.noResults")),1)),u.value?(w(),E("div",IA,[s("div",DA,[s("h3",null,g(c.value?f(t)("danbooruManager.edit"):f(t)("danbooruManager.add")),1),s("div",RA,[s("label",null,g(f(t)("tagManager.description")),1),he(s("input",{"onUpdate:modelValue":B[5]||(B[5]=Ce=>m.value.tag=Ce),type:"text",placeholder:f(t)("tagManager.descriptionPlaceholder")},null,8,OA),[[Ae,m.value.tag]])]),s("div",NA,[s("label",null,g(f(t)("promptBox.translate")),1),he(s("input",{"onUpdate:modelValue":B[6]||(B[6]=Ce=>m.value.translate=Ce),type:"text",placeholder:f(t)("danbooruManager.translatePlaceholder")},null,8,PA),[[Ae,m.value.translate]])]),s("div",FA,[s("label",null,g(f(t)("tagManager.backgroundColor")),1),he(s("select",{"onUpdate:modelValue":B[7]||(B[7]=Ce=>m.value.color_id=Ce)},[(w(),E(De,null,ze(y,(Ce,re)=>s("option",{key:re,value:re},g(Ce.name),9,BA)),64))],512),[[Gt,m.value.color_id]]),s("div",{class:"color-preview",style:dt({backgroundColor:S(m.value.color_id)})},null,4)]),s("div",UA,[B[13]||(B[13]=s("label",null,"Hot",-1)),he(s("input",{"onUpdate:modelValue":B[8]||(B[8]=Ce=>m.value.hot=Ce),type:"number",min:"0"},null,512),[[Ae,m.value.hot,void 0,{number:!0}]])]),c.value?de("",!0):(w(),E("div",VA,[B[14]||(B[14]=s("label",null,"Aliases",-1)),he(s("input",{"onUpdate:modelValue":B[9]||(B[9]=Ce=>m.value.aliases=Ce),type:"number",min:"0"},null,512),[[Ae,m.value.aliases,void 0,{number:!0}]])])),s("div",WA,[s("button",{onClick:j},g(f(t)("common.cancel")),1),s("button",{onClick:K},g(f(t)("common.save")),1)])])])):de("",!0),p.value?(w(),E("div",zA,[s("div",HA,[s("h3",null,g(f(t)("common.confirmDelete")),1),s("p",null,g(f(t)("tagManager.deleteTagConfirm",{name:((ie=v.value)==null?void 0:ie.tag)||""})),1),s("div",jA,[s("button",{onClick:B[10]||(B[10]=Ce=>p.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:ye},g(f(t)("common.delete")),1)])])])):de("",!0),d.value?(w(),E("div",GA,[s("div",qA,[s("h3",null,g(f(t)("danbooruManager.sureBatchDelete")),1),s("p",null,g(f(t)("danbooruManager.sureBatchDeleteTips1"))+" "+g(se.value.length)+" "+g(f(t)("danbooruManager.sureBatchDeleteTips2")),1),s("div",KA,[s("button",{onClick:B[11]||(B[11]=Ce=>d.value=!1)},g(f(t)("common.cancel")),1),s("button",{class:"delete-btn",onClick:z},g(f(t)("danbooruManager.sureDelete")),1)])])])):de("",!0),u.value||p.value||d.value?(w(),E("div",YA)):de("",!0),Ve(sA,{ref_key:"importDanbooruDialog",ref:ne},null,512)])}}},[["__scopeId","data-v-f19f168a"]]),XA={id:"weilin_comfyui_tools_prompt_ui_container_main"},QA={key:10,class:"version-update-notification"},ZA={class:"version-update-content"},Na="weilin_tools_",eM=_t({__name:"App",setup(e){Ds();const t=h(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:n}=ht(),o=h(""),a=h("look"),l=h("manager"),r=h("prompt_global"),i=h(!1),u=`${Na}theme`,p=h(localStorage.getItem(u)==="dark"),d=h(""),c=h(!1),v=h(""),m=h(null),y=`${Na}version_update_remind`,S=()=>{c.value=!1,m.value&&(clearTimeout(m.value),m.value=null)},$=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),S()},T=()=>{localStorage.setItem(y,"false"),S()},D={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},Y=()=>{try{const F=localStorage.getItem(`${Na}windowStates`);if(F){const B=JSON.parse(F),ie={...D};for(const Ce in B)Ce in ie&&(ie[Ce]={...D[Ce],...B[Ce],visible:B[Ce].is_default_close?!1:B[Ce].visible});return ie}}catch(F){console.error("Error loading window states:",F)}return{...D}},x=h(Y());ot(x,F=>{try{localStorage.setItem(`${Na}windowStates`,JSON.stringify(F))}catch(B){console.error("Error saving window states:",B)}},{deep:!0}),mt(()=>{Object.keys(x.value).forEach(F=>{Ue.registerWindow(F)}),P(),window.addEventListener("message",ne),oe()});const P=()=>{let F=localStorage.getItem(u);F||(localStorage.setItem(u,"dark"),F="dark",p.value=!0),p.value=F==="dark";const B=document.getElementById("weilin_comfyui_tools_prompt_ui_div");B&&B.setAttribute("data-theme",p.value?"dark":"light")};Mn(()=>{Object.keys(x.value).forEach(F=>{Ue.unregisterWindow(F)}),window.removeEventListener("message",ne),m.value&&(clearTimeout(m.value),m.value=null)});const H=F=>{F==="prompt"&&(o.value=""),x.value[F].visible=!1},j=(F,B)=>{x.value[F]&&(x.value[F].position={...B})},K=(F,B)=>{x.value[F]&&(x.value[F].size={...B})},X=()=>{const F={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},B={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${Na}windowStates`,JSON.stringify(B)),localStorage.setItem(`${Na}loraDetailState`,JSON.stringify(F)),x.value=Y()};(()=>{en.getTranslateSetting().then(F=>{localStorage.setItem("weilin_prompt_ui_translater_setting",F.data)}).catch(F=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const se=h(),N=h(),Z=h(),te=h(),z=h(),ne=F=>{F.data.type==="weilin_prompt_ui_openTagManager"?(l.value="manager",x.value.tag.visible=!0,Ue.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openTagManager_prompt"?(l.value="prompt",x.value.tag.visible=!0,Ue.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_openPromptBox"?(o.value=F.data.id,r.value="prompt",x.value.prompt.visible=!0,i.value=!1,F.data.node==="WeiLinPromptUI"&&(i.value=!0),qe(()=>{se.value.setPromptText(F.data.prompt)}),Ue.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_openLoraManager"?(a.value="look",x.value.lora.visible=!0,Ue.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(0,"")}),Ue.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(1,F.data.seed)}),Ue.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(a.value="addLora",x.value.lora.visible=!0,qe(()=>{Z.value.openSetSeed(2,F.data.seed)}),Ue.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_openHistoryManager"?(x.value.history.visible=!0,Ue.setActiveWindow("history")):F.data.type==="weilin_prompt_ui_openAiWindow"?(x.value.ai_window.visible=!0,Ue.setActiveWindow("ai_window")):F.data.type==="weilin_prompt_ui_open_node_list_window"?(x.value.node_list_window.visible=!0,Ue.setActiveWindow("node_list_window")):F.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_open_global_prompt_box"?(r.value="prompt_global",o.value="global",x.value.prompt.visible=!0,i.value=!1,qe(()=>{se.value.setPromptText(d.value)}),Ue.setActiveWindow("prompt")):F.data.type==="weilin_prompt_ui_open_global_tag_manager"?(l.value="manager",x.value.tag.visible=!0,Ue.setActiveWindow("tag")):F.data.type==="weilin_prompt_ui_open_global_lora_manager"?(a.value="look",x.value.lora.visible=!0,Ue.setActiveWindow("lora")):F.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?d.value=F.data.data:F.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":F.data.type==="weilin_prompt_ui_restore_window"?X():F.data.type==="weilin_prompt_ui_open_cloud_window"?(x.value.cloud_window.visible=!0,Ue.setActiveWindow("cloud_window")):F.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(x.value.lora_stack_window.visible=!0,qe(()=>{N.value.initLoraStack(F.data.prompt,F.data.seed)}),Ue.setActiveWindow("lora_stack_window")):F.data.type==="weilin_prompt_ui_openLoraDetail"?te.value.open({name:F.data.lora}):F.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(x.value.danbooru_manager_window.visible=!0,Ue.setActiveWindow("danbooru_manager_window")):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_response"?o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+o.value,data:F.data.data},"*"):F.data.type==="weilin_prompt_ui_get_template_go_random_response"&&o.value===F.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:F.data.data},"*")},oe=async()=>{try{if(localStorage.getItem(y)==="false"){console.info("WeiLin-Comfyui-Tools ");return}const B=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!B.ok){console.error(":",B.status);return}const Ce=(await B.text()).match(/export const version = "([^"]+)"/);if(Ce&&Ce[1]){const re=Ce[1];console.info(`WeiLin-Comfyui-Tools GitHub ${re}`),re!==go&&(v.value=`WeiLin-Comfyui-Tools  ${re} ${go}`,c.value=!0,m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{c.value=!1,m.value=null},1e4),console.info(`WeiLin-Comfyui-Tools  ${re} ${go} GitHubhttps://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(F){console.error("WeiLin-Comfyui-Tools :",F)}};return(F,B)=>(w(),E("div",XA,[x.value.prompt.visible?(w(),xt(Tn,{key:0,name:"promptBox",title:r.value==="prompt"?f(n)("promptBox.windowTitle"):f(n)("promptBox.windowTitleGlobal"),position:x.value.prompt.position,size:x.value.prompt.size,"z-index":f(Ue).getZIndex("prompt"),"onUpdate:position":B[0]||(B[0]=ie=>j("prompt",ie)),"onUpdate:size":B[1]||(B[1]=ie=>K("prompt",ie)),onActive:B[2]||(B[2]=ie=>f(Ue).setActiveWindow("prompt")),onClose:B[3]||(B[3]=ie=>H("prompt"))},{default:it(()=>[Ve(_E,{promptManager:r.value,hasPromptLoraStack:i.value,ref_key:"promptBoxRef",ref:se},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.tag.visible?(w(),xt(Tn,{key:1,name:"tagManager",title:f(n)("tagManager.windowTitle"),position:x.value.tag.position,size:x.value.tag.size,"z-index":f(Ue).getZIndex("tag"),"onUpdate:position":B[4]||(B[4]=ie=>j("tag",ie)),"onUpdate:size":B[5]||(B[5]=ie=>K("tag",ie)),onActive:B[6]||(B[6]=ie=>f(Ue).setActiveWindow("tag")),onClose:B[7]||(B[7]=ie=>H("tag"))},{default:it(()=>[Ve($g,{tagManager:l.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.lora.visible?(w(),xt(Tn,{key:2,name:"loraManager",title:f(n)("loraManager.windowTitle"),position:x.value.lora.position,size:x.value.lora.size,"z-index":f(Ue).getZIndex("lora"),"onUpdate:position":B[8]||(B[8]=ie=>j("lora",ie)),"onUpdate:size":B[9]||(B[9]=ie=>K("lora",ie)),onActive:B[10]||(B[10]=ie=>f(Ue).setActiveWindow("lora")),onClose:B[11]||(B[11]=ie=>H("lora"))},{default:it(()=>[Ve(zg,{loraManager:a.value,ref_key:"loraManagerRef",ref:Z},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.history.visible?(w(),xt(Tn,{key:3,name:"historyManager",title:f(n)("history.windowTitle"),position:x.value.history.position,size:x.value.history.size,"z-index":f(Ue).getZIndex("history"),"onUpdate:position":B[12]||(B[12]=ie=>j("history",ie)),"onUpdate:size":B[13]||(B[13]=ie=>K("history",ie)),onActive:B[14]||(B[14]=ie=>f(Ue).setActiveWindow("history")),onClose:B[15]||(B[15]=ie=>H("history"))},{default:it(()=>[Ve(d$)]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.ai_window.visible?(w(),xt(Tn,{key:4,name:"aiWindow",title:f(n)("aiWindow.windowTitle"),position:x.value.ai_window.position,size:x.value.ai_window.size,"z-index":f(Ue).getZIndex("ai_window"),"onUpdate:position":B[16]||(B[16]=ie=>j("ai_window",ie)),"onUpdate:size":B[17]||(B[17]=ie=>K("ai_window",ie)),onActive:B[18]||(B[18]=ie=>f(Ue).setActiveWindow("ai_window")),onClose:B[19]||(B[19]=ie=>H("ai_window"))},{default:it(()=>[Ve(N$)]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.node_list_window.visible?(w(),xt(Tn,{key:5,name:"nodeListWindow",title:f(n)("nodeListWindow.windowTitle"),position:x.value.node_list_window.position,size:x.value.node_list_window.size,"z-index":f(Ue).getZIndex("node_list_window"),"onUpdate:position":B[20]||(B[20]=ie=>j("node_list_window",ie)),"onUpdate:size":B[21]||(B[21]=ie=>K("node_list_window",ie)),onActive:B[22]||(B[22]=ie=>f(Ue).setActiveWindow("node_list_window")),onClose:B[23]||(B[23]=ie=>H("node_list_window"))},{default:it(()=>[Ve(G$)]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.cloud_window.visible?(w(),xt(Tn,{key:6,name:"cloudWindow",title:f(n)("cloudWindow.windowTitle"),position:x.value.cloud_window.position,size:x.value.cloud_window.size,"z-index":f(Ue).getZIndex("cloud_window"),"onUpdate:position":B[24]||(B[24]=ie=>j("cloud_window",ie)),"onUpdate:size":B[25]||(B[25]=ie=>K("cloud_window",ie)),onActive:B[26]||(B[26]=ie=>f(Ue).setActiveWindow("cloud_window")),onClose:B[27]||(B[27]=ie=>H("cloud_window"))},{default:it(()=>[Ve(lL)]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.lora_stack_window.visible?(w(),xt(Tn,{key:7,name:"loraStackWindow",title:f(n)("controls.loraStack"),position:x.value.lora_stack_window.position,size:x.value.lora_stack_window.size,"z-index":f(Ue).getZIndex("lora_stack_window"),"onUpdate:position":B[28]||(B[28]=ie=>j("lora_stack_window",ie)),"onUpdate:size":B[29]||(B[29]=ie=>K("lora_stack_window",ie)),onActive:B[30]||(B[30]=ie=>f(Ue).setActiveWindow("lora_stack_window")),onClose:B[31]||(B[31]=ie=>H("lora_stack_window"))},{default:it(()=>[Ve(SL,{ref_key:"loraStackRef",ref:N},null,512)]),_:1},8,["title","position","size","z-index"])):de("",!0),x.value.danbooru_manager_window.visible?(w(),xt(Tn,{key:8,name:"DanbooruManagerWindow",title:f(n)("controls.danbooruManager"),position:x.value.danbooru_manager_window.position,size:x.value.danbooru_manager_window.size,"z-index":f(Ue).getZIndex("danbooru_manager_window"),"onUpdate:position":B[32]||(B[32]=ie=>j("danbooru_manager_window",ie)),"onUpdate:size":B[33]||(B[33]=ie=>K("danbooru_manager_window",ie)),onActive:B[34]||(B[34]=ie=>f(Ue).setActiveWindow("danbooru_manager_window")),onClose:B[35]||(B[35]=ie=>H("danbooru_manager_window"))},{default:it(()=>[Ve(JA,{ref_key:"danbooruManagerRef",ref:z},null,512)]),_:1},8,["title","position","size","z-index"])):de("",!0),t.value?(w(),xt(_$,{key:9})):de("",!0),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:te},null,512),c.value?(w(),E("div",QA,[s("div",ZA,[s("span",null,g(v.value),1),s("div",{class:"version-update-actions"},[s("button",{class:"goto-github-btn",onClick:$},"GitHub"),s("button",{class:"no-remind-btn",onClick:T},""),s("button",{class:"close-version-update",onClick:S},"")])])])):de("",!0)]))}},[["__scopeId","data-v-1d4ca131"]]);function tM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ar={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var nM=ar.exports,Yg;function oM(){return Yg||(Yg=1,function(e,t){(function(o,a){e.exports=a()})(nM,function(){return function(){var n={686:function(l,r,i){i.d(r,{default:function(){return Ce}});var u=i(279),p=i.n(u),d=i(370),c=i.n(d),v=i(817),m=i.n(v);function y(re){try{return document.execCommand(re)}catch{return!1}}var S=function(ge){var ce=m()(ge);return y("cut"),ce},$=S;function T(re){var ge=document.documentElement.getAttribute("dir")==="rtl",ce=document.createElement("textarea");ce.style.fontSize="12pt",ce.style.border="0",ce.style.padding="0",ce.style.margin="0",ce.style.position="absolute",ce.style[ge?"right":"left"]="-9999px";var ae=window.pageYOffset||document.documentElement.scrollTop;return ce.style.top="".concat(ae,"px"),ce.setAttribute("readonly",""),ce.value=re,ce}var D=function(ge,ce){var ae=T(ge);ce.container.appendChild(ae);var G=m()(ae);return y("copy"),ae.remove(),G},Y=function(ge){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ae="";return typeof ge=="string"?ae=D(ge,ce):ge instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ge==null?void 0:ge.type)?ae=D(ge.value,ce):(ae=m()(ge),y("copy")),ae},x=Y;function P(re){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(ce){return typeof ce}:P=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},P(re)}var H=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=ge.action,ae=ce===void 0?"copy":ce,G=ge.container,L=ge.target,U=ge.text;if(ae!=="copy"&&ae!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(L!==void 0)if(L&&P(L)==="object"&&L.nodeType===1){if(ae==="copy"&&L.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ae==="cut"&&(L.hasAttribute("readonly")||L.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(U)return x(U,{container:G});if(L)return ae==="cut"?$(L):x(L,{container:G})},j=H;function K(re){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K=function(ce){return typeof ce}:K=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},K(re)}function X(re,ge){if(!(re instanceof ge))throw new TypeError("Cannot call a class as a function")}function ye(re,ge){for(var ce=0;ce<ge.length;ce++){var ae=ge[ce];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(re,ae.key,ae)}}function se(re,ge,ce){return ge&&ye(re.prototype,ge),ce&&ye(re,ce),re}function N(re,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(ge&&ge.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),ge&&Z(re,ge)}function Z(re,ge){return Z=Object.setPrototypeOf||function(ae,G){return ae.__proto__=G,ae},Z(re,ge)}function te(re){var ge=oe();return function(){var ae=F(re),G;if(ge){var L=F(this).constructor;G=Reflect.construct(ae,arguments,L)}else G=ae.apply(this,arguments);return z(this,G)}}function z(re,ge){return ge&&(K(ge)==="object"||typeof ge=="function")?ge:ne(re)}function ne(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(re){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},F(re)}function B(re,ge){var ce="data-clipboard-".concat(re);if(ge.hasAttribute(ce))return ge.getAttribute(ce)}var ie=function(re){N(ce,re);var ge=te(ce);function ce(ae,G){var L;return X(this,ce),L=ge.call(this),L.resolveOptions(G),L.listenClick(ae),L}return se(ce,[{key:"resolveOptions",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof G.action=="function"?G.action:this.defaultAction,this.target=typeof G.target=="function"?G.target:this.defaultTarget,this.text=typeof G.text=="function"?G.text:this.defaultText,this.container=K(G.container)==="object"?G.container:document.body}},{key:"listenClick",value:function(G){var L=this;this.listener=c()(G,"click",function(U){return L.onClick(U)})}},{key:"onClick",value:function(G){var L=G.delegateTarget||G.currentTarget,U=this.action(L)||"copy",V=j({action:U,container:this.container,target:this.target(L),text:this.text(L)});this.emit(V?"success":"error",{action:U,text:V,trigger:L,clearSelection:function(){L&&L.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(G){return B("action",G)}},{key:"defaultTarget",value:function(G){var L=B("target",G);if(L)return document.querySelector(L)}},{key:"defaultText",value:function(G){return B("text",G)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(G){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(G,L)}},{key:"cut",value:function(G){return $(G)}},{key:"isSupported",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],L=typeof G=="string"?[G]:G,U=!!document.queryCommandSupported;return L.forEach(function(V){U=U&&!!document.queryCommandSupported(V)}),U}}]),ce}(p()),Ce=ie},828:function(l){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function u(p,d){for(;p&&p.nodeType!==r;){if(typeof p.matches=="function"&&p.matches(d))return p;p=p.parentNode}}l.exports=u},438:function(l,r,i){var u=i(828);function p(v,m,y,S,$){var T=c.apply(this,arguments);return v.addEventListener(y,T,$),{destroy:function(){v.removeEventListener(y,T,$)}}}function d(v,m,y,S,$){return typeof v.addEventListener=="function"?p.apply(null,arguments):typeof y=="function"?p.bind(null,document).apply(null,arguments):(typeof v=="string"&&(v=document.querySelectorAll(v)),Array.prototype.map.call(v,function(T){return p(T,m,y,S,$)}))}function c(v,m,y,S){return function($){$.delegateTarget=u($.target,m),$.delegateTarget&&S.call(v,$)}}l.exports=d},879:function(l,r){r.node=function(i){return i!==void 0&&i instanceof HTMLElement&&i.nodeType===1},r.nodeList=function(i){var u=Object.prototype.toString.call(i);return i!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in i&&(i.length===0||r.node(i[0]))},r.string=function(i){return typeof i=="string"||i instanceof String},r.fn=function(i){var u=Object.prototype.toString.call(i);return u==="[object Function]"}},370:function(l,r,i){var u=i(879),p=i(438);function d(y,S,$){if(!y&&!S&&!$)throw new Error("Missing required arguments");if(!u.string(S))throw new TypeError("Second argument must be a String");if(!u.fn($))throw new TypeError("Third argument must be a Function");if(u.node(y))return c(y,S,$);if(u.nodeList(y))return v(y,S,$);if(u.string(y))return m(y,S,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(y,S,$){return y.addEventListener(S,$),{destroy:function(){y.removeEventListener(S,$)}}}function v(y,S,$){return Array.prototype.forEach.call(y,function(T){T.addEventListener(S,$)}),{destroy:function(){Array.prototype.forEach.call(y,function(T){T.removeEventListener(S,$)})}}}function m(y,S,$){return p(document.body,y,S,$)}l.exports=d},817:function(l){function r(i){var u;if(i.nodeName==="SELECT")i.focus(),u=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var p=i.hasAttribute("readonly");p||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),p||i.removeAttribute("readonly"),u=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var d=window.getSelection(),c=document.createRange();c.selectNodeContents(i),d.removeAllRanges(),d.addRange(c),u=d.toString()}return u}l.exports=r},279:function(l){function r(){}r.prototype={on:function(i,u,p){var d=this.e||(this.e={});return(d[i]||(d[i]=[])).push({fn:u,ctx:p}),this},once:function(i,u,p){var d=this;function c(){d.off(i,c),u.apply(p,arguments)}return c._=u,this.on(i,c,p)},emit:function(i){var u=[].slice.call(arguments,1),p=((this.e||(this.e={}))[i]||[]).slice(),d=0,c=p.length;for(d;d<c;d++)p[d].fn.apply(p[d].ctx,u);return this},off:function(i,u){var p=this.e||(this.e={}),d=p[i],c=[];if(d&&u)for(var v=0,m=d.length;v<m;v++)d[v].fn!==u&&d[v].fn._!==u&&c.push(d[v]);return c.length?p[i]=c:delete p[i],this}},l.exports=r,l.exports.TinyEmitter=r}},o={};function a(l){if(o[l])return o[l].exports;var r=o[l]={exports:{}};return n[l](r,r.exports,a),r.exports}return function(){a.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(r,{a:r}),r}}(),function(){a.d=function(l,r){for(var i in r)a.o(r,i)&&!a.o(l,i)&&Object.defineProperty(l,i,{enumerable:!0,get:r[i]})}}(),function(){a.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)}}(),a(686)}().default})}(ar)),ar.exports}var aM=oM();const lM=tM(aM),sM=e=>({toClipboard(t,n){return new Promise((o,a)=>{const l=document.createElement("button"),r=new lM(l,{text:()=>t,action:()=>"copy",container:n!==void 0?n:document.body});r.on("success",i=>{r.destroy(),o(i)}),r.on("error",i=>{r.destroy(),a(i)}),document.body.appendChild(l),l.click(),document.body.removeChild(l)})}}),rM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,iM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,uM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function cM(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){dM(e);return}return t}function dM(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function pM(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!uM.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(rM.test(e)||iM.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,cM)}return JSON.parse(e)}catch(o){if(t.strict)throw o;return e}}function fM(e,t){if(e==null)return;let n=e;for(let o=0;o<t.length;o++){if(n==null||n[t[o]]==null)return;n=n[t[o]]}return n}function pu(e,t,n){if(n.length===0)return t;const o=n[0];return n.length>1&&(t=pu(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,o)?Number.isInteger(Number(n[1]))?[]:{}:e[o],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(o))&&Array.isArray(e)?e.slice()[o]:Object.assign({},e,{[o]:t})}function Jg(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const o in e)n[o]=e[o];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const o in e)n[o]=e[o];return n}return pu(e,Jg(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Xg(e,t){return t.map(n=>n.split(".")).map(n=>[n,fM(e,n)]).filter(n=>n[1]!==void 0).reduce((n,o)=>pu(n,o[1],o[0]),{})}function Qg(e,t){return t.map(n=>n.split(".")).reduce((n,o)=>Jg(n,o),e)}function Zg(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:r,beforeHydrate:i,afterHydrate:u},p,d=!0){try{d&&(i==null||i(p));const c=t.getItem(o);if(c){const v=n.deserialize(c),m=l?Xg(v,l):v,y=r?Qg(m,r):m;e.$patch(y)}d&&(u==null||u(p))}catch(c){a&&console.error("[pinia-plugin-persistedstate]",c)}}function em(e,{storage:t,serializer:n,key:o,debug:a,pick:l,omit:r}){try{const i=l?Xg(e,l):e,u=r?Qg(i,r):i,p=n.serialize(u);t.setItem(o,p)}catch(i){a&&console.error("[pinia-plugin-persistedstate]",i)}}function gM(e,t,n){const{pinia:o,store:a,options:{persist:l=n}}=e;if(!l)return;if(!(a.$id in o.state.value)){const u=o._s.get(a.$id.replace("__hot:",""));u&&Promise.resolve().then(()=>u.$persist());return}const i=(Array.isArray(l)?l:l===!0?[{}]:[l]).map(t);a.$hydrate=({runHooks:u=!0}={})=>{i.forEach(p=>{Zg(a,p,e,u)})},a.$persist=()=>{i.forEach(u=>{em(a.$state,u)})},i.forEach(u=>{Zg(a,u,e),a.$subscribe((p,d)=>em(d,u),{detached:!0})})}function mM(e={}){return function(t){gM(t,n=>({key:(e.key?e.key:o=>o)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:o=>JSON.stringify(o),deserialize:o=>pM(o)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var vM=mM();const{toClipboard:hM}=sM(),fu=document.createElement("div");fu.id="weilin_comfyui_tools_prompt_ui_div",document.querySelector("body").appendChild(fu);const tm=i_();tm.use(vM);const lr=Xv(eM);lr.use(tm),lr.use(kl),U0(),lr.config.globalProperties.$copyText=hM,lr.mount(fu),console.log("WeiLin Prompt UI is running - version "+go),console.log("WeiLin  -  "+go)});
//# sourceMappingURL=main.entry.js.map
